!function(e){function t(e,t){return parseInt(e,t||10)}function a(e){return Array.isArray?Array.isArray(e):!!e&&e.constructor===Array}function r(e){return!!(e&&e.constructor&&e.call&&e.apply)}function n(e){return it(e)?JSON.stringify(e):ll}function i(e,t){if(!document.body.contains(e))return nl.warn("No container"),null;var a=jl(e).datum(t),r=null;return a.each(function(e){var t=jl(this);r=new Si.charts.get(t,e),r.showLoading(t)}),r}function l(e,t){if(a(e)&&a(t)){var r=e.map(function(e,a){return i(e,t[a])}),n=[],l=r.slice(),s=l.reverse();return o(s,n,r),r}}function o(e,t,a){var r=e.length,n=e[r-1];r||(a.chartRendered=!0),r>0&&1!=n.drawStarted&&document.body.contains(n.container.node())&&(n.draw(),n.drawStarted=!0,s(e,t,a))}function s(e,t,a,r){var n=e.length,i=e[n-1];if(i.chartRendered||i.breakOnErr)t.push(e.pop()),o(e,t,a);else{null!=r&&clearTimeout(r);var r=setTimeout(function(){s(e,t,a,r)},10)}}function c(e,t,a,r){for(var n,i=et(arguments).slice(4),l=null,o=0,s=i.length;s+1>o&&(n=o===s?null:nc(e,i[o]),l=u(r,null,n,t,a),!Rl(n));o++);return l}function d(e,t,a){Us.globalProp={},a.fontL1Size=c(e,Us.fontL1Size,a.fontL1Size,t,"canvas.fontSize"),a.fontL2Size=c(e,Us.fontL2Size,a.fontL2Size,t,"chart.fontSize","canvas.fontSize"),Us.globalProp.fontL1Color=null,Us.globalProp.fontL2Color=null,Us.globalProp.fontL1Family=null,Us.globalProp.fontL2Family=null,Us.globalProp.fontL1Style=null,Us.globalProp.fontL2Style=null,Us.globalProp.fontL1Weight=null,Us.globalProp.fontL2Weight=null,Us.globalProp.textShadow=null;var r=ic(nc(e,"chart.plot.animation"),{});return Us.globalProp.animation={},Us.globalProp.animation.enabled=r.enabled!==!1,Us.globalProp.animation.duration=r.duration||null,Us.globalProp.animation.easingType=r.easingType||null,Us.globalProp.datalabels={},a.datalabels=null==a.datalabels?{}:a.datalabels,Us.globalProp.datalabels.enabled=null,a.datalabels.fontSize=c(e,Us.fontL3Size,a.datalabels.fontSize,t,"chart.plot.datalabels.fontSize","chart.fontSize","canvas.fontSize"),Us.globalProp.datalabels.fontColor=null,Us.globalProp.datalabels.fontFamily=null,Us.globalProp.datalabels.fontStyle=null,Us.globalProp.datalabels.fontWeight=null,Us.globalProp.events={},Us.globalProp.events.mouseMove=null,Us.globalProp.events.mouseOut=null,Us.globalProp.events.click=null,Us.globalProp.events.doubleClick=null,a}function u(e,a,r,n,i){var l=hl(e.width,e.height),o=$(Si,"fontProperties.ratio")&&Si.fontProperties.ratio;"function"==typeof o&&(o=o(e)),a=null==a?o&&!isNaN(o)?o:.038:a;var s=sl(l*a);Us.minL1Size=Si.fontProperties.minsize,Us.maxL1Size=Si.fontProperties.maxsize;var c=Us.minL1Size,d=Us.maxL1Size;s=c>s?c:s>d?d:s,null!=r&&(a=t(r)*a/s,s=sl(l*a),s=c>s?c:s>d?d:s);var i=null==n?null==i?{}:i:n;return i.size=s,i.l1=function(){return i.size},i.l2=function(){return i.size-2},i.l3=function(){return i.size-3},i.l4=function(){return i.size-4},i.l5=function(){return i.size-5},i}function f(e){Us.patternSVG=e}function g(e){this.chart=e,this.originalSeries=e.seriesdata,this.initialize()}function p(e,t,a,r){var n,i=0,l=e.renderer[t].commonRendererProp().params,o=e.dataset,s=o.getX(a),c=o.getY(a,l.yaxiscolumnorder||0);e.userdata.seriesdata.stackGroup&&(i=$a(t,e.userdata.seriesdata.stackGroup));var d=e.dataObject.groupedByStack.get(i).stackExtent.filter(function(e){return e[0]===s});return n=r===qc||r===Gc?d.reduce(function(e,t){return e+fl(t[1])},0):d[c<l.hasNegValue&&d[1]?1:0][1]}function m(e,t){var a=$l(t.seriesExtermes[e]),r=0!=a.length?ao(a):a.enabled?[0,0]:null;return r}function v(e,t){var a=t.dataset,r=t.data,n=t.chartObj,i=t.processedseriesData,l=t.groupedDataByCombo,o=t.groupedDataBySplitAxes,s=t.categoriesStore,c=t.groupedByStack,d=n.dataObject,u=Si.DataProcessor.helpers,h=0,f=t.isCombinationalChart||r.seriesdata.stackGroup?l.values():o,g=d.getDomain(t.getCategories("x"),!0),p=g.length,m=s.subseries,v=u.isCatNull(a,"x"),y=[],b=[],w=f.map(function(e,o){var s=l.keys()[o],d=s.split("_"),f=+d[0],w=it(d[1])?+d[1]:o,C=t.isstacked(f)||t.isPercentChart,k=[],O=[];b[o]||(b[o]=[]);var A=$l(e.map(function(e){var t=e.si,r=u.getParsedYAxisOrder(i[t].yaxiscolumnorder);if(C&&!ir(f))for(var n=e.d.map(function(e){return e.groupByVal}),l=0;l<m.length;l++){var s=m[l],c=n.indexOf(s);if(0>c&&null!=s){var d=[];e.d.splice(l,0,d)}}var y=e.d.map(function(t){if(C&&!ir(f)){for(var n=function(e){return a.getX(e)},l=t.map(n),s=0,c=p;c>s;s++){var d=g[s],m=l.indexOf(d);if(m>=0&&m!=s&&(t.splice(s,0,t[m]),t.splice(m+1,1),l=t.map(n)),"undefined"!=typeof l[s]&&v(l[s])&&t.splice(s,1),0>m){var y=[],x=u.getParsedYAxisOrder(i[e.si].yaxiscolumnorder);y.splice(a.xidx,0,d),y.splice(a.yidx(x),0,0),y.isDummy=!0,t.splice(s,0,y),l=t.map(n)}}p!=t.length&&t.splice(p,t.length-p)}return t.map(function(e){var t=a.getX(e),n=a.getY(e,r),i=g.indexOf(t),l=0>n?O:k,s=l[i];return C?(s=it(s)?s:h,e.y0=s,e.y=n,b[o][i]=s+n,l[i]=s+n):l[i]=it(s)?(0>n?hl:ul)(s,n):n,e})});return y}));y[o]=ao($l([k,O,[0]]));var S=Si.charttypenames.get(f);return C&&(di(r.chart.plot.plotoptions[S].datalabels.stackLabels,n)||ui(S,n)||al.test(r.metadata.axes.tooltip))&&(c.has(w)||c.set(w,{}),c.get(w).stackExtent=x(g,k,O)),A});return y=o.length>1?y:[ao($l(y))],(t.isStackedPercentChart||t.isPercentChart)&&(w.map(function(e,t){return e.map(function(e){return e.map(function(e){var r=g.indexOf(a.getX(e)),n=b[t][r]||0;return 1!=isNaN(n)&&null!=n&&0!=n&&(e.y0/=n/100,e.y/=n/100),e})})}),y[0][0]=0,y[0][1]=100),y}function x(e,t,a,r,n){var i=[];return e.forEach(r?function(e,l){t[l]>=0&&i.push([e,t[l],r[l]]),a[l]<0&&i.push([e,a[l],n[l]])}:function(e,r){t[r]>=0&&i.push([e,t[r]]),a[r]<0&&i.push([e,a[r]])}),i}function b(e){var t=e.systemConf,a=e.dataObject.totalnoofdatas,r=+t.canvas.intelligence.dataCount.datalabels;if(a>r)return!1;if(nc(t.chart,"plot.datalabels.show")===!0)return!0;for(var n=e.seriesdata,i=n.length;i--;){var l=t.chart.plot.plotoptions[e.chartTypes[i].name],o=l.datalabels;if(it(n[i].plotoptions)&&(o=ni(l,n[i].plotoptions)),ci(o,e))return!0}return!1}function C(e,t){var a=[],r=[];return e.data.forEach(function(e){var n=t.reduce(function(t,a){return t+e[a]},"");r.push(n),-1===a.indexOf(n)&&a.push(n)}),{distintGroupbyCat:a,allGroupbyCat:r}}function k(e,t){return t||(t=0),e.forEach(function(e){a(e[0])?t=k(e,t):t++}),t}function O(e,t,a){var r=it(Zs[e]),n=ic(Zs[e],e,null);return it(n)&&"solid"!==e?(t=r?ic(t,1):1,a&&(t*=a),n.split(",").map(function(e){return+e*t})):[]}function A(e,t){return e||(t&&/dot/g.test(t)?"round":null)}function S(e,t,a,r){var n=a.reduce(function(e,t){return t+e},0);e.attr("stroke-dasharray",a).attr("stroke-dashoffset",n).transition().duration(t).ease(Fl).attr("stroke-dashoffset",0).on("end",function(){r&&r.chartRendered&&S(e,t,a,r)})}function P(e){var t=e.chart.effects.choice,a=Js[t];if(a){var r=e.chart.effects.options[t];"dropShadow"===t&&(r.blur=ul(0,r.blur));var n=Qs.get(Js,t,r);return n}}function T(e,t,a,r){var n=e.type;if(n&&n!==Sl){var i=e.options[n]||e.options,l=rc(i);return l.color=null!=a?a:l.color,l.opacity=null!=r?r:l.opacity,l.dimension=null!=t?t:l.dimension,l.type=n,l}}function E(e,t,a,r,n){var i=qs[e]?qs[e]:D(e);return i.bgClr_base=t,i.stroke_base=t,i.fillOpacity=i.fillOpacity||a,i.customStaticClr=n,r&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),i}function L(e,t){var a=t.map(function(t){var a=parseInt(t),r=e.width%a,n=parseInt(e.width/a)||1,i=r/n;return i+a});return a}function z(){Si.addPattern("hatch","diagonal-line-right","5","1","null","white","1","1"),Si.addPattern("hatchDash","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,3"),Si.addPattern("thinThickHatch","square,diagonal-line-right,diagonal-line-right","10,10,10","1,1,3","transparent,null,null","transparent","1","1","0,2.5,0"),Si.addPattern("thickHatch","diagonal-line-right","5","3","null","white","1","1"),Si.addPattern("thinHatch","diagonal-line-right","2","1","null","white","1","1"),Si.addPattern("hatchLeft","diagonal-line-left","5","1","null","white","1","1"),Si.addPattern("horizontalStripes","horizontal-line","5","1","null","white","1","1"),Si.addPattern("thinHorizontalStripes","horizontal-line","2","1","null","white","1","1"),Si.addPattern("verticalStripes","vertical-line","5","1","null","white","1","1"),Si.addPattern("thinVerticalStripes","vertical-line","2","1","null","white","1","1"),Si.addPattern("crossStripes","vertical-line,horizontal-line","5","1","null","white","1","1"),Si.addPattern("tinyHatchfill","square,diagonal-line-right","5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("hatchfill","square,diagonal-line-right","10","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("hatchDashfill","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","null,transparent","1","1","0,3"),Si.addPattern("hatchLeftfill","square,diagonal-line-left","5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("horizontalStripesfill","square,horizontal-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("verticalStripesfill","square,vertical-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("crossStripesfill","square,square","5,5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("checkerBoard","square,square,square","10,5,5","1","transparent","transparent,null,{{brighter}}","1","1","0,0,5"),Si.addPattern("circle","circle","10","1","null","white","1","1"),Si.addPattern("tinyCircle","circle","5","1","null","white","1","1"),Si.addPattern("crossCircle","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","transparent","1","1","0,0,5"),Si.addPattern("floatingCircle","square,circle","10,5","1","transparent,{{brighter}}","transparent","1","1","0,2.5"),Si.addPattern("dot","square,circle","5,2.5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,1.25"),Si.addPattern("dotSquare","square,circle","10,2.5","1","null,{{brighter}}","transparent,transparent","1","1","0,3.75"),Si.addPattern("circlefill","square,circle","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("crossCirclefill","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","null,{{brighter}},null","1","1","0,0,5"),Si.addPattern("floatingCirclefill","square,circle","10,5","1","transparent,{{brighter}}","null,transparent","1","1","0,2.5"),Si.addPattern("dotfill","square,circle","5,2.5","1","transparent,{{brighter}}","null,transparent","1","1","0,1.25"),Si.addPattern("square","square","5","1","null","white","1","1"),Si.addPattern("squarefill","square","5","1","{{brighter}}","null","1","1"),Si.addPattern("star","star","10","1","null","white","1","1"),Si.addPattern("starfill","square,star","10,5","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("wave","waves","5","1","null","white","1","1"),Si.addPattern("wavefill","square,waves","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("cap","caps","5","1","null","white","1","1"),Si.addPattern("capfill","square,caps","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),Si.addPattern("nylon","nylon","5","1","null","white","1","1"),Si.addPattern("nylonfill","square,nylon","10,10","1","transparent,{{brighter}}","null,transparent","1","1")}function D(e){return{ele:e}}function R(e,t,a,r){var n=Us.patternSVG,i=t.bgClr||t.bgClr_base,l=tt(e,i);t.ele=l.replace(/\{\{clr\}\}/g,i);var o,s=n.select("defs").append("pattern").attrs({patternUnits:r||"userSpaceOnUse",id:a,x:t.x||0,y:t.y||0}).html(t.ele);Gs.FIREFOX?n.append("g").html(t.ele).each(function(){o=U(this)}).remove():o=U(s.node().firstChild);var c=o.width,d=o.height;return s.attrs({width:c,height:d}),{node:s,w:c,h:d,id:a}}function j(e,t,a){var r=Us.patternSVG,n=e.bgClr||e.bgClr_base,i=e.stroke||e.stroke_base,l=/\{\{([a-z]+)\}\}/,o=(e.type||"").split(","),s=o.length,c=(e.size||"").split(","),d=(e.strokeWidth||"").split(","),u=n.split(","),h=i.split(","),f=(e.fillOpacity||"").split(","),g=(e.strokeOpacity||"").split(","),p=e.translate?e.translate.split(","):null;c=e.width?L(e,c):c;for(var m=r.select("defs").append("pattern").attrs({id:t,patternUnits:a||"userSpaceOnUse",width:c[0],height:c[0],x:e.x||0,y:e.y||0}),v=0;s>v;v++){var y=V(o[v])(c[v]||c[0]),x=ot(h[v]||h[0])?e.stroke_base:"static"==(h[v]||h[0])?e.customStaticClr:h[v]||h[0],b=ot(u[v]||u[0])?e.bgClr_base:"static"==(u[v]||u[0])?e.customStaticClr:u[v]||u[0],w=(c[v]||c[0])/2;if(x=l.test(x)?oa(e.stroke_base,1,x.replace(l,"$1"),ql):x,b=l.test(b)?oa(e.bgClr_base,1,b.replace(l,"$1"),ql):b,p){var C=p[v]||p[0];w+=parseFloat(C)}m.append("path").attrs({transform:"translate("+w+","+w+")",d:y,stroke:x,fill:b,"stroke-width":d[v]||d[0],"stroke-opacity":g[v]||g[0],"fill-opacity":f[v]||f[0]})}return{node:m,w:c[0],h:c[0],id:t}}function M(e,t){var a="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+e.w+"' height='"+e.h+"'>"+(new XMLSerializer).serializeToString(e.node.node())+"<path d='M-5,-5 L5,-5 L5,5 L-5,5 Z' transform='translate("+e.w/2+","+e.h/2+")' style='fill: url(#"+e.id+")'></path> </svg>";return{url:Gs.FIREFOX||t?"data:image/svg+xml;base64,"+Xs(a):"data:image/svg+xml;utf8,"+a,width:e.w,height:e.h}}function I(e,t,a,r){"use strict";for(var n=B(e,t,a,r),i=0;i<n.offset.length;i++)e.append("stop").attr("offset",n.offset[i]).styles({"stop-color":n.color[i],"stop-opacity":n.opacity[i]})}function B(e,t,a,r){"use strict";var n=t.stopOffset,i=t.stopOpacity,l=t.stopColor,o=t.colorGamma||[1,0],s=t.spreadMethod,c="radial"==r?+t.radius:ul(fl((+t.x2||0)-(+t.x1||0)),fl((+t.y2||0)-(+t.y1||0)));if(n=n||["0%","100%"],l=("function"==typeof l?l(a):l)||n.map(function(e,t){return oa(a,o[t]||0,"brighter",ql)}),i=i||[1,1],("repeat"===s||"reflect"===s)&&(Gs.IS_IOS||Gs.SAFARI)){for(var d=[],u=[],h=[],f=0,g=0;100>f;){for(var p=0,m=n.length;m>p;p++){var v=hl(parseFloat(n[p])/100*c+f,100);d.push(v+"%"),h.push(g%2!=0?i[i.length-1-p]:i[p]),u.push(g%2!=0?l[l.length-1-p]:l[p])}f+=c,g+="reflect"===s?1:0}n=d,l=u,i=h}return{offset:n,color:l,opacity:i}}function H(e,t,a,r,n,i){var l,o,s,c,d=parseInt(r/10)*n,u=r%10,h=e,f=0==u?i-d+t:i-(d+n)+t,g=u*n+e,p=f,m=g,v=0==u?f:f+n,y=i+e,x=v;switch(a){case"top2Bottom":l=i+e,o=t,s=e,c=t;break;case"bottom2Top":l=i+e,o=i+t,s=e,c=i+t}var b=h+","+f+" "+g+","+p+" "+m+","+v+" "+y+","+x+" "+l+","+o+" "+s+","+c+" "+h+","+f;return b}function V(e){return function(t){switch(e){case"asterisk":return"M0 0 C"+.284*-t+" "+.994*-t+" "+.284*t+" "+.994*-t+" 0 0 C"+.73*t+" "+.76*-t+" "+1.2*t+" "+.277*-t+" 0 0 C"+1.008*t+" "+.142*t+" "+.703*t+" "+.703*t+" 0 0 C"+.27*t+" "+.923*t+" "+.284*-t+" "+.923*t+" 0 0 C"+.712*-t+" "+.66*t+" "+.923*-t+" "+.234*t+" 0 0 C"+.98*-t+" "+.284*-t+" "+.745*-t+" "+.73*-t+" 0 0";case"bean":return"M0 "+.5*t+" A"+.25*t+" "+.5*t+" 0 0 1 0 "+.5*-t+" A"+.15*t+" "+.25*t+" 0 0 1 1 0 A"+.15*t+" "+.25*t+" 0 0 1 0 "+.5*t;case"butterfly":return"M0 "+.25*-t+" C0 "+.25*-t+" "+t+" "+-t+" "+.3*t+" "+.25*t+" "+.6*t+" "+.8*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" C0 "+.25*-t+" "+-t+" "+-t+" "+.3*-t+" "+.25*t+" "+.6*-t+" "+.8*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" L"+.1*t+" "+.7*-t+" M0 "+.25*-t+" L"+.1*-t+" "+.7*-t;case"clover":return"M0 0 C"+.2*-t+" "+-t+" "+t+" "+.15*-t+" 0 0 "+t+" "+.25*t+" "+.2*-t+" "+t+" "+.05*-t+" "+.05*t+" "+.7*-t+" "+.6*t+" "+.7*-t+" "+.6*-t+" 0 "+.05*-t+" Z";case"cloverFour":return"M"+.1*-t+" "+.1*-t+" C"+.5*-t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.1*t+" "+.1*-t+" "+.8*t+" "+.5*-t+" "+.8*t+" "+.5*t+" "+.1*t+" "+.1*t+" "+.5*t+" "+.8*t+" "+.5*-t+" "+.8*t+" "+.1*-t+" "+.1*t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.5*-t+" "+.1*-t+" "+.1*-t+" "+.5*-t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.1*t+" "+.1*-t;case"cross":return"M"+-t/2+" "+.2*-t+" L"+.2*-t+" "+.2*-t+" L"+.2*-t+" "+-t/2+" L"+.2*t+" "+-t/2+" L"+.2*t+" "+.2*-t+" L"+t/2+" "+.2*-t+" L"+t/2+" "+.2*t+" L"+.2*t+" "+.2*t+" L"+.2*t+" "+t/2+" L"+.2*-t+" "+t/2+" L"+.2*-t+" "+.2*t+" L"+-t/2+" "+.2*t+" Z";case"diamond":return"M"+.4*-t+" 0 L0 "+-t/2+" L"+.4*t+" 0 L0 "+t/2+" Z";case"ellipse":return"M"+.5*-t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*-t+" 0";case"gear":return"M"+.134*-t+" "+.541*-t+" L"+.127*-t+" "+.696*-t+" "+.131*t+" "+.696*-t+" "+.138*t+" "+.547*-t+" "+.282*t+" "+.47*-t+" "+.393*t+" "+.571*-t+" "+.598*t+" "+.39*-t+" "+.494*t+" "+.282*-t+" "+.531*t+" "+.134*-t+" "+.699*t+" "+.134*-t+" "+.699*t+" "+.138*t+" "+.539*t+" "+.138*t+" "+.474*t+" "+.279*t+" "+.575*t+" "+.386*t+" "+.369*t+" "+.578*t+" "+.286*t+" "+.474*t+" "+.131*t+" "+.531*t+" "+.131*t+" "+.696*t+" "+.127*-t+" "+.696*t+" "+.127*-t+" "+.531*t+" "+.276*-t+" "+.467*t+" "+.39*-t+" "+.575*t+" "+.574*-t+" "+.379*t+" "+.47*-t+" "+.279*t+" "+.524*-t+" "+.138*t+" "+.7*-t+" "+.138*t+" "+.7*-t+" "+.138*-t+" "+.528*-t+" "+.138*-t+" "+.47*-t+" "+.282*-t+" "+.568*-t+" "+.383*-t+" "+.396*-t+" "+.568*-t+" "+.275*-t+" "+.463*-t+" "+.134*-t+" "+.541*-t+" Z";case"heart":return"M0 "+.2*-t+" C"+.7*t+" "+.7*-t+" "+.7*t+" "+.2*t+" 0 "+.45*t+" "+.7*-t+" "+.2*t+" "+.7*-t+" "+.7*-t+" 0 "+.2*-t+"Z";case"star":return"M0 "+.5*-t+" L"+.122*t+" "+.12*-t+" L"+.5*t+" "+.12*-t+" L"+.197*t+" "+.12*t+" L"+.306*t+" "+.5*t+" L0 "+.274*t+" L"+.306*-t+" "+.5*t+" L"+.197*-t+" "+.12*t+" L"+.5*-t+" "+.12*-t+" L"+.122*-t+" "+.12*-t+" Z";case"malteseCross":return"M"+.38*-t+" "+.5*-t+" A"+.38*t+" "+.1*t+" 0 0 1 "+.38*t+" "+.5*-t+" L"+.2*t+" "+.2*-t+" L"+.5*t+" "+.38*-t+" A"+.1*t+" "+.38*t+" 0 0 1 "+.5*t+" "+.38*t+" L"+.2*t+" "+.2*t+" L"+.38*t+" "+.5*t+" A"+.38*t+" "+.1*t+" 0 0 1 "+.38*-t+" "+.5*t+" L"+.2*-t+" "+.2*t+" L"+.5*-t+" "+.38*t+" A"+.1*t+" "+.38*t+" 0 0 1 "+.5*-t+" "+.38*-t+" L"+.2*-t+" "+.2*-t+" Z";case"square":return"M"+.5*-t+" "+.5*-t+" L"+.5*t+" "+.5*-t+" "+.5*t+" "+.5*t+" "+.5*-t+" "+.5*t+" Z";case"triangle-up":return"M"+.5*-t+" "+.285*t+" L0 "+.43*-t+" "+.5*t+" "+.285*t+" Z";case"triangle-down":return"M0 "+.43*t+" "+.5*-t+" "+.285*-t+" "+.5*t+" "+.285*-t+" Z";case"triangle-right":return"M"+.5*-t+" "+.43*-t+" "+.285*t+" 0 "+.5*-t+" "+.43*t+" Z";case"triangle-left":return"M"+.5*t+" "+.43*t+" "+.285*-t+" 0 "+.5*t+" "+.43*-t+" Z";case"arrow":return"M"+.5*-t+" "+.2*t+" L0 "+.5*-t+" "+.5*t+" "+.2*t+" "+.25*t+" "+.2*t+" "+.25*t+" "+.5*t+" "+.25*-t+" "+.5*t+" "+.25*-t+" "+.2*t+" Z";case"rocket":return"M"+.5*-t+" "+.5*t+" L0 "+.5*-t+" "+.5*t+" "+.5*t+" 0 "+.25*t+" "+.5*-t+" "+.5*t+" Z";case"nylon":return"M"+-t/2+" "+-t/4+" L"+-t/4+" "+-t/4+" L"+-t/4+" "+-t/2+" M"+-t/4+" 0 L"+-t/4+" "+t/4+" L0 "+t/4+" M0 "+-t/4+" L"+t/4+" "+-t/4+" L"+t/4+" 0 M"+t/4+" "+t/2+" L"+t/4+" "+t/4+" L"+t/2+" "+t/4;case"waves":return"M"+-t+" 0 C"+7*-t/8+" "+-t/4+" "+5*-t/8+" "+-t/4+" "+-t/2+" 0 C"+3*-t/8+" "+-t/4+" "+-t/8+" "+-t/4+" 0 0 C"+t/8+" "+t/4+" "+3*t/8+" "+t/4+" "+t/2+" 0 C"+5*t/8+" "+-t/4+" "+7*t/8+" "+-t/4+" "+3*t/4+" 0";case"woven":return"M"+-t/4+" "+-t/4+" L"+t/4+" "+t/4+" M"+t/4+" "+-t/4+" L"+t/2+" "+-t/2+" M"+-t/4+" "+t/4+" L"+-t/2+" "+t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"crosses":return"M "+-t/4+" "+-t/4+" L"+t/4+","+t/4+" M"+-t/4+","+t/4+" L"+t/4+","+-t/4;case"caps":return"M"+-t/4+" "+t/4+" L0 "+-t/4+" "+t/4+" "+t/4;case"hexagons":return"M"+-t/2+" 0 L"+-t/4+" 0 M"+t/2+" 0 L"+t/4+" "+-t/2+" L0 "+-t/2+" L"+-t/4+" 0 L0 "+t/2+" L"+t/4+" "+t/2+"Z";case"line":case"horizontal-line":return"M"+.5*-t+" 0 L"+.5*t+" 0";case"diagonal-line-right":return"M"+3*-t/4+" "+-t/4+" L"+-t/4+" "+3*-t/4+" M"+-t/2+" "+t/2+" L"+t/2+" "+-t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"vertical-line":return"M0 "+-t/2+" L0 "+t/2;case"hexagon":return"M"+.433*t+" "+.25*t+" L"+0*t+" "+.5*t+" L"+t*-.433+" "+.25*t+" L"+t*-.433+" "+t*-.26+" L"+0*t+" "+t*-.5+" L"+.433*t+" "+t*-.26+" Z";case"diagonal-line-left":return"M"+3*-t/4+" "+-t/2+" L"+-t/4+" "+t/2+" M"+-t/4+" "+-t/2+" L"+t/4+" "+t/2+" M"+t/4+" "+-t/2+" L"+3*t/4+" "+t/2;case"oval":return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 0 "+-t/2+" A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0";case"rect":var a=arguments[0],r=arguments[1]||0;return"M"+-a/2+" "+-r/2+" L"+a/2+" "+-r/2+" L"+a/2+" "+r/2+" L"+-a/2+" "+r/2+"Z";default:return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0"}}}function F(e,t,a,r){var n,i=r.color,l=10,o=r.strokeWidth,s=r.imageSize,c=r.transform,d=V(a.symbol||r.symbol),u=null!=a.imageUrl&&""!==a.imageUrl,h=rt(a.size,rt(o,1)),f=h*r.symbolSize.outer,g=h*r.symbolSize.inner,p=null!=c?"translate("+c[0]+","+c[1]+")":null,m=(null!=t?h:f)*(null!=s?s:l);if(null!=t){var v=Us.patternSVG.select("defs");n=zt(v,"marker",[1],"#","id",t),n.attrs({id:t,orient:0,viewBox:-h*l/2+" "+-h*l/2+" "+h*l+" "+h*l,markerUnits:"userSpaceOnUse",markerWidth:h*l,markerHeight:h*l})}else n=e;var y=zt(n,"path",[1],".","class","outer");y.attrs({d:d(u?m:f*l),transform:p}).styles({fill:function(){if(u){var e={name:a.imageUrl,width:m,height:m,x:-m/2,y:-m/2};return"url("+K()+"#"+Qs.get(Ks,"imageFill",e)+")"}return a.outerFillColor||i},"fill-opacity":a.outerFillOpacity,stroke:a.outerStrokeColor||i,"stroke-opacity":a.outerStrokeOpacity,"stroke-width":a.outerStrokeWidth,"stroke-dasharray":O(a.outerDashStyle,a.outerStrokeWidth),"stroke-linecap":A(a.outerLineCap,a.outerDashStyle)});var x=zt(n,"path",u?[]:[1],".","class","inner");return x.attrs({d:d(g*l),transform:p}).styles({fill:a.innerFillColor||i,"fill-opacity":a.innerFillOpacity,stroke:a.innerStrokeColor||i,"stroke-opacity":a.innerStrokeOpacity,"stroke-width":a.innerStrokeWidth,"stroke-dasharray":O(a.innerDashStyle,a.innerStrokeWidth),"stroke-linecap":A(a.innerLineCap,a.innerDashStyle)}),n}function N(e){var t={left:0,top:0,right:0,bottom:0};if(!e.isAxisCategory)return t;var a=e.systemConf.chart.axes.xaxis,r=e.systemConf.chart.axes.yaxis,n=null!=a.minRange&&""!==a.minRange,i=null!=a.maxRange&&""!==a.maxRange,l=r.some(function(e){return null!=e.minRange&&""!==e.minRange}),o=r.some(function(e){return null!=e.maxRange&&""!==e.maxRange});if(n&&i&&l&&o)return t;var s=e.axes.rotated,c=(e.dataset.seriesTypes,e.systemConf.chart.plot.plotoptions),d=e.canvasarea,u=Bl(e.seriesdata.map(function(t,a){var r=t.plotoptions,n=0,i=e.chartTypes[a].name,l=Si.utils.getValueOfPlotOptions(r?r.marker:null,c[i].marker);if(/(area|arearange|line)/.test(i)&&l("enabled")&&Kt(e,"marker")&&qt(e,"marker",hl(d.width,d.height))){var o=l("size");n=rt(o,rt(r?r.strokeWidth:c[i].strokeWidth,1))}else i===Rs&&(n=rt(l("size"),2));return 10*n}))/2;return{left:(s?l:n)?t.left:u,top:(s?i:o)?t.top:u,right:(s?o:i)?t.right:u,bottom:(s?n:l)?t.bottom:u}}function Y(e,t,a){var r=it(a)?a-1:t.repeat||1/0;if(!e.node()||!r)return void e.styles({transform:null,opacity:null});var n=t.type===qo,i=t.duration,l=Vl(t.easingType),o=i,s=n?500:0,c=n?0:i,d=n?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},u=n?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};e.transition(),e.attrs(u).transition().delay(s).duration(o).ease(l).attrs(d).transition().duration(c).ease(l).attrs(u).on("end",function(){Y(e,t,r)})}function _(e,t){e.attr("x",t.left).attr("y",t.top).attr("width",t.width).attr("height",t.height).style("fill-opacity",0).style("stroke",Pl)}function W(e,t){if(null!=e&&e.constructor==Object){var a,r="";for(var n in e)e.hasOwnProperty(n)&&(a=e[n],r+=null==a||""==a?"$$":a+"_");return r=t+r,r=r.replace(/[.-]/g,"_"),r=r.replace(/[`~!@#$%^&*( )|+\-=?;:'",.<>{}[\]\\\/\s]/gi,"_")}return null!=t?t:void 0}function X(e,t,a){var r=ql(e),n=_l().domain([-1,0,1]).range([ql(r.h,r.s,.1),r,ql(r.h,r.s,.9)]).interpolate(yo),i=_l().domain(t).range(a);return function(e){return n(i(e))}}function U(e){return e&&document.body.contains(e)&&e.style.display!=Sl?e.getBBox():{x:0,y:0,height:0,width:0}}function G(e){if(!Si.dataEncoded||null==e)return e;var t=document.createElement("div");t.innerHTML=encodeURI(e);var a=t.textContent;return decodeURI(a)}function Z(e){if(Si.dataEncoded||null==e)return e;var t=document.createElement("div");t.textContent=G(e);var a=t.innerHTML;return a}function Q(e){var t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g,a=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi,r=new RegExp(t),n=new RegExp(a);return e.match(r)||e.match(n)}function q(e){return e.slice(0)}function K(){return Ml("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function $(e,t,a){var r=t.replace(/\[(\w+)\]/g,".$1");r=r.replace(/^\./,"");var n=r.split("."),i=n.reduce(function(e,t){return it(e)?e[t]:e},e);return a?i:it(i)}function J(e){return!it(e)}function et(e){return Array.prototype.slice.call(e)}function tt(){var e=et(arguments),t=e[0]===!0&&e.shift(),a=e.shift();if("string"==typeof a){var r=nc(window,a);a="function"==typeof r?r:a}return"function"==typeof a?t?a.apply(e[0],e.splice(1)):a.apply(void 0,e):a}function at(e,t){for(var a,r=0,n=e.length;n>r&&(null==a||""===a);r++)e[r]&&(a=e[r][t]);return a}function rt(e,t){var a=null==e||""===e?t:e,r=JSON.parse(a);return a="number"==typeof r?parseFloat(r):"boolean"==typeof r?JSON.parse(r):r}function nt(e,t,a,r,n,i){var l,o=hl(n,i),s=r*o/100,c=a*o/100;return l=e[t],l=null==l||""===l?null:c>l?c:l>s?s:parseFloat(l)}function it(e){return void 0!==e&&null!==e}function lt(e){return e>0}function ot(e){return null==e||"null"==e}function st(e){return e+"".toLocaleLowerCase()==="true"}function ct(e){return e+="",e.replace(/ /g,"px ")+"px"}function ut(e,t){if(!e||!t)return null;var a,r={};for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){var i=e[n],l=t[n];if(!i||i.constructor!=Object&&i.constructor!=Array)i==l&&(r[n]=i,a=!0);else{var o=ut(i,l);null!=o&&(r[n]=o,a=!0)}}return a?r:null}function ht(e){var t=Kl(e);return(299*t.r+587*t.g+114*t.b)/1e3<128}function ft(e){return ht(e)?"#f8f8f8":"#444444"}function gt(e){return null!=e&&e===e.window}function pt(e){return gt(e)?e:9===e.nodeType&&e.defaultView}function mt(e){var t=e.getBoundingClientRect(),a=e&&e.ownerDocument,r=a.documentElement,n=pt(a);return{top:t.top+n.pageYOffset-r.clientTop,left:t.left+n.pageXOffset-r.clientLeft}}function vt(e){return e?e.split(",").reverse().join():e}function yt(){return it(document.visibilityState)&&"visible"!==document.visibilityState}function xt(e,t,a){var r=t.offsetHeight,n=mt(e).top-mt(t).top,i=n+e.offsetHeight;return n>=0&&r>=i||a&&(0>n&&i>0||n>0&&r>=n)}function bt(e,t,a,r,n,i,l,o,s,c){var d="wrapOnSpace"==o||"wrapAll"==o;return e.map(function(e){var u;return u=t(a,e,n,r,i,null,null,l),u=d?Ga(u,o,s.horizontal,s.vertical,c):u})}function wt(e){return e.slice(0).sort(function(e,t){return it(e)||(e=""),it(t)||(t=""),t.length-e.length})}function Ct(e){return null===e.offsetParent}function kt(e,t){if("object"!=typeof e)return!1;if(a(e)||"number"==typeof e.length)Array.prototype.forEach.call(e,t);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}function Ot(e){if(arguments[1]){for(var t=1,a=arguments.length;a>t;t++){var r=arguments[t];for(var n in r)!e[n]&&r.hasOwnProperty(n)&&(e[n]=r[n])}return e}}function At(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function St(e,t){var a=e.indexOf(t);return a>-1&&e.splice(a,1),e}function Pt(e,a,r){var n;return e.isD3Selection&&(e=e.node()),"width"===a?hl(e.offsetWidth,e.scrollWidth)-Pt(e,"padding-left")-Pt(e,"padding-right"):"height"===a?hl(e.offsetHeight,e.scrollHeight)-Pt(e,"padding-top")-Pt(e,"padding-bottom"):(n=window.getComputedStyle(e),n&&(n=n.getPropertyValue(a),ic(r,"opacity"!==a)&&(n=t(n))),n)}function Tt(e){return e instanceof HTMLElement}function Et(e){return a(e)?e:[e]}function Lt(e){var a,r,n,i;if(it(e)){var l=e.toString().split(" "),o=Si.DataProcessor.helpers.priorityBasedValue;a=t(o([l[0],0])),r=t(o([l[1],l[0],0])),n=t(o([l[2],l[0],0])),i=t(o([l[3],l[1],l[0],0]))}else a=0,r=0,n=0,i=0;return{top:a,right:r,bottom:n,left:i}}function zt(e,t,a,r,n,i,l,o){r=r||"",i=i||"";var s;s=e.selectAll(t+r+i).data(a,o);var c=s.enter().append(t).merge(s);return n&&c.attr(n,i),l&&c.styles(l),s.exit().remove(),c}function Dt(e,t,a,r,n,i,l,o,s,c){if(null==t||!t.trim()||!e)return t;var d,u;s=s||e,o?(d=o.width,u=o.height):(d=r.right-r.left,u=r.bottom-r.top);var h=0;if("left"==n||"right"==n?(a.top+a.height-l.bottom>r.bottom&&(h+=(a.top+a.height-l.bottom-r.bottom)/a.height),a.top+l.top<r.top&&(h+=(r.top-(a.top+l.top))/a.height),u=a.height-ul(0,a.top+a.height-l.bottom-r.bottom)-ul(0,r.top-(a.top+l.top))):("bottom"==n||"top"==n)&&(a.left+a.width-l.right>r.right&&(h+=(a.left+a.width-l.right-r.right)/a.width),a.left+l.left<r.left&&(h+=(r.left-(a.left+l.left))/a.width),d=a.width-ul(0,a.left+a.width-l.right-r.right)-ul(0,r.left-(a.left+l.left))),h=parseFloat(h.toFixed(2)),h>0){var f=dl((1-h)*t.length);e.textContent=t.substring(0,f-1)+i;var g="tspan"==s.nodeName?Ya:_a,p=g(s);c="tspan"==e.nodeName?!1:c,c===!1||p.width==a.width&&p.height==a.height||Vt(e,s,t,d,u,p,i)}}function Rt(e,t,a,r){for(var n,i=e.split(/\s+/).reverse(),l=[],o=[],s=r,t=t;n=i.pop();){l.push(n);var c=Xa(l.join(" "));if(c>t){if(l.length>1&&(l.pop(),o.pop(),o.push(l.join(" "))),s>a)return o;s+=r,l=[n],o.push(n)}else o.pop(),o.push(l.join(" "))}return o}function jt(e){e.isD3Selection&&(e=e.node());var t=e.transform.baseVal.consolidate(),a=it(t)?t.matrix:null;if(it(a)){var r,n,i,l=a.a,o=a.b,s=a.c,c=a.d,d=a.e,u=a.f;return(r=pl(l*l+o*o))&&(l/=r,o/=r),(i=l*s+o*c)&&(s-=l*i,c-=o*i),(n=pl(s*s+c*c))&&(s/=n,c/=n,i/=n),o*s>l*c&&(l=-l,o=-o,i=-i,r=-r),{translate:[d,u],skew:[180*bl(o,l)/kl,180*Math.atan(i)/kl],rotate:180*bl(o,l)/kl,scale:[r,n]}}return{translate:[0,0],skew:[0,0],rotate:0,scale:[0,0]}}function Mt(e,t,a,r,n,i,l){var o,s,c,d;return o=i&&l?e-a:e,s=i&&l?e:e+a,c=i&&!l?t-r:t,d=i&&!l?t:t+r,n=It(n,a,r),"M"+o+","+(d-n.bly)+"L"+o+","+(c+n.tly)+"A"+(n.tlx+","+n.tly+" 0 0 1 "+(o+n.tlx)+","+c)+"L"+(s-n.trx)+","+c+"A"+(n.trx+","+n.trY+" 0 0 1 "+s+","+(c+n.trY))+"L"+s+","+(d-n.bry)+"A"+(n.brx+","+n.bry+" 0 0 1 "+(s-n.brx)+","+d)+"L"+(o+n.blx)+","+d+"A"+(n.blx+","+n.bly+" 0 0 1 "+o+","+(d-n.bly))+"Z"}function It(e,t,a,r){var n,i=Object.create(e),l=i.tlx+i.trx,o=i.trY+i.bry,s=i.brx+i.blx,c=i.tly+i.bly;return c>a&&(n=c/(c-a),i.tly=i.tly-i.tly/n,i.bly=i.bly-i.bly/n),l>t&&(n=l/(l-t),i.tlx=i.tlx-i.tlx/n,i.trx=i.trx-i.trx/n),o>a&&(n=o/(o-a),i.trY=i.trY-i.trY/n,i.bry=i.bry-i.bry/n),s>t&&(n=s/(s-t),i.brx=i.brx-i.brx/n,i.blx=i.blx-i.blx/n),r&&(i.tlx=i.tly=Math.min(i.tlx,i.tly),i.trx=i.trY=Math.min(i.trx,i.trY),i.blx=i.bly=Math.min(i.blx,i.bly),i.brx=i.bry=Math.min(i.brx,i.bry)),i}function Bt(e,t,a){var r=Si.utils.getVal(at(t,"fontSize")),n=at(t,"fontFamily"),i=at(t,"fontWeight"),l=at(t,"fontStyle"),o=at(t,"textShadow"),s=at(t,"fontColor"),c=at(t,"textDecoration"),d=at(t,"strokeColor"),u=at(t,"fontOpacity"),h={"font-size":r+"px","font-family":n,"font-weight":i,"font-style":l,"text-shadow":o,"text-decoration":c,"fill-opacity":u};return it(e)?(h[a?"color":"fill"]=s,a||!d||Gs.IE||(h.stroke=d,h["stroke-width"]=at(t,"strokeWidth")||3,h["paint-order"]="stroke"),e.styles(h),void 0):(h.color=s,h)}function Ht(e,t){e.append("title").text(function(){return t||this.parentNode.textContent})}function Vt(e,t,a,r,n,i,l){function o(r){var n="tspan"==e.nodeName?Ya:_a;e.textContent=a.substring(0,s-c)+l,r&&(i=n(t))}var s=e.textContent.length-1,c=l.length;if(i.width>r||i.height>n)for(var d=0;s>=d;){if(o(!0),i.width<=r&&i.height<=n)return;s--}else for(var d=a.length;d>s;){if(i.width>=r||i.height>=n)return s--,void o(!1);s++}}function Ft(e){var t=e.match(/[a-z][^a-z]*/gi);return t.map(function(e){var t=e.match(/[a-z]/gi).pop(),a=e.match(/-?[0-9]\d*(\.\d+)?/g);return a&&(a=a.map(function(e){return parseFloat(e)})),{"function":t,moves:a}})}function Nt(e,t,r,n){var i=a(t)&&t.length>1,l=n?"html":"text",o=d3.select(e.node().parentNode);if(i){e.text(null);var s=e.attr("x")||0,c=e.attr("y")||0,d=e.attr("dy")?parseFloat(e.attr("dy")):.71,u=0,h=it(r)&&it(r.lineHeight)?r.lineHeight:d,f=it(r)&&r.orient;h="top"==f?-(t.length-1+h):"left"==f||"right"==f?-(t.length-2+h)/2:h,t.forEach(function(t){if(n)Yt(o,e,t);else{var a=e.append("tspan");a.attr("x",s).attr("y",c).attr("dy",function(){return u++ +h+"em"
}),a[l](function(){return t})}})}else n?(e.text(null),Yt(o,e,t)):e[l](t);return e}function Yt(e,t,a){var r=/^<image.+<\/image>/i,n=/^<tspan.+<\/tspan>/i;if(r.test(a))zt(e,"g",[1],".","class","image").html(a);else if(n.test(a)){var i=(new DOMParser).parseFromString('<svg xmlns="'+d3.namespaces.svg+'">'+a+"</svg>","application/xml");t.node().appendChild(i.querySelector("tspan"))}else t.append("tspan").text(a)}function _t(e){var t=e.selectAll("tspan").nodes();if(t&&t.length){var a=[];return t.forEach(function(e){a.push(e.textContent)}),a}return e.node().textContent}function Wt(e,t,a,r){function n(){return/(bar|bullet|gantt|waterfall)/.test(r)?300:/(line|area|arearange)/.test(r)?600:/(scatter|bubble$|funnel|pyramid|heatmap)/.test(r)?1e3:500}var i=t&&t.animation?ac(e.animation,t.animation,!0):e.animation,l=a.systemConf.chart.plot.animation,o={},s=i.easingType||l.easingType||(/(scatter|bubble$|packedbubble|heatmap)/.test(r)?"cubic-in-out":null)||"linear";return o.enabled=yt()||a.isHiddenCoainer?!1:Kt(a,"animation")?at([i,l],"enabled"):!1,o.type=i.type,o.easingType=Vl(s),o.duration=o.enabled?rt(i.duration,+(l.duration||n())):0,o}function Xt(e,t,a,r,n,i,l,o,s,c,d){function u(){if(p++,h)for(var n=0;m>n;n++)e[n]=a[p>n?n:ul(0,p-1)],t[n]=a[p>n?n:p];else e[p-1]=a[p-1],t[p]=a[p];if(m>p){var l=1==p&&h?(r.indexOf(f.getX(a[0]))-(p-1))*y:0,o=(h?r.indexOf(f.getX(a[p]))-r.indexOf(f.getX(a[p-1])):1)*y,v=h?null!=f.getY(a[p],g)&&null!=f.getY(a[ul(0,p-1)],g):null!=f.getY(a[p],g);v?c.attrs(s(e)).transition().delay(l).duration(o).ease(i).attrs(s(t)).on("end",d===Rs?function(e,t){t==m-1&&u()}:u):u()}}var h=n==ls,f=o.dataset,g=o.yaxiscolumnorder,p=h?0:-1,m=a.length,v=l,y=sl(v/(h?r.length-1:m));u()}function Ut(e){var t=vo(0,kl);e.attrTween("transform",function(){var e=jl(this).attr("transform");return function(a){return e+" matrix("+ml(t(a))+",0,0,1,0,0)"}})}function Gt(e){var t=vo(0,1);e.styleTween("opacity",function(){return function(e){return t(e)}})}function Zt(e){var t=vo(0,1);e.attrTween("transform",function(){var e=jl(this).attr("transform");return function(a){return e+" scale("+t(a)+")"}})}function Qt(e){e.interrupt()}function qt(e,t,a){var r=+e.systemConf.canvas.intelligence.dimension[t];return a>=r}function Kt(e,t){var a=+e.systemConf.canvas.intelligence.dataCount[t];return a>=e.dataObject.totalnoofdatas}function $t(e,t){return t-=kl/2,[ml(t)*e,vl(t)*e]}function Jt(e){var e=e%(2*kl);return 0>e?e+2*kl:e}function ea(e,t,a,r,n){var i=0-(e.x-.5*n),l=e.width+n-i,o=0-(e.y-.5*n),s=e.height+n-o,c=r-i,d=r-l,u=r-o,h=r-s;return[t/2-c/2+d/2,a/2-u/2+h/2]}function ta(e,t,a){return"string"==typeof e&&e.indexOf("%")>-1?t*+e.replace(/%/g,"")*.01:rt(e,a)}function aa(e){return _l().range([0,1]).domain([kl>e?kl/2:3*kl/2,kl])(e)}function ra(e,t,a){return e>t&&(t=e+((e=t)-t)),0>e&&0>t&&(e+=2*kl,t+=2*kl),0>e&&t>=0&&(0>a?t=2*kl:e=0),a=0>a?a+2*kl:a,a>=e&&t>=a}function na(e){return 180*e/kl}function ia(e,t){var a=it(e.bandWidth)||e.levelMarker&&it(e.levelMarker.bandWidth),r=it(e.maxBandWidth)||e.levelMarker&&it(e.levelMarker.maxBandWidth),n=ul(0,ta(e.innerRadius,t,0));if(a||r){var i=it(e.bandWidth)?ta(e.bandWidth,t,0):t-n,l=it(e.levelMarker.bandWidth)?ta(e.levelMarker.bandWidth,t,0):t-n,o=rt(e.maxBandWidth,t),s=rt(e.levelMarker.maxBandWidth,t);return i=hl(i,o),l=hl(l,s),t-ul(i,l)}return n}function la(e){var t=e.match(tl);return t&&5===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function oa(e,t,a,r){if(e===Pl)return e;a=ic(a,"darker");var n=ic(r,d3.rgb)(e);return n[a](t).toString()}function sa(e,t,a,r){var n=e.defsLocation,i=e.chartTypes[t].name,l=e.systemConf.chart.plot.plotoptions[i],o=e.seriesdata[t].plotoptions,s=o&&o.gradients?ac(l.gradients,o.gradients,!0):l.gradients,c=e.patternPallete,d=e.imagePallete,u=d&&d.length,h=!r&&c&&c.length,f=e.plot.renderer.mode,g=oc.getIndexScale(e);return function(r,l,o,p,m,v,y,x){var b,w=l&&e.dataset.getClr(l);if(a=v||a,r=Math.max(r,0)||0,p)b=p;else if(b=ua(e,r,l,t),r=oc.getItemIndex(e,g,l,r),g&&(!da(w,e)||J(r))&&0===d3.rgb(b).opacity)return b;if("canvas"!=f||s.type||b instanceof Object||(b=canvasUtils.rgba(b,m)),h&&/(url|data)/.test(b))return b;if(it(o)&&(b=oa(b,o).toString()),d&&d.length&&da(w,e)){var C={name:e.imagePallete[r%u],width:y&&y.width||e.patternImageSizes[r%u][0],height:y&&y.height||e.patternImageSizes[r%u][1],mode:f,context:y&&y.context},k="svg"==f||x?Qs.get(Ks,"imageFill",C,{returnSVGimage:x}):Qs.get(canvas_patterns,"imageFill",C,{returnSVGimage:x});return"canvas"==f?k:"url("+n+"#"+k+")"}if(h){var O=c[r%h],C=E(O,b,m,y,e.userdata.legend.customPatternColor),k="svg"==f||x?Qs.get(Ks,"svgPatternFill",C,{returnSVGimage:x}):Qs.get(canvas_patterns,"canvasPatternFill",C,{returnSVGimage:x});return x||"canvas"==f?k:"url("+n+"#"+k+")"}if(a&&s&&s.type){var C=T(s,a,b,m),A={offset:i,chartObj:e},S="svg"==f?Qs.get($s,"svgGradientFill",C,A):Qs.get(canvas_gradients,"canvasGradientFill",C,{offset:i,chartObj:e,returnSVGimage:x});return x||"canvas"==f?S:"url("+n+"#"+S+")"}return b}}function ca(e,t){return function(a,r,n,i){if(n)return n;a=Math.max(a,0)||0;var l=ua(e,a,r,t);return it(i)&&(l=oa(l,i).toString()),l}}function da(e,t,a,r){if(a||(a=t.axes.clr.scale),!a)return!0;r||(r=a.domain()),e===ll&&(e=null);var n=t.systemConf.legend.filter.range,i=!n||(t.dataset.getDataType("clr")===Fo?n.indexOf(e)>-1:e>=n[0]&&e<=n[1]),l=t.dataset.getDataType("clr")===Fo?r.indexOf(e)>-1:e>=r[0]&&e<=r[r.length-1];return l&&i&&null!==a(e)&&!(ur(t.chartTypes[0].value)&&null==e)}function ua(e,t,a,r){var n=ha(e,t),i=e.isAxisCategory&&it(r)&&e.rendererConf&&e.rendererConf[r].params;return i&&i.categoryColorConfig?Jr(a,i.categoryColorConfig,n):i&&i.colorOverlay?fa(e,i,a,n):a&&oc.isQuantileColorScale(e)?ga(e,a):a&&a.arcColor||n}function ha(e,t){var a=e.imagePallete||e.seriesColor;return a[t%a.length]}function fa(e,t,a,r){var n=t.yaxiscolumnorder,i=t.threshold,l=t.thresholdType,o=e.dataset,s="x"==l?o.getX(a):o.getY(a,n);return t.colorOverlay(i,i.color,s,r)}function ga(e,t){var a=e.systemConf.legend.filter.track||{},r=rt(a.fillOpacity,1),n=a.fillColor||Pl,i=e.dataset.getClr(t),l=e.axes.clr.scale;if(da(i,e,l))return i===ll&&(i=null),l(i);var o=d3.rgb(n);if(r=o.opacity*r,0===r)return Pl;var s=d3.scaleLinear().domain([0,1]).range([l(i),la(n)]).interpolate(d3.interpolateRgb);return s(r)}function pa(e){var a=d3.rgb(e),r=t((a.r+a.g+a.b)/3);return"rgba("+r+","+r+","+r+","+a.opacity+")"}function ma(e,t){return e.multiColoring&&!t.legendarea.show}function va(e){return"translate("+(e+.5)+",0)"}function ya(e){return"translate(0,"+(e+.5)+")"}function xa(e){return function(t){return+e(t)}}function ba(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(a){return+e(a)+t}}function wa(){return!this.__axis}function Ca(e,t,a){var r=[],n=t.chart,i=t.axis,l=i.ticks.tickValueObj,o=t.tickValues,s=t.tickFormat,c=t.tickSizeInner,d=t.tickSizeOuter,u=t.gridSize,h=t.tickPadding,f=t.rotation,g=t.orient,p=t.scale,m="top"===g||"left"===g?-1:1,v="left"===g||"right"===g?"x":"y",y="top"===g||"bottom"===g?va:ya,x=(a.label,a.ticklabel),b=x.events,w=a.tickmark,C=a.axisline,k=a.grid,S=b?b.cursor||"pointer":"pointer",P=1e-6,T=null==o?p.ticks?p.ticks.apply(p,r):p.domain():o,E=null==s?p.tickFormat?p.tickFormat.apply(p,r):lc:s,L=Math.max(c,0)+h,z=p.origRange?p.origRange:p.range(),D=+z[0]+.5,R=+z[z.length-1]+.5,j=(p.bandwidth?ba:xa)(p.copy()),M=e.selection?e.selection():e,I=M.selectAll(".domain").data([null]),B=M.selectAll(".tick").data(T,p).order(),H=B.exit(),V=B.enter().append("g").attr("class","tick"),F=B.select("line.minorTicks"),N=u&&k.show?B.select("line.majorTicks"):B.select("line.majorTicks").remove(),Y=B.select("text").attr("class","ticklabel");if(I=I.merge(I.enter().insert("path",".tick")).attr("class","domain").styles({stroke:C.show===!1||C.hideParent?"transparent":C.color||"#000","stroke-width":ic(C.strokeWidth,1),"stroke-dasharray":O(C.style,ic(C.strokeWidth,1))}),B=B.merge(V),F=F.merge(V.append("line")).attr(v+"2",m*c).attr("class","minorTicks").styles({fill:"none","shape-rendering":"crispedges","stroke-width":w.strokeWidth,stroke:w.color}),u&&k.show){var _=ic(k.strokeWidth,1),W=O(k.style,_),X=A(k.lineCap,k.style);N=N.merge(B.append("line")).attr("stroke","#000").attr("class","majorTicks").attrs({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2}).styles({fill:"none","shape-rendering":"crispedges","stroke-width":_,stroke:k.color,"stroke-dasharray":W,"stroke-linecap":X})}var U=[x,n.systemConf.chart,n.systemConf.canvas,Us],G=Si.utils.getVal(at(U,"fontSize")),Z=at(U,"fontFamily"),Q=at(U,"fontWeight"),q=at(U,"fontStyle"),K=at(U,"textShadow"),$=at(U,"fontColor"),J=at(U,"textDecoration"),et=(at(U,"strokeColor"),Va(g,f,null,null,w.size,h));Y=Y.merge(V.append("text")).attr("class","ticklabel").style("font-size",G+"px").style("font-family",Z).style("font-weight",Q).style("font-style",q).style("text-shadow",K).style("text-decoration",J).style("fill",$).style("text-anchor",et.textAnchor).style("cursor",S).style(v,m*L).attr(v,m*L).attr("dy",function(e,t){return l&&"zigzag"==l.mode&&t%2&&et.dy1?et.dy1:et.dy}).attr("transform","rotate("+et.rotate[0]+" "+et.rotate[1]+" "+et.rotate[2]+")"),Ba(Y,g,et,x,a,p,n),i.ticks.isHierarchialLevelType()&&Y.call(Ha,p,g),B.attr("transform",function(e){return y(j(e))}),e!==M&&(B=B.transition(e),F=F.transition(e),Y=Y.transition(e),H=H.transition(e).attr("opacity",P).attr("transform",function(e){return isFinite(e=j(e))?y(e):this.getAttribute("transform")}),V.attr("opacity",P).attr("transform",function(e){var t=this.parentNode.__axis;return y(j(t&&isFinite(t=t(e))?e:e))})),H.remove(),I.attr("d","left"===g||"right"==g?"M"+m*d+","+D+"H0.5V"+R+"H"+m*d:"M"+D+","+m*d+"V0.5H"+R+"V"+m*d),B.attr("opacity",1).attr("transform",function(e){return y(j(e))}),F.attr(v+"2",m*c),M.filter(wa).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===g?"start":"left"===g?"end":"middle"),M.each(function(){this.__axis=j}),Y.each(E),x.tooltip===!0&&Y.each(function(e){Ht(d3.select(this),e)})}function ka(e,t){for(var a=t.systemConf.metadata,r=a.axes.y[e],n=1,i=r.length-1,l=a.columns[r[n-1]],o=l[l.datatype];i>=n;n++){var s=a.columns[r[n]],c=s[s.datatype];o=ut(o,c)}return o}function Oa(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}}function Aa(e,t){return"x"==e&&t||"y"==e&&!t}function Sa(e,t){return("bottom"==e||"top"==e)&&!t||("left"==e||"right"==e)&&t?"x":"y"}function Pa(e,t,a){var r;return"x"==t?0==a?r=e.axes.x:(e.axes.x.levels[a-1]=e.axes.x.levels[a-1]||{},r=e.axes.x.levels[a-1]):"clr"===t?r=e.axes.clr:(e.axes.y.groups[a]=e.axes.y.groups[a]||{},r=e.axes.y.groups[a]),r}function Ta(e,t,a,r){var n=e.axes.x.count>1&&"x"==t&&a>0;return"auto"==r&&!n}function Ea(e,t){var r=e.systemConf.legend.colorBand.ranges,n=rc(r),i=e.dataset.getDataType("clr")===Fo;return a(n[0])||(n=n.map(function(e){return[e]})),i||t||n.sort(function(e,t){return no(e[0],t[0])}),n}function La(e,t,a,r,n){var i="y"==a?r?e.x:e.y:r?e.y:e.x,l=r&&!n||!r&&n,o=Zl("y"==a?l?no:io:l?io:no),s=o.left(t,i,0,r&&n?t.length:t.length-1),c=r?i:t[s],d=r?t[s-1]:i,u=s>0&&c>d?s-1:s;return u}function za(e,t){return e/(1-t)}function Da(e,t,a,r,n){var i=Si.scale.getOuterPadding(e,t,a,r),l=2*(hl(e[0],e[1])+n*i);return l}function Ra(e){return e.ordinalRange?e.ordinalRange:(e.ordinalRange=e.domain().map(function(t){return e(t)}),e.ordinalRange)}function ja(e,t,a,r,n,i,l,o,s,c,d){function u(e){var a={};return v?"bottom"==t||"top"==t?(a.left=i(z)-fl(j-R),a.right=i(D)+(R+j)):"left"!=t&&"right"!=t||90!=r&&270!=r||(a.top=i(D)-R,a.bottom=i(z)+R):(a.top=a.left=0,a.right="bottom"==t||"top"==t?Yn(e,"width",y):0,a.bottom="bottom"==t||"top"==t?0:Yn(e,"height",y)),a}function h(e,t,a,r){var n={};return v?(n.left=n.right=0,n.top=n.bottom=0):(n.left="axislabel"==e?r*(a.width-(t.left+t.width)):r*t.left,n.right=r*(a.width-(t.left+t.width)),n.top=r*t.top,n.bottom=r*t.bottom),n}function f(e,o){if("none"!=n){var c=e,d=[c.childNodes[0]],u=d3.select(c).selectAll("tspan").nodes();if(u&&u.length&&(u.sort(function(e,t){return t.textContent.length-e.textContent.length}),d=u),d){if(v){m=m||l.selectAll("text.ticklabel").nodes().length;var h=fl(p.outerPaddingInPixel);"bottom"==t||"top"==t?I?H=M.horizontal:90!=r&&270!=r&&(H=0==o||o==m-1?2*h:2*fl(p.rangeBand)):"left"!=t&&"right"!=t||90!=r&&270!=r||(B=0==o||o==m-1?2*h:2*fl(p.rangeBand))}for(var f=0;f<d.length;f++){var g,y=u&&u.length?d[f]:c,x=y.textContent,b="tspan"==y.nodeName?Ya:_a,w=b(y),C=w,k=-1,A={width:H,height:B},P=v?0:S;if(T&&"ticklabel"==s&&!a.actChartObj){var E="left"==t||"right"==t?H:Math.abs(i.discreteWidth(e.__data__))||H,L=hl(H,E);return void Vt(y,y,y.textContent,L,B,w,O)}if("ticklabel"==s){if(H<w.width){k=(w.width-H)/w.width;var z=dl((1-k)*y.textContent.length);y.textContent=y.textContent.substring(0,z-2)+O,w=b(y)}if(B<w.height){k=(w.height-B)/w.height;var z=dl((1-k)*y.textContent.length);y.textContent=y.textContent.substring(0,z-2)+O,w=b(y)}}var D=l.selectAll(".domain").node().getBoundingClientRect(),R={left:w.left-D.left,right:w.left+w.width-D.left,top:w.top-D.top,bottom:w.top+w.height-D.top,width:w.width,height:w.height};if("left"!=t&&"right"!=t||0==r||180==r||360==r?"bottom"!=t&&"top"!=t||90==r||270==r||(R.left+ul(P,F.left)<V.left||R.right-ul(P,F.right)>V.right)&&(g=!0,Dt(y,y.textContent,R,V,t,O,F,A,y)):(R.top+ul(P,F.top)<V.top||R.bottom-ul(P,F.bottom)>V.bottom)&&(g=!0,Dt(y,y.textContent,R,V,t,O,F,A,y)),"ticklabel"==s&&!g){var w=b(y);(w.width!=C.width||w.height!=C.height)&&Vt(y,c,x,A.width,A.height,w,O)}y.textContent==O&&(y.textContent=a.actChartObj?".":"")}}}}if("none"==n)return f;var g,p,m,v,y=a.plotarea,x=a.chartarea,b=a.canvasarea,w=a.actChartObj||a,C=Sa(t,w.axes.rotated),k="x"==C?w.systemConf.chart.axes.xaxis:w.systemConf.chart.axes.yaxis[d||0],O=null==n||"ellipsis"==n?"..":"",A=k.tickmark.align,S=Si.utils.getVal(at([c,w.systemConf.chart,w.systemConf.canvas,Us],"fontSize")),c="ticklabel"==s?c:{},P=Pa(w,C,d||0).ticks,T=null!=i.discreteWidth,E=.5;if(null==e&&"ticklabel"==s){g=null==o.tickValues()?i.ticks?i.ticks.apply(i,[10]):i.domain():o.tickValues();var L=l.selectAll(".tick").data(g,i);e=L.selectAll("text.ticklabel")}if("ticklabel"==s&&o&&!T&&(P.isHierarchy()||"between"==A)){v=!0,g=g||o.tickValues(),p=Si.scale.getRangeBand(i,g,0);var z=g[0],D=g[g.length-1];k.reversed&&(z=g[g.length-1],D=g[0]);var R=fl(p.outerPaddingInPixel),j=i.bandwidth?i.bandwidth()/2:0}var M=Fa(c,x),I=it(c.width)||it(c.maxWidth),B=M.vertical,H=M.horizontal,V=u(w),F=h(s,y,b,E);return a.actChartObj||"axislabel"==s&&e.node()?f(e.node()):f}function Ma(e,t,a,r,n){var i=rc(e.plotarea);i.chartId=e.id;var l=zt(e.svg,"defs",[1]),o=W(i,r+n),s=zt(l,"clipPath",[1],"#","id",o),c=zt(s,"rect",[1]),d="x"==r?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[n],u={},h=t.axisgroup,f=.5,g={left:f*e.plotarea.left,right:f*(e.canvasarea.width-(e.plotarea.left+e.plotarea.width)),top:f*e.plotarea.top,bottom:f*e.plotarea.bottom};switch(a){case"top":u.x=-g.left,u.y=-h.height-d.tickmark.size,u.height=h.height+e.plotarea.height+d.tickmark.size,u.width=h.width+g.left+g.right;break;case"right":u.x=-e.plotarea.width,u.y=-g.top,u.width=h.width+e.plotarea.width,u.height=h.height+g.top+g.bottom;break;case"bottom":u.x=-g.left,u.y=-e.plotarea.height,u.height=h.height+e.plotarea.height,u.width=h.width+g.left+g.right;break;case"left":u.x=-h.width,u.y=-g.top,u.width=h.width+e.plotarea.width,u.height=h.height+g.top+g.bottom}return c.attrs(u),o}function Ia(e,t,a,r,n,i){function l(t,a,r,n,i,l){e.dataObject.hierarchical&&e.dataObject.hierarchical.categoryTree&&"x"===l&&tt(Za,d3.event,o(t,a,r,n),e,i)}function o(e,t,a,r){return e.data=e.data.map(function(e){return e.value=e.datatype===No?jr(t,null,e.time).getTime():t,e.itemIndex=a,e.levelindex=r,e}),e}var s=a.events,c=null!=s&&0==rt(s.enabled,!0),d={mousemove:s?s.mousemove:null,mouseout:s?s.mouseout:null,click:s?s.click:null,dblclickFn:s?s.doubleclick:null},u={tap:s?s.tap:null,tapHold:s?s.taphold:null,tapHoldEnd:s?s.tapholdend:null,doubleTap:s?s.doubletap:null};if(!c){var h={},f={};for(var g in d){var p;if(d[g]){var m=d[g];p="click"==g?function(t,a){l(r,t,a,i,!1,n),tt(m,d3.event,o(r,t,a,i),e)}:function(t,a){tt(m,d3.event,o(r,t,a,i),e)}}else"click"==g&&(p=function(e,t){l(r,e,t,i,!0,n)});h[g]=p}for(var g in u){var p;if(u[g]){var m=u[g];p="tap"==g?function(t,a){l(r,t,a,i,!1,n),tt(m,d3.event,o(r,t,a,i),e)}:function(t,a){tt(m,d3.event,o(r,t,a,i),e)}}else"tap"==g&&(p=function(e,t){l(r,e,t,i,!1,n)});f[g]=p}Ar(t,h,f)}}function Ba(e,t,a,r,n,i,l){var o=r.minmaxlabels||{},s=l.systemConf;if(o.show===!0){var c=n.reversed===!0,d=+Si.utils.getVal(at([o,r,s.chart,s.canvas,Us],"fontSize")),u=i.domain(),h=u.length-1,f=e.filter(function(e){return!(e-u[0]&&e-u[h])});"top"!==t&&"bottom"!==t||"middle"!==a.textAnchor?"left"!==t&&"right"!==t||!(l.plotarea.top<d/2||l.plotarea.bottom<d/2)||f.attr("dy",function(e){return e-u[c?h:0]?"0.9em":"-0.3em"}):f.style("text-anchor",function(e){return e-u[c?h:0]?"end":"start"}),Bt(f,[o,r,s.chart,s.canvas,Us])}}function Ha(e,t,a){e.nodes().forEach(function(e,r){var n="left"==a||"right"==a?1:0,i=[0,0],l=t.discreteWidth(r)/2;i[n]=i[n]+l,e.setAttribute("transform","translate("+i[0]+","+i[1]+")")})}function Va(e,a,r,n,i,l){var o={},s="0.71em",c="0.35em",d="0em",l=null==l?n.tickPadding():l;switch(e){case"top":o.rotate=[a,0,-(ul(i,0)+l)],a>=0&&45>a||a>315&&360>=a?(o.dy=d,o.dy1="-1em"):a>=45&&90>=a||a>=90&&135>=a||a>=225&&315>=a?o.dy=c:a>135&&225>a&&(o.dy=s),o.textAnchor="0"==a||180==t(a)||360==t(a)?"middle":t(a)<180?"end":"start";break;case"bottom":o.rotate=[a,0,ul(i,0)+l],a>=0&&45>a||a>315&&360>=a?(o.dy=s,o.dy1="1.71em"):a>=45&&90>=a||a>=90&&135>=a||a>=225&&315>=a?o.dy=c:a>135&&225>a&&(o.dy=d),o.textAnchor="0"==a||180==t(a)||360==t(a)?"middle":t(a)<180?"start":"end";break;case"left":o.rotate=[a,-(ul(i,0)+l),0],a>=0&&45>a?o.dy=c:a>=45&&90>=a||a>=90&&135>=a?o.dy=s:(a>135&&225>a||a>=225&&315>=a||a>315&&360>=a)&&(o.dy=d),o.textAnchor="90"==a||270==t(a)?"middle":a>90&&270>a?"start":"end";break;case"right":o.rotate=[a,ul(i,0)+l,0],a>=0&&45>a||a>135&&225>a?o.dy=c:a>=225&&315>=a||a>315&&360>=a?o.dy=s:(a>=90&&135>=a||a>=45&&90>=a)&&(o.dy=d),o.textAnchor="90"==a||270==t(a)?"middle":a>90&&270>a?"end":"start"}return o}function Fa(e,t){return{vertical:ta(ic(e.height,e.maxHeight,Si.axis.ticks.maxTickSizeRatio_Vert),t.height),horizontal:ta(ic(e.width,e.maxWidth,Si.axis.ticks.maxTickSizeRatio_Hori),t.width)}}function Na(e){var t=null!=e?e.axisformat||e.format:null;return t&&"auto"===t.specifier}function Ya(e){var t=document.createRange();t.selectNode(e);var a=t.getClientRects(),r=a[1]||a[0];return t.detach(),(Gs.FIREFOX||Gs.SAFARI)&&(r.width=2*r.width,r.height=2*r.height),r}function _a(e){return e.getBoundingClientRect()}function Wa(e,t,r,n,i,l,o){var s,c,d=a(e),u=Ua(t);return d?e.forEach(function(e,a){it(n)&&n.length&&(t=n[a].fontSize||t,r=n[a].fontFamily||r);var i=Xa(e,t,r);u=Ua(t),s=it(s)?ul(s,i):i,c=it(c)?c+1.1*u:u}):(it(n)&&(t=n.fontSize||t,r=n.fontFamily||r),s=Xa(e,t,r,l,o),c=Ua(t,i)),{width:s,height:c}}function Xa(e,t,a,r,n){r=r||"normal",n=n||"normal",il.save(),il.font=r+" "+n+" "+(t||12)+"px "+(a||Us.fontFamily);var i=il.measureText(e).width;return il.restore(),i}function Ua(e,t){return t?e:24>e?e+3:~~(1.195*e)}function Ga(e,t,a,r,n){return null==e?e:"wrapOnSpace"==t?e.split(" "):"wrapAll"==t?Rt(e,a,r,n):e}function Za(e,t,r,n){t=t.data[0],r.cache.hierarchical||(r.cache.hierarchical={});var i=r.dataObject.hierarchical,l=t.itemIndex,o=r.cache.hierarchical,s=i.finalDepth-t.levelindex,c=i.getCategoriesByDepth(s),d=c[l],u=g.getAllChildren(d),h=Za.getQuery(u[0],s);o.lastQuery=h,n&&Za.applyDefaultStyles(r,h,o.query!==h),o.query===h?(a(o.data)&&Za.setState(o.data,!1),o.data=o.query=o.active=o.depth=o.itemIndex=o.isLeaf=null):(a(o.data)&&Za.setState(o.data,!1),Za.setState(u,!0),o.query=h,o.data=u,o.active=!0,o.depth=s,o.itemIndex=l,o.isLeaf=d.leaf)}function Qa(e,t,a){a&&(Si.labelRenderer&&Si.labelRenderer.drawLabelsFromQueue(t.labelQueue,t.labelArray,e),t.labelArray=[],t.labelQueue=[],t.notesArray=Si.annotation?Si.annotation.draw(e,t.notesArray):[])}function qa(e,t){var a=e.params,r=a.stacked,n=a.chartObj,i=a.yscale,l=Si.DataProcessor.helpers,o=n.renderer[t].barDatasetIndex?n.renderer[t].barDatasetIndex():0,s=a.commonPlotOptions,c=l.getChartType(n.seriesdata[t].type||n.userdata.seriesdata.type,"string"),d="bullet"==c,u=n.dataObject.groupedByStack,h=n.seriesdata[t].plotoptions,f=h&&h.levelMarker?ac(s.levelMarker,h.levelMarker,!0):s.levelMarker,g=s.levelMarker||{},p=n.barscale2.bandwidth()||0,m=p,v=+(s.bandWidth||null)||(d?p/3:p),y=+(g.bandWidth||p),x=+(g.maxBandWidth||p),b=+(s.maxBandWidth||p);m=hl(y,x,p),v=hl(v,b,p);var w=ul(0,(p-v)/2),C=ul(0,(p-m)/2),k=function(){return i.bandwidth?i.bandwidth()/2:0},O={stacked:r,categories:a.xscale.domain(),axisrotated:a.axisrotated,bandwidth1:n.barscale1,bandwidth2:n.barscale2,barDatasetIndex:o,padding:w,yscale:i,hasNegValue:a.hasNegValue,yaxiscolumnorder:a.yaxiscolumnorder,addRangeBand:k,barWidth:v,charttype:c,levelMarker:f,levelMarkerWidth:m,levelMarkerPadding:C,stackGroupIndex:n.userdata.seriesdata.stackGroup?$a(t,u.keys(),function(e){var t=u.get(e);return t.map(function(e){return e.si})}):0};return n.renderer[t].commonOption=O,O}function Ka(e,t,a,r){var n=function(e){return a.getX(e)},i=e.map(n);t.forEach(function(t,n){var l=t,o=i.indexOf(l);if(0>o){var s=[];s.splice(a.xidx,0,l),s.splice(a.yidx(r),0,0),s.isDummy=!0,s.y=0,s.y0=0,s.index=n,e.splice(n,0,s)}})}function $a(e,t,a){return Bl(t,function(t,r){var n=a?a(t,r):t;return-1!=n.indexOf(e)?r:-1})}function Ja(){Si.legutil.imagePallete.each(function(e,t){var a=e.map(function(e){return Si.imageFilePath+e});Si.legutil.imagePallete.set(t,a)})}function er(e){var t=e.systemConf.legend.colorBand,a=e.dataset.getDataType("clr");return{track:{fillColor:Pl},slider:{type:"lever",shadow:"0 0 2px rgba(0,0,0,0.2)",tooltip:{enabled:!(t.ranges&&t.ranges.length||a===Fo),padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)",fontSize:e.globalProp.fontL1Size.l5},lever:{height:26,width:9,radius:2,stripeHeight:8,stripePadding:2,fillColor:"white",strokeColor:"#DADADA",stripeColor:"#DADADA"},triangleUp:{size:15,fillColor:"#4C4C4C"},triangleDown:{size:15,fillColor:"#4C4C4C"},hollowCircle:{size:25,outerFillColor:"white",outerStrokeColor:"#DADADA",innerStrokeColor:"#DADADA"},circle:{size:25,outerStrokeColor:"white",outerStrokeWidth:2,innerFillColor:"white"},vernier:{height:26,width:9,fillColor:"white",strokeColor:"#DADADA"},pentagon:{size:8,bandWidth:3,fillColor:"white",strokeColor:"#DADADA"}}}}function tr(e,t,a,r,n){var i=t&&t[r]||n;it(i)&&tt(i,d3.event,e)}function ar(e,t,a,r,n){var i=t.events,l=a.systemConf.chart.plot.events;it(n)&&(i=t[n.type]&&t[n.type].events);var o=it(e)&&it(e.events)?Si.utils.getValueOfPlotOptions(e.events,i)(r):null!=i?i[r]:null!=l?l[r]:null;return void 0===o&&l&&(o=l[r]),o}function rr(e){var t=e.patternPallete;return t&&t.length}function nr(e){return e===Si.charttype.area||e===Si.charttype.stkdarea||e===Si.charttype.arearange}function ir(e){return e===Si.charttype.bar||e===Si.charttype.stkdbar||e===Si.charttype.bullet||e===Si.charttype.gantt||ur(e)||e===Si.charttype.waterfall}function lr(e){return-1!=Si.chartcategory.dotPlot.indexOf(e)}function or(e){return e===Si.charttype.bubble||e===Si.charttype.bubblepie}function sr(e){return e===Si.charttype.waterfall}function cr(e){return lr(e)||e===Si.charttype.bubblepie}function dr(e){return e===Si.charttype.sunburst}function ur(e){return e===Si.charttype.heatmap}function hr(e){return-1!=Si.chartcategory.piePlot.indexOf(e)}function fr(e){return hr(e)&&e!==Si.charttype.pie}function gr(e,t){var a=mo(e);return null!=t.touches&&!Gs.ANDROID&&Gs.uiwebview&&(a[0]+=window.pageXOffset,a[1]+=window.pageYOffset),a}function pr(e,t,a,r){var n=function(){return e.dataObject.getTransRectValue.apply(e.dataObject,et(arguments))};return{x:n("x",t,a,0,r),y:n("y",t,a,0,r),width:n("width",t,a,0,r),height:n("height",t,a,0,r)}}function mr(e,t,a,r,n){var i,l,o,s,c=e.dataset,d=e.systemConf.chart.plot.plotoptions.heatmap,u=d.symbol&&V(d.symbol),h=c.getX(t),f=c.getY(t,n),g=e.dataObject.hasZaxis?e.zscale(c.getZ(t)||e.zscale.domain()[0]):1,p=a.bandwidth(),m=r.bandwidth();return e.axes.rotated?(o=m*g,s=p*g,u&&(o=s=hl(o,s)),l=a(h)+(p-s)/2,i=r(f)+(m-o)/2):(o=p*g,s=m*g,u&&(o=s=hl(o,s)),i=a(h)+(p-o)/2,l=r(f)+(m-s)/2),{x:i,y:l,width:o,height:s}}function vr(e){var t=h=2*e.r;return{x:(e.x||0)-t/2,y:(e.y||0)-h/2,width:t,height:h}}function yr(e){return e.systemConf.tooltip.crosshair.type!=Sl}function xr(e,t,a){if(oc.isQuantileColorScale(e)){var r=e.chartTypes[0].value===Si.charttype.pyramid?e.seriesdata[0].data[0]:El;t.style("pointer-events",function(t,n){var i=r?r[r.length-1-n]:t.data||t,l=e.dataset.getClr(i);return a||!da(l,e)?Sl:void 0})}}function br(e,t,r,n,i,l,o,s,c,d,u,h){var f=null,g=i.plotarea,p=i.plotarea_approx;l=l||{},s&&yr(i)?o?f={actLeft:r+g.left,actTop:t.y+g.top,top:t.y,left:d?g.width:t.x}:(f={top:0,actTop:g.top+n},d?(f.left=t.x,f.actLeft=t.x+g.left):(f.left=r,f.actLeft=g.left+r)):d?(f={left:t.x,top:t.y},o?(f.actLeft=r+g.left,f.actTop=t.y+g.top):(f.actLeft=t.x+g.left,f.actTop=n+g.top)):f={left:r,top:n,actLeft:g.left+r,actTop:g.top+n};var m=t.x-e.clientX,v=t.y-e.clientY;return f.dLeft=m+g.left,f.dTop=v+g.top,f.left-=m,f.top-=v,f.dLeft=m+g.left,f.dTop=v+g.top,f.helpers={seriesindex:l.seriesPos,subseriespos:a(l.subseriesindex)?l.subseriesindex[l.seriesPos]:l.subseriesindex,subseriesLength:a(l.subseriesLength)?l.subseriesLength[l.seriesPos]:l.subseriesLength,itempos:l.itemPos,itemposShared:l.itemPosShared,color:i.seriesColor,tooltipSharedInfo:c,tooltipShared:s,svgFillFunc:h||i.renderer[l.seriesPos]&&i.renderer[l.seriesPos].fillColorFunc,inheritColors:i.dataObject.isWaterfallEnabled},u&&(f.dLeft+=p.x,f.dTop+=p.y),f}function wr(e,t){var a=e.userdata.metadata.columns,r=a.filter(function(e){return e.dataindex===t.dataindex});return r[0]}function Cr(e,t,a){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height}function kr(e,t,a){return pl((e-a.cx)*(e-a.cx)+(t-a.cy)*(t-a.cy))-(a.r||0)}function Or(e,t){var a=null,r=e.systemConf.chart.plot.plotoptions[Si.charttypenames.get(t)],n=cr(t)||t===Si.charttype.line,i=!n,l=r&&r.events&&r.events.triggerOffset;return a=it(l)?l:e.dataObject.isBubbleEnabled?3===arguments.length?arguments[2]:ic(e.zscale.range()[1]/2+50,null):i||e.systemConf.tooltip.sharedSeriesInfo?null:e.dataObject.isCombinationalChart&&n?10:50}function Ar(e,t,a,r,n){r=r||{},n=r.namespace||n,Gs.isMouseDevice&&t&&Tr(e,n,t),Gs.isTouchDevice&&a&&Er(e,n,a,r)}function Sr(e,t,a){if(t=null!=t&&""!=t?"."+t:"",Gs.isMouseDevice){if(""!==t)e.on(t,null);else for(var r in a)e.on(r,null);a=null}}function Pr(e){return e.changedTouches?e.changedTouches[0]:e}function Tr(e,t,a){if(null!=e.node()){t="."+t;var r={};for(var n in a)r[n+t]=a[n],e.on(n+t,r[n+t]);a=r,e.on(a)}}function Er(e,t,a,r){function n(e,t,a,r){return Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2))}function i(){d&&d3.event.preventDefault()}if(null!=e.node()){var l=r.touchleave,o=r.target,s=r.chartObj,c=s&&s.systemConf.chart.plot.events||{},d=r.preventDefault!==!1,u=!("plot"===o&&0==c.isFocusedTouchmove);t=null!=t?"."+t:"";var h,f,g,p,m,v=30,y=150,x=500,b=100,w=50,C=500,k={},O=0,A=0,S=x-y,P=null,T=!1,E=(a.touchmove,a.touchend),L=a.tap,z=a.dbltap,D=a.singletouchmove,R=a.doubletouchmove;"plot"===o&&ar(null,s.systemConf.chart.plot.plotoptions[s.chartTypes[0].name],s,"taphold")?(p=a.tap,m=E):(p=a.taphold,m=a.tapholdend);var j="touchstart"+t,M="touchmove"+t,I="touchend"+t,B={};B[j]=function(){if(0!=c.enabled){var e=d3.event.touches;if(!(e.length>1)&&(k.time=new Date,k.location=gr(this,d3.event),P=null,T=!1,f=!1,p)){var t=d3.event,a=arguments,r=this;g=setTimeout(function(){d3.event=t,s&&(s.zcEventType="taphold"),p.apply(r,a),f=!0},C)}}},B[M]=function(){if(0!=c.enabled){var e=d3.event.touches;if(p){var t=gr(this,d3.event),a=null!=k.location?n(k.location[0],k.location[1],t[0],t[1]):null;if(a>v)clearTimeout(g);else if(f)return i(),!1}if(e.length>1)return void(2==e.length&&R&&(T=!0,R.apply(this,arguments),i()));var r=(new Date).getTime();if(P||(P=r),l&&null!=document.elementFromPoint){var o=0==O||r-O>w,d=e[0],m=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset);if(!o||"svg"===m.localName||null!=m.id.match(/tooltip/gi))return void i();if(m!=this){if(h!=m){var y=h||this,x=d3.select(y),C=x.on(I),A=x.datum(),S=x.attr("id")||x.attr("class"),E=null!=S?S.match(/(\d)+$/gi):null;E=null!=E&&null!=E[0]?parseInt(E[0]):null,null!=C&&null!=E&&C.call(y,A,E)}var x=d3.select(m),L=x.attr("class");s.chartTypes[0].value!==Si.charttype.dial||"inner"!==L&&"outer"!==L||(x=jl(m.parentNode));var z=x.on(M),A=x.datum(),S=x.attr("id")||x.attr("class"),E=null!=S?S.match(/(\d)+$/gi):null;return E=null!=E&&null!=E[0]?parseInt(E[0]):null,void(null!=z&&null!=E&&(z.call(m,A,E),h=m,O=r))}}u&&P-k.time<b||D&&(s&&(s.zcEventType="touchmove"),D.apply(this,arguments),i())}},B[I]=function(){if(0!=c.enabled){var e=d3.event.touches;if(p&&(clearTimeout(g),f))return f=!1,i(),m&&m.apply(this,arguments),!1;if(!(e.length>1)){if(T&&R&&E)return T=!1,E.apply(this,arguments),void i();var t=new Date,a=gr(this,d3.event),r=t-k.time,l=null!=k.location?n(k.location[0],k.location[1],a[0],a[1]):null,o=t-A;S>0&&S>=o&&o>0&&v>=l?(z&&(s&&(s.zcEventType="doubletap"),z.apply(this,arguments),i()),A=0):y>=r&&v>=l?L&&(s&&(s.zcEventType="tap"),L.apply(this,arguments),i()):E&&E.apply(this,arguments),A=t}}};for(var H in B)e.on(H,B[H])}}function Lr(e,t,a,r,n,i,l,o){function s(t){a!==No||d.customFormat?a===Yo&&("axis"===n||n===ed||n===Jc&&r.dataObject.isHierarchy)&&"number"==typeof t&&(t=parseFloat(t.toPrecision(12))):t=jr(t,d,e),o&&d.customFormat&&(e=rc(e),e.levelindex=o);var i="function"==typeof d?d(t,a,e):d.customFormat?tt(d.customFormat,t,a,e,n,r):Dr(d,t,e,a,o,n);return c(i)}function c(e){return 0!=i?G(e):Z(e)}if(!a)return c(t);if(null==t)return e&&null!=e.nullformatting?c(tt(e.nullformatting,t,a,e,n,r)):t;var d=e?e[n+"format"]||e.format:null;return d&&Object.keys(d).length||(d=zr(a,e)),t.constructor==Array?t.map(function(e){return s(e)}).join(it(d.arraySeperator)?d.arraySeperator:l):s(t)}function zr(e,t){var a={};switch(e){case"time":t&&t.groupby?a={}:t&&t.subfunction?a=Rr(t.subfunction,t.useUTC):a.specifier="YYYY";break;case"numeric":a.thousandSeperator=",";break;case"percent":a.decimalPlaces=1,a.suffix="%",a.trailingZeros=!1}return a}function Dr(e,r,n,i,l,o){var s;switch(i){case"time":var c,d=n&&n.useUTC===!0?Mo:jo,u=e.specifier;if(it(n)&&(c=a(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER),a(u)||a(c))s=[],u=u||[null],it(l)&&(u=it(u)?[u[l]]:[null]),u=a(u)?u:[u],u.forEach(function(e,t){var a=Ir(e),i=Hr(d,a,n,l);s[t]=i?i(r):r}),o==Jc&&(s=s&&s.toString());else{var h=Ir(u);if("auto"===e.specifier||null==h)s=r;else if(zc.test(h)){var f=Hr(d,h,n,l);s=f(r)}else s=d(h)(r)}break;case"ordinal":var g=e.letterCase;r+="",s=g?"uppercase"===g?r.toUpperCase():"lowercase"===g?r.toLowerCase():r[0].toUpperCase()+r.substring(1).toLowerCase():r;break;default:if("decimal"==e.type&&t(r)!=r)return"";r="decimal"==e.type||0===e.decimalPlaces?parseFloat(r):r;var p=e.currency,m=Vr(e,null,r),v=!1;if(s=m(r),/(e|s)/gi.test(Fr(e))&&(it(e.decimalPlaces)?s=s.replace(/[^a-z]+/i,function(){return Vr(e,"."+e.decimalPlaces+"f")(arguments[0])}):v=!0),e.signEnabled===!1&&(s=s.substring(1,s.length)),!rt(e.trailingZeros,!0)||v){var y="";s=s.replace(/[a-z]+(\+|-)*(\d)*$/i,function(){return y=arguments[0],""}),s=s.replace(/\.(\d)*0*$/gi,function(){var e=arguments[0];return parseFloat(e)?"."+(+e).toString().split(".")[1]:""})+y}s=Nr(e,s),null!=p&&(s=/(\+|\-)/.test(s[0])?s[0]+p+s.slice(1):p+s)}return(i==Fo||i==Yo)&&(s=(null!=e.prefix?e.prefix:"")+s+(null!=e.suffix?e.suffix:"")),e.breakSpace&&(s=s.split(" ")),s}function Rr(e,t){t=t===!0;var a=t?Mo:jo;switch(e){case"YEAR":case"year":return a("%Y");case"MONTH":case"month":return a("%B");case"ABSDAY":return a("%a");case"DAY":case"day":return a("%e");
case"WEEKDAY":return a("%A");case"WEEK":case"week":return a("Week %W");case"ABSHOUR":return a("%I");case"ABSSECOND":return a("%S");case"ABSMINUTE":case"MINUTE":return a("%M");case"MILLISEC":return a("%L");case"HOUR":return a("%H hrs");case"DATETIME":return a("%d %b %Y %H:%M:%S");case"DATE":return a("%x");case"TIME":return a("%X");case"TIMESTAMP":return a("%x %X hrs");case"ABSMONTH":return a("%b %Y");case"ABSWEEK":return a("W%U %Y");case"ABSQUARTER":return function(e){var r=t?e.getUTCFullYear():e.getFullYear();return a("Q"+Ur(e,t)+" "+r)};case"QUARTER":return function(e){return a("Q"+Ur(e,t))};case 100:return a("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: "+e}}function jr(e,t,a){var r=a?a.inputformat:null,n=new Date(e.toString()),i="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(e instanceof Date||null==r||!i&&"timestamp"==r.toLowerCase())){e=i||typeof e==String?e:e.toString();var l=Io,o=i?i(e,a):l(Ir(r))(e);n=null==o?n:new Date(o)}return isNaN(n)&&(n=new Date(+e)),n}function Mr(e,t,a,r,n){return e=e||{},n=(n&&e[n+"percentformat"]?n:"")+"percent",e[n+"format"]||(e.percentformat=zr("percent")),Lr(e,t,a,r,n)}function Ir(e){if(e)for(var t in Pc){var a=e.indexOf(t);a>=0&&"%"!==e[a-1]&&(e=e.replace(new RegExp(t,"g"),Pc[t]))}return e}function Br(e,t,a){return function(t){for(var r,n=e(t),i=[],l=-1,o=0,s=n.length;++l<s;)36===n.charCodeAt(l)&&(i.push(n.slice(o,l)),r=n.charAt(++l),r=it(Ec[r])?Ec[r](t,a):r,i.push(r),o=l+1);return i.push(n.slice(o,l)),i.join("")}}function Hr(e,t,r,n){var i;if(t)i=Br(e(t),t,r.useUTC);else if(r.groupby){var l=a(r.groupby)?r.groupby:r.AUTO_GROUP_ORDER,o=0!==n&&it(n)?l[n-1]:r.subfunction;i=Rr(o,r.useUTC)}return i}function Vr(e,t,a){var r,n=it(e.signEnabled)?"+":"",i=null!=e.zeroPadding&&e.zeroPadding.enabled?"0"+e.zeroPadding.digits:"",l=null!=e.thousandSeperator?",":"",o=Fr(e),s=/(e|s)/gi.test(o);r=null!=e.decimalPlaces&&e.decimalPlaces>=0?s?Gs.IE?".20":"":"."+e.decimalPlaces:s?"":"."+Yr(a);var c=n+i+l+(t||r+o);return Ro(c)}function Fr(e){var t=(e.decimalPlaces,e.type);return Tc[t]||"f"}function Nr(e,t){var a=e.thousandSeperator,r=e.decimalSeperator,n=t.split(/\./);return(null!=a&&","!=a?n[0].replace(/,/g,a):n[0])+(n[1]?(null!=r?r:".")+n[1]:"")}function Yr(e){if(isNaN(e)||Math.floor(+e)==e)return 0;var t=_r(e);return t.toString().split(".")[1].length||0}function _r(e){if(/\d+\.?\d*e[+-]*\d+/i.test(e)){var t="0",a=String(e).toLowerCase().split("e"),r=a.pop(),n=Math.abs(r),i=r/n,l=a[0].split(".");if(-1===i)e=t+"."+new Array(n).join(t)+l.join("");else{var o=l[1];o&&(n-=o.length),e=l.join("")+new Array(n+1).join(t)}}return e}function Wr(e){var t=cl(e/1e3),a=cl(t/60),r=cl(a/60),n=cl(r/24),i=cl(n/30.436854166666667),l=cl(n/365.24225);return{seconds:t,minute:a,hour:r,day:n,month:i,years:l}}function Xr(e){var t=Wr(e),a="YEAR";return a=t.years>1?"YEAR":t.month>1?"ABSMONTH":t.day>1?"ABSDAY":t.hour>1?"ABSHOUR":t.minute>1?"ABSMINUTE":"ABSSECOND",{subFunction:a}}function Ur(e,t){return cl((t?e.getUTCMonth():e.getMonth())/3)+1}function Gr(e,t,a,r,n){var i=(n.chart,n.animationOptions.enabled),l=n.axisrotated,o=n.renderer,s=n.seriesindex,c=l?o.getParamValue("height",t[0],s,null,o.commonOption):o.getParamValue("width",t[0],s,null,o.commonOption),d=hl(c/10,1),u=Zr(a),h={inner:0,outer:1},f=l?"triangle-left":"triangle-down",g=zt(e,"g",r.enabled?[1]:[],".","class","zcmarkerPointers"),p=zt(g,"g",u,".","class","markers",null,function(e,t){return a[t].y});p.each(function(){var e=jl(this);e.attrs({transform:function(e){return"translate("+e[0]+","+e[1]+")"}}).style("opacity",0).transition().duration(i?n.animationOptions.duration:0).style("opacity",1),F(e,null,{size:d,symbol:f,outerFillOpacity:r.strokeOpacity,outerStrokeOpacity:r.strokeOpacity},{symbolSize:h,color:r.strokeColor||"black"})})}function Zr(e){var t=e.map(function(t,a){return e[a][3]});return t}function Qr(e,t,a,r){var n,i=e.chartObj,l=e.xscale,o=e.yscale,s=e.stacked,c=e.datasetIndex,d=e.axisrotated,u=e.commonPlotOptions,h=e.yaxiscolumnorder,f=e.dataset,g=i.systemConf,p=i.dataObject,m=g.chart.axes.yaxis[h].reversed,v=i.seriesdata[c].plotoptions,y=Si.utils.getValueOfPlotOptions(v,u),x=x=Gs.FIREFOX&&1==t.length?"linearClosed":y("mode");if(p.isPolarAxisCategory)n=oo().defined(function(e){return!e.isDummy}).radius(function(e){var t=.1,a=s?o(e.y+e.y0):o(f.getY(e,h))+(null!=o.bandwidth?o.bandwidth()/2:0);return ul(a,o.range()[m&&!s?o.domain().length-1:0]+t)}).angle(function(e){return l(f.getX(e))}).curve(Nl(x,d));else{var b=i.chartTypes[c],w=Si.DataProcessor.helpers,C=w.isCatNull(f,"x"),k=w.isCatNull(f,"y",h);n=lo().defined(function(e){var t=!k(f.getY(e,h))&&!C(f.getX(e));return b.value===Si.charttype.stkdarea?!0:!e.isDummy&&t}).x(function(e){var n=p.getXYvalue(d,s,l,o,h,e,"x",null,r);if(null!=a){var u=Math.abs(p.getXYvalue(d,s,i.renderer[c].oldXscale,o,h,t[0],"x",null,r)-p.getXYvalue(d,s,l,o,h,t[0],"x",null,r));n+=u}return n}).y(function(e){return i.dataObject.getXYvalue(d,s,l,o,h,e,"y",null,r)}).curve(Nl(x,d,u.tension))}return n}function qr(e,t,a,r,n){var i,l=e.chartObj,o=e.xscale,s=e.yscale,c=e.stacked,d=e.datasetIndex,u=e.axisrotated,h=e.commonPlotOptions,f=e.hasNegValue,g=e.yaxiscolumnorder,p=e.dataset,m=l.systemConf,v=l.dataObject,y=m.chart.axes.yaxis[g].reversed,x=l.seriesdata[d].plotoptions,b=Si.utils.getValueOfPlotOptions(x,h),w=b("mode");if(v.isPolarAxisCategory){var C=y&&!c?s.domain().length-1:0,k=function(e){var t;return t=c?0==e.y0?hl(s.range()[0],s(f),e.y0):s(e.y0):s(s.domain()[C])+(null!=s.bandwidth?s.bandwidth()/2:0),ul(t,s.range()[C])},O=function(e){if(e.isDummy)return k.apply(null,arguments);var t=c?s(e.y0+e.y):s(p.getY(e,g))+(null!=s.bandwidth?s.bandwidth()/2:0);return ul(t,s.range()[C])};i=co().angle(function(e){return o(p.getX(e))}).outerRadius(O).innerRadius(k).curve(Nl(w))}else{var A=l.chartTypes[d].name,S=A===zs,P=S?1:null,T=Si.DataProcessor.helpers,E=T.isCatNull(p,"x"),L=T.isCatNull(p,"y",g);i=so().defined(function(e){return c?!E(p.getX(e)):!L(p.getY(e,g))&&!E(p.getX(e))}).curve(Nl(w,u,h.tension)),u?i.x0(function(e,t){return c?0==d&&0==n&&0==t?ul(s.range()[0],s(f)):s(e.y0):S?v.getXYvalue(u,c,o,s,g,e,"x",null,0):null!=s.bandwidth?s.origRange[0]+s.bandwidth():ul(s.range()[0],s(f))}).x1(function(e){var n=v.getXYvalue(u,c,o,s,g,e,"x",null,P);return isNaN(n)&&null!=a&&(n=v.getXYvalue(u,c,o,s,g,r[r.length-1],"x",null,P)+t),n}).y(function(e){return v.getXYvalue(u,c,o,s,g,e,"y",null,P)}):i.x(function(e){var t=l.dataObject.getXYvalue(u,c,o,s,g,e,"x",null,P);if(null!=a){var n=Math.abs(l.dataObject.getXYvalue(u,c,l.renderer[d].oldXscale,s,g,r[0],"x",null,P)-l.dataObject.getXYvalue(u,c,o,s,g,r[0],"x",null,P));t+=n}return t}).y0(function(e,t){return c?0==d&&0==n&&0==t?hl(s.range()[0],s(f)):s(e.y0):S?v.getXYvalue(u,c,o,s,g,e,"y",null,0):null!=s.bandwidth?s.origRange[0]+s.bandwidth():hl(s.range()[0],s(f))}).y1(function(e){return v.getXYvalue(u,c,o,s,g,e,"y",null,P)})}return i}function Kr(e,t,a,r){e.attrTween("d",function(e){var n=d3.interpolate(r[0],r[1]),i=d3.interpolate(a[0],a[1]);return function(a){return t.outerRadius(n(a)),t.innerRadius(i(a)),t(e)}})}function $r(e,t){var a=e&&e.cascadeCategories?ac(t.cascadeCategories,e.cascadeCategories,!0):t.cascadeCategories,r=e&&e.risingCategories?ac(t.risingCategories,e.risingCategories,!0):t.risingCategories,n=e&&e.fallingCategories?ac(t.fallingCategories,e.fallingCategories,!0):t.fallingCategories;return{cascaded:a,rising:r,falling:n}}function Jr(e,t,a){return e.isCascaded?t.cascaded.color||a:e.isPositive?t.rising.color||a:t.falling.color||a}function en(e){var t,a=e.dataset,r=e.data,n=e.chartObj,i=n.dataObject,l=e.processedseriesData,o=l.length,s=(i.getCategories("x"),i.getCategories("x")),c=s.length,d=e.isstacked("waterfall"),u=rt(r.chart.plot.plotoptions.waterfall.cascadeCategories.dataindex,2),h=[];if(e.waterfall={},e.waterfall.comparator=[],d){for(var f,g=[],p=[],m=[],v=[],y=[],b=[],w=[],C=0,k=0,O=0;c>O;O++){var A=s[O];w[O]=y[O]=b[O]=C;for(var S=0;o>S;S++){var P=l[S],T=P.disabled,E=P.data,L=E.length,z=Si.DataProcessor.helpers.getParsedYAxisOrder(P.yaxiscolumnorder),D=a.yidx(z);if(!T)for(var R=0;L>R;R++){var j=E[R],r=j[O],M=r[u],I=a.getActualX(r);I!==A&&(r=nn(A,0,a.xidx,a.yidx(z),O,j),M=!1);var B=a.getY(r,z);M?(0==S&&(w[O]=y[O]=b[O]=0),f=r.isCascaded=!0,g[S]=g[S]?g[S]:B,r[D]=r.y=g[S]):(f=!1,r.y=B,g[S]=g[S]?r.y+g[S]:r.y);var H=lt(r.y);r.y0=H?y[O]:b[O],H?(y[O]=r.y+y[O],m[O]=m[O]?m[O]+r.y:r.y,r.isPositive=!0):(b[O]=r.y+b[O],v[O]=v[O]?v[O]+r.y:r.y),r.index=O}}h.push(y[O],b[O]),k=(m[O]||0)+(v[O]||0),C=lt(k)?y[O]:b[O];var V=tn(e,a.xidx,O,A,k,C,w,f);p[O]=V}e.processedStackedData=p;var F=i.groupedByStack;F.has(0)||F.set(0,{}),F.get(0).stackExtent=x(d3.range(s.length),m,v,y,b)}else l.forEach(function(r){var n=r.data,i=Si.DataProcessor.helpers.getParsedYAxisOrder(r.yaxiscolumnorder),l=a.yidx(i);n.forEach(function(r){s.forEach(function(n,o){var s=n,c=r[o],d=c?a.getActualX(c).toString():null;if(d!==s.toString())return void nn(s,null,a.xidx,a.yidx(i),o,r);var f=c[u];f?(c.y0=0,c.y=0==o?a.getY(c,i):t,t=c.y,c[l]=c.y,c.isCascaded=!0,c.isPositive=lt(c.y),e.waterfall.hasPositiveCascaded=e.waterfall.hasPositiveCascaded||c.isPositive,e.waterfall.hasNegativeCascaded=e.waterfall.hasNegativeCascaded||!c.isPositive):(c.y0=t||0,c.y=a.getY(c,i),t=c.y+c.y0,c.isPositive=lt(c.y)),c.index=o,h.push(t)})})});var N=d3.extent(h);return N}function tn(e,t,a,r,n,i,l,o){var s=[];return s[t]=r,s.y0=l[a],s.y=i-l[a],s.index=a,s.stackedValue=n,s.isPositive=lt(n),s.isCascaded=o,o&&(e.waterfall.hasPositiveCascaded=e.waterfall.hasPositiveCascaded||s.isPositive,e.waterfall.hasNegativeCascaded=e.waterfall.hasNegativeCascaded||!s.isPositive),s}function an(e,t,a,r,n){var i=bn(r,a),l=r.systemConf.chart.plot.datalabels.handleOverlapping,o=r.datalabels.isStackedLabels||r.datalabels.hasFixedPosition||!l,s=n?o?10:0:10;r.dataObject.waterfall.datalabelPadding=n?r.dataObject.rangeCorrections.datalabels.y0+s:s,e=rn(e);var c,d=e[1]-e[0],u=r.axes.y.orient,h=r.plotarea["left"==u?"height":"width"],f=5,g=d/(h-f)*f;if(i){var p=xn(r),m=30;f+=p+m+s,c=d/(h-f)*f}return e[1]+=i?c:g,e[0]-=r.dataObject.waterfall.hasNegativeCascaded?g:0,e}function rn(e){return e[1]<0&&(e[1]=0),e}function nn(e,t,a,r,n,i){var l=[];return l.splice(a,0,e),l.splice(r,0,0),l.isDummy=!0,l.index=n,l.y=t,l.y0=0,i.splice(n,0,l),l}function ln(e,t,a){var r=a.chart,n=r.dataset,i=a.axisrotated,l=a.stacked,o=(a.xscale,a.yscale,a.yaxiscolumnorder),s=a.renderer,c=a.seriesindex,d=l?r.dataObject.processedStackedData:t,u=(r.systemConf.chart.axes.yaxis[o||0].reversed,r.systemConf.chart.axes.xaxis.reversed),h=a.plotoptions,f=a.commonPlotOptions,g=h&&h.connector?ac(f.connector,h.connector,!0):f.connector,p=g.enabled?sn(d,a):[],m=lo().x(function(e,t){var a=s.getParamValue("x",e,c,null,s.commonOption),r=s.getParamValue("width",e,c,null,s.commonOption),n=u?1==t:0==t;return on(a,r,e,"x",n,i)}).y(function(e,t){var a=s.getParamValue("y",e,c,null,s.commonOption),r=s.getParamValue("height",e,c,null,s.commonOption);return on(a,r,e,"y",0==t,i)}),v=zt(e,"path",p,".","class","zcconnectorLine",null,function(e){return n.getX(e)});v.attr("d",function(e){return m(e)}).styles({fill:"none",stroke:g.strokeColor||"black","stroke-width":g.strokeWidth||1,"stroke-dasharray":O(g.dashStyle,g.strokeWidth||1),"stroke-opacity":0}).transition().duration(1e3).styles({"stroke-opacity":g.strokeOpacity||1})}function on(e,t,a,r,n,i){return"x"==r?i?n||a.isCascaded?a.isPositive?e+t:e:a.isPositive?e:e+t:n?e+t:e:i?n?e:e+t:n||a.isCascaded?a.isPositive?e:e+t:a.isPositive?e+t:e}function sn(e,t){for(var a=t.chart,r=a.dataset,n=t.yaxiscolumnorder,i=(t.stacked,Si.DataProcessor.helpers.isCatNull(r,"y",n)),l=cn,o=e.length-1,s=[],c=0;o>c;c++){var d=e[c],u=e[c+1],h=l(d,n),f=l(u,n),g=i(h),p=i(f);if(g)s.push([]);else if(p){for(var m=c+2,v=e[m],y=v&&l(v,n),x=!i(y);o>m&&!x;)m++,v=e[m],y=v&&l(v,n),x=!i(y);x&&s.push([d,v])}else s.push([d,u])}return s}function cn(e){return e.y}function dn(e,t,a){var r=a.chart,n=t,i=hn(n,a),l=a.plotoptions,o=a.commonPlotOptions,s=Wt(o,l,r,"waterfall"),c=s.enabled,d=l&&l.comparisonLine?ac(o.comparisonLine,l.comparisonLine,!0):o.comparisonLine;a.animationOptions=s;var u=lo().x(function(e){return e[0]}).y(function(e){return e[1]}),h=zt(e,"g",d.enabled?[1]:[],".","class","zccomparisonLines"),f=zt(h,"path",i,".","class","lines",null,function(e){return e.y});f.attr("d",function(e){return u(e)}).styles({fill:"none",stroke:d.strokeColor||"black","stroke-width":d.strokeWidth||1,"stroke-dasharray":O(d.dashStyle,d.strokeWidth||1),"stroke-opacity":0}).transition().duration(c?s.duration:0).styles({"stroke-opacity":d.strokeOpacity||1}),Gr(e,t,i,d,a),un(e,i,d,a)}function un(e,t,a,r){var n=r.chart,i=n.systemConf,l=r.axisrotated,o=r.animationOptions.enabled,s=10,c={format:{decimalPlaces:"2",signEnabled:!0,suffix:"%"}},d=zt(e,"g",a.enabled?[1]:[],".","class","zccomparisonLabels"),u=zt(d,"text",t,".","class","labels",null,function(e){return e.y});u.attrs({x:function(e){return l?e[1][0]+s:e[0][0]+(e[2][0]-e[0][0])/2},y:function(e){return l?e[1][1]+(e[2][1]-e[1][1])/2:e[1][1]-10}}).text(function(e){return Lr(c,e.y,Yo,n)}).styles({"text-anchor":l?"start":"middle",opacity:0}).transition().duration(o?r.animationOptions.duration:0).styles({opacity:1}),Bt(d,[a.label,i.chart,i.canvas,Us])}function hn(e,t){var a=t.chart,r=t.renderer,n=a.dataset,i=t.seriesindex,l=t.yaxiscolumnorder,o=t.stacked,s=a.dataObject.processedStackedData,c=(Si.DataProcessor.helpers.isCatNull(n,"y",l),e.length-1,t.axisrotated?r.getParamValue("height",e[0],i,null,r.commonOption):r.getParamValue("width",e[0],i,null,r.commonOption)),d=10*hl(c/10,1),u=t.chart.dataObject.stackedChart?t.chart.dataObject.groupedByStack.get(0).stackExtent:null,h=(pn(e),0),f=[];return e.map(function(a,n){var l=e[n];if(l.isCascaded&&e[n+1]){var c=gn(e,n+1,t);if(c){var g=c.maxPt,p=(yn(l,"x",t,u),yn(g,"x",t,u)),m=yn(g,"y",t,u),v=yn(l,"x",t,u),y=yn(l,"y",t,u),x=yn(l,"width",t,u),b=yn(l,"height",t,u),w=0==l.index||l.index==e.length-1,C=c.point,k=yn(C,"x",t,u),O=yn(C,"y",t,u),A=yn(C,"width",t,u),S=yn(C,"height",t,u),P=0==C.index||C.index==e.length-1,T=fn({x:v,y:y,width:x,height:b,unshared:w},{x:k,y:O,width:A,height:S,unshared:P},{x:p,y:m},d,t);if(o){var E=s[l.index],L=s[C.index];T.y=(L.stackedValue-E.stackedValue)/ul(E.stackedValue,L.stackedValue)*100}else T.y=(C.y-l.y)/l.y*100;if(C.percent=T.y,0==h&&0!=n){{r.getParamValue("y",e[0],i,null,r.commonOption)}l.percent=(l.y-e[0].y)/l.y*100}f.push(T)}h++}}),f}function fn(e,t,a,r,n){var i,l,o,s,c=n.axisrotated,d=n.chart.dataObject.stacked,u=n.chart.dataObject.waterfall.datalabelPadding,h=30,f=ul(a.x,d?t.x:t.x+t.width),g=hl(a.y,t.y),p=e.unshared?e.width/2:e.width/2+e.width/4,m=t.unshared?t.width/2:t.width/4,v=e.unshared?e.height/2:e.height/4,y=t.unshared?t.height/2:t.height/2+t.height/4;c?(i=[e.x+e.width+u,e.y+v],l=[f+u+h,e.y+v],o=[f+u+h,t.y+y],s=[t.x+t.width+u,t.y+y]):(i=[e.x+p,e.y-u],l=[e.x+p,g-u-h],o=[t.x+m,g-u-h],s=[t.x+m,t.y-u]);var x=[i,l,o,s];return x}function gn(e,t,a){var r=e[t],n=a.chart.dataObject.stackedChart?a.chart.dataObject.groupedByStack.get(0).stackExtent:null,i=0,l=r;if(r){for(;!r.isCascaded;){var o=mn(r,n);if(o>i&&(l=r,i=o),r=e[++t],!r)return}return{point:r,maxPt:l}}}function pn(e){var t=e.filter(function(e){return e.isCascaded});return t}function mn(e,t){return t?vn(e,t):e.y+e.y0}function vn(e,t){var a=e.index,r=t.filter(function(e){return e[0]==a}),n=r[0],i=n[1],l=n[2],o=lt(i)?l:l+fl(i);return o}function yn(e,t,a,r){var n=a.renderer,i=a.axisrotated,l=a.seriesindex;if(r){if(i&&"width"==t)return 0;var o=vn(e,r);return i&&"x"==t||!i&&"y"==t?n.commonOption.yscale(o):n.getParamValue(t,e,l,null,n.commonOption)}return n.getParamValue(t,e,l,null,n.commonOption)}function xn(e){var t=e.systemConf.chart.plot.plotoptions.waterfall,a=e.axes.rotated,r=e.systemConf,n=0,i=10,l=zt(e.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText");return e.seriesdata.forEach(function(e){if(e.plotoptions||!n){var i=e.plotoptions,o=i&&i.comparisonLine?ac(t.comparisonLine,i.comparisonLine,!0):t.comparisonLine,s=o.label;l.text("800%").style("fill","none"),Bt(l,[s,r.chart,r.canvas,Us]);var c=U(l.node());n=ul(a?c.width:c.height,n)}}),l.remove(),n+i}function bn(e,t){var a=e.dataObject.groupedDataBySplitAxes[t],r=e.systemConf.chart.plot.plotoptions.waterfall,n=a.some(function(t){var a=t.si,n=e.seriesdata[a].plotoptions,i=n&&n.comparisonLine?ac(r.comparisonLine,n.comparisonLine,!0):r.comparisonLine;return i.enabled});return n}function wn(e,t,a,r,n){var i=e[t.dataindex]||[];if(null!=i&&!(i instanceof Array))return null;if(!i.length)return null;if(n)n.constructor!=Array&&(t.color=[n]);else{t.color=[];var l=t.colorGamma||[.3,.9],o=[0,i.length-1],s=[+l[0],+l[1]],c=X(r,o,s);t.color=i.map(function(e,t){return c(t)})}var d,u=i.filter(function(e){return 0>e});if(u.length>0){d=i.slice();var h=d.indexOf(0);h>-1&&d.splice(h,1);var f=t.color;d=d.sort(io);for(var g=[],p=0;p<d.length;p++){var m=i.indexOf(d[p]);g.push(f[m])}t.color=g,d.splice(d.length-u.length,0,0),i=d}t.values=i;var v=Si.axis.threshold.overlay(a,"continous")(Pl,t,0,"y");return u.length>0&&(i=d),v}function Cn(e,t,a,r){var n=e.commonRendererProp().params,i=e.commonOption,l=n.chartObj,o=(l.plotarea,n.dataset),s=n.axisrotated,c=n.commonPlotOptions,d=i.yaxiscolumnorder,u=(n.color,c.dependency),h=u.enabled===!0,f=null,g=a.selectAll("g.dependencySeries").data(h?[t]:[]),p=g.enter().insert("g",":first-child").attr("class","dependencySeries").merge(g);if(p.exit().remove(),h&&it(u.sourceIndex)&&it(u.targetIndex)&&(f=Sn(t,+u.sourceIndex,+u.targetIndex)),f){var m=u.marker,v=u.link,y=it(v.padding)?v.padding:1,x=it(m.padding)?m.padding:y;x=hl(y,x);var b=zt(p,"g",[1],".","class","links"),w=zt(p,"g",[1],".","class","symbol"),C=zt(b,"path",f,".","class","link");C.attr("d",function(t){var a=kn(t,u,e,r);return On(a.type,a.end,a.start,y,x,n)(new Array(6))}).attr("stroke",function(e){var t=o.getY(e.source,d)[0],a=o.getY(e.target,d)[1],r=a>t;return r?v.errorStyle:v.strokeColor}).attr("stroke-width",v.strokeWidth).attr("fill","none");var k=u.marker.enabled===!0,O=zt(w,"g",k?f:[],".","class","arrow");u.marker.enabled&&O.each(function(){var t,a=(m.symbol,{inner:.4,outer:.7}),n=jl(this);n.attr("transform",function(a){var n,i,l=kn(a,u,e,r),o=l.type;return"SS"==o||"ES"==o?(n=s?l.start.x-x:l.start.x+l.start.width/2,i=s?l.start.y+l.start.height/2:l.start.y+l.start.height+x,t=s?"triangle-right":"triangle-up"):("EE"==o||"SE"==o)&&(n=s?l.start.x+l.start.width+x:l.start.x+l.start.width/2,i=s?l.start.y+l.start.height/2:l.start.y-x,t=s?"triangle-left":"triangle-down"),"translate("+n+","+i+")"}),F(n,null,m,{symbolSize:a,color:null,symbol:t})})}}function kn(e,t,a,r){return{start:Pn(e.source,a,r),end:Pn(e.target,a,r),type:t.link.type.toUpperCase()||"ES"}}function On(e,t,a,r,n,i){e=e.toUpperCase();var l=i.chartObj,o=i.axisrotated,s=l.systemConf.chart.axes.xaxis.reversed,c=null,d=null,u=null,h=An(e,o,t,a,r);return lo().x(function(i,l){switch(l){case 0:case 1:case 2:if(u=t,0==l)"SS"==e||"SE"==e?c=o?u.x:u.x+u.width/2:("EE"==e||"ES"==e)&&(c=o?u.x+u.width:u.x+u.width/2);else if(1==l)"SS"==e||"SE"==e?c=o?u.x-r:c:("EE"==e||"ES"==e)&&(c=o?u.x+u.width+r:c);else{var f;"SS"==e?(f=t.x-a.x,f=0>f?0:f,c=o?u.x-f-r:c):"EE"==e?(f=t.x+t.width-(a.x+a.width),f=f>0?0:f,c=o?u.x+u.width+r-f:c):"SE"==e?o?(c=u.x-r,d=h?u.y+u.height:a.y):c=s?c-u.width:c+u.width:"ES"==e&&(o?(c=u.x+r+u.width,d=h?u.y+u.height:a.y):c=s?c-u.width:c+u.width)}break;default:o&&(d=null),u=a,3==l?(o&&h&&(d=t.y+t.height),"SS"==e||"EE"==e?c=o?c:u.x+u.width/2:"SE"==e?c=o?u.x+u.width+r:c:"ES"==e&&(c=o?u.x-r:c)):4==l?"SE"==e?c=o?u.x+u.width+r:u.x+u.width/2:"ES"==e&&(c=o?c:u.x+u.width/2):"SS"==e||"ES"==e?c=o?u.x-n:c:("EE"==e||"SE"==e)&&(c=o?u.x+u.width+n:c)}return c}).y(function(i,l){return o?(d||u.y)+u.height/2:(0==l?"SS"==e||"SE"==e?d=t.y+t.height:("EE"==e||"ES"==e)&&(d=t.y):1==l?"SS"==e||"SE"==e?d+=r:("EE"==e||"ES"==e)&&(d=t.y-r):2==l?"SS"==e?d=t.y+t.height<a.y+a.height?a.y+a.height+r:d:"EE"==e&&(d=t.y>a.y?a.y-r:d):3==l?"SE"==e?d=h?a.y-r:d:"ES"==e&&(d=h?a.y+a.height+r:d):4==l?d+=0:"SS"==e||"ES"==e?d=a.y+a.height+n:("EE"==e||"SE"==e)&&(d=a.y-n),d)}).curve(Nl("linear"))}function An(e,t,a,r,n){var i=!1;switch(e){case"SS":case"EE":i=!0;break;case"SE":i=t?a.x>r.x+r.width:a.y+a.height<r.y;break;case"ES":i=t?a.x+a.width<r.x-2*n:a.y>r.y+r.height}return!i}function Sn(e,t,r){var n=[];return e.forEach(function(i){var l=i[t];e.forEach(function(e){e!==i&&it(l)&&a(l)&&-1!==l.indexOf(e[r])&&n.push({source:i,target:e})})}),n.length?n:void 0}function Pn(e,t,a){var r,n,i,l,o=t.commonOption;return i=t.getParamValue("x",e,a,null,o),l=t.getParamValue("y",e,a,null,o),r=t.getParamValue("width",e,a,null,o),n=t.getParamValue("height",e,a,null,o),{x:i,y:l,width:r,height:n}}function Tn(e,t,a,r,n){var i,l,o,s,c=r.commonRendererProp().params,d=c.chartObj,u=c.yaxiscolumnorder,h=c.axisrotated,f=c.dataset,g=n&&n.yscale.range()[1],p=e[n.levelMarker.dataindex],m=f.getY(e,u),v=m[0],y=m[1],x=y-v,b=x*p/100,w=n.yscale(v+b),C=h?0:n.levelMarkerPadding,k=h?n.levelMarkerPadding:0;i=d.dataObject.getTransRectValue("x",e,t,a,n)+C;var O=n.yscale(null==n.hasNegValue?f.getY(e,n.yaxiscolumnorder,0):n.hasNegValue);return n.axisrotated?(l=r.getParamValue("y",e,t,a,n)+k,o=n.stacked?fl(n.yscale(e.y+e.y0)-n.yscale(e.y0))+n.addRangeBand(n.yscale):(fl(g-O-(g-w))||0)+n.addRangeBand(n.yscale),s=n.levelMarkerWidth||n.barWidth):(l=w,o=n.levelMarkerWidth||n.barWidth,s=n.stacked?fl(O-n.yscale(e.y+e.y0)-(O-n.yscale(e.y0)))+n.addRangeBand(n.yscale):fl(O-w)+n.addRangeBand(n.yscale)),{x:i,y:l,width:o,height:s}}function En(e,t,a,r,n,i,l){var o=a.commonRendererProp().params,s=a.commonOption,c=o.chartObj,d=c.plotarea,u=o.dataset,h=o.axisrotated,f=o.color,g=s.levelMarkerWidth,p=s.charttype,m="bullet"==p,v="gantt"==p,y=m?o.xscale.bandwidth():g,x=a.bandwidth1(),b=rt(n.size,g-2*rt(n.padding,s.padding/2)),w=zt(e,"g",[t],".","class","markers"+l,null,function(e){return[u.getX(e)]}),C=ic(n.strokeWidth,1);w.attrs({"class":"markers"+l,transform:"translate("+d.left+","+d.top+")","stroke-width":C,"stroke-dasharray":O(n.dashStyle,rt(n.outerStrokeWidth,1)),"stroke-linecap":A(n.lineCap,n.dashStyle),fill:n.color,stroke:n.color});var k=zt(w,"g",t,null,null,null,null,function(e){return u.getX(e)});k.enter().append("g");var S="line"===n.symbol?{inner:0,outer:1}:{inner:.6,outer:1},P=n.size;k.each(function(e,t){var s=jl(this),d=i?c.seriesColor[t%c.seriesColor.length]:f;s.attrs({transform:function(e,t){var i=0,s=0;if(v){var c=Ln(e,r,t,a);return 0===l?(i=c.x+c.width/2,s=c.y-10*n.size/2):(i=c.x+c.width/2,s=c.y+c.height+10*n.size/2),"translate("+(h?s:i)+","+(h?i:s)+")"}return i=x(u.getX(e))+y/2,s=o.yscale(e[n.dataindex]),null==e[n.dataindex]?null:"translate("+(h?s:i)+","+(h?i:s)+") rotate("+(h?90:0)+")"}}).style("display",function(e){return null==e[n.dataindex]&&m?"none":null}),n.size=it(P)?m?hl(b,y/10):b:b/10,F(s,null,n,{symbolSize:S,color:v?d:null})}),n.size=P,v&&(a.markerProperties={subseriesIndex:r})}function Ln(e,t,a,r){var n,i,l,o,s=r.commonOption;return l=r.getParamValue(s.axisrotated?"y":"x",e,t,a,s),o=r.getParamValue(s.axisrotated?"x":"y",e,t,a,s),n=r.getParamValue(s.axisrotated?"height":"width",e,t,a,s),i=r.getParamValue(s.axisrotated?"width":"height",e,t,a,s),{x:l,y:o,width:n,height:i}}function zn(e){return/(left|right)/.test(e)?"bottom":"left"}function Dn(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function Rn(e,t,r,n){var i=r.datatype,l=r[i],o="threshold",s=!1;return e.replace(el,function(e,r){var c="";return a(t[r])?(c=Lr(l,t[r][0],i,n,o,s),c+=" - "+Lr(l,t[r][1],i,n,o,s)):c=Lr(l,t[r],i,n,o,s),c})}function jn(e,t){var a=(e.data||e).slice(),r=a.splice(0,a.length);return null!=t&&r.push(t),r}function Mn(e,t,a,r,n){"plot"==n?e.plotValues.push({data:t,text:a}):e[n+"Values"].push({id:t,text:a,x:r[0],y:r[1]})}function In(e,t,a,r,n,i){return e+a>n&&(e-=e+a-n),t+r>i&&(t-=t+r-i),[e,t]}function Bn(e,t,a){var r=e[a+"Values"];return r.indexOf(r.filter(function(e){return"plot"===a?n(e.data)==n(t):e.id==t})[0])}function Hn(e,t){var a=Vn();a.changedTouches&&(a=a.touches[t]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();n.x=a.clientX,n.y=a.clientY,n=n.matrixTransform(e.getScreenCTM().inverse());var i=[n.x,n.y];return Fn(d3.event)&&!Gs.ANDROID&&Gs.uiwebview&&(i[0]+=window.pageXOffset,i[1]+=window.pageYOffset),i}var l=e.getBoundingClientRect();return[a.clientX-l.left-e.clientLeft,a.clientY-l.top-e.clientTop]}function Vn(){for(var e,t=d3.event;e=t.sourceEvent;)t=e;return t}function Fn(e){return e.touches}function Nn(e,t){function a(t){var a=e.container.selectAll(".seriesholder"),i=a.attr("clip-path").replace(/url\(|\)|\"/gi,""),l=jt(a).translate,o=r?l[0]:n.left-t,s=r?n.top-t:l[1];a.attr("transform","translate("+o+","+s+")"),e.container.selectAll(".labelholder").attr("transform","translate("+o+","+s+")"),e.container.selectAll(".eventgroup").attr("transform","translate("+(r?0:-t)+","+(r?-t:0)+")"),e.container.selectAll("rect.eventhandler").attr("transform","translate("+(r?0:t)+","+(r?t:0)+")"),(Gs.SAFARI?e.svg:Us.patternSVG).selectAll(i).selectAll("rect").attrs(r?{y:t}:{x:t});var c=r?{y:n.top-t,height:n.height+t}:{x:n.left-t,width:n.width+t};e.eventHandler.trackerElement.attrs(c).attr("clip-path","url("+i+")"),_n(e);var d={name:"rect_highlight",id:e.id},u={chartObj:e};r?(d.x=-n.left,d.y=t,d.width=n.width+n.left,d.height=n.height):(d.x=t,d.y=n.top,d.width=n.width,d.height=n.height);var h=Qs.get(tc,"rect",d,u);e.container.selectAll("#zcareahighlight").attr("clip-path","url(#"+h+")")}if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){var r=e.dataObject.getAxisRotated(),n=e.plotarea,i=Yn(e,"width")-n.width,l=Yn(e,"height")-n.height,o=(e.container.selectAll(".x-axis-0"),e.container.selectAll(".d3container").selectAll(".zohocharts_scroll")),s=+o.attr("scrollbarSize"),c={name:"rect_axis",id:e.id};if(r?(e.scrolledY=e.scrolledY||0,c.x=-n.left,c.y=0,c.width=n.width+n.left,c.height=n.height):(e.scrolledX=e.scrolledX||0,c.x=0,c.y=0,c.width=n.width,c.height=e.canvasarea.height),_n(e),o.styles({left:n.left+Al,top:n.top+Al,height:n.height+(r?0:s)+Al,width:n.width+(r?s:0)+Al}).on("scroll",function(){var t=d3.event.srcElement||d3.event.target,n=r?t.scrollTop:t.scrollLeft;e.scrolledY=r?n:0,e.scrolledX=r?0:n,d3.event.clientX=d3.event.clientX||0,d3.event.clientY=d3.event.clientY||0,e.eventHandler.mouseOut(),a(n)}),o.style(r?{"overflow-y":"auto","overflow-x":"hidden"}:{"overflow-x":"auto","overflow-y":"hidden"}),o.selectAll(".child").styles({height:n.height+(r?l:0)+Al,width:n.width+(r?0:i)+Al,"pointer-events":Sl,margin:0,padding:0,"background-color":Pl}),"addorremoveseries"!==t){var d=o.node();d.scrollLeft=0,d.scrollTop=0}var u=e.eventHandler,h={target:"plot",chartObj:e},f={click:u.click,dblclick:u.doubleclick,contextmenu:u.contextMenu},g={mousemove:u.mouseMove,mouseout:u.mouseOut};Ar(o,f,null,"chart"),Ar(o,g,null,"chartmove");var p={tap:u.click,dbltap:u.doubleclick,singletouchmove:u.mouseMove,touchend:u.mouseOut};Ar(o,{},p,h);var m=r?e.scrolledY:e.scrolledX;m&&"addorremoveseries"===t&&a(m)}}function Yn(e,t,a){a=a||e.plotarea;var r=e.systemConf.chart[t];return null==r||isNaN(r)?a[t]:ul(a[t],+r)}function _n(e){var t,a=e.dataObject.getAxisRotated(),r=e.plotarea,n=a?e.scrolledY:e.scrolledX;if(a)t={x:-r.left,y:n,width:r.width+r.left,height:r.height};else{var i=e.dataObject.hierarchical,l=0;if(i)for(var o=0;o<e.axes.x.count;o++){var s=Pa(e,"x",o);l+=s.ticks.preCalcAxisLen}else l=e.axes.x.ticks.preCalcAxisLen;t={x:n,y:-r.height,width:r.width,height:l+e.plotarea.height}}t.name="rect_axis",t.id=e.id;var c={chartObj:e},d=Qs.get(tc,"rect",t,c),u=e.container.selectAll("g.x-axis").selectAll(function(){return this.childNodes});return u.filter(function(){var e=d3.select(this),t=jt(e).translate,i=a?t[0]:r.left-n,l=a?r.top-n:t[1];e.attrs({transform:"translate("+i+","+l+")","clip-path":"url(#"+d+")"}),e.selectAll("g.axisgroup").attr("clip-path","")}),d}function Wn(e){var t=-e.scrolledX||0,a=-e.scrolledY||0;return{left:t,top:a,right:Yn(e,"width"),bottom:Yn(e,"height")}}function Xn(e){if(e.dataObject.noofBarEnabledSeries){var t;if(e.seriesdata.some(function(a,r){return(t=Si.labelRenderer.bar.getVAlign(e,r,Jc))===bs}),t===bs)return!0;var a=e.dataObject.groupedByStack;return a.keys().some(function(r){return(t=Si.labelRenderer.bar.getVAlign(e,a.get(r).stackLabelIndex,ed))===bs}),t===bs}}function Un(e,t,a,r,n){var i=r.length;return e||function(e,r){var l=t.reverseColor?i-1-r:(a.isAxisCategory||a.isNonAxisMultiSeriesCategory||a.dataObject.isPolarAxisCategory)&&!t.multiColoring?n:r;return ua(a,l,e&&e.data?e.data:e,n)}}function Gn(e,t){return ac(t.systemConf.chart.plot.datalabels.boundBox,e.boundBox,!0)}function Zn(e,t){return at([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"show")===!0}function Qn(e,t){return rt(at([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"padding"),2)}function qn(e,t){return rt(at([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"strokeWidth"),1)}function Kn(e,t,a,r){var n=2*(a||0)+r;return ul(n-e-2*t,0)}function $n(e){e=e||{};var t=e.enabled===!0,a={};return a.enabled=t,a.width=t?it(e.width)?+e.width:10:0,a.height=t?it(e.height)?+e.height:4:0,a}function Jn(e,t,a,r,n,i,l,o,s){function c(a,r,n){var i=r[n-1].moves[n-1?5:0],l=r[n].moves[0],o=r[n-1].moves[n-1?6:1],c=r[n].moves[1],d=(i+l)/2,f=(o+c)/2;if(t=r[n].moves[1],e=r[n].moves[0],it(s)&&s){var g,p=s>0?1:-1,m=a===ys?i-l:l-i;g=(m-u)/2-s*p>0?s:(m-u)/2*p,d-=g}switch(a){case ys:return[[d-u/2,t],[d,t+h],[d+u/2,t]];case xs:return[[d+u/2,t],[d,t-h],[d-u/2,t]];case ms:return[[e,f-u/2],[e-h,f],[e,f+u/2]];case vs:return[[e,f+u/2],[e+h,f],[e,f-u/2]]}}var d=o.enabled,u=o.width,h=o.height,f=Mt(e,t,a+2*i,r+2*i,n);if(d&&l){var g=l===ys?7:l===xs?3:l===vs?5:1,p=Ft(f),m=c(l,p,g);ti(p,g,m),f=ei(p)}return f}function ei(e){return e.reduce(function(e,t){return e+t.function.toUpperCase()+(t.moves&&t.moves.join(" ")||"")},"")}function ti(e,t,a){a.forEach(function(a){e.splice(t,0,{"function":"l",moves:a})})}function ai(e,t){var a=t.systemConf;return+Si.utils.getVal(at([e,a.chart.plot.datalabels,a.chart,a.canvas],"fontSize"))}function ri(e,t){var a=t.systemConf;return Si.utils.getVal(at([e,a.chart,a.canvas,Us],"fontFamily"))}function ni(e,t,a,r){var n=t&&t.datalabels?ac(e.datalabels,t.datalabels,!0):e.datalabels;return a&&fi(n,a,r),n}function ii(e,t,r,n,i,l,o){var s=r.systemConf;return a(n)&&it(l)&&(n=n[l]),Bt(e,[{fontColor:li(s,n,t,r,i,l,o)},t,s.chart.plot.datalabels,s.chart,s.canvas,Us])}function li(e,t,a,r,n,i,l){var o=a.fontColor;if("function"==typeof o){var s=tt(o,t,r);if(it(s))return s}var c,d=nc(r.systemConf,"chart.plot.datalabels")||{},u=d.fontColor,h=r.chartTypes[i||0],f=h.name,g=h.value,p=it(e.legend.imagePallete),m=r.dataObject.isstacked(g),v=ir(g)&&m&&l!==!0,y=ur(g);if(o===ll&&u===ll){if(n&&p)return"#444444";if(n&&/(pie|funnel|sunburst|pyramid|packedbubble)/gi.test(f)||v||y||g===Si.charttype.treemap)return ft(t)}return c=p||(it(o)||null!==u)&&null!==o?o:t,c||ic(d.fontColor,e.chart.fontColor,e.canvas.fontColor,Us.fontColor)}function oi(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2)}function si(e,t){return!(e.x1<t.x1||e.y1<t.y1||e.x2>t.x2||e.y2>t.y2)}function ci(e,t){return Kt(t,Jc)?it(t.dataset.labelidx)||at([e,t.systemConf.chart.plot.datalabels],"show")===!0:!1}function di(e,t){return t.dataObject.noofBarEnabledSeries&&t.dataObject.isstacked()&&!t.dataObject.isStackedPercentChart&&e&&e.show}function ui(e,t){var a=t.systemConf.chart.plot.plotoptions[e].datalabels||{},r=$(t.userdata,"chart.plot.plotoptions."+e+".datalabels",!0)||{},n=r.showAs||a.showAs;return n===qc||n===Kc||n===$c||al.test(n)}function hi(e,t,a,r,n,i){var l=+a[0],o=+a[1],s=t.plotarea,c={left:-r,right:-r,top:0,bottom:0},d="..",u=ys;n=n||{left:-l,top:-o,right:s.width-l,bottom:s.height-o},e.each(function(){var e=U(this),t={left:e.x+(i?i[0]:0),top:e.y+(i?i[1]:0),width:e.width,height:e.height};Dt(this,this.textContent,t,n,u,d,c)})}function fi(e,t,a){var r,n,i,l,o,s,c=t.chartTypes[a].name,d=$(t.userdata,"chart.plot.plotoptions."+c+".datalabels",!0)||{};
d.showAs&&(e.showAs=d.showAs||e.showAs),(r=d.innerLabel)?(l=e.innerLabel,l.showAs=r.showAs||l.showAs,(n=r.parentLabel)&&(o=e.innerLabel.parentLabel,o.showAs=n.showAs||o.showAs)):(i=d.stackLabels)&&(s=e.stackLabels,s.showAs=i.showAs||s.showAs)}function gi(e,t,r,n,i,l,o){var s=e.seriesdata[l].yaxiscolumnorder||[0,0],c=e.chartTypes[l],d=Si.DataProcessor.helpers,u=e.dataObject,h=e.systemConf.metadata.columns;t=t||{stacked:!1,commonPlotOptions:e.systemConf.chart.plot.plotoptions[c.name],yaxiscolumnorder:d.getParsedYAxisOrder(s)};var f,g=e.dataset,m=t.yaxiscolumnorder,v=t.stacked,y=t.yscale,x=fr(c.value),b=rt(t.commonPlotOptions.dataindex,3),w=e.renderer[0]&&e.renderer[0].getProcessedNode,C=n==Jc&&it(g.labelidx),k=C&&it(h[g.labelidx]),O=C&&J(h[g.labelidx])?g.labelidx:r.showAs,A=k?"label":O==Wc?Wc:O==Uc&&it(g.zidx)?Uc:Xc,S=h[g.getColumnIdx(A,s)].datatype,P=g.getColumn(A,s)[S],T=k||O!==qc&&O!==Kc&&O!==$c?Lr:Mr,E=-1!=[Wc,Xc,Uc,qc,Kc,$c].indexOf(O),L="function"==typeof O||"function"==typeof window[O];if(x&&!L&&(O===qc||O===Kc||O===$c)){var z=h.filter(function(e){return e.dataindex===b})[0];z=it(z)?z:g.getColumnIdx(A,s),S=z.datatype,P=z[S]}k||E||L||(f=pi(O));var D=function(t,a){t=n==ed?t[1]:t;var r=u.isHierarchy&&w&&w(t);if(k)return u.isHierarchy?g.getDataPointValue(e,t,e.userdata.metadata.axes.label[0],l,!1,n,El):T(P,g.getDataLabelValue(t),S,e,n);if(E){var s=El;switch(O){case qc:case Kc:case $c:var c=i,d=n==ed?t:v||u.isPercentChart?t.y:x?t[b]:r&&r.children&&r.value||t.value||g.getY(t,m,o);if(!v||u.isStackedPercentChart||u.isPercentChart||n!=Jc){if("function"==typeof i)c=i(t,O);else if(!it(c))if(O!==$c&&y)c=y.domain()[1];else{var h=Fc(e,m);h=u.isPercentChart||u.isStackedPercentChart||v?h[m]:h,c=0>d&&d>=h[0]?-h[0]:h[1]}}else c=p(e,l,t,O);s=d/c*100||0;break;case Wc:s=r&&r.children?ll:g.getActualX(t);break;case Uc:it(g.zidx)&&(s=g.getZ(t));break;default:s=n==ed?t:u.isHierarchy?r&&r.children&&r.value||t.value||g.getY(t,m):g.getY(t,m,o)}return T(P,s,S,e,n)}return L?tt(O,t,a,e):g.getCustomizedVal(e,f,l,El,El,t,n,El,"html"!==D.contentType)};return D.contentType=k||E||!L&&!a(O)&&-1==O.indexOf("<tspan")?"text":"html",D.multiLine="html"===D.contentType&&!L&&a(O)&&O.length>1,D.hasShowAsFunction=L,D}function pi(e){var t="";if(a(e))e.forEach(function(e,a){t+="<tspan class='zcTspan'"+(a?" dy='1.1em'":"")+">"+mi(e)+"</tspan>"});else{var r=e.indexOf("<tspan");t=-1!=r?"<tspan class='zcTspan'>"+mi(e)+"</tspan>":e}return t}function mi(e){var t="",a=0,r=8,n={"<tspan":[],"</tspan>":[]};return e.replace(/<tspan|<\/tspan>/g,function(){n[arguments[0]].push(arguments[1])}),n["<tspan"].forEach(function(i,l){a!=i&&(t+="<tspan>"+e.substring(a,i)+"</tspan>"),t+=e.substring(i,a=n["</tspan>"][l]+r)}),a!=e.length&&(t+="<tspan>"+e.substring(a,e.length)+"</tspan>"),t}function vi(e,t){e.selectAll("tspan.zcTspan").attr("x",t)}function yi(e,t,a,r,n,i,l,o){var s=+a[0],c=+a[1],d=t.plotarea,u={left:-r,right:-r,top:0,bottom:0},h="..",f=ys;l=l||0,n=n||{left:-s+l,top:-c,right:d.width-s-l,bottom:d.height-c},e.each(function(){var e=this.childNodes,t=0,a=U(this),r=this.getComputedTextLength();a.x+r>n.right&&(r-=a.x+r-n.right+l),a.x<n.left&&(r-=n.left-a.x+l);for(var s=0;s<e.length;s++){for(var c=e[s],d=c.childNodes,g=c.getComputedTextLength(),p="",m=0;m<d.length;m++){var v=d[m].textContent;p+=v,i[t+m].textLength=v.length}if(g-r>1){var y=i[t].bbox,x={left:y.x+(o?o[0]:0),top:y.y+(o?o[1]:0),width:g,height:y.height};Dt(d[0],p,x,n,f,h,u,null,null,!1);var b=d[0].innerHTML;".."===b&&(b="");for(var m=0,w=0;m<d.length;m++){var C=i[t+m].textLength;d[m].innerHTML=b.substring(w,w+C),w+=C}}t+=d.length-1}})}function xi(e,t){var a=e.selectAll(function(){return this.childNodes}),r=e.attr("text-anchor"),n=+e.attr("x"),i=+e.attr("y"),l=[];return a.each(function(){for(var e=d3.select(this),a=parseFloat(e.attr("dy")||0),o=this.childNodes,s=this.getComputedTextLength(),c="middle"===r?-s/2:"end"==r?-s:0,d=0;d<o.length;d++){var u=o[d].getComputedTextLength(),h={dy:d?0:a,dx:c+("middle"===r?u/2:0),bbox:{x:n+c,y:i+(d?0:a)*t,width:o[d].getComputedTextLength(),height:t},style:o[d].style,text:o[d].textContent};l.push(h),c+=u}}),l}function bi(e,t){return t=t||[],e.each(function(){var e=jl(this).selectAll(function(){return this.children});if(e.size())e.each(function(){bi(jl(this),t)});else{var a=U(this),r=this.nodeName;if(r===Wo){if(""===this.textContent)return;var n=wi(this),i=Ya(n),l=Ya(this);a.x+=l.left-i.left,a.y+=l.top-i.top,a.width=l.width,a.height=l.height}t.push({node:this,nodeName:r,bb:a})}}),t}function wi(e){return e.parentNode.nodeName!==_o?wi(e.parentNode):e.parentNode}function Ci(e,t,a,r){for(var n=[],i=[],l=[],o=a-r,s=function(e,t){return e.dist-t.dist},c=function(e,t){return e[0].y1-t[0].y1},d=o,u=0;a>u;u++)e[u]||n.push(u);e.forEach(function(e){e.sort(s)}),e.forEach(function(e){e.forEach(function(e,t){0!=t&&(l[t]=l[t]||[],l[t].push(e))})}),l.forEach(function(e){e.sort(s)}),l.forEach(function(e){e.forEach(function(e){i.push([e])})}),i.forEach(function(e){o>0?o--:e[0].hide=!0}),i=i.slice(0,d),i.sort(c),i.forEach(function(a){var r=a[0],i=r.y2-r.y1,l=ul(cl((r.y1-t)/i),0);if(e[l]){for(var o,s=n[0],c=0,d=0;d<n.length;d++){var u=fl(t+n[d]*i-r.y1);null==o&&(o=u),o>u&&(o=u,s=n[d],c=d)}if(l>s){n.splice(c,1);var h=s;e.forEach(function(t,a){var n=t[0];a>s&&n.y1<r.y1&&(e[h]=t,h=a)}),e[h]=[r]}else{n.splice(c,1);for(var h=[r],f=l;s>=f;f++)if(e[f]){if(e[f][0].y1>r.y1){var g=e[f];e[f]=h,h=g}}else e[f]=h}}else e[l]=a}),e.forEach(function(r,n){var i=r[0],l=i.y2-i.y1,o=t+n*l-i.y1;i.translate=fl(o)<l&&a>n+1&&!e[n+1]&&0>o?0:o}),e.forEach(function(r,n){var i=r[0],l=i.y2-i.y1,o=t+n*l-i.y1;i.translate=fl(o)<l&&a>n+1&&(!e[n+1]||!e[n+1][0].translate)&&0>o?0:o})}function ki(e,t,a,r){return e.forEach(function(e){var n=e.y2-e.y1,i=ul(0,cl((e.y1-r)/(e.y2-e.y1)));e.dist=e.y1<r?r-e.y1:e.y1-(r+i*n),a[i]||(a[i]=[],t++),a[i].push(e)}),t}function Oi(e,t,a,r,n,i,l,o,s){var c=5;if(!e.hide){null==t&&(t=cl((r-a)/(e.y2-e.y1)));var d=s?null==n?r-e.y2:i[n].y1-e.y2:null==n?e.y1-a:e.y1-i[n].y2;o+=null!=n&&oi(e,i[n])&&-c>d?fl(d):0,n=l,i.push(e),l++}return{prev:n,count:l,totalslot:t,need:o}}function Ai(e,t,a){var r=e.label||{},n=this,i=this.dataset,l=this.plotarea,o=this.systemConf,s=t.commonOption,c=t.commonRendererProp().params,d=c.axisrotated,u=c.yscale,h=c.xscale.bandwidth(),f=o.chart.axes.yaxis[0].orient||(this.axes.rotated?ys:ms),g=e.dataindex,p=e.enabled===!0&&r.enabled===!0&&it(g),m=zt(this.staticPaneSVG.selectAll("g.threshold"),"g",p?[1]:[],".","class","targetLabel");if(m.attr("transform","translate("+l.left+","+l.top+")"),p){var v=r.hAlign,y=r.vAlign,x=rt(r.padding,2),b="fixed"===r.position,w=10*rt(e.size,(s.levelMarkerWidth-2*rt(e.padding,s.padding/2))/10),C=("line"===e.symbol?rt(e.outerStrokeWidth,1):w)/2;d?(v=v||ps,y=y||(f===ys?xs:ys)):(v=v||(f===ms?vs:ms),y=y||ps);var k=this.userdata.metadata.columns,O=k.filter(function(t){return t.dataindex===e.dataindex}),A=O.length?O[0]:k[i.getColumnIdx("y",0)],S=A.datatype,P=A[S],T={left:0,right:0,top:0,bottom:0};d?T.top=T.bottom=l.adjust:T.left=T.right=l.adjust,b||o.chart.axes.yaxis[0].show!==!0||(T[f]=0);var E=n.container.node().getBoundingClientRect(),L=E.left+n.plotarea.left,z=E.top+n.plotarea.top,D=Wn(n),R=D.left-T.left,j=D.top-T.top,M=D.right+T.left+T.right,I=D.bottom+T.top+T.bottom;Bt(m,[r,o.chart,o.canvas,Us]);var B=function(e){return i.getX(e)},H=zt(m,"text",a,null,null,null,null,B);H.each(function(e){var t=e[g];if(it(t)){var a,l,o,c,f=i.getX(e),p=it(r.text)?i.getCustomizedVal(n,r.text,0,null,null,e,"targetLabel"):Lr(P,t,S,n,"targetLabel"),m=0>t,k=m?-1:1,O=s.bandwidth1(f)+h/2,A=u(t);d?(a=A,l=O,y===ys?(l+=w/2,v===ps&&(o="1em",l=O+(b?h:w)/2)):y===ps?o="0.3em":y===xs&&(l-=w/2,v===ps?(o="-0.3em",l=O-(b?h:w)/2):o="1em"),v===ps?(c="middle",l-=y===ps?0:y===xs?x*k:-(x*k)):v===vs?(a+=(x+C)*k,c=m?"end":null):(a-=(x+C)*k,c=m?null:"end")):(a=O,l=A,v===vs?a+=(b?h:w)/2:v===ps?c="middle":v===ms&&(a-=(b?h:w)/2,c="end"),y===ps?(a+=v===ps?0:v===vs?x:-x,o="0.3em"):y===xs?(l-=(x+C)*k,o="-0.3em"):(l+=(x+C)*k,o="1em")),jl(this).attrs({transform:"translate("+a+","+l+")","text-anchor":c,dy:o}).text(p);var T=this.getBoundingClientRect(),E=T.left-L,D=E+T.width,B=T.top-z,H=B+T.height,V=a+(R>E?R-E:D>M?-(D-M):0),F=l+(j>B?j-B:H>I?-(H-I):0);V!=a&&(a=V),F!=l&&(l=F),jl(this).attr("transform","translate("+a+","+l+")")}})}}var Si={};Si.version="1.10",Si.versionName="Euclid",Si.d3Version="4.12.0",Si.model=function(){},Si.axis=function(){},Si.legend=function(){},Si.renderer=function(){},Si.dataset=function(){},Si.scale=function(){},Si.events=function(){},Si.plot=function(){},Si.plot.canvas=function(){},Si.charttype={};var Pi=Si.charttype.line=11,Ti=Si.charttype.pie=8,Ei=Si.charttype.bar=9,Li=Si.charttype.stkdbar=10,zi=Si.charttype.scatter=12,Di=Si.charttype.area=14,Ri=Si.charttype.stkdarea=15,ji=Si.charttype.bubble=20,Mi=Si.charttype.packedbubble=19,Ii=Si.charttype.funnel=7,Bi=Si.charttype.web=16,Hi=Si.charttype.sunburst=17,Vi=Si.charttype.pyramid=13,Fi=Si.charttype.dial=18,Ni=Si.charttype.bullet=6,Yi=Si.charttype.arearange=21,_i=Si.charttype.bubblepie=5,Wi=Si.charttype.gantt=24,Xi=Si.charttype.treemap=4,Ui=Si.charttype.heatmap=3,Gi=Si.charttype.dotgrid=26,Zi=Si.charttype.waterfall=27,Qi=Si.charttype.wordcloud=2;Si.charttypenames=d3.map(),Si.charttypenames.set(Si.charttype.line,"line"),Si.charttypenames.set(Si.charttype.pie,"pie"),Si.charttypenames.set(Si.charttype.bar,"bar"),Si.charttypenames.set(Si.charttype.stkdbar,"bar"),Si.charttypenames.set(Si.charttype.scatter,"scatter"),Si.charttypenames.set(Si.charttype.area,"area"),Si.charttypenames.set(Si.charttype.funnel,"funnel"),Si.charttypenames.set(Si.charttype.web,"web"),Si.charttypenames.set(Si.charttype.stkdarea,"area"),Si.charttypenames.set(Si.charttype.sunburst,"sunburst"),Si.charttypenames.set(Si.charttype.pyramid,"pyramid"),Si.charttypenames.set(Si.charttype.bubble,"bubble"),Si.charttypenames.set(Si.charttype.dial,"dial"),Si.charttypenames.set(Si.charttype.packedbubble,"packedbubble"),Si.charttypenames.set(Si.charttype.bullet,"bullet"),Si.charttypenames.set(Si.charttype.arearange,"arearange"),Si.charttypenames.set(Si.charttype.gantt,"gantt"),Si.charttypenames.set(Si.charttype.bubblepie,"bubblepie"),Si.charttypenames.set(Si.charttype.treemap,"treemap"),Si.charttypenames.set(Si.charttype.heatmap,"heatmap"),Si.charttypenames.set(Si.charttype.dotgrid,"dotgrid"),Si.charttypenames.set(Si.charttype.waterfall,"waterfall"),Si.charttypenames.set(Si.charttype.wordcloud,"wordcloud"),Si.chartcategory={},Si.chartcategory.axis=[Pi,Di,zi,Ri,Ei,Li,ji,Ni,Yi,_i,Wi,Ui,Zi],Si.chartcategory.nonaxis=[Ti,Ii,Vi,Fi,Gi],Si.chartcategory.nonaxismultiseries=[Bi,Hi,Mi,Xi,Qi],Si.chartcategory.hierarchy=[Mi,Hi,Xi],Si.chartcategory.continous=[Pi,Di,zi,Ri,ji,Yi,_i],Si.chartcategory.discrete=[Ti,Ei,Li,Hi,Ii,Vi,Fi,Ni,Wi,Ui,Zi],Si.chartcategory.dotPlot=[zi,ji],Si.chartcategory.piePlot=[Ti,_i],Si.chartcategory.zaxis=[ji,_i,Ui],Si.rename=function(t){return null!=t&&""!=t&&"string"==typeof t?(e[t]=Si,e.$ZC=null,delete e.$ZC,!0):!1},Si.setLegendColorPallete=function(e,t){Si.legutil.colorpallete.set(e,t)},Si.getLegendColorPallete=function(e){return Si.legutil.colorpallete.get(e)},Si.setLegendPatternPallete=function(e,t){Si.legutil.patternPallete.set(e,t)},Si.getLegendPatternPallete=function(e){return Si.legutil.patternPallete.get(e)},Si.setLegendImagePallete=function(e,t){Si.legutil.imagePallete.set(e,t)},Si.getLegendImagePallete=function(e){return Si.legutil.imagePallete.get(e)},Si.setTheme=function(e,t){Si[e]=t},Si.getTheme=function(e){return Si[e]};var qi={},Ki={},$i={},Ji={},el=/\{\{val\((\d+)\)\}\}|\{\{col\((\d+)\)\}\}|\{\{per\((\d+)\)\}\}|\{\{splitper\((\d+)\)\}\}|\{\{maxper\((\d+)\)\}\}|\{\{clr\}\}/gi,tl=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,al=/\{\{per\((\d+)\)\}\}|\{\{splitper\((\d+)\)\}\}|\{\{maxper\((\d+)\)\}\}/gi,rl=/(illuminate|moody|flip|boxShadow|invert|ridge)/,nl=window.console,il=document.createElement("canvas").getContext("2d");!function(){function e(e,t,a){return function(){var r=a.apply(t,arguments);return r===t?e:r}}d3.rebind=function(t,a){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=e(t,a,a[r]);return t}}();var ll,ol=Math,sl=ol.round,cl=ol.floor,dl=ol.ceil,ul=ol.max,hl=ol.min,fl=ol.abs,gl=ol.pow,pl=ol.sqrt,ml=ol.cos,vl=ol.sin,yl=ol.log,xl=ol.tan,bl=ol.atan2,wl=ol.LN10,Cl=ol.random,kl=ol.PI,Ol=Number.MAX_SAFE_INTEGER||9007199254740991,Al="px ",Sl="none",Pl="transparent",Tl="pointer",El=null,Ll=null,zl=0,Dl=-9999,Rl=function(e){return"number"==typeof e&&!isNaN(e)},il=document.createElement("canvas").getContext("2d"),jl=d3.select,Ml=d3.selectAll,Il=d3.min,Bl=d3.max,Hl=function(){var e={top:d3.axisTop,bottom:d3.axisBottom,left:d3.axisLeft,right:d3.axisRight};return function(t,a){return e[t](a)}}(),Vl=function(){var e={linear:d3.easeLinear,quad:d3.easeQuad,"quad-in-out":d3.easeQuadInOut,"quad-in":d3.easeQuadIn,"quad-out":d3.easeQuadOut,cubic:d3.easeCubic,"cubic-in-out":d3.easeCubicInOut,"cubic-in":d3.easeCubicIn,"cubic-out":d3.easeCubicOut,sin:d3.easeSin,"sin-in-out":d3.easeSinInOut,"sin-in":d3.easeSinIn,"sin-out":d3.easeSinOut,exp:d3.easeExp,"exp-in-out":d3.easeExpInOut,"exp-in":d3.easeExpIn,"exp-out":d3.easeExpOut,circle:d3.easeCircle,"circle-in-out":d3.easeCircleInOut,"circle-in":d3.easeCircleIn,"circle-out":d3.easeCircleOut,elastic:d3.easeElastic,"elastic-in-out":d3.easeElasticInOut,"elastic-in":d3.easeElasticIn,"elastic-out":d3.easeElasticOut,back:d3.easeBack,"back-in-out":d3.easeBackInOut,"back-in":d3.easeBackIn,"back-out":d3.easeBackOut,bounce:d3.easeBounce,"bounce-in-out":d3.easeBounceInOut,"bounce-in":d3.easeBounceIn,"bounce-out":d3.easeBounceOut};return function(t){return e[t]||d3.easeLinear}}(),Fl=d3.easeLinear,Nl=function(){var e={linear:d3.curveLinear,linearClosed:d3.curveLinearClosed,cardinal:d3.curveCardinal,cardinalClosed:d3.curveCardinalClosed,monotone:d3.curveMonotoneX,monotoneY:d3.curveMonotoneY,stepBefore:d3.curveStepBefore,stepAfter:d3.curveStepAfter,"linear-closed":d3.curveLinearClosed,"cardinal-closed":d3.curveCardinalClosed,"step-before":d3.curveStepBefore,"step-after":d3.curveStepAfter};return function(t,a,r){var n=e[t];return"monotone"==t&&a&&(n=e.monotoneY),it(r)&&n.tension&&n.tension(r),n}}(),Yl=function(){var e="squarify",t={squarify:d3.treemapSquarify,slice:d3.treemapSlice,dice:d3.treemapDice,sliceDice:d3.treemapSliceDice,resquarify:d3.treemapResquarify};return function(a){return t[a]||t[e]}}(),_l=(d3.rebind,d3.scaleLinear),Wl=d3.scaleBand,Xl=d3.scaleTime,Ul=d3.scalePoint,Gl=d3.scaleOrdinal,Zl=d3.bisector,Ql=d3.sum,ql=d3.hsl,Kl=function(){var e=d3.rgb.apply(this,arguments);return(isNaN(e.r)||isNaN(e.g)||isNaN(e.b))&&(e=d3.rgb(0,0,0,e.opacity)),e},$l=d3.merge,Jl=d3.map,eo=d3.set,to=(d3.zoom,d3.drag),ao=d3.extent,ro=d3.dispatch,no=d3.ascending,io=d3.descending,lo=d3.line,oo=d3.radialLine,so=d3.area,co=d3.radialArea,uo=d3.arc,ho=d3.pack,fo=d3.pie,go=d3.partition,po=d3.treemap,mo=(d3.transform,function(){return d3.mouse.apply(this,arguments)}),vo=d3.interpolate,yo=d3.interpolateRgb,xo=d3.range,bo=d3.timeSunday,wo=d3.timeMonday,Co=d3.timeTuesday,ko=d3.timeWednesday,Oo=d3.timeThursday,Ao=d3.timeFriday,So=d3.timeSaturday,Po=d3.timeSeconds,To=(d3.timeMinutes,d3.timeHours),Eo=d3.timeDays,Lo=d3.timeWeeks,zo=d3.timeMonths,Do=d3.timeYears,Ro=d3.format,jo=d3.timeFormat,Mo=d3.utcFormat,Io=d3.timeParse,Bo=d3.xhr,Ho=(d3.json,d3.timer,d3.brushX),Vo=d3.brushY,Fo="ordinal",No="time",Yo="numeric",_o="text",Wo="tspan",Xo="path",Uo="circle";RECT_ELEMENT="rect",LINE_ELEMENT="line",DIV_ELEMENT="div";var Go="fadeAll",Zo="fadeOneByOne",Qo="fadeRandom",qo="fade",Ko="sizing",$o="randomOut",Jo="vertical",es="verticalAll",ts="vertPathTween",as="vertPathTweenAll",rs="horizontalAll",ns="horiPathTween",is="strokeTween",ls="pointTween",os="pointbypoint",ss="allseries",cs="onebyone",ds="fanonebyone",us="fanAll",hs="fan",fs="wheel",gs="inner",ps="center",ms="left",vs="right",ys="bottom",xs="top",bs="fixedTop",ws="vertical",Cs="horizontal",ks="inner",Os="outer",As="middle",Ss="bar",Ps="bullet",Ts="gantt",Es="waterfall",Ls="area",zs="arearange",Ds="line",Rs="scatter",js="bubble",Ms="bubblepie",Is="pie",Bs="dial",Hs="funnel",Vs="pyramid",Fs="web",Ns="heatmap",Ys="sunburst",_s="packedbubble",Ws="treemap";Si.imageFilePath=window.location.protocol+"//"+window.location.hostname+"/src/images/",Si.fontProperties={minsize:15,maxsize:40,ratio:.038},Si.requireXDataSorting=!1,Si.dataEncoded=!1;var Xs=window.btoa||function(e){e=String(e);var t,a,r,n,i,l,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,d=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)t=e.charCodeAt(c++),a=e.charCodeAt(c++),r=e.charCodeAt(c++),n=t>>2,i=(3&t)<<4|a>>4,l=(15&a)<<2|r>>6,o=63&r,c===e.length+2?(l=64,o=64):c===e.length+1&&(o=64),d.push(s.charAt(n),s.charAt(i),s.charAt(l),s.charAt(o));return d.join("")};!function(){var e=function(t,a){var r=t.nodeType;if(3==r)a.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==r){if(a.push("<",t.tagName),t.hasAttributes())for(var n=t.attributes,i=0,l=n.length;l>i;++i){var o=n.item(i);a.push(" ",o.name,"='",o.value,"'")}if(t.hasChildNodes()){a.push(">");for(var s=t.childNodes,i=0,l=s.length;l>i;++i)e(s.item(i),a);a.push("</",t.tagName,">")}else a.push("/>")}else{if(8!=r)throw"Error serializing XML. Unhandled node of type: "+r;a.push("<!--",t.nodeValue,"-->")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var t=[],a=this.firstChild;a;)e(a,t),a=a.nextSibling;return t.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1,sXML="<svg xmlns='http://www.w3.org/2000/svg'>"+e+"</svg>";for(var a=t.parseFromString(sXML,"text/xml").documentElement,r=a.firstChild;r;)this.appendChild(this.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(n){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}})}(),function(){try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var t=window.Element.prototype,a=t.setAttribute,r=t.setAttributeNS,n=window.CSSStyleDeclaration.prototype.setProperty;t.setAttribute=function(e,t){a.call(this,e,t+"")},t.setAttributeNS=function(e,t,a){r.call(this,e,t,a+"")},window.CSSStyleDeclaration.prototype.setProperty=function(e,t,a){n.call(this,e,t+"",a)}}}(),Si.charts=function(e,t,a){var r=e.constructor===Array&&t.constructor===Array;if(r)return l(e,t,a);var n=i(e,t);return n&&n.draw(),n},function(e){"use strict";function r(e,t){this.container=e,this.userdata=t,this.dataObject=null,this.dataset=null,this.svg=null,this.canvasarea={},this.chartarea={},this.legendarea={},this.plotarea={},this.seriesColor=[],this.axes={},this.renderer=[],this.subrenderer=[],this.ismultiy=null,this.plotarea_approx=null,this.nochartdata=!1,this.chartRendered=!1,this.plot={},this.events={},this.legend={component:null},this.cache={},this.datalabels={},this.initialize()}e.charts.get=function(e,t){return new r(e,t)},r.prototype.initialize=function(){var e=this;zl++,e.id="ZC_"+zl,e.idNumeric=zl;try{var t=this.userdata,a=e.dataProcessorHelpers=Si.DataProcessor.helpers;e.createHelperElements(),e.handleHiddenContainer(),e.chartFontProp={},e.chartWidth=e.getChartDimension("width"),e.chartHeight=e.getChartDimension("height"),r.helpers.initializeChartHolders(e),e.setCanvasDimension(),e.axes.x={levels:[]},e.axes.y={groups:[]},e.chartTypes=a.getAllChartTypes(t,"object"),e.globalProp=d(t,{width:e.canvasarea.width,height:e.canvasarea.height},e.chartFontProp),e.themeoptions=e.getThemeOptions(e.globalProp),t.metadata?null:Si.setDefaultOptions("metadata",t),e.processUserData(e.themeoptions),e.setChartDimension(),e.defsLocation=K();var n=e.svg;e.legendHighlight=new Si.legendHighlight(e,e.svg),n.append("defs"),r.helpers.constructChartGroups(e)}catch(i){r.helpers.handleErrors(e,i)}},r.prototype.createHelperElements=function(){if(!it(Ll)){var e=jl(document.body),t=Ll=zt(e,"div",[1],".","class","__baseZC_Container__");t.styles({position:"absolute",left:Dl+Al,top:Dl+Al});var a=Us.patternSVG=zt(t,"svg",[1],".","class","svgPattern");a.attrs({version:"1.1",xmlns:d3.namespaces.svg}),zt(a,"defs",[1])}},r.prototype.handleHiddenContainer=function(e){var t=this,a=t.container;if(e&&it(t.originalContainer))t.originalContainer.node().appendChild(t.d3container.node()),t.container.remove(),t.container=t.originalContainer,delete t.isHiddenCoainer,delete t.originalContainer;else{var r=a.node();if(Ct(r)){var n=r.cloneNode(0);Ll.node().appendChild(n),n.style.setProperty("display","block","important"),t.isHiddenCoainer=!0,t.originalContainer=a,t.container=d3.select(n)}}},r.prototype.draw=function(){this.render(!1)},r.prototype.render=function(e){var t=this;try{t.updateCanvasArea();var a=t.systemConf;if(t.applyChartProperties(),t.nochartdata)t.hideLoading(t.container),t.handleNoData(a.noDataHandler),t.chartRendered=!0,tr(t,a.canvas.events,"chart",e?"onreload":"onload");else{if(t.getChartSeriesColor(),t.isAxisCategory=t.dataObject.isAxisCategory,t.isNonAxisMultiSeriesCategory=t.dataObject.isNonAxisMultiSeriesCategory,t.xymultiRenderer=t.isAxisCategory,Si.legend.render(t,e),Rc.updatePlotarea4BlockTooltip(t),Si.annotation&&Si.annotation.addBlockAnnotations(t),$(t.systemConf.chart,"scroll")&&t.systemConf.chart.scroll.enabled&&(Si.setDefaultOptions("scroll",t.systemConf.chart,t.globalProp),t.brush=new Nc(t,"x")),Nn.initialize(t),tr(t,a.chart.axes.events,null,"init"),t.isAxisCategory)Si.axis.render(t,t.chartWidth,t.chartHeight,e);else if(t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker){var n=t.dataObject.hasLevelMarker?"y":"x";Si.axis.polar.render(t,n)}if(t.zscale=t.dataObject.hasZaxis&&!t.dataObject.isHierarchy?Si.scale.getScale(t,t.dataObject,t.plotarea,t.axes.x.orient,null,t.dataset,"z"):null,tr(t,a.chart.axes.events,null,e?"onreload":"onload"),t.updatePlotareaProp(),t.drawPlotareaClippath(),t.plot.renderer)t.plot.renderer.draw(e);else{var i=t.plot.renderer=Si.plot.render(t,e);i.draw(!1)}t.isAxisCategory&&t.drawThreshold(e),t.handleEvent(e),_(t.wrap.selectAll("rect.dummy-rect-filter"),{width:t.plotarea.width,height:t.plotarea.height})}}catch(l){r.helpers.handleErrors(t,l)}},r.prototype.updateCanvasArea=function(){var e=this,t=e.systemConf;e.container.selectAll("div.d3container").styles({position:"relative",width:e.getChartDimension("width")+Al,height:e.getChartDimension("height")+Al});var a=e.container.selectAll("div.canvas-component");a.styles({position:"relative",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"});var r=e.container.selectAll("div.canvas-property");r.styles({position:"absolute",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"}),e.updateCommonBBSProp(r,null,t.canvas,"canvas")},r.prototype.updateCommonBBSProp=function(e,a,r,n){var i,l=this,o=l.systemConf,s=r.border||{},c=r.background||{},d=r.shadow||{};e.styles({"background-color":c.color,opacity:c.alpha});var u=null,h=nc(c,"gradients.show")===!0;if(h){var f,g="";if(it(c.gradients.useCSS)?f=c.gradients.useCSS:(it(c.gradients.stopColor)&&c.gradients.stopColor.map(function(e,t){var a=it(c.gradients.stopOffset)&&it(c.gradients.stopOffset[t])?" "+c.gradients.stopOffset[t]:"";g+=0===t?e+" "+a:","+e+a}),"radial"===c.gradients.type?f="radial-gradient("+g+")":"linear"===c.gradients.type&&(f="linear-gradient("+g+")")),Gs.WEBKIT)u="-webkit-"+f;else if(Gs.FIREFOX)u="-moz-"+f;else if(Gs.IE){u="-ms-"+f;var p=it(c.gradients.stopColor)?"linear"===c.gradients.type?"progid:DXImageTransform.Microsoft.gradient(startColorstr="+(c.gradients.stopColor[0]||"black")+", endColorstr="+(c.gradients.stopColor[1]||"white")+")":"progid:DXImageTransform.Microsoft.Alpha(opacity=100, finishopacity=0, style=2)":null;e.style("filter",p)}}if(it(c.imageUrl)&&(u="url("+c.imageUrl+")"),(1!==Gs.IE||0!==Gs.VERSION.indexOf("9."))&&e.styles({"background-image":u,"background-repeat":c.imageRepeat,opacity:c.alpha}),s.show===!0&&"canvas"===n){i="plotarea"===n?a:e;var m="canvas"===n?nt(o.canvas.border,"size",0,10,l.canvasarea.width,l.canvasarea.height):nt(o.chart.plot.border,"size",0,10,l.plotarea.width,l.plotarea.height);m=ic(m,2),i.styles({border:m+"px "+s.style+" "+s.color,"border-radius":t(s.radius)+"px"}),i.node().border={size:m,clr:s.color}}else i="plotarea"===n?a:e,"plotarea"!==n&&i.style("border","");if(d.show===!0){var v=d.x+"px "+d.y+"px "+d.blur+"px "+d.color;d.inset===!0&&(v+=" inset"),e.style("box-shadow",v)}else e.style("box-shadow","")},r.prototype.processUserData=function(e,t){var a,r,n,i=this;i.systemConf=a=ac(e,i.userdata,!0,!0),r=nc(a,"seriesdata")||{},i.seriesdata=n=r.chartdata,t||tr(i,a.canvas.events,"chart","init"),i.nochartdata=!it(n)||it(n)&&n.length<1,i.nochartdata?i.seriesdata=null:(i.dataset=new Si.dataset.get(a,i),i.preProcessor=new Si.PreProcessor(i),i.dataObject=i.getDataObject(),i.dataset.setDataObj(i.dataObject),i.nochartdata=i.dataObject.totalnoofdatas<1,i.axes.rotated=i.dataObject.getAxisRotated(),i.axes.rotated?(i.axes.x.orient="left",i.axes.y.orient="bottom"):(i.axes.x.orient="bottom",i.axes.y.orient="left"),i.ismultiy=i.getAxesCount("y")>1,i.ismultix=i.getAxesCount("x")>1)},r.prototype.setCanvasDimension=function(e,t){var a=this;e||t||(e=a.getChartDimension("width"),t=a.getChartDimension("height")),this.canvasarea={left:0,top:0,right:0,bottom:0,width:e,height:t}},r.prototype.getChartDimension=function(e){var t=this,a={width:960,height:400};return t.isHiddenCoainer||(a[e]=Pt(t.container,e,!0)),a[e]},r.prototype.getThemeOptions=function(e){var t,a,r=this,n=Si.charttypenames.values(),i=r.dataProcessorHelpers.getAllChartTypes(r.userdata,"string"),l=null;return r.userdata.canvas&&(l=r.userdata.canvas.theme),a=new Si.defaultTheme(e),n.map(function(t){-1!==i.indexOf(t)&&Si.setDefaultOptions(t,a.chart.plot.plotoptions,e)}),it(Si[l])?(t=new Si[l](e),t=ac(a,t,!0,!0)):t=a,t},r.prototype.getDataObject=function(){var e,t=this;return e=Si.chartcategory.hierarchy.indexOf(t.chartTypes[0].value)>-1?new Si.hierarchymodel.get(t):new Si.DataProcessor(t.systemConf,t.dataset,t),t.seriesdata=e.isHierarchy?rc(t.seriesdata):t.seriesdata,e},r.prototype.getAxesCount=function(e){var t=this,r=1,n=t.systemConf.metadata;if("x"===e){var i=t.dataset.getColumnIdx(e),l=n.columns[i].datatype,o=ic(n.columns[i][l],{}),s=o.subfunction;it(t.dataObject.hierarchical)?r=t.dataObject.hierarchical.finalDepth+1:a(o.groupby)&&o.groupby.length?r=o.groupby.length+1:"AUTO"===o.groupby&&(r=Si.HierarchicalTimeDataAdapter.getAutoGroupOrder(s).length+1),t.axes[e].count=r}else{var c=n.axes.y;r=t.axes[e].count=c.length}return r},r.prototype.setChartDimension=function(){var e=this,t=e.systemConf,a=t.canvas.border,r=a.show?nt(a,"size",0,10,e.canvasarea.width,e.canvasarea.height):0;e.chartarea={left:e.canvasarea.left+r,top:e.canvasarea.top+r,right:e.canvasarea.right-r,bottom:e.canvasarea.bottom-r,width:e.canvasarea.width-2*r,height:e.canvasarea.height-2*r},e.plotarea=Object.create(e.chartarea)},r.prototype.applyChartProperties=function(){var e=this,t=e.systemConf,a=e.chartHeight,r=t.canvas.title,n=t.canvas.subtitle,i=t.credits||{},l=r.show&&qt(e,"title",a),o=n.show&&qt(e,"subtitle",a),s=i.enabled===!0&&qt(e,"credits",a);if(s){{Si.setDefaultOptions("credits",e.systemConf,e.globalProp)}e.drawTitle(e.systemConf.credits,"credits")}l&&("bottom"===r.vAlign&&"bottom"===n.vAlign&&n.show?e.drawTitle(t.canvas.subtitle,"subtitle"):e.drawTitle(t.canvas.title,"title")),o&&("bottom"===n.vAlign&&"bottom"===r.vAlign&&r.show?e.drawTitle(t.canvas.title,"title"):e.drawTitle(t.canvas.subtitle,"subtitle")),e.plotarea=Object.create(e.chartarea),e.container.selectAll("g.plotareaBorder-property").selectAll("line","path").style("border","");var c=t.chart,d=parseFloat(c.marginLeft),u=parseFloat(c.marginRight),h=parseFloat(c.marginTop),f=parseFloat(c.marginBottom),g=d+u>e.plotarea.width?0:d,p=d+u>e.plotarea.width?0:u,m=h+f>e.plotarea.height?0:h,v=h+f>e.plotarea.height?0:f;e.plotarea.left+=g,e.plotarea.right+=p,e.plotarea.bottom+=v,e.plotarea.top+=m,e.plotarea.width=e.plotarea.width-g-p,e.plotarea.height=e.plotarea.height-v-m},r.prototype.drawTitle=function(e,t){var a=this,n=a.svg,i=a.systemConf,l=it(e.x)&&it(e.y),o=window.location,s={top:rt(e.marginTop,0),right:rt(e.marginRight,0),bottom:rt(e.marginBottom,0),left:rt(e.marginLeft,0)},c=n.selectAll("g.chart"+t),d=l?{x:e.x+s.left,y:e.y+s.top,dy:"1",textAnchor:"left"===e.hAlign?"start":"right"===e.hAlign?"end":"middle"}:r.helpers.align(e.hAlign,e.vAlign,a.chartarea,s),u=e.imageUrl,h=!it(u),f=h?""===e.text?Sl:"text":"image";if(f!==Sl){var g=zt(c,f,[e],".","class",t);if(it(e.href)){var p=function(){var t=Q(e.href);if(t){var a=e.target;"newtab"===a||"newwindow"===a?window.open(e.href,"popUpWindow","newwindow"===a?"status=yes":""):o.href=e.href}else nl.log("invalid URL for credits")},m={click:p},v={tap:p};Ar(g,m,v)}if(h){var y=a.userdata.canvas?a.userdata.canvas.fontColor:null;g.attrs({x:d.x,y:d.y,dy:d.dy+"em","text-anchor":d.textAnchor}).styles({cursor:it(e.href)?Tl:"auto",display:"block"}).text(G(e.text)),e.tooltip===!0&&Ht(g),Bt(g,[{fontColor:"subtitle"!==t||it(e.fontColor)||it(y)?e.fontColor||y:"#CCCCCC"},e,i.canvas,Us])}else g.attrs({x:d.x+("right"===e.hAlign?-e.imageWidth:0),y:d.y+("bottom"===e.vAlign?-e.imageHeight:0),width:e.imageWidth,height:e.imageHeight,"xlink:href":e.imageUrl}).styles({cursor:it(e.href)?Tl:"auto",display:"block"});var x=U(g.node()),b={left:l?e.x+s.left:x.x,top:l?e.y+s.top:x.y,width:x.width,height:x.height},w={left:s.left,top:s.top,right:a.canvasarea.width-s.right,bottom:a.canvasarea.height};if(Dt(g.node(),G(e.text),b,w,"bottom","..",{left:5,right:5,top:5,bottom:5}),!l){var C=x.height+s.bottom+s.top;"top"===e.vAlign&&(a.chartarea.top+=C,a.chartarea.height-=C),"bottom"===e.vAlign&&(a.chartarea.height-=C)}}c.selectAll(f===Sl?"text,image":"image"===f?"text":"image").style("display",Sl)},r.prototype.getChartSeriesColor=function(){var e=this,t=e.systemConf,r=[],n=t.legend;if(n.colors)if(a(n.colors))r=n.colors;else{var i=[];for(var l in n.colors)n.colors.hasOwnProperty(l)&&i.push(n.colors[l]);r=i}else if(n.imagePallete){e.patternImageSizes=[];var o=Si.legutil.imagePallete.get(n.imagePallete);e.imagePallete=o;var s="stripes"===n.imagePallete?null:50,c=zt(Us.patternSVG,"image",[1],".","class","tempImage");o.map(function(t,a){c.attr("xlink:href",t);var r=U(c.node());e.patternImageSizes[a]=[s||r.width||3,s||r.height||3]}),c.remove()}else n.colorPallete&&(r="monochrome"===n.colorPallete.type?Si.legutil.getMonochromeColorPallette(n.colorPallete.options.monochrome):Si.legutil.colorpallete.get(n.colorPallete.options.multicolor)||Si.legutil.colorpallete.get("flat-ui-colors"));if(n.patterns)e.patternPallete=n.patterns;else if(n.patternPallete){var d=Si.legutil.patternPallete.get(n.patternPallete);!it(d)&&a(n.patternPallete)&&n.patternPallete.length&&(d=n.patternPallete),e.patternPallete=d}it(r)&&(e.seriesColor=r.slice(0,r.length),oc.isQuantileColorScale(e)||e.seriesdata.map(function(t,a){it(t.color)&&(e.seriesColor[a]=t.color)}))},r.prototype.updatePlotareaProp=function(){var e=this,t=e.systemConf,a=e.container,r=a.selectAll("div.plotarea-property"),n=e.staticPaneSVG.selectAll("g.plotareaBorder-property"),i={position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:e.plotarea.width+"px",height:e.plotarea.height+"px","pointer-events":Sl,"box-sizing":"border-box"};i[Gs.prefix.css+"box-sizing"]="border-box",a.selectAll("div.plotarea-property").styles(i),n.attrs({transform:"translate("+e.plotarea.left+","+e.plotarea.top+")"}),e.updateCommonBBSProp(r,n,t.chart.plot,"plotarea")},r.prototype.drawPlotareaClippath=function(){var e=this,t=e.systemConf,a=$(t,"chart.zoom.x")||it(e.scrolledX),r=$(t,"chart.zoom.y")||it(e.scrolledY),n=e.dataObject.getAxisRotated(),i=N(e),l=(n?r:a)?0:-i.left,o=(n?a:r)?0:-i.top,s=e.plotarea.width+((n?r:a)?0:i.left+i.right),c=e.plotarea.height+((n?a:r)?0:i.top+i.bottom),d={name:"rect",id:e.id,x:l,y:o,width:s,height:c},u={chartObj:e},h=Qs.get(tc,"rect",d,u);
e.wrap.selectAll("g.seriesholder").attr("clip-path","url("+e.defsLocation+"#"+h+")"),e.staticPaneSVG.selectAll("g.labelholder,g#zcscatterhighlight,g#zcareahighlight,path#zcbarhighlight").attr("clip-path","url("+e.defsLocation+"#"+h+")")},r.prototype.drawThreshold=function(e){if(Si.axis.threshold){var t=this;t.cache.thresholdCustomPoints=[],Si.axis.threshold(t,e)}},r.prototype.handleEvent=function(e){var t=this,a=t.systemConf;if(e)t.eventHandler.updateParams(t);else{{var r=t.staticPaneSVG.selectAll("g.eventgroup").styles({"pointer-events":"visible"});r.append("g").attr("id","zcareahighlight"),r.append("g").attr("id","zcbarhighlight")}if(a.tooltip.crosshair){var n=zt(r,"g",[1],".","class","crosshair");n.style("visibility","hidden"),zt(n,"line",[1],".","class","x-crosshair"),zt(n,"line",[1],".","class","y-crosshair")}{r.append("g").attr("id","zcscatterhighlight"),r.append("g").attr("class","zcplothighlight").styles({opacity:0,"pointer-events":Sl})}t.dataObject.isHierarchy&&r.append("g").attr("id","zchierarchyhighlight").styles({opacity:0,fill:Sl,"pointer-events":Sl}),t.eventHandler=Si.events.mouseevents(t,t.tooltip.element,a,t.plotarea,t.dataset,t.axes.x.scale,t.barscale1,t.barscale2,t.axes.y.groups,r,t.seriesColor,t.labelHighlighter),t.eventHandler.initializeListener()}(t.xymultiRenderer||t.dataObject.isPolarAxisCategory)&&_(t.eventHandler.trackerElement,t.plotarea),Nn(t)},r.prototype.redraw=function(){var e=this,t=e.systemConf;e.svg.styles({width:e.getChartDimension("width")+Al,height:e.getChartDimension("height")+Al}),e.staticPaneSVG.styles({width:e.getChartDimension("width")+Al,height:e.getChartDimension("height")+Al}),e.resetdata(t),r.helpers.constructChartGroups(e),e.render(!0)},r.prototype.resetdata=function(e){var t=this;t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),t.setCanvasDimension(),t.chartTypes=t.dataProcessorHelpers.getAllChartTypes(e,"object"),t.processUserData(e,!0),t.setChartDimension(),t.globalProp=d(e,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.events={},t.dataObject&&(t.dataObject.formattedData={x:[],y:[]})},r.prototype.addRemoveSeries=function(e,t,a,r){var n=this,i=n.systemConf;if(n.dataObject.formattedData={x:[],y:[]},n.dataObject.initialize("addorremoveseries"),tr(n,i.chart.axes.events,null,"init"),n.isAxisCategory){var l=n.brush&&n.brush.extent;n.updateZscale(),r?n.axes.y.groups.forEach(function(e,t){n.updateScale([t,0],"y")}):n.updateScale(a,"y"),n.updateScale(0,"x",l),n.dataObject.hierarchical&&(n.axes.x.rangeScale=n.axes.x.scale.copy(),n.axes.x.rangeScale.outerPaddingPx=n.axes.x.scale.outerPaddingPx,n.dataObject.hierarchical.groupByDiscreteTime&&n.axes.x.rangeScale.domain(d3.range(n.axes.x.scale.domain().length)),n.dataObject.hierarchical.setRanges(n.axes.x.rangeScale),n.axes.x.levels.forEach(function(e,t){n.updateScale(a,"x",null,t+1)}),n.dataObject.hierarchical.categoryTree&&Za.updateTickEventHandler(n,e.disabled)),n.drawThreshold(!0),n.drawPlotareaClippath(),n.updatePlotareaProp()}else n.dataObject.isPolarAxisCategory&&Si.axis.polar.render(n,"x");tr(n,i.chart.axes.events,null,"onreload"),n.events={},n.plot.renderer.draw(!0),(n.isAxisCategory||n.dataObject.isPolarAxisCategory)&&(_(n.eventHandler.trackerElement,n.plotarea),n.eventHandler.updateParams(n),Nn(n,"addorremoveseries"))},r.prototype.showLoading=function(){var e=this,t=e.systemConf,a=t.loader;if(a.enabled===!0&&a.type!==Sl){var n=zt(this.container.selectAll("div.d3container"),"div",[1],".","class","loading");n.style("position","absolute").html(r.helpers.getLoader(e,a)),Bt(n,[a,t.chart,t.canvas,Us],!0);var i=n.node();n.styles({left:e.chartarea.width/2-i.offsetWidth/2+"px",top:e.chartarea.height/2-i.offsetHeight/2+"px"})}},r.prototype.hideLoading=function(){this.container.selectAll("div.loading").remove()},r.prototype.pushDataPoint=function(e,t,r){var n=this,i=n.dataObject.isCombinationalChart,l=i?Ki.arrangeSeriesRenderingOrder(n.seriesdata):n.seriesdata;if(!Array.isArray(e)){var o=[],s=[];o.push(e),s.push(t),e=o,t=s}e.forEach(function(e,o){var s,c,d,u=l[e],h=i?u.seriesidx:e,f=n.seriesdata[h],g=n.renderer[h];if(d=a(r)?r[o]:r,f.data[0].push(t[o]),d){s=f.data[0][0];var p=f.data[0].shift();it(g.shiftInfo())?(c=g.shiftInfo(),c.count++):(c={},c.count=0),c.point=s,c.shiftedData=p,g.shiftInfo(c)}else g.shiftInfo(null);n.ismultiy&&n.updateScale(f,"y")}),n.dataObject.initialize(),n.updateScale(null,"x"),n.ismultiy||n.updateScale(n.seriesdata[0],"y"),n.plot.renderer.draw(!0),n.drawThreshold(!0),n.eventHandler.updateParams(n)},r.prototype.popDataPoint=function(e){var t=this,a=t.seriesdata[e];a.data.forEach(function(e){e.pop()}),t.dataObject.initialize(),t.updateScale(a,"x"),t.updateScale(a,"y"),t.plot.renderer.draw(!0),t.drawThreshold(!0),t.eventHandler.updateParams(t)},r.prototype.zoomON=function(e){var t=this;t.changeZoomType(e);var a=t.zoom;a||t.eventHandler.initializeZoomListener()},r.prototype.zoomOFF=function(){var e=this,t=e.zoom;t&&t.reset(),e.changeZoomType(Sl)},r.prototype.zoomX=function(e,t){var a=this;a.changeZoomType("x"),a.zoom||a.eventHandler.initializeZoomListener();var r=a.zoom;r.zoomed(null,e,t)},r.prototype.zoomY=function(e,t){var a=this;a.changeZoomType("y"),a.zoom||a.eventHandler.initializeZoomListener();var r=a.zoom;r.zoomed(null,e,null,t)},r.prototype.zoomXY=function(e,t,a){var r=this;r.changeZoomType("xy"),r.zoom||r.eventHandler.initializeZoomListener();var n=r.zoom;n.zoomed(null,e,t,a)},r.prototype.changeZoomType=function(e){var t=this,a=t.systemConf;a.chart.zoom||Si.setDefaultOptions("zoom",a.chart,t.globalProp),a.chart.zoom.type=e},r.prototype.handleNoData=function(e,t){var a=this,r=a.systemConf,n=ic(t,a.wrap.selectAll("g.nodatahandler"));if(it(e.htmlEl)){var i=zt(a.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");i.style("position","absolute").html(e.htmlEl);var l=i.node();i.styles({left:ic(e.x,(a.chartWidth-l.offsetWidth)/2)+"px",top:ic(e.y,(a.chartHeight-l.offsetHeight)/2)+"px"})}else if(it(e.imageUrl)){var o=zt(n,"image",[1]);o.attrs({x:e.x||a.chartarea.width/2-50,y:e.y||a.chartarea.height/2-50,width:100,height:100,"xlink:href":e.imageUrl})}else if(it(e.text)){var s=zt(n,"text",[e],".","class","nodata");s.attrs({x:e.x||a.chartarea.width/2,y:e.y||a.chartarea.height/2,"text-anchor":"middle"}).text(G(e.text||"No Data")),Bt(s,[e,r.canvas,Us])}},r.prototype.destroy=function(){var e=this;e.eventHandler&&(clearTimeout(e.eventHandler.mouseouttimer),clearTimeout(e.eventHandler.mousemovetimer),clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.destroy()),e.container.datum(null),e.d3container.remove(),e.destroying=!0},r.helpers={initializeChartHolders:function(e){var t,a,n=e.container,i=n.selectAll("div.d3container");if(!i.empty()){var l=i.datum();l&&l.destroy&&l.destroy(),i.remove()}t=e.getChartDimension("width"),a=e.getChartDimension("height"),i=e.d3container=zt(n,"div",[e],".","class","d3container");var o={width:t+"px",height:a+"px",position:"relative",left:"0px",top:"0px","box-sizing":"border-box","-moz-user-select":Sl,"-webkit-user-select":Sl,"-ms-user-select":Sl,"user-select":Sl};o[Gs.prefix.css+"box-sizing"]="border-box",i.styles(o),zt(i,"div",[1],".","class","canvas-property"),zt(i,"div",[1],".","class","plotarea-property"),zt(i,"div",[1],".","class","zcoverview");var s=zt(i,"div",[1],".","class","canvas-component");s.style("-webkit-tap-highlight-color",Pl);var c=zt(Ll,"div",[1],"#","id","zctooltip"+e.idNumeric);c.node().isTooltipContainer=!0,e.tooltip={element:c},e.tooltip.element.styles({position:"fixed",display:"inline-block",visibility:"hidden","white-space":"nowrap","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":Pl});var d=r.helpers.positionSVG(e);e.svg=zt(s,"svg",[1],".","class","svgarea",d),e.staticPaneSVG=zt(s,"svg",[e],".","class","static",d).style("pointer-events",Sl),e.legendarea.element=s.append("div").attr("class","legendarea"),e.notes=s.append("div").attr("class","zcnotes")},removeChartHolders:function(e){var t=e.container;t.select("div.d3container").remove(),t.select("div.zc-staticPane").remove(),t.select("div.zc-chartPane").remove()},align:function(e,t,a,r){var n={};return"center"===e?(n.x=a.width/2+r.left,n.textAnchor="middle"):"left"===e?(n.x=a.left+r.left,n.textAnchor="start"):"right"===e&&(n.x=a.width+a.left-r.right,n.textAnchor="end"),"top"===t?(n.y=a.top+r.top,n.dy=1):"bottom"===t&&(n.y=a.height+a.top-r.bottom,n.dy=-.21),n},getLoader:function(e,t){var a=t.htmlEl,r=t.imageUrl,n=t.type,i=t.text,l=t.colors;if(a)return a;if(r)return"<img src="+r+" height="+t.imageHeight+" width="+t.imageWidth+">";var o="",s=null;if(n){var c=e.container.selectAll("div.loading");l=l&&l.length?l:null,s=id(c,{type:n,colors:l});var d=new XMLSerializer;o=d.serializeToString(s)}return i&&(o+="<p style=position:relative;display:inline-block>"+i+"</p>"),o},constructChartGroups:function(e){function t(e){return e?[1]:[]}var a=e.svg,n=e.systemConf,i=e.chartHeight,l=(e.chartWidth,n.canvas.title.show===!0&&qt(e,"title",i));zt(a,"g",t(l),".","class","charttitle");var o=n.canvas.subtitle.show===!0&&qt(e,"subtitle",i);zt(a,"g",t(o),".","class","chartsubtitle");var s=n.credits&&n.credits.enabled===!0&&qt(e,"credits",i);zt(a,"g",t(s),".","class","chartcredits");var c=e.wrap=zt(a,"g",[n],".","class","xychart");if(e.nochartdata)zt(c,"g",[1],".","class","nodatahandler");else{zt(c,"g",[0],".","class","nodatahandler");var d=zt(c,"g",[e.seriesdata],".","class","chartgroup"),u=n.chart.axes.xaxis.show===!0;zt(d,"g",t(u),".","class","x-axis"),zt(d,"g",[e.seriesdata],".","class","y-axis"),zt(d,"g",[e.seriesdata],".","class","threshold");var h=zt(d,"g",[e.seriesdata],".","class","seriesholder");e.filterEffectsID=P(n),h.attr("filter",e.filterEffectsID?"url("+e.defsLocation+"#"+e.filterEffectsID+")":null);var f=e.dataObject.noofBarEnabledSeries&&!e.dataObject.isCombinationalChart||e.dataObject.isHierarchy;if(!f)var g=zt(e.staticPaneSVG,"g",[e.seriesdata],".","class","labelholder");zt(e.staticPaneSVG,"g",[e.seriesdata],".","class","threshold");var p=zt(e.staticPaneSVG,"g",[1],".","class","plotareaBorder-property"),m=n.chart.plot.border.show===!0;if(zt(p,"path",t(m),".","class","plotBorderPath"),zt(e.staticPaneSVG,"g",[1],".","class","eventgroup"),f){var g=zt(e.staticPaneSVG,"g",[e.seriesdata],".","class","labelholder");g.style("pointer-events",Sl)}zt(h,"rect",[1],".","class","dummy-rect-filter"),r.helpers.createLegendArea(e)}},handleErrors:function(e,t){e.breakOnErr=!0,$(e.systemConf,"canvas.events")&&tt(e.systemConf.canvas.events.onerror,d3.event,e,t)},positionSVG:function(e){return{width:e.getChartDimension("width")+Al,height:e.getChartDimension("height")+Al,position:"absolute",top:0,left:0}},createLegendArea:function(e){var t=fc.isContinousLegend(e),a=(e.staticPaneSVG,e.container.selectAll("div.canvas-component"),zt(e.staticPaneSVG,"g",t?[1]:[],".","class","legendarea"));t&&(e.legendarea.element=a)}},e.Chart=r}(Si);var Us={};Us.fontFamily="'Roboto','Open Sans',sans-serif",Us.fontColor="#616161",Us.fontStyle=null,Us.fontWeight=null,Us.fontL1Size=null,Us.fontL2Size=null,Us.fontL3Size=null,Us.DOMBorder="none";var Gs=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var e=navigator.userAgent.toLowerCase();this.OSX=-1!=e.indexOf("mac"),this.LINUX=-1!=e.indexOf("linux"),this.IPHONE=-1!=e.indexOf("iphone"),this.IPAD=-1!=e.indexOf("ipad"),this.ANDROID=-1!=e.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.isMouseDevice=!(this.IS_IOS||this.ANDROID||-1!=e.indexOf("mobile")),this.uiwebview=this.IS_IOS&&!/safari/.test(e);var t="";this.detect=function(){var e=navigator.userAgent,a=e.length,r=navigator.vendor,n=window.opera,i="";n?(this.OPERA=1,t="o"):e.indexOf("Chrome")>-1?(this.CHROME=1,i="Chrome/",t="webkit"):e.indexOf("Firefox")>-1?(this.FIREFOX=1,i="Firefox/",t="moz"):e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1?(this.IE=1,i="MSIE ",t="ms"):r.indexOf("Apple")>-1?(this.SAFARI=1,i="Version/",t="webkit"):i="Unknown Browser",this.VERSION=e.substring(e.indexOf(i),a).match(/[0-9\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:t,css:t?"-"+t+"-":t,js:t?t[0].toUpperCase()+t.substr(1):t}};g.prototype={initialize:function(){var e=this;e.hierarchyLayout=!0,e.finalDepth=0,e.dataCount=0,e.categories=[],e.leafNodes=[],e.series=[],e.categoriesByDepth=[],e.globalChartType=e.originalSeries.type},setDepth:function(){function e(r,c,d,u){c>t.finalDepth&&(t.finalDepth=c),u=ic(u,""),r.forEach(function(r,h){it(d)&&(r.parent=d),r.leaf?(r.index=t.dataCount++,a(r.data)&&r.data.forEach(function(e){e.index=r.index,e.level=u+h+"_"}),i.push(r),l.push(r[s])):(n[c]||(n[c]=[],o[c]=[]),o[c].push(r[s]),n[c].push(r),e(r.children,c+1,r,u+h+"_"))})}var t=this,r=t.categories,n=t.categoriesByDepth=[],i=t.leafNodes=[],l=t.leafCategories=[],o=t.categoriesList=[],s=t.dataType===No||t.groupByDiscreteTime?"point":"value";e(r,0),o.reverse()},getCategories:function(){return this.categories},getCategoriesByDepth:function(e){return it(e)||(e=0),e===this.finalDepth?this.leafNodes:e<this.finalDepth?this.categoriesByDepth[e]:void 0},getCategoriesByLevelIndices:function(e){var t=this,a=t.categories,r=e.length-1;return e.forEach(function(e,t){a=t===r?a[e]:a[e].children}),a},getParentByIndex:function(e,t){for(var a=this,r=a.leafNodes[e],n=null,i=a.finalDepth+1;i--;){if(r.depth===t){n=r;break}if(0===r.depth)break;r=r.parent}return n},setRanges:function(e){function t(t){r(t)?(t.rangeBand=i(t.children),y=e(d?t.children[0].index:t.children[0].point)-l(t.children[0],!0),t.range=[y,y+t.rangeBand]):(t.rangeBand=t.children.reduce(n,0),t.range=[t.children[0].range[0],t.rangeBand+t.children[0].range[0]]),b.push(t.rangeBand),w.push(t.range)}function r(e){return it(e.children[0])&&e.children[0].leaf===!0}function n(e,t){return t.leaf?e+m+l(t,!0)+l(t):e+t.rangeBand}function i(t){if(c.categoryTree)return t.reduce(n,0);var a=t[0],r=t[t.length-1],i="point",o=m;if(c.groupByContinuousTime){if(o=0,it(c.tickValues[a.index+1])){var s=c.tickValues[a.index],d=c.tickValues[a.index+1],u=e(d)-e(s);h=u/2}}else i="index";return e(r[i])-e(a[i])+l(a,!0)+l(r)+o}function l(e,t){return t&&e===o||!t&&e===s?f:h}var o,s,c=this,d=it(e.bandwidth),u=c.finalDepth,h=0,f=0,g=c.leafNodes,p=Ra(e);if(d){{var m=d&&e.bandwidth();e.range()}o=g[0],s=g[g.length-1],h=a(p)&&p.length>1?(p[1]-(p[0]+m))/2:0,f=e.outerPaddingPx,f=hl(f,h)}else{o=g[0],s=g[g.length-1];var v=Si.scale.getContinuousRangeBand(e,c.leafCategories);h=v.rangeBand/2,f=v.outerPaddingInPixel}for(c.scaleList=[],c.rangeList=[];u--;){var y,x=c.getCategoriesByDepth(u),b=[],w=[];x.forEach(t),c.rangeList.push(w)}return c.scaleList}},g.getValuesByKey=function(e,t){var a=function(e){return e[t]};return e.map(a)},g.is3D=function(e){return a(e)&&a(e[0])},g.isArrayOfSeries=function(e){return g.is3D(e.data)&&it(e.seriesname)},g.hasInnerSeries=function(e){return a(e.data)&&"object"==typeof e.data[0]&&it(e.data[0].seriesname)},g.keysObject=function(e){var t={};return e&&e.length&&e.forEach(function(e){t[e.value]=e}),t},g.getValues=function(e){return it(e)?e.map(function(e){return e.value}):null},g.getAllChildren=function(e,t){return t=ic(t,[]),e.children?(e.children.forEach(function(e){e.leaf?Array.prototype.push.apply(t,e.data):g.getAllChildren(e,t)}),t):e.data},Si.HierarchicalDataAdapter=g,function(){"use strict";function e(e){g.call(this,e),this.dataType=Fo,this.categoryTree=!0,this.update(!0)}var t={update:function(e){e||this.initialize(),this.process(),this.setDepth()},process:function(){var e=this;e.originalSeries.forEach(this.searchHierarchy,this)},getSeries:function(e){return it(e)?this.series[e]:this.series},searchHierarchy:function(e,t){function a(e,t,r){var n=g.keysObject(r);e.forEach(function(e){var l=g.hasInnerSeries(e),o=g.isArrayOfSeries(e),d=null;if(n[e.seriesname]?d=n[e.seriesname]:(d={value:o||l?ic(e.seriesname,""):"",depth:t,children:[]},c||r.push(d)),l)n[e.seriesname]||(n[e.seriesname]=d),a(e.data,t+1,n[e.seriesname].children),0===d.children.length&&St(r,d);else{g.is3D(e.data)||(e.data=[e.data]);var h=g.keysObject(d.children);e.data.forEach(function(e){var a={value:e[s],depth:t+1,leaf:!0,data:[e]};c?e.seriesDisabled=!0:delete e.seriesDisabled,u(e[s])&&(h[e[s]]?h[e[s]].leaf?h[e[s]].data.push(e):h[e[s]].children&&!c&&h[e[s]].children.push(a):(c||d.children.push(a),h[e[s]]=a),i.data.push(e))}),0===d.children.length&&St(r,d)}})}var r=this,n=r.chart,i=r.series[t],l=ic(n.dataset.getColumn("x"),{}),o=l.datatype,s=ic(l.dataindex,0),c=e.disabled,d=it(l[o])&&it(l[o].nullformatting),u=function(e){return d||it(e)};r.series[t]||(i=r.series[t]=rc(e),i.data=[]),a(e.data,0,r.categories)}};At(e,g),Ot(e.prototype,t),Si.HierarchicalOrdinalDataAdapter=e}(),function(){function e(t,r,n,i,l){g.call(this,t),this.dataType=No,this.chart=t,this.columnInfo=l,i?this.groupByDiscreteTime=!0:this.groupByContinuousTime=!0,a(n)?this.groupOrder=n.slice(0).reverse():"AUTO"===n&&(this.groupOrder=e.getAutoGroupOrder(l.time.subfunction)),this.groupByTime=!0,this.update(r)}function t(e){return c[e.getMonth()]}function r(e){return d[e.getDay()]}function n(e){var t=new Date(e.getFullYear(),0,1);return dl(((e-t)/864e5+t.getDay()+1)/7)}function i(e,t){var a=null;return e.reduce(function(e,r){return a=t.call(null,r),e[a]=e[a]||[],e[a].push(r),e},{})}function l(e,t){return e.map(function(e){return jr(e,null,t)})}function o(e){var a=function(e){return{YEAR:e.getFullYear(),QUARTER:Ur(e),MONTH:t(e),WEEK:n(e),DAY:r(e),timestamps:e.getTime(),data:e}};return e.map(a)}function s(e,t,a,r){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var l={depth:a};n.push(l),t?(l.leaf=!0,l.value=r?e[i].data.getTime():e[i].data,l.point=e[i].data.getTime()):(l.value=i,l.point=e[i][0].data,l.children=e[i])}return n}var c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["YEAR","QUARTER","MONTH","WEEK","DAY"],h={YEAR:"YEAR",ABSQUARTER:"QUARTER",QUARTER:"QUARTER",MONTH:"MONTH",ABSMONTH:"MONTH",WEEK:"WEEK",ABSWEEK:"WEEK",ABSDAY:"DAY"},f={update:function(e){var t=this;t.groupByDiscreteTime&&(e=ic(t.chart.dataObject.findXCategories(),e)),t.dataCount=0,t.tickValues=l(e,t.columnInfo),t.process(),t.setDepth()},process:function(){function e(t,a,r){var n,o=a.shift();return t.forEach(function(t){o?(n=i(t.children,function(e){return e[o]}),t.children=s(n,!1,r,l),e(t.children,a.slice(0),r+1)):t.children=s(t.children,!0,r,l)}),t}var t=this,a=t.tickValues,r=0,n=ic(t.groupOrder,u),l=t.groupByDiscreteTime,c=o(a,r),d=n.slice(0),h=d.shift(),f=i(c,function(e){return e[h]}),g=0,p=s(f,!1,g,l);t.categories=e(p,d.slice(0),g+1)},getPossibleGroupBy:function(e,t){var a=e[0],r=e[e.length-1],n=a.getFullYear()===r.getFullYear(),i=t[0],l=e[e.length-1]-e[0],o=Wr(l);for(var s in o)if(o.hasOwnProperty(s)&&(o[s]>1||"YEAR"===s&&!n)){i=s;break}return i}};e.getAutoGroupOrder=function(e){var t=u.indexOf(h[e]);return u.slice(0,t)},At(e,g),Ot(e.prototype,f),Si.HierarchicalTimeDataAdapter=e}(),Si.dataset.get=function(e,t){function r(e,t,a,r,n,i,l){r=+r;var o=s.y,c=-1,d=fr(e.chartTypes[t].value),u=e.dataObject.isstacked(e.chartTypes[t].value);if(u&&!e.dataObject.isStackedPercentChart&&!e.dataObject.isPercentChart&&/(datalabels|tooltip)/.test(l))return p(e,t,n,i);if(null!=o&&(o[0]instanceof Array?o.forEach(function(e,t){c=-1==c&&e.indexOf(r)>-1?t:c}):c=o.indexOf(r)>-1?0:-1,-1!=c||d)){var h;if(d){var f=m.getX(n),g=e.subrenderer[a||0][f];h=g.total}else if(e.isAxisCategory||e.dataObject.isPolarAxisCategory){var v=e.axes.y.groups[c].scale;if(i!==Qc&&v){var y=v.domain();h=y[1]}else{var y=Fc(e,c);y=e.dataObject.isStackedPercentChart||u||e.dataObject.isPercentChart?y[c]:y,h=m.getY(n,c)<0?-y[0]:y[1]}}else if(e.isNonAxisMultiSeriesCategory){var x=e.renderer[0];if(i===Gc)return x.total;if(x.extentY)return x.extentY[1];var b=x.getProcessedNode,w=b?b(n):n;h=w.parent.value}else if("legend"===l){var C=e.seriesdata[0],k=m.yidx(Si.DataProcessor.helpers.getParsedYAxisOrder(C.yaxiscolumnorder));h=C.data[0].reduce(function(e,t){var a=t.disabled?0:fl(t[k]||0);return e+a},0)}else h=e.renderer[0].total;return h||0===h?h:null}return null}function n(e){var t,a=[];for(var r in s)if(s.hasOwnProperty(r)){var n="y"==r?$l(s[r]):s[r];if(-1!=n.indexOf(e))return"y"==r&&s[r].map(function(t,r){var n=t.indexOf(e);-1!=n&&(a.push(r),a.push(n))}),t=r,{type:t,order:a}}}function i(){var e={},t=Object.keys(s).sort(function(e,t){return t.length>e.length?-1:t.length<e.length?1:0});return t.forEach(function(t){e[t]=s[t]}),e}var l=e.metadata,o=l.columns,s=l.axes,c=e.seriesdata.chartdata,d=Si.DataProcessor.helpers,u=d.getParsedYAxisOrder;s=i();var h,f=o[s.clr]||{},g=o.map(function(e,t){return n(t)}),m={xidx:o[s.x].dataindex,yidx:function(e){var t=e instanceof Array?s.y[e[0]][e[1]||0]:s.y[e][0];return o[t].dataindex},zidx:(o[s.z]||{}).dataindex,labelidx:null!=s.label?null!=o[s.label]?o[s.label].dataindex:s.label:null,tooltipidx:function(e){return null!=s.tooltip?o[e].dataindex:null},clridx:f.levelindex?null:f.dataindex};return m.setDataObj=function(e){h=e},m.getX=function(e){return it(h)&&(h.hierarchical&&!h.hierarchical.groupByTime||h.isWaterfallEnabled)?e.index:this.getActualX(e)},m.getY=function(e,t,a){try{var r=this.yidx(t),n=null==a?e[r]:e[r][a];return n}catch(i){}},m.getZ=function(e){return e[this.zidx]},m.getClr=function(e){return e[this.clridx]},m.getDataLabelValue=function(e){return e[this.labelidx]},m.getGroupByValues=function(e,t){return null==t||0==t.length?null:t.reduce(function(t,a){return it(e[a])?t+e[a]:t},"")},m.getActualX=function(e){return e[this.xidx]},m.getDataType=function(e,t,a){if(a=a||m.seriesTypes,"x"===e&&t>0)return"ordinalNonLinear";var r=null;if(null!=l.axes[e]){var n=this.getColumnIdx(e,t),i=o[n];r=i.datatype;var s="x"==e&&(h?h.isPolarAxisCategory||h.noofBarEnabledSeries:-1!=a.indexOf(Si.charttype.bar)||-1!=a.indexOf(Si.charttype.stkdbar)||-1!=a.indexOf(Si.charttype.bullet)||-1!=a.indexOf(Si.charttype.gantt)||-1!=a.indexOf(Si.charttype.web)),c=-1!=a.indexOf(Si.charttype.heatmap)&&("x"===e||"y"===e);r=s||i.useDiscrete||c?Fo:r}return r},m.getColumnIdx=function(e,t){var a,r=l.axes[e];return"y"==e?a=t instanceof Array&&2==t.length?r[t[0]][t[1]]:r[t][0]:"tooltip"==e?a=r[t]:"x"==e&&t>0?(l.columns.filter(function(e,r){e.levelindex==t&&(a=r)}),a=a||r[0]):a=null==r?null:r[0],a},m.getColumn=function(e,t){var a=this.getColumnIdx(e,t);return o[a]},m.getColumnName=function(e,t){return(0!=t?G:Z)(o[e].columnname)},m.getCustomizedVal=function(e,t,a,r,n,i,l,s,c,d){return J(c)&&(c=!/(tooltip|legend)/.test(l)),t.toString().replace(el,function(){var t=arguments[0],u=arguments[1],h=arguments[2],f=arguments[3],g=arguments[4],p=arguments[5],v=u||h||f||g||p;if(-1!=t.indexOf("{{clr}}"))return s;if(null==o[v])return t;var y=l===ed?i:m.getDataPoint(e,v,a,r,n,i);if(null==y)return"";var x=t.match(/[a-z]+/gi)[0];switch(x){case"col":return m.getColumnName(h,c);case"val":return m.getDataPointValue(e,y,u,a,!1,l,r,c,d);case Gc:case Zc:case Qc:return m.getDataPointValue(e,y,f||g||p,a,x,l,r,c,d)}})},m.getYaxisColumnIndexBySeriesIndex=function(e,t){var r=c[t].yaxiscolumnorder||[0,0];return a(r)?s.y[r[0]][r[1]||0]:s.y[r][0]},m.getDataPoint=function(e,t,r,n,i,l){t=+t;var d=null,u=o[t]||{},h=g[t]&&g[t].type,f=r,p=!0;if("y"===h&&this.getYaxisColumnIndexBySeriesIndex(e,r)!==t)return d;if(e.dataObject.isHierarchy){var m=e.renderer[0].getProcessedNode,v=m?m(l):l;p=s.clr&&s.clr[0]===t&&1===v.depth||-1!==e.systemConf.metadata.axes.y[0].indexOf(t)||v.children&&(u.levelindex===v.depth-1||a(u.levelindex)&&-1!==u.levelindex.indexOf(v.depth-1))||!v.children&&(null==u.levelindex||null!=u.dataindex)}if(null!=f&&p){var y=e.renderer[e.isAxisCategory||e.dataObject.isPolarAxisCategory?f:0],x=null!=y&&null!=y.seriesdataAfterUpdate?y.seriesdataAfterUpdate[n]:c[f].data[n];d=l||x[i]}return d},m.getDataPointValue=function(e,t,r,n,i,l,d,h,f){null!=r&&(r=+r),J(h)&&(h=!/(tooltip|legend)/.test(l));var g,p=o[r]||{},v=p.datatype,y=p.levelindex,x=p.dataindex,b=p[v];if(null!=t){if(e.dataObject.isHierarchy){var w=e.renderer[0],C=w&&w.getProcessedNode;g=C?C(t):t}if(null==s.clr&&"legend"!==l||r!=s.clr||e.dataObject.isHierarchy&&"legend"!==l&&null!=p.dataindex){if(e.dataObject.isHierarchy&&(y===g.depth-1||a(y)&&-1!==y.indexOf(g.depth-1))){var k=g.children||null==p.dataindex?t.seriesname:t[x];return Lr(b,k,v,e,l,h)}if(null!=y&&e.dataObject.hierarchical){var O=e.dataObject.hierarchical.getParentByIndex(t.index,y-1);return O&&O.value?Lr(b,O.value,v,e,l,h):""}var A,S=this.getColumnIdx("y",u(e.seriesdata[n].yaxiscolumnorder)),P=r==S?" - ":void 0,T=i?Mr:Lr;if(f){for(var E=0,L=0;f>L;L++)E+=m.getDataPointUnformattedValue(v,n,L,r,t,l,i,x);A=E}else A=m.getDataPointUnformattedValue(v,n,d,r,t,l,i,x);return""==A&&i?A:T(b,A,v,e,l,h,P)}if(it(this.clridx)&&oc.isQuantileColorScale(e)){if("legend"===l){var P="-";return Lr(b,t,v,e,l,h,P)}return Lr(b,this.getClr(t),v,e,l,h)}return Lr(b,c[n].seriesname,v,e,l,h)}return null},m.getDataPointUnformattedValue=function(e,a,n,i,l,o,s,c){var d;if(t.dataObject.isHierarchy)var h=t.renderer[0],f=h&&h.getProcessedNode,g=f?f(l):l;if(s){var p=e==Yo?r(t,a,n,i,l,s,o):null;return null!=p?(d=(o==ed?l:t.dataObject.isHierarchy&&g.children&&it(g.value)?g.value:t.dataObject.isStackedPercentChart||t.dataObject.isPercentChart?l.y:l[c])/p*100,d=d||0):""}var m=this.getColumnIdx("y",u(t.seriesdata[a].yaxiscolumnorder));return d=t.dataObject.isHierarchy&&g.children&&i==m&&it(g.value)?g.value:o==ed?l:l[c]},m.getMetaInfoObj=function(e,t,a){function r(e,t){var a=rc(i[e]||{});return a.value=t,a.columnindex=e,a}var n=e.systemConf.metadata.axes,i=e.systemConf.metadata.columns,l=e.systemConf.seriesdata.chartdata,a=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?a:0,o=[],s=l[a].yaxiscolumnorder||[0,0],c=s instanceof Array?n.y[s[0]][s[1]||0]:n.y[s][0];if(t instanceof Array&&t.forEach(function(e,t){var a=i.indexOf(i.filter(function(e,a){return e.dataindex==t&&(m.yidx(s)!=t||m.yidx(s)==t&&c==a)})[0]);o.push(r(a,e))}),null!=n.clr){var d=n.clr instanceof Array?n.clr[0]:n.clr;o.push(r(d,l[a].seriesname))}return o},m.processMetaData=function(){function e(e,a){var r;if(a!==t){if(!it(e.datatype)){var n=m.getDataByColumnIndex(e.dataindex);r=m.findDataType(n),e.datatype=r}it(r)&&!it(e[r])&&(e[r]={})}}var t=nc(l,"axes.clr");it(t)&&(t=t[0]),o.forEach(e)},m.getDataByColumnIndex=function(e){var a=null,r=!1;return t.seriesdata.some(function(t){return t.data.some(function(t){return t.some(function(t){return it(t)?(r=it(t[e]),r&&(a=t[e]),r):void 0})})}),a},m.findDataType=function(e){return"number"==typeof e?e>31536e6?No:Yo:Fo},m.processMetaData(),m},function(){function e(e,t,a){this.data=e,this.dataset=t,this.chartObj=a,this.values=[],this.minmaxY=[],this.groupedDataBySplitAxes=[],this.groupedDataByCombo=Jl(),this.stackeddata=[],this.stackedChart=null,this.allChartTypes=null,this.hasNegativeValue=[],this.baseline=[],this.xRange=null,this.yRange=[],this.domainCorrections={plotHeight:null,byDatalabels:{},forBubbles:{}},this.rangeCorrections={datalabels:{}},this.xaxisData=e.chart.axes.xaxis,this.yaxesData=e.chart.axes.yaxis,this.qualitativeRanges=null,this.groupedByStack=Jl(),this.ganttSeries_count=0,this.categoriesStore=null,this.plotBorder=null,this.globalChartType=null,this.hierarchical=a.preProcessor.hierarchical,this.processedseriesData=a.seriesdata,this.initialize()}var t=e.prototype;t.getSeriesData=function(){var e=this,t=this.chartObj;if(it(e.hierarchical)&&e.hierarchical.categories){var a=e.hierarchical.getSeries();return t.seriesdata=a,a}return t.seriesdata},t.getMinMaxZ=function(){return ao($l(this.categoriesStore.z))},t.isBarEnabled=function(t){var a=e.helpers,r=a.getChartType(t.type||this.globalChartType,Yo);return!t.disabled&&ir(r)},t.getAxisRotated=function(){var e=this.data.chart.axes;return e&&e.rotated===!0},t.containsNegativeData=function(e){return this.hasNegativeValue[e]},t.updateSeriesdatabyCategories=function(t,a,r,n,i){var l=this.dataset,o=e.helpers,s=o.isCatNull(l,"x"),c=o.isCatNull(l,"y",n),d=d3.set();return t=t.filter(function(e){var t=!0,o=l.getX(e);if(a&&(t=t&&!s(o)&&a.indexOf(o)>-1),r){var u=l.getY(e,n);t=t&&!c(u)&&r.indexOf(u)>-1}return a&&i&&t&&!e.disabled&&(d.has(o)?t=!1:d.add(o)),t})},t.getPlotBorder=function(){var e=this,t=e.data,a=e.plotBorder,r=t.chart.plot.border,n=0;return r.show===!0&&(a={},a.top=a.right=a.bottom=a.left=n),a},t.overBubbles=function(e,t,a){var r=this,n=r.domainCorrections,i=r.xaxisData,l=r.yaxesData,o=r.chartObj,s=t+(it(a)?a:""),c=o.plotarea.height,d=r.chartObj;if(it(n.forBubbles[s])&&n.plotHeight===c)return n.forBubbles[s];n.plotHeight=c;var u="x"===t,h=d.axes[t].orient,f=0,g=d.plotarea["left"===h?"height":"width"],p=[f,g],m=u?i:l[a],v=_l().domain(e).range(p),y=r.updateMinMaxForBubble(p,v,t,a);return f=it(m.minRange)?f:v.invert(y[0]),g=it(m.maxRange)?g:v.invert(y[1]),n.forBubbles[s]=[e[0]-f,g-e[1]],n.forBubbles[s]},t.setGroupDataComboKey=function(e,t,a){var r=this,n=r.data,i=r.groupedByStack,l=r.groupedDataByCombo,o=0;if(e&&ir(t)){if(n.seriesdata.stackGroup&&(o=$a(a.si,n.seriesdata.stackGroup)),i.has(o)){var s=i.get(o);i.set(o,s.concat([a]))}else i.set(o,[a]);i.get(o).stackLabelIndex=a.si}var c=it(o)?t+"_"+o:t;if(l.has(c)){var d=l.get(c);l.set(c,d.concat([a]))}else l.set(c,[a])},t.setExtremes=function(e,t,r,n,i,l){var o=this,s=o.dataset,c=o.categoriesStore.z;if(((r===Yo||r===No)&&!t||i)&&!e.disabled&&a(e)){var d=$l(e);if(i){var u=ao(d,function(e){return s.getZ(e)});c.push(u)}if(r===Yo||r===No){var h;if(n==Si.charttype.arearange||n==Si.charttype.gantt){var f=$l(d.map(function(e){return s.getY(e,l)}));h=ao(f)}else h=ao(d,function(e){return s.getY(e,l)});o.seriesExtermes[l].push(h)}}},t.initialize=function(t){var r,n=this,i=n.domainCorrections,l=(n.xaxisData,n.yaxesData),o=n.allChartTypes,s=n.data,c=n.chartObj,d=n.globalChartType=s.seriesdata&&s.seriesdata.type,u=s.metadata.axes.y.length,h=s.metadata,f=h.axes,g=s.chart.plot.plotoptions,p=n.isstacked(),m=n.groupedDataBySplitAxes=[],v=n.groupedByStack=Jl(),y=n.dataset,x=n.categoriesStore={},b=n.processedseriesData,w=e.helpers;n.hierarchical&&!n.hierarchical.groupByTime&&it(t)&&n.hierarchical.update(),n.xRange=null,n.actual_yRange=n.actual_yRange||[],n.yRange=[],n.qualitativeRanges=null,n.groupedDataByCombo=Jl(),i.plotHeight=null,i.forBubbles={},y.seriesTypes=[],n.isBubbleEnabled=!1,n.noofBarEnabledSeries=0,n.noofAreaEnabledSeries=0,n.noofGanttEnabledSeries=0,n.totalnoofdatas=0,n.lastCategoryValue=0,n.isCombinationalChart=eo(),n.isAxisCategory=!1,n.isNonAxisMultiSeriesCategory=!1,n.isContinousChart=!0,n.isPolarAxisCategory=!1,n.hasLevelMarker=!1,n.isStackedPercentChart=!1,n.isPercentChart=!1,x.x=[],x.z=[[0]],x.subseries=[],y.hasNullFormatter={},r=this.plotBorder={},r.left=r.top=r.right=r.bottom=0,n.seriesExtermes=[];for(var C=c.axes.y.groups,k=0;u>k;k++)x["y"+k]=[],n.seriesExtermes[k]=[],it(l[k])?null:l[k]={},C[k]=C[k]||{},C[k].disabled=!0;if(a(b)){var O=f.x?y.getColumn("x"):null,A=O?O.datatype:null,S=it(f.z),P=w.groupByDataIndices(h);o=n.allChartTypes=o||w.getAllChartTypes(s);var T=function(e){return-1!==o.indexOf(e)};n.isDiscrete=Si.chartcategory.discrete.some(T),n.isHierarchy=Si.chartcategory.hierarchy.some(T),n.hasZaxis=it(y.zidx)&&Si.chartcategory.zaxis.some(T);var E=s.metadata.axes.x,L=s.metadata.columns[E].datatype;n.needXCategoriesSorting=!1;var z;b.forEach(function(e,r){var i=e.disabled,l=e.data,s=w.is3D(l),c=w.getChartType(e.type||d,Yo),u=(w.getChartType(e.type||d,"string"),w.getParsedYAxisOrder(e.yaxiscolumnorder)),h=(x["y"+u],y.getDataType("y",u));if(y.seriesTypes.push(c),n.isCombinationalChart.add(c),n.isBubbleEnabled=n.isBubbleEnabled||!i&&or(c),n.isWaterfallEnabled=n.isWaterfallEnabled||!i&&sr(c),n.pieWithAxis=n.pieWithAxis||!i&&fr(c),n.noofBarEnabledSeries+=ir(c)&&!i?1:0,n.noofAreaEnabledSeries+=c!=Si.charttype.area&&c!=Si.charttype.stkdarea||i?0:1,n.noofGanttEnabledSeries=n.ganttSeries_count+=c!==Si.charttype.gantt||i?0:1,n.isContinousChart=n.isContinousChart&&(c==Si.charttype.line||nr(c)||cr(c)),n.hasLevelMarker=n.hasLevelMarker||c==Si.charttype.bullet||c==Si.charttype.dial,n.isAxisCategory=n.isAxisCategory||Si.chartcategory.axis.indexOf(c)>=0,n.isNonAxisMultiSeriesCategory=n.isNonAxisMultiSeriesCategory||Si.chartcategory.nonaxismultiseries.indexOf(c)>=0,n.isPolarAxisCategory=n.isPolarAxisCategory||c==Si.charttype.web,"addorremoveseries"!==t&&!s&&a(l)&&(l=n.convertTo3DArray(e,P,c)),!i&&a(l)){x["y"+u].enabled=!0,C[u].disabled=!1,z=c===Si.charttype.waterfall&&null==z;
var f={si:r,d:l};m[u]=m[u]?m[u].concat([f]):[f],n.setGroupDataComboKey(p,c,f);var g=y.getDataType("x",null,o),v=(y.getDataType("y",u,o),y.getColumn("y",u));it(y.hasNullFormatter.x)||(y.hasNullFormatter.x=!(g===Fo?!$(O[A],"nullformatting"):!0)),it(y.hasNullFormatter["y"+u])||(y.hasNullFormatter["y"+u]=!(h===Fo?!$(v[v.datatype],"nullformatting"):!0)),n.storeCategories(l,p,P,c,g,h,u,z),n.setExtremes(l,p,h,c,S,u),n.totalDataCount(l)}});var D=nc(c.userdata,"chart.axes.xaxis.categories");if(n.isAxisCategory&&L!==Fo&&n.needXCategoriesSorting&&(!it(D)||it(D)&&0===D.length)&&x.x.sort(no),n.xymultiRenderer=n.isAxisCategory,n.isCombinationalChart=n.isCombinationalChart.values().length>1,n.groupedByStack=v,n.isPercentChart=n.noofBarEnabledSeries&&!n.hasLevelMarker&&!n.noofGanttEnabledSeries&&$(g,"bar","showAs")&&g.bar.showAs,p){var R=y.seriesTypes;n.isStackedPercentChart=n.noofBarEnabledSeries&&!n.hasLevelMarker&&!n.isWaterfallEnabled&&g.bar.stacked.showAs===qc||n.noofAreaEnabledSeries&&g.area.stacked.showAs===qc||R.indexOf(Si.charttype.web)>-1&&g.web.stacked.showAs===qc||R.indexOf(Si.charttype.line)>-1&&g.line.stacked.showAs===qc}n.pieWithAxis&&"addorremoveseries"!==t&&(n.bubblepieData=n.processBubblePieData())}},t.getThresholdValues=function(e){var t=[];return it(e.threshold)&&kt(e.threshold,function(e){e.show===!0&&e.values.length&&(t=t.concat(e.values))}),t},t.getDomain=function(e,t){return this.hierarchical&&(!this.hierarchical.groupByDiscreteTime||!t)||this.isWaterfallEnabled?d3.range(e.length):e},t.updateMinMaxForBubble=function(t,a,r,n){var i=this,l=i.processedseriesData,o=i.groupedDataBySplitAxes,s=i.dataset,c=i.chartObj,d=e.helpers,u=t[0],h=t[1],f="x"==r,g=(f?l:o[n])||[];return g.forEach(function(e){var t=f?e.data:e.d,r=(f?e:l[e.si]).disabled,i=d.getParsedYAxisOrder((f?e:l[e.si]).yaxiscolumnorder);if(!r){var o=d.isCatNull(s,"x"),g=d.isCatNull(s,"y",i);t.forEach(function(e){e.forEach(function(e){var t=f?s.getX(e):s.getY(e,n),r=s.getZ(e)||c.zscale.domain()[0];if(e&&!e.isDummy&&!o(s.getX(e))&&!g(s.getY(e,i))){var l=c.zscale(r),d=a(t)+(null!=a.bandwidth?a.bandwidth()/2:0),p=d+l/2,m=d-l/2;p>h&&(h=p),u>m&&(u=m)}})})}}),[u,h]},e.helpers={isCatNull:function(e,t,a){var r=e.hasNullFormatter&&!e.hasNullFormatter[t+(it(a)?a:"")];return function(e){return!it(e)&&r}},is3D:function(e){return a(e)&&a(e[0])&&a(e[0][0])},getParsedYAxisOrder:function(e){return a(e)?e[0]:e||0},getChartType:function(e,t,a,r){if(null!=e||null!=a){var n,i,l=r&&r.seriesdata.chartdata;return it(a)&&(e=ic((l[a]||l[0]).type,r.seriesdata.type)),isNaN(+e)?(n=e.toLowerCase(),i=Si.charttype[n]):(i=+e,n=Si.charttypenames.get(i)),"string"===t?n:t===Yo?i:{name:n,value:i}}},getAllChartTypes:function(e,t){var a=this,r=e.seriesdata&&e.seriesdata.type;return ic(nc(e,"seriesdata.chartdata"),[]).map(function(e){var n=a.getChartType(ic(e.type,r),ic(t,Yo));return t||"object"!==t?n:{}})},filterDataToViewPort:function(e,t,a,r){return e.filter(function(e){var n=r(e);return n>=t&&a>=n?e:void 0})},priorityBasedValue:function(e,t){var a=null,r=e.length,n=0;for(t=ic(t,0);r>n&&!it(a);)a=null!=e[n]?e[n]:null,n++;return ic(a,t)},groupByDataIndices:function(e){var t=e.columns,a=e.axes.groupby||[];return a.map(function(e){return t[e].dataindex})}},Si.DataProcessor=e}(window,Si),function(e){"use strict";function t(e){this.chart=e,this.data=e.systemConf,this.initialize()}t.prototype.initialize=function(){var e=this,t=e.chart,a=e.data,r=a.metadata.axes.x,n=a.metadata.columns[r].datatype,i=Si.DataProcessor.helpers,l=Si.chartcategory.discrete.some(function(e){return-1!==t.chartTypes.indexOf(e)}),o=i.getChartType(null,null,0,t.systemConf),s=o.value,c=o.name,d=ir(s)||nr(s)||lr(s)||cr(s)||"line"===c;this.isHierarchyLayout()&&d&&(e.hierarchical=new Si.HierarchicalOrdinalDataAdapter(this.chart),e.chart.seriesdata=this.hierarchical.getSeries()),e.processTimeData(),Si.requireXDataSorting&&(n===Yo||n===No&&!l)&&e.sortData(r,n)},t.prototype.isHierarchyLayout=function(){function e(e){return g.hasInnerSeries(e)}var t=this,a=t.chart,r=a.systemConf.seriesdata.chartdata;return r.some(e)},t.prototype.processTimeData=function(){var e,r,n,i,l=this,o=l.chart,s=o.seriesdata;e=t.helpers.time.getDataInfo(l.data),r=e.indices,n=e.formatConf,i=n.some(function(e){return it(e)&&it(e.inputformat)}),r&&r.length&&i&&s.forEach(function(r){var n=r.data,i=Si.DataProcessor.helpers.is3D(n);a(n)&&n.forEach(function(r){i&&a(r)&&r.forEach(function(a){t.helpers.time.applyFormats(a,e)}),i||t.helpers.time.applyFormats(r,e)})})},t.prototype.sortData=function(e){var r=this,n=r.chart,i=r.data,l=n.seriesdata;return l.forEach(function(r){var n=r.data,l=i.metadata.columns[e].dataindex;Si.DataProcessor.helpers.is3D(n)?a(n)&&n.forEach(function(e){t.helpers.linear.sort(e,l)}):t.helpers.linear.sort(n,l)}),i},t.helpers={time:{},ordinal:{},numeric:{},linear:{}},t.helpers.time={getDataInfo:function(t,a){var r,n,i,l=t.metadata.axes.x,o=$l([l,$l(t.metadata.axes.y)]),s=/timestamp/i,c=[],d=[];return o.map(function(o){i=ic(t.metadata.columns[o],{}),r=ic(i.time,{}),"time"!==i.datatype||o===l||a||(n=r.inputformat,d.push(s.test(n)&&"function"!==n&&"function"!=typeof e[n]?null:r),c.push(t.metadata.columns[o].dataindex))}),{indices:c,formatConf:d}},applyFormats:function(e,t){var r=t.indices,n=t.formatConf;return r.map(function(t,r){it(e[t])&&(e[t]=a(e[t])?e[t].map(function(e){return jr(e,null,n[r],!0).getTime()}):jr(e[t],null,n[r],!0).getTime())}),e}},t.helpers.linear={sort:function(e,t){return e.sort(function(e,a){return e=e[t],a=a[t],a>e?-1:e>a?1:e>=a?0:0/0})}},Si.PreProcessor=t}(window),Si.DataProcessor.prototype.getCategories=function(e,t){var a,r=this,n=r.chartObj,i=n.dataObject.hierarchical,l=r.categoriesStore;return $(n.systemConf,"chart.zoom."+e+".categories")?n.systemConf.chart.zoom[e].categories:("x"===e?(a=it(i)?i.groupByTime?t>0?i.categoriesList[t-1]:i.groupByDiscreteTime?r.xaxisData.categories:i.leafCategories:t>0?i.categoriesList[t-1]:i.leafCategories:r.xaxisData.categories,t=""):a=r.yaxesData[t].categories,it(a)&&0!==a.length||(a=l[e+t]),"y"!==e||l["y"+t].enabled||(a=["NoData","NoData"]),a)},Si.DataProcessor.prototype.getMinMaxX=function(e){var t,a=this,r=a.xaxisData,n=a.processedseriesData,i=a.chartObj,l=a.dataset,o=r.minRange,s=r.maxRange,c=l.getDataType("x"),d=a.xRange;if(e=ic(e,.05),$(i.systemConf,"chart.zoom.x"))return xRange=i.systemConf.chart.zoom.x,[xRange.minRange,xRange.maxRange];if(!it(d)){t=n.map(function(e){return e.data.map(function(e){return ao(e,function(e){return l.getX(e)})})});var u=ic(nc(i.userdata,"chart.axes.xaxis"),{});d=a.xRange=ao($l($l(t)).concat(a.getThresholdValues(u)))}!a.isBubbleEnabled||c===No||it(o)||it(s)||(t=a.overBubbles(d,"x"),d=[d[0]-t[0],d[1]+t[1]]);var h,f,g=0;return c!==No&&0!==e&&(g=a.getCorrectionOverDataLabels(d,"x")),h=d[1]-d[0],0===h&&(h=1),f=h*e+g,[ic(o,d[0]-f,0),ic(s,d[1]+f,0)]},Si.DataProcessor.prototype.getMinMaxY=function(e,t,a){var r,n=this,i=n.allChartTypes,l=n.yaxesData,o=n.hasNegativeValue,s=n.baseline,c=n.yRange,d=n.actual_yRange,u=n.chartObj,h=n.dataset,f=n.isstacked()||n.isPercentChart,g=ic(l[e],{}),p=h.getDataType("y",e),y=n.ganttSeries_count,x=g.minRange,b=g.maxRange,w=0,C=c[e],k=u.getAxesCount("y")>1,O=n.noofBarEnabledSeries,e=ic(e,0);if(s[e]=nc(g,"baseline.show")===!0?g.baseline.value:null,k)var A=n.groupedDataBySplitAxes[e],S=A?A.map(function(e){return i[e.si]}):[],P=function(e){return ir(e)?!0:void 0},O=S.some(P);if($(u.systemConf,"chart.zoom.y")){var T=u.systemConf.chart.zoom.y,E=T.minRange,L=T.maxRange,z=s[e];return o[e]=it(z)&&!f&&z>=E&&L>=z?z:0>E?0:null,[E,L]}if(t=ic(t,u.datalabels.hasFixedPosition?1e-8:.05),!it(c[e])){n.isWaterfallEnabled?(c[e]=en(n,e),r=c[e]):f?(c[e]=v(s[e],n),r=c[e][e]):(c[e]=m(e,n),r=c[e]);var D=ic(nc(u.userdata,"chart.axes.yaxis["+e+"]"),{});it(r)&&(r=ao(r.concat(n.getThresholdValues(D))));var R;(n.hasLevelMarker||O&&!y)&&(R=n.overLevelMarker(r)),f?(d[e]=d[e]||[])[e]=c[e][e]=ic(R,r):d[e]=c[e]=ic(R,r),C=c[e]}if(!it(C)||f&&!it(C[e]))return["NoData","NoData"];var j=f?C[e]:C;o[e]=p===No?null:it(s[e])&&!f?s[e]:g.minRange<0||j[0]<0?0:null;var M=(n.noofBarEnabledSeries||n.noofAreaEnabledSeries)&&p==Yo,I=M&&(null!=o[e]?o[e]>0:!0);M&&j[1]-j[0]===0&&(j=ao($l([j,[0]]))),!n.isBubbleEnabled||p===No||it(g.minRange)||it(g.maxRange)||(j[0]=I?0:j[0],r=n.overBubbles(j,"y",e),j=[j[0]-r[0],j[1]+r[1]]);var B=j[1]-j[0];0===B&&(B=1),n.isStackedPercentChart||n.isPercentChart||n.hasLevelMarker||n.isWaterfallEnabled||(w=B*t),it(x)||(x=I?0:j[0]-w),it(b)||(b=j[1]+w);var H=0;if("time"!==p&&0!==t&&!a){var V=u.datalabels.hasFixedPosition&&it(g.maxRange)&&g.maxRange<=j[1];H=V?0:this.getCorrectionOverDataLabels([x,b],"y",e)}if(I||u.datalabels.hasFixedPosition||(x=x-H||0),b=b+H||0,n.isWaterfallEnabled){var F=an([x,b],"y",e,u,H);x=F[0],b=F[1]}return[x,b]},Si.DataProcessor.prototype.isstacked=function(e){var t=this.data,a=t.chart.plot.plotoptions,r=this.stackedChart,n=Si.DataProcessor.helpers;if(it(e)){var i=n.getChartType(e,Yo);return e=n.getChartType(e,"string"),a=a[e],i===Si.charttype.stkdarea||i===Si.charttype.stkdbar||i===Si.charttype.bullet||"bullet"===e||("bar"===e||"area"===e||"web"===e||"line"===e||"waterfall"===e)&&nc(a,"stacked.enabled")===!0}if(!it(r)){var l=this.allChartTypes||n.getAllChartTypes(t),o=l[0];this.stackedChart=r=-1!==l.indexOf(Si.charttype.stkdarea)||-1!==l.indexOf(Si.charttype.stkdbar)||-1!==l.indexOf(Si.charttype.bullet)||-1!==l.indexOf(Si.charttype.bar)&&nc(a,"bar.stacked.enabled")===!0||-1!==l.indexOf(Si.charttype.area)&&nc(a,"area.stacked.enabled")===!0||o===Si.charttype.web&&nc(a,"web.stacked.enabled")===!0||o===Si.charttype.line&&nc(a,"line.stacked.enabled")===!0||o===Si.charttype.waterfall&&nc(a,"waterfall.stacked.enabled")===!0}return r},Si.DataProcessor.prototype.getXYvalue=function(e,t,a,r,n,i,l,o,s){var c=this,d=this.yaxesData,u=this.dataset;if(c.isPolarAxisCategory){var h=d[n].reversed&&!t?r.domain().length-1:0,f=a(u.getX(i)),g=t?r(i.y+i.y0):r(u.getY(i,n))+(null!=r.bandwidth?r.bandwidth()/2:0);g=ul(g,r.range()[h]);var p=$t(g,f);return"x"===l?p[0]:p[1]}switch(l){case"x":return e?t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0):a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0);case"y":return e?a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0):t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0);case"z":return o(u.getZ(i)||o.domain()[0])}},Si.DataProcessor.prototype.getTransRectValue=function(e,a,r,n,i,l,o){var s=this.dataset,c=Si.DataProcessor.helpers,d=c.priorityBasedValue,u=i&&i.yscale,h=i&&i.addRangeBand(u),f=i&&"waterfall"==i.charttype,g=i&&i.stacked||f,p=i&&s.getY(a,i.yaxiscolumnorder)instanceof Array,m=i&&(u.bandwidth?u.ordinalRange[0]+h:u.range()[0]),v=i&&u.range()[1];switch(this.dataset.yAccessor=this.isPercentChart?function(e){return e.y}:this.dataset.getY,e){case"x":if(i.axisrotated){o=p?0:null;var y=this.dataset.yAccessor(a,i.yaxiscolumnorder,o);return u.bandwidth?u.origRange[0]:u(g?hl(a.y0,a.y+a.y0):null!=o?y:null!=i.hasNegValue?y<i.hasNegValue?y:i.hasNegValue:u.domain()[0])}var x=s.getX(a);return(i.stacked?i.bandwidth1(x)+i.bandwidth2(i.stackGroupIndex):i.bandwidth1(x)+i.bandwidth2(i.barDatasetIndex+r))+i.padding;case"y":if(i.axisrotated){var x=s.getX(a);return(i.stacked?i.bandwidth1(x)+i.bandwidth2(i.stackGroupIndex):i.bandwidth1(x)+i.bandwidth2(i.barDatasetIndex+r))+i.padding}o=null!=o?o:p?1:null;var y=this.dataset.yAccessor(a,i.yaxiscolumnorder,o);return g?u(ul(a.y0,a.y+a.y0))+h:u(null==u.bandwidth?ul(i.hasNegValue||0,y):y)+h;case"width":if(i.axisrotated){var b=null==i.hasNegValue?p?u(this.dataset.yAccessor(a,i.yaxiscolumnorder,0)):m:u(i.hasNegValue);o=p?1:null;var y=u(this.dataset.yAccessor(a,i.yaxiscolumnorder,o));return u.bandwidth?y+h:g?fl(u(a.y+a.y0)-u(a.y0))+h:(fl(v-b-(v-y))||0)+h}return i.barWidth;case"height":if(i.axisrotated)return i.barWidth;var b=null!=i.hasNegValue?u(i.hasNegValue):p&&!g?u(this.dataset.yAccessor(a,i.yaxiscolumnorder,0)):m;o=p?1:null;var y=u(this.dataset.yAccessor(a,i.yaxiscolumnorder,o))+h;return u.bandwidth?fl(u.origRange[0]-y):g?fl(b-u(a.y+a.y0)-(b-u(a.y0)))+h:fl(b-y);case"radius":var w={},C=null!=l?l.toString().split("/"):null,k=null!=C&&null!=C[0]?C[0].split(" "):[],O=null!=C&&null!=C[1]?C[1].split(" "):k;return w.tlx=t(d([k[0]])),w.tly=t(d([O[0],k[0]])),w.trx=t(d([k[1],k[0]])),w.trY=t(d([O[1],O[0],k[1],k[0]])),w.brx=t(d([k[2],k[0]])),w.bry=t(d([O[2],O[0],k[2],k[0]])),w.blx=t(d([k[3],k[1],k[0]])),w.bly=t(d([O[3],O[1],k[3],k[0]])),w}},Si.DataProcessor.prototype.getCorrectionOverDataLabels=function(e,t,a){var r=this,n=r.chartObj,i=r.xaxisData,l=r.yaxesData,o=r.domainCorrections,s=r.rangeCorrections.datalabels,c=r.processedseriesData,d=r.groupedDataBySplitAxes,u="x"==t,h=t+(it(a)?a:""),f=u?i:l[a],g=f.minRange,p=f.maxRange,m=n.plotarea.height;if(!(r.isStackedPercentChart||r.isPercentChart||r.isBubbleEnabled&&!r.pieWithAxis||!r.isAxisCategory&&!r.isNonAxisMultiSeriesCategory||null!=g&&null!=p||!Si.labelRenderer||null!=o.byDatalabels[h]&&m==o.plotHeight)){o.plotHeight=m;var v=n.axes[t].orient,y=n.plotarea["left"==v?"height":"width"],x=e[1]-e[0],b=u?c:d[a],w=0;null!=b&&(J(s[h])&&(s[h]=ad(t,b,n)),w=s[h]),o.byDatalabels[h]=x/(y-w)*w}return o.byDatalabels[h]||0},Si.DataProcessor.prototype.extendOuterpadding=function(e,t,a,r,n,i,l){var o=this.processedseriesData,s=this.groupedDataBySplitAxes,c=this.rangeCorrections.datalabels,d=this.chartObj,u=0;if(b(d)||this.isBubbleEnabled){t[0]>t[1]&&(t=[t[1],t[0]]);var h=Wl().domain(e).range(t).paddingInner(r).paddingOuter(n),f=t;if(this.isBubbleEnabled){var g=this.updateMinMaxForBubble(t,h,i,l),p=.5*ul(t[0]-g[0],g[1]-t[1]);f=[g[0]-p,g[1]+p]}else if(Si.labelRenderer){var m="x"==i?o:s[l],v=h(h.domain()[0])-h.range()[0],y=i+(it(l)?l:"");J(c[y])&&(c[y]=ad(i,m,d));var p=c[y];p=ul(0,p-v),f=[t[0]-p,t[1]+p]}u=ul(f[1]-t[1],-f[0])}return u},Si.DataProcessor.prototype.convertTo3DArray=function(e,t,a){var r=e.data;if(t.length>0&&(a===Si.charttype.bar||a===Si.charttype.stkdbar)){var n=C(e,t),i=n.distintGroupbyCat,l=n.allGroupbyCat,o=[];e.data.forEach(function(e,t){var a=i.indexOf(l[t]);o[a]?o[a].push(e):(o[a]=[],o[a].push(e))}),r=e.data=o}else it(r)&&(!r.length||it(r[0])&&r[0].length)&&(e.data=[],e.data.push(r),r=e.data);return r},Si.DataProcessor.prototype.findXCategories=function(e){var t=this,a=t.categoriesStore,r=t.processedseriesData,n=t.dataset,i=a.x;return r.forEach(function(t){var a=t.disabled&&!e,r=t.data;a||null==r||r.constructor!=Array||r.map(function(e){return null!=e&&e.constructor==Array?e.map(function(e){var t=n.getX(e);null!=t&&-1==i.indexOf(t)?i.push(t):null}):void 0})}),i},Si.DataProcessor.prototype.storeCategories=function(e,t,r,n,i,l,o,s){var c=this,d=c.dataset,u=c.categoriesStore,h=u.x,f=u["y"+o],g=Si.DataProcessor.helpers,p=g.isCatNull(d,"x"),m=g.isCatNull(d,"y",o);t?e.map(function(t){return!e.disabled&&a(t)?t.map(function(e){var a=d.getActualX(e),n=r.length>0?d.getGroupByValues(e,r):null;a>c.lastCategoryValue&&!c.needXCategoriesSorting?c.lastCategoryValue=a:c.needXCategoriesSorting||-1!=h.indexOf(a)||(c.needXCategoriesSorting=!0),p(a)||-1!=h.indexOf(a)&&!s?null:h.push(a),null!=n&&(t.groupByVal=n,e.groupByVal=n,-1==u.subseries.indexOf(n)?u.subseries.push(n):null)}):void 0}):(i===Fo||l===Fo)&&e.map(function(t){return!e.disabled&&a(t)?t.map(function(e){var t=d.getActualX(e),a=d.getY(e,o);i!==Fo||p(t)||(s||-1===h.indexOf(t)?h.push(t):null),l===Fo&&(n===Si.charttype.arearange||n===Si.charttype.gantt?(it(a)&&-1===f.indexOf(a[0])?f.push(a[0]):null,it(a)&&-1===f.indexOf(a[1])?f.push(a[1]):null):m(a)||-1!==f.indexOf(a)?null:f.push(a))}):void 0})},Si.DataProcessor.prototype.overLevelMarker=function(e){var t,r,n=this,i=Si.DataProcessor.helpers,l=n.qualitativeRanges,o=n.processedseriesData,s=i.getChartType(n.processedseriesData[0].type||n.globalChartType,"string"),c=n.data.chart.plot.plotoptions[s],d=c.levelMarker,u=c.targetMarker;return it(l)||(l=n.qualitativeRanges=[],o.forEach(function(e){var n=e.plotoptions||{};d=ac(d,n.levelMarker),u=ac(u,n.targetMarker),t=d.dataindex,r=u.dataindex,(d.enabled||u.enabled)&&(t||r?e.data.forEach(function(e){e.forEach(function(e){u.enabled&&it(e[r])&&l.push(e[r]),d.enabled&&it(e[t])&&(a(e[t])?l=l.concat(e[t]):l.push(e[t]))})}):d.enabled&&it(d.values)&&(l=l.concat(d.values)))})),isNaN(l[1]-l[0])&&!this.hasLevelMarker?e:d3.extent(d3.merge([l,e,[0]]))},Si.DataProcessor.prototype.totalDataCount=function(e){var t=this,r=0;return e.map(function(n){if(!e.disabled&&a(n)){var i=t.isAxisCategory||t.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory?n.length:n.reduce(function(e,t){return e+(t.disabled?0:1)},0);r+=1!==i||null!==n[0]&&n[0].length?i:0}}),this.totalnoofdatas+=r,r},Si.DataProcessor.prototype.processBubblePieData=function(e){e=e||Si.charttype.bubblepie;var t=this,a=t.processedseriesData,r=t.chartObj,n=t.dataset,i=[],l=rt(t.data.chart.plot.plotoptions[Si.charttypenames.get(e)].dataindex,3),o=nc(r.userdata,"chart.axes.xaxis.categories"),s=n.getDataType("x")==Fo&&o&&o.length,c=s?o:t.findXCategories(!0);return a.forEach(function(e,t){var o=r.chartTypes[t].value,s=e.disabled||!fr(o),d=e.data,u=Si.DataProcessor.helpers.getParsedYAxisOrder(t.yaxiscolumnorder),h=nc(r.userdata,"chart.axes.yaxis["+u+"].categories"),f=n.getDataType("y",u)==Fo&&h&&h.length;d.forEach(function(e,t){i[t]=i[t]||[],c.forEach(function(r,o){var c=e.filter(function(e){var t=n.getX(e),a=n.getY(e,u),i=t===r;return f&&(i=i&&h.indexOf(a)>-1),i})[0];if(!c){var d;a.some(function(e){var a=e.data;return a[t].some(function(e){var t=n.getX(e)===r;return t&&(d=e.slice(0),d[l]=null),t})}),c=d}if(c){c.disabled=c.dummy=s,i[t][o]=i[t][o]||[];var g=n.getY(c,u);it(i[t][o].reference)&&n.getY(i[t][o].reference,u)!==g?c.disabled=c.dummy=!0:it(c[l])&&(i[t][o].reference=c),i[t][o].push(c)}})})}),i},Si.hierarchymodel={},Si.hierarchymodel.get=function(e){function r(e){return e.map(function(e){var t;if(e.data&&e.data[0]&&e.data[0].constructor===Array){t=e.data;var a=e.leafColors;a&&t.forEach(function(e,t){e.color=a[t%a.length]})}else e.data?(c.hasHierarchyData=!0,t=r(e.data)):t=e;for(var n in e)e.hasOwnProperty(n)&&"data"!==n&&(t[n]=e[n]);return t})}function n(e){e.forEach(function(t,r){if(t.level=null!=e.level?e.level+"_"+r:r+"",a(t[0]))n(t);else{var o=+t.level.split("_")[0],d=i.seriesdata.chartdata[o],u=s.getParsedYAxisOrder(d.yaxiscolumnorder);if(!d.disabled){var h=ao([t],function(e){return l.getY(e,u)});c.seriesExtermes[0].push(h),c.totalnoofdatas++}}})}var i=e.systemConf,l=e.dataset,o=e.seriesdata,s=Si.DataProcessor.helpers,c={data:i};return c.getTransRectValue=function(e,a,r,n,i,l){var o=s.priorityBasedValue;switch(e){case"radius":var c={},d=null!=l?l.toString().split("/"):null,u=null!=d&&null!=d[0]?d[0].split(" "):[],h=null!=d&&null!=d[1]?d[1].split(" "):u;return c.tlx=t(o([u[0]])),c.tly=t(o([h[0],u[0]])),c.trx=t(o([u[1],u[0]])),c.trY=t(o([h[1],h[0],u[1],u[0]])),c.brx=t(o([u[2],u[0]])),c.bry=t(o([h[2],h[0],u[2],u[0]])),c.blx=t(o([u[3],u[1],u[0]])),c.bly=t(o([h[3],h[1],u[3],u[0]])),c}},c.getAxisRotated=function(){var e=c.data.chart.axes;return e&&e.rotated===!0},c.containsNegativeData=function(){return!1},c.isstacked=function(){return!1},c.getPlotBorder=function(){var t=i.chart.plot.border,a=t.show===!0?nt(t,"size",0,10,e.plotarea.width,e.plotarea.height):0;return a={left:a,top:a,right:a,bottom:a}},c.initialize=function(t){globalChartType=i.seriesdata&&i.seriesdata.type,l.seriesTypes=[],c.totalnoofdatas=0,c.isNonAxisMultiSeriesCategory=!0,c.isHierarchy=!0,c.seriesExtermes=[[]],null!=o&&a(o)&&("addorremoveseries"!=t&&(e.seriesdata=o=r(o)),n(o),o.forEach(function(e){var t=s.getChartType(e.type||globalChartType,Yo);l.seriesTypes.push(t)}))},c.initialize(),c},Si.defaultTheme=function(e){var t={canvas:{fontFamily:Us.globalProp.fontL1Family,fontColor:Us.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:Us.globalProp.fontL1Weight,fontStyle:Us.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:300}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"center",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},colorBand:{},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},expandable:{fontSize:e.fontL1Size.l5}},chart:{marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,zoom:{type:"none"},effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:Us.globalProp.animation.enabled,easingType:Us.globalProp.animation.easingType,duration:Us.globalProp.animation.duration},datalabels:{show:Us.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5,boundBox:{strokeColor:Us.fontColor,fillColor:"white"}},events:{cursor:null,click:Us.globalProp.events.click,mousemove:Us.globalProp.events.mouseMove,mouseout:Us.globalProp.events.mouseOut,doubleclick:Us.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:{xaxis:{show:!0,label:{show:!0,text:"Xaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"transparent",strokeWidth:null},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}}]}},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"},pointerEvents:"none"},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}};return t},Si.getDefaultOptions=function(e,t,a){var r;switch(e){case"zoom":r={type:"none",resetButton:{fillColor:"grey",label:{text:"Reset Zoom",marginTop:5,marginRight:5,marginBottom:5,marginLeft:5,fontSize:a.fontL2Size.l5},border:{show:!0,size:1,radius:6,color:"#cccccc"},shadow:{show:!1,dx:1,dy:1,color:"#cccccc",blur:1}},selectionArea:{fillColor:"grey",fillOpacity:.4}};break;case"scroll":r={enabled:!0,categoryThickness:null,visibleCategories:null,height:10,slider:{fillOpacity:.3,strokeOpacity:.3,strokeColor:"black"}};break;case"legend":r={};break;case"credits":r={enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:a.fontL1Size.l4};break;case"notes":r={enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:a.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:a.fontL1Size.l5}}};break;case"bar":r={outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:["#d8d8d8"],fillOpacity:.9},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}};break;case"line":r={mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent"},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}};break;case"area":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}}};break;case"arearange":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}}};break;case"scatter":r={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};break;case"bubblepie":case"pie":r={startAngle:0,endAngle:2*kl,innerRadius:0,outerPadding:10,datalabels:{type:"circular",padding:5,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}},"bubblepie"==e?(r.strokeColor="transparent",r.outerPadding=.02,r.datalabels.showAs="percent",r.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(r.strokeColor="white",r.sliceOutHeight=5,r.maxRadius=250,r.datalabels.showAs="x");break;case"funnel":r={weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",coneWidth:"100%",strokeColor:"transparent",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}};break;case"web":r={fillOpacity:.5,strokeWidth:2,mode:"linearClosed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white"},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}};break;case"pyramid":r={threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}};break;case"sunburst":r={strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"splitpercent",parentLabel:{}}}};break;case"dial":r={startAngle:-kl/2,endAngle:kl/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,strokeColor:"rgba(0,0,0,0.1)",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:a.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},targetMarker:{outerStrokeWidth:3,symbol:"line",innerFillOpacity:0,innerStrokeOpacity:0,outerFillColor:"grey",outerStrokeColor:"#000"},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}};break;case"bubble":r={outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}};break;case"packedbubble":r={fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}};break;case"bullet":r={strictBandWidth:!0,outerPadding:1e-8,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)",label:{fontSize:a.datalabels.fontSize.l5}},animation:{type:"verticalAll"},datalabels:{textOverlap:"none",showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}}};break;case"gantt":r={outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}};
break;case"treemap":r={outerPadding:5,strokeColor:"rgba(255,255,255,0.7)",animation:{type:"fadeOneByOne"},datalabels:{showAs:"y",vAlign:"bottom",hAlign:"left"},gradients:{options:{linear:{y2:100,x2:100,colorGamma:[.5,0]},radial:{radius:100}}},parent:{strokeOpacity:0,datalabels:{position:"inset",vAlign:"center",hAlign:"center",showAs:"y"},events:{}}};break;case"heatmap":r={strokeColor:"white",animation:{},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:100},radial:{radius:100}}}};break;case"dotgrid":r={fillOpacity:.2,outerPadding:.2,animation:{type:"grid"},datalabels:{showAs:"x"}};break;case"waterfall":r={outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},connector:{},comparisonLine:{},cascadeCategories:{dataindex:2},risingCategories:{},fallingCategories:{},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}};break;case"wordcloud":r={strokeColor:"transparent",animation:{type:"fadeOneByOne"},datalabels:{showAs:"x"},gradients:{options:{linear:{x2:100,y2:100,colorGamma:[0,1.5]},radial:{radius:100,colorGamma:[1,0]}}}};break;case"metadata":r={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}return r},Si.setDefaultOptions=function(e,t,a,r,n){n||(r=Si.getDefaultOptions(e,t,a));var i=null==t[e]?t[e]={}:t[e];return ac(r,i,!0,!0),t[e]=r,r};var Zs={solid:"",shortdash:"1.5,1.5",shortdot:"0.1,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.1,2.5",shortdashdotdot:"1.5,2,0.1,2,0.1,2",dashdot:"2.5,2.5,0.1,2.5",longdashdot:"5,5,0.1,5",longdashdotdot:"5,2.5,0.1,2.5,0.1,2.5"},Qs=function(){};Qs.get=function(e,t,a,r){r=r||{};var n=r.offset,i=(r.dimension,r.returnSVGimage),l=r.base64,o=r.chartObj,s="svgPattern"==r.moduleType?Ks:null;if(e=e||s,(null!=t||""!=t)&&e[t]){var c="zp"+W(a,t);if(null!=c){if(null!=Si[c]){var d=Si[c];return i?d:d.id||d}var d=e[t](a,c,n,i,l,o);return d?(Si[c]=d,i?d:d.id||d):void 0}}},Si.effects=Qs,Si.patternutil=function(){};var qs={};Si.addPattern=function(e,t,a,r,n,i,l,o,s){qs[e]={type:t||"diagonal-line-right",size:a||5,strokeWidth:r||1,bgClr:i,stroke:n,fillOpacity:l||1,strokeOpacity:o||1,translate:s}},Si.getPattern=function(e){return{type:qs[e].type,size:qs[e].size,strokeWidth:qs[e].strokeWidth,bgClr:qs[e].bgClr,stroke:qs[e].stroke,fillOpacity:qs[e].fillOpacity,strokeOpacity:qs[e].strokeOpacity,translate:qs[e].translate}};var Ks=function(){};Ks.imageFill=function(e,t){var a=e.width,r=e.height,n=Us.patternSVG;return n.select("defs").append("pattern").attrs({patternUnits:"userSpaceOnUse",id:t,width:a,height:r,x:e.x||0,y:e.y||0}).append("image").attrs({"xlink:href":e.name,x:0,y:0,width:a,height:r}),t},Ks.svgPatternFill=function(e,t,a,r,n,i){var l;if(l=null!=e.ele?R(e.ele,e,t,i):j(e,t,i),r){var o="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+l.w+"' height='"+l.h+"'>"+(new XMLSerializer).serializeToString(l.node.node())+"<path d='"+V("square")(hl(l.w,l.h))+"' transform='translate("+l.w/2+","+l.h/2+")' style='fill: url(#"+l.id+")'></path> </svg>";return{url:Gs.FIREFOX||n?"data:image/svg+xml;base64,"+Xs(o):"data:image/svg+xml;utf8,"+o,width:l.w,height:l.h,id:l.id}}return l};var $s=function(){};$s.get=function(e,t,a,r,n,i){var l=e.type;if(l&&l!==Sl){var o=n?n.plot.renderer.mode:"svg",s=e.options[l]||e.options,c=rc(s);switch(c.color=null!=t?t:c.color,c.dimension=null!=a?a:c.dimension,c.defsLocation=n?n.defsLocation:"",c.id=n.id,o){case"canvas":return c.pointOpacity=i||1,canvasGradient.create(n.context,l,c,r);default:return Qs.get($s,l,c,{offset:r})}}},$s.svgGradientFill=function(e,t,a,r,n,i){return e&&e.type?$s[e.type](e,t,a,r,n,i):null},$s.radial=function(e,t){var a=Us.patternSVG,r=e.color,n=e.dimension,i=e.spreadMethod,l=it(n[2])?n[2]:n[0],o=l/100*(+e.x||0),s=l/100*(+e.y||0),c="repeat"!==i&&"reflect"!==i||!Gs.IS_IOS&&!Gs.SAFARI?l/100*+e.radius:l,d=a.select("defs").append("radialGradient").attrs({id:t,gradientUnits:e.gradientUnits||"userSpaceOnUse",spreadMethod:i});return d.attrs("objectBoundingBox"==e.gradientUnits?{cx:(+e.x||0)+"%",cy:(+e.y||0)+"%",r:(+e.radius||0)+"%"}:{cx:o+"px",cy:s+"px",r:c+"px"}),I(d,e,r,"radial"),t},$s.linear=function(e,t,a){var r=Us.patternSVG,n=e.color,i=e.dimension,l=e.spreadMethod,o=+e.x1||0,s=+e.x2||0,c=+e.y1||0,d=+e.y2||0,u="repeat"!==l&&"reflect"!==l||!Gs.IS_IOS&&!Gs.SAFARI?100:ul(fl(s-o),fl(d-c)),h=/(pie|dial|bubblepie|web)/.test(a)?-i[0]:0,f=_l().domain([0,100]).range([h,i[0]]),g=_l().domain([0,100]).range([h,i[1]]);o=100*o/u,s=100*s/u,c=100*c/u,d=100*d/u;var p=r.select("defs").append("linearGradient").attrs({id:t,gradientUnits:e.gradientUnits,spreadMethod:l});return p.attrs("userSpaceOnUse"==e.gradientUnits?{x1:f(o)+"px",x2:f(s)+"px",y1:g(c)+"px",y2:g(d)+"px"}:{x1:o+"%",x2:s+"%",y1:c+"%",y2:d+"%"}),I(p,e,n,"linear"),t},$s.thresholdLinear=function(e,t,a){var r=Us.patternSVG,n=r.select("defs").append("linearGradient").attrs({id:t,gradientUnits:"userSpaceOnUse",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),i=zt(n,"stop",a,".","class","stop");return i.attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}),t};var Js=function(){};Js.chalk=function(e,t){var a=Us.patternSVG,r=a.select("defs").append("filter").attrs({id:t,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return r.append("feTurbulence").attrs({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"turbulence"}),r.append("feOffset").attrs({result:"result2",dx:-2,dy:-2}),r.append("feDisplacementMap").attrs({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R","in":"SourceGraphic"}),t},Js.dropShadow=function(e,t){var a=Us.patternSVG,r=a.select("defs").append("filter").attrs({x:e.x,y:e.y,width:e.width,height:e.height,id:t,filterUnits:e.filterUnits});if(r.append("feGaussianBlur").attrs({"in":e.source||"SourceAlpha",stdDeviation:e.blur}),"SourceGraphic"!==e.source){r.append("feOffset").attrs({dx:e.dx,dy:e.dy,result:"offsetblur"});var n=e.color,i=null,l=n&&n.match(tl);l&&5===l.length&&(n=la(n),i=l[4]);var o=r.append("feFlood");o.attrs({"flood-color":n,"flood-opacity":i}),r.append("feComposite").attrs({in2:"offsetblur",operator:"in"});var s=r.append("feMerge");s.append("feMergeNode"),s.append("feMergeNode").attr("in","SourceGraphic")}return t},Js.colorMatrix=function(e,t){{var a=Us.patternSVG,r=a.select("defs").append("filter").attr("id",t);r.append("feColorMatrix").attrs({"in":"SourceGraphic",type:e.type,values:e.values})}return t},Js.freeHand=function(e,t){{var a=Us.patternSVG,r=(null==e.scale?7:e.scale,a.select("defs").append("filter").attr("id",t));r.append("feTurbulence").attrs({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),r.append("feDisplacementMap").attrs({xChannelSelector:"R",yChannelSelector:"G","in":"SourceGraphic",in2:"turbulence_3",scale:e.scale})}return t};var ec=function(){};ec.tenbytenGrid=function(e,t){{var a=Us.patternSVG,r=a.select("defs").append("mask").attrs({id:t,maskUnits:"userSpaceOnUse",width:e.width,height:e.height,x:e.x,y:e.y});r.append("polygon").attr("points",H(e.x,e.y,e.type,e.percent,e.size,e.width)).styles({fill:e.fillColor})}return t};var tc=function(){};tc.polygon=function(e,t,a,r,n,i){var l=Gs.SAFARI?i.svg:Us.patternSVG;return l.select("defs").append("clipPath").attr("id",t).append("path").attr("d",e.d),t},tc.rect=function(e,t,a,r,n,i){var l=Gs.SAFARI?i.svg:Us.patternSVG;return l.select("defs").append("clipPath").attr("id",t).append("rect").attrs({x:e.x,y:e.y,width:e.width,height:e.height}),t},Si.utils=function(){},Si.utils.getActualTextBounds=function(e,t,a){var t=t,r=e,n=a*(2*Math.PI/360),i={};return i.width=Math.abs(r*Math.sin(n))+Math.abs(t*Math.cos(n)),i.height=Math.abs(r*Math.cos(n))+Math.abs(t*Math.sin(n)),i};var ac=Si.utils.mergeJSON=function(e,t,a,r){e=e||{},t=t||{};var n=null!=r&&1==r?e:rc(e);for(var i in t)t.hasOwnProperty(i)&&(void 0!=n[i]?null==t[i]||t[i].constructor!=Object&&t[i].constructor!=Array?1==a&&"object"==typeof n&&(n[i]=t[i]):n[i]=ac(n[i],t[i],a,r):n[i]=t[i]);return n};Si.utils.getValueOfPlotOptions=function(e,t){return function(a){return null!=e&&null!=e[a]?e[a]:null!=t&&null!=t[a]?t[a]:null}},Si.utils.getVal=function(e,t){return"function"==typeof e?e.apply(null,t):e};var rc=Si.utils.simpleClone=function(e){var t,r=e;if(e&&"object"==typeof e){r=a(e)?[]:{};for(t in e)r[t]=rc(e[t])}return r},nc=Si.utils.getPropVal=function(e,t){return $(e,t,!0)};Si.utils.elementIsVisible=xt;var ic=function(){var e,t,a=arguments,r=a.length;for(e=0;r>e;e++)if(t=a[e],it(t))return t;return a[r-1]};d3.selection.prototype.isD3Selection=!0,Si.utils.getStyle=Pt;var lc=function(e){return e},oc={};oc.getProcessedColorRange=function(e,t,a,r){var n=a.stops,i=a.ranges,l=[],o=r.dataset.getDataType("clr")===Fo;if(!o&&n&&n.length){var s=0;t.forEach(function(t){var a=n.indexOf(t);-1===a&&(a=s),l.push(e[a%e.length]),s=a})}else if(i&&i.length){i=Ea(r,!0);for(var c=0,d=function(e,a){return(1===e.length?o?e[0]===t[c]:e[0]===t[c+1]:e[0]===t[c]&&e[1]===t[c+1])?(h=a,!0):void 0},u=t.length;u>c;o?c++:c+=2){var h=-1;i.some(d),l.push(-1===h||i[h].disabled?null:e[h%e.length])}}else l=e;return l},oc.getColorDomain=function(e){var t=e.systemConf.legend.colorBand,a=t.stops,r=t.ranges,n=oc.getMinMax(e),i=ic(t.minRange,n[0])||0,l=ic(t.maxRange,n[1])||0,o=e.dataset.getDataType("clr")===Fo;if(!o&&a&&a.length){var s=q(a);s.sort(no);var c=s.filter(function(e){var a=!0;return it(t.minRange)&&(a=a&&e>=t.minRange),it(t.maxRange)&&(a=a&&e<=t.maxRange),a});return(i<c[0]||!c.length)&&c.splice(0,0,i),l>c[c.length-1]&&c.splice(c.length,0,l),c}if(r&&r.length){var d=Ea(e),u=[];if(o)u=d;else{if(1===d[0].length){var h=i;d=d.map(function(e){var t=[h,e[0]];return h=t[1],t})}u=d,u.splice(0,0,[-1/0,-Ol]),u.splice(u.length,0,[Ol,1/0])}var f=$l(u);return f}return[i,l]},oc.getMinMax=function(e){var t=oc.getAllColorData(e);return ao(t)},oc.getCategories=function(e){var t=oc.getAllColorData(e);return t.filter(function(e,a){return a===t.indexOf(e)})},oc.getAllColorData=function(e){var t=e.seriesdata,a=[];return t.forEach(function(t){if(!t.disabled){var r=t.data||t;oc.pushColorData(e,r,a)}}),a},oc.pushColorData=function(e,t,r){if(t&&a(t)&&a(t[0]))t.forEach(function(t){oc.pushColorData(e,t,r)});else{var n=e.dataset.getClr(t);r.push(n)}},oc.isQuantileColorScale=function(e){if(e.axes.clr)return"quantile"===e.axes.clr.scaleType;var t=e.dataObject;return it(e.dataset.clridx)&&!(t.noofAreaEnabledSeries||t.isPolarAxisCategory||t.allChartTypes&&t.allChartTypes.indexOf(Si.charttype.line)>-1)},oc.getItemIndex=function(e,t,a,r){var n=a&&e.dataset.getClr(a);return t?t(n):r},oc.getIndexScale=function(e){var t,a=oc.isQuantileColorScale(e),r=e.systemConf.legend.colorBand.ranges;if(a&&r&&r.length){var n,i=e.axes.clr.scale,l=i.domain(),o=e.patternPallete,s=e.imagePallete;s&&s.length?n=s:o&&o.length&&(n=o),n&&(t=i.copy(),t.range(oc.getProcessedColorRange(xo(n.length),l,e.systemConf.legend.colorBand,e)))}return t},Si.scale.constructor=function(e,t,a,r){function n(){var t=e.dataObject,n=t.hierarchical,i=0,l=e.brush?e.brush.extent:null,o=e.axes.x;if(e.axes.x.scale=a(e,e.dataObject,e.plotarea,e.axes.x.orient,0,e.dataset,"x",l),e.axes.x.eventscale=null==r?e.axes.x.scale:r(e,e.dataObject,e.plotarea,e.axes.x.orient,null,e.dataset,"x"),it(n)){e.axes.x.rangeScale=e.axes.x.scale.copy(),e.axes.x.rangeScale.outerPaddingPx=e.axes.x.scale.outerPaddingPx,n.groupByDiscreteTime&&e.axes.x.rangeScale.domain(t.getDomain(t.getCategories("x"))),i=n.finalDepth,n.setRanges(e.axes.x.rangeScale);for(var s=0;i>s;s++)o.levels[s]||(o.levels[s]={}),o.levels[s].scale=a(e,t,e.plotarea,e.axes.x.orient,s+1,e.dataset,"x",l,null)}return[{scale:e.axes.x.scale}].concat(o.levels)}function i(){for(var t=e.axes.y.count,n=e.axes.y,i=0;t>i;i++)n.groups[i]||(n.groups[i]={}),n.groups[i].scale=a(e,e.dataObject,e.plotarea,e.axes.y.orient,i,e.dataset,"y"),n.groups[i].eventscale=null==r?n.groups[i].scale:r(e,e.dataObject,e.plotarea,e.axes.y.orient,i,e.dataset,"y");return e.axes.y.groups}var l,o=Si.scale.getScale,s=Si.scale.getEventScale;switch(a=ic(a,o),r=ic(r,s),t){case"left":l=e.axes.rotated?n():i();break;case"bottom":l=e.axes.rotated?i():n()}return l},Si.scale.getScale=function(e,t,a,r,n,i,l,o,s){function c(){var n=y.reversed;if(O)return n?[rt(k.endAngle,2*kl),rt(k.startAngle,0)]:[rt(k.startAngle,0),rt(k.endAngle,2*kl)];if("clr"===l)return e.imagePallete||e.seriesColor;if("z"===l){if(A){var i=1;return[ta(k.minSize,i,ta("25%",i)),ta(k.maxSize,i,ta("100%",i))]}var o;t.isCombinationalChart?e.chartTypes.some(function(e){var t=e.name;return"bubble"===t||"bubblepie"===t?(o=t,!0):void 0}):o=C;var s=m.chart.plot.plotoptions[o]||{},c=hl(a.width,a.height),i=rt(s.size,1);return[ta(s.minSize,c,ta("2.5%",c))*i,ta(s.maxSize,c,ta("25%",c))*i]}var d=t.getPlotBorder();return n?"bottom"===r||"top"==r?[Yn(e,"width",a)-d.right,d.left]:[d.top,Yn(e,"height",a)-d.bottom]:"bottom"===r||"top"==r?[d.left,Yn(e,"width",a)-d.right]:[Yn(e,"height",a)-d.bottom,d.top]}function d(){return O||A||"x"!=l?0:rt(k.padding,t.noofBarEnabledSeries?.2:.9)}function u(){return O||S||A?0:"y"===l?rt(y.outerPadding,e.datalabels.hasFixedPosition?1e-8:.05):null!=s?s:rt(k.outerPadding,.02)}function h(){return"x"===l?m.chart.axes.xaxis:"clr"===l?m.legend.colorBand:m.chart.axes.yaxis[n||0]}function f(e,a,r){var i=0,o=0,s=0,c=e[0]<e[1],d=c?0:1,u=c?1:0;o=t.extendOuterpadding(p,e,m,E,r,l,n),i+=o;var h=fl(e[1]-e[0]);return s=h*a,i+=s,e[d]=e[d]+i,e[u]=e[u]-i,{range:e,outerPaddingPx:i}}var g,p,m=e.systemConf,v=i.getDataType(l,n),y=h(),x=t.hierarchical,b=it(y.minRange),w=it(y.maxRange),C=e.chartTypes[0].name,k=m.chart.plot.plotoptions[C],O="dial"===C||"web"===C&&"x"===l,A="heatmap"===C,S="clr"===l&&oc.isQuantileColorScale(e),P=$(m,"chart.zoom."+l,!0),T=c(),E=d(),s=u();switch(v){case"numeric":o?p=o:"x"===l?p=t.getMinMaxX(0):"y"===l?p=t.getMinMaxY(n,s):"z"===l?p=t.getMinMaxZ():(p=oc.getColorDomain(e),T=oc.getProcessedColorRange(T,p,y,e));var L=p[0],z=p[1];if("NoData"==p[0]&&"NoData"==p[1]&&(p=[0,0]),!P&&(o||"x"==l)){var D=p[1]-p[0],R=0==D?e.plotarea.width/2:D*s;p[0]=b?p[0]:p[0]-R,p[1]=w?p[1]:p[1]+R}var j="clr"===l&&y.ranges&&y.ranges.length?oc.quantileScale:_l;g=j().domain(p).range(T);var M=[g(L),g(z)];g.actualRange=M,g.origRange=T;break;case"ordinal":if(o)p=o;else if("clr"===l)p=oc.getColorDomain(e),T=oc.getProcessedColorRange(T,p,y,e);else{var I=t.getCategories(l,n);p=t.getDomain(I,!0)}var B,H=0,V=[T[0],T[1]];if(E=1===p.length?0:E,s){H=Si.scale.getOuterPadding(T,p.length,E,s);var F=f(T,s,H);T=F.range,B=F.outerPaddingPx}var j="clr"===l?Gl:Wl;g=j().domain(p),"clr"===l?g.range(T):g.range(T).paddingInner(E).paddingOuter(0),Ra(g),g.origRange=V,g.outerPaddingPx=B||0;break;case"time":var N=i.getColumn(l,n),Y=N[N.datatype],_=Y&&Y.subfunction,W=ic(Y&&Y.useUTC,!1);p=o?o:"x"===l?t.getMinMaxX(0):t.getMinMaxY(n,0);var L,z,X=new Date(p[0]),U=new Date(p[1]);if(it(_)||(_=Xr(U-X).subFunction),!P){if(!m.chart.axes[l+"axis"].disableBaseValue){var G=new sc(Y);G.useUTC=W,G.getBaseValue(X,_,!1),G.getBaseValue(U,_,!0)}if(L=X,z=U,t.isBubbleEnabled){var Z=t.overBubbles([X.getTime(),U.getTime()],l,"y"==l?n:null);X=new Date(X.getTime()-Z[0]),U=new Date(U.getTime()+Z[1])}var D=U.getTime()-X.getTime(),Q=0==D?e.plotarea.width/2:D*s,q=0==s?0:t.getCorrectionOverDataLabels([X.getTime(),U.getTime()],"x");X=new Date(b?p[0]:X.getTime()-Q-q),U=new Date(w?p[1]:U.getTime()+Q+q),p=[X,U]}g=Xl().domain(p).range(T);var M=[g(L),g(z)];g.actualRange=M,g.origRange=T;break;case"ordinalNonLinear":var I=t.getCategories(l,n);p=t.getDomain(I);var V=[T[0],T[1]],K=x.rangeList?x.rangeList[n-1]:null;g=Si.nonLinearOrdinalScale().domain(p).range(T).rangeBands(K),g.origRange=V}return g.outerPadding=s,g},Si.scale.getEventScale=function(e,t,a,r,n,i,l){var o,s=i.getDataType(l,n);switch(s){default:o=Si.scale.getScale(e,t,a,r,n,i,l)}return o},Si.scale.invert=function(e,t,a,r,n,i){var l;switch(e){case"numeric":case"time":var o="y"==n?r?t.x:t.y:r?t.y:t.x;l=a.invert(o);break;case"ordinal":var s=Ra(a),c=a.bandwidth(),d=s.length>1?fl(s[1]-s[0]):0,u=fl(d-c);s=s.map(function(e){return e-u/2}),l=La(t,s,n,r,i)}return l},Si.scale.ordinalSubInvert=function(e,t,a,r,n,i,l){var o=a.bandwidth(),s=a.range(),c=r.ordinalRange,d=a.domain(),u=s[1]-s[0],h=u-d.length*o,f=d.map(function(e,a){return c[t]+a*(o+h)}),g=La(e,f,i,n,l);return g},Si.scale.barBandwidth=function(e){var t=e.systemConf,a=e.dataObject,r=a.isstacked()?a.groupedByStack.keys().length||1:Ql(e.seriesdata.map(function(e){return a.isBarEnabled(e)?e.data.length:void 0})),n=e.chartTypes[0],i=n.name,l=n.value==Si.charttype.bullet,o=(ur(n.value),t.chart.plot.border),s=o.show===!0?o.size:0,c="gantt"==i||"bullet"==i||"bar"==i||"waterfall"==i?t.chart.plot.plotoptions[i].padding||.2:.2,d=1==r?0:"bar"==i||"gantt"==i||"waterfall"==i?t.chart.plot.plotoptions[i].interPadding||0:0,u=t.chart.plot.plotoptions[i].outerPadding;u=null!=u&&""!==u?u:.02;var h,f,g=e.axes.x.scale.domain().length,p=e.axes.rotated?[Yn(e,"height",e.plotarea)-s,s]:[s,Yn(e,"width",e.plotarea)-s];u=Si.scale.getOuterPadding(p,g,c,u),u+=a.extendOuterpadding(xo(g),p,t,c,u,"x"),e.barscale1=h=e.axes.x.scale,e.barscale2=f=Wl().domain(xo(r)).range([0,h.bandwidth()]).paddingInner(d);var m=a.noofBarEnabledSeries&&!l?t.chart.plot.plotoptions[i].maxBandWidth||h.bandwidth():200;if(!l&&f.bandwidth()>m){var v=(h.bandwidth()-r*m)/2;f.range([v,h.bandwidth()-v]).paddingInner(d)}return[h,f]},Si.scale.getOuterPadding=function(e,t,a,r){var n=fl(e[1]-e[0]),i=r*n,l=(n-2*i)/(t-a+0);return i/l},Si.scale.getOrdinalOuterPadding=function(e,t,a,r){var n=fl(e[1]-e[0]),i=r*n;return i/2},Si.scale.getContinuousRangeBand=function(e,t,a){var r=e(t[0]),n=a&&t[a]?e(t[a]):r,i=e(a&&t[a+1]?t[a+1]:t[1]),l=i-n,o=e.range(),s=0>l?-1:1;return{outerPaddingInPixel:s*hl(fl(r-o[0]),fl(l/2)),rangeBand:l/2}},Si.scale.getDiscreteRangeBand=function(e){var t=e.bandwidth(),a=e.outerPaddingPx+t/2,r=e.domain().length>1?e.ordinalRange[1]-e.ordinalRange[0]-t:0,n=t/2+r/2;return{outerPaddingInPixel:hl(a,n),rangeBand:t/2+r/2}},Si.scale.getRangeBand=function(e,t,a){var r;return r=e.bandwidth?Si.scale.getDiscreteRangeBand(e):Si.scale.getContinuousRangeBand(e,t,a)},Si.nonLinearOrdinalScale=function(){function e(e){return t?t.get(e):null}var t,a,r,n,i;return e.domain=function(t){return arguments.length?(a=t,e):a},e.rangeBand=function(){return 0},e.rangeBands=function(a){if(!arguments.length)return r;if(null==a)return e;i=a,r=new Jl,t=new Jl;var n=-1,l=a.length;for(temp=0;++n<l;)t.set(n,a[n][0]),r.set(n,a[n][1]-a[n][0]);return e},e.discreteWidth=function(e){return r?r.get(e):null},e.range=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return Si.nonLinearOrdinalScale().domain(a).rangeBands(i).range(n)},e},oc.quantileScale=function(){function e(e){var t;return r.forEach(function(a,r){e>=a[0]&&e<=a[1]&&(t=r)}),it(t)?a[t]:null}var t=[],a=[],r=[];return e.domain=function(a){if(arguments.length){t=a;for(var n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return e}return t},e.range=function(t){return arguments.length?(a=t,e):a},e.copy=function(){return oc.quantileScale().domain(t).range(a)},e},Si.axis.render=function(e,t,r,n){function i(){var t=w.chart.axes.animation||{},a=t.enabled;if(!it(a)){var r=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata:e.seriesdata.slice(0,1);a=r.some(function(t,a){var r=e.chartTypes[a].name;return Wt(w.chart.plot.plotoptions[r],t.plotoptions,e,r).enabled})}return a?ic(t.duration,600):0}function l(t,a,r,n,i){var l=w.chart.plot.border,o=e.container.selectAll("g.plotareaBorder-property"),s=null;if(it(l)&&l.show===!0){var c=o.selectAll("path.plotBorderPath"),d=nt(l,"size",0,10,e.plotarea.width,e.plotarea.height);d=null==d||""===d?2:d;var u=e.dataObject.getTransRectValue("radius",null,null,null,null,l.radius),h=Mt(.5,.5,e.plotarea.width,e.plotarea.height,u,!1,!1);c.styles({"stroke-width":d,stroke:l.color,"stroke-dasharray":O(l.style,d),fill:Sl,"pointer-events":Sl}).attrs({d:h}),o.selectAll("line").style("stroke",Pl)}else{var f=a.axisline,g=0==f.show||null==f.color?Pl:f.color,p=rt(f.strokeWidth,1),m=f.style||"solid",v=zt(o,"line",[1],".","class",t);if(0==i||0==a.show||"hidden"==r.style("visibility"))return void v.style("stroke",Pl);var y,x,b,C;"bottom"==t?(y=0,x=e.plotarea.width,b=e.plotarea.height+.5,C=e.plotarea.height+.5):"left"==t?(y=.5,x=.5,b=0,C=e.plotarea.height):"right"==t?(y=e.plotarea.width+.5,x=e.plotarea.width+.5,b=0,C=e.plotarea.height):"top"==t&&(y=0,x=e.plotarea.width,b=.5,C=.5),v.styles({"stroke-width":p,stroke:g,"shape-rendering":"crispedges","stroke-dasharray":O(m,p)}).attrs({x1:y,x2:x,y1:b,y2:C}),s={size:p,clr:g},o.node()["border-"+t]=s}r.selectAll("path.domain").style("stroke",Pl)}function o(t,a,r){var n=t.orient,i=e.axes.rotated;return n=null==n?"x"==a?i?"left":"bottom":i?"bottom":0==r?"left":"right":n}function s(t,a){var r=[];switch(t){case"left":r=e.axes.rotated?d("x",a):d("y",a);break;case"bottom":r=e.axes.rotated?d("y",a):d("x",a)}return r}function c(t,a,r,n){var i="left"==a?e.axes.rotated?"x":"y":e.axes.rotated?"y":"x",l=Pa(e,i,r).component,o=h(l,i,t,a,r,n);return o}function d(t,a){var n=Pa(e,t,a),i="x"==t?w.chart.axes.xaxis:w.chart.axes.yaxis[a]||w.chart.axes.yaxis[0],l=n.component;return l?l:(n.component="x"==t?i.show&&qt(e,"xaxis",r)?Si.axis.get():null:i.show?Si.axis.get():null,l)}function u(e,t,a,r){var n=[];return n=f(e,a,t,r)}function h(a,n,i,l,s){var c="x"==n?w.chart.axes.xaxis:w.chart.axes.yaxis[s],l=o(c,n,s),d="bottom"==l||"top"==l?r:t,u=c.show===!0&&qt(e,n+"axis",d),h="bottom"==l?c.ticklabel.marginTop:"top"==l?c.ticklabel.marginBottom:"left"==l?c.ticklabel.marginRight:c.ticklabel.marginLeft;if(h=ic(h,5),"y"!==n||u&&!e.axes.y.groups[s].disabled||T++,u){var f=e.axes.y.groups,g=Pa(e,n,s).ticks,p=g.preCalcAxisLen,m=(g.preCalcApproxAxisLength(D),g.preCalcAxisLen-p),y=g.tickValueObj,b="x"==n?n+"-axis-"+s:n+"-axis-"+s,O=zt(A.selectAll("g."+n+"-axis"),"g",u?[c]:[],".","class",b);if(fl(m)>1&&(x(l,m),D=e.plotarea),null!=a){var S="y"==n?P.axes.y[s].length>1:!1,L=g&&g.isHierarchy()&&e.dataObject.hierarchical.groupByTime,z=e.dataset.getColumnIdx(n,L?0:s),R=P.columns[z].datatype;R=g&&g.isHierarchialLevelType()&&e.dataObject.hierarchical.categoryTree?Fo:R;var j=P.columns[z][R];j=S&&"y"==n?ka(s,e):j;var M=j&&(j.axisformat||j.format),I=rt(c.tickmark.size,6),B=(C.isStackedPercentChart||C.isPercentChart)&&"y"==n?Mr:Lr,H=L?s:null,V=!(g&&g.isHierarchy())&&j&&M&&M.specifier&&M.specifier.constructor==Array||"wrapOnSpace"==y.mode||"wrapAll"==y.mode;a.orient(l).scale(i).tickPadding(h).tickSize(I).tickSizeOuter(0).majorTicks(s===("y"===n?T:E)?v(l,n):null).plotarea(e.plotarea).systemconf(e.systemConf).tickRotation(y.rotation).preCalcTickLen(g.preCalcTickLen).chartObj(e).columnIndices(S&&"y"==n?P.axes.y[s]:[z]).isMultiLineTick(V);var F=null!=j?j.axisformat||j.format:null;if(F&&"auto"==F.specifier&&!i.bandwidth)a.tickValues(g.getTicksforAxisComp()).tickFormat(function(e){var t=i;d3.select(this).text(t.tickFormat()(e))});else{a.tickValues(g.getTicksforAxisComp());var N=g.getActualTicklabel(),Y=g.tickValueObj.maxTickSize.horizontal,_=g.tickValueObj.maxTickSize.vertical,W=Si.utils.getVal(at([c.ticklabel,e.systemConf.chart,e.systemConf.canvas,Us],"fontSize")),X="wrapOnSpace"==g.tickValueObj.mode||"wrapAll"==g.tickValueObj.mode,U=a.isMultiLineTick(),G=it(c.ticklabel.showAs),Z=[null,l,e,y.rotation,c.ticklabel.textOverflow,a.scale(),O,a,"ticklabel",c.ticklabel,s,!0],Q=ja.apply(null,Z),q=function(t,a){var r=N(a),n=B(j,r,R,e,"axis",null,null,H);d3.select(this).text(n),U?(X&&(n=Ga(n,g.tickValueObj.mode,Y,_,W)),Nt(d3.select(this),n,{orient:l})):G&&it(g.tickValueObj.customTicks[a])&&(this.innerHTML="",Nt(d3.select(this),g.tickValueObj.customTicks[a],null,!0)),Q(this,a)};a.tickFormat(q)}"y"===n&&f[s].disabled||(a.plotBorderDrawn=!k[l],k[l]=!0),a.hideAxisLabel=!qt(e,n+"axislabel",d)}}return a}function f(a,n,i){var s="x"==n?w.chart.axes.xaxis:w.chart.axes.yaxis[i],c=(s.ticklabel,o(s,n,i)),d="bottom"==c||"top"==c?r:t,u=s.show===!0&&qt(e,n+"axis",d),h="x"==n?n+"-axis-"+i:n+"-axis-"+i,f=A.selectAll("g."+h),m=Pa(e,n,i);if(f.style("display","y"===n&&e.axes.y.groups[i].disabled?Sl:null),u){{m.ticks.tickValueObj}e.plotarea=a.plotarea(),"x"===n?g(s,i,a):p(s,i,a),f.transition().duration(S).call(a,n,i),"y"==n&&1==a.plotBorderDrawn?l(c,s,f,a,u):"x"==n&&0==i&&l(c,s,f,a,u)}else l(c,s,f,a,u);"y"==n&&$(w.chart,"scroll")&&w.chart.scroll.enabled&&e.brush.initialize(e.plotarea)}function g(t,a,r){var n={left:0,top:0,right:0,bottom:0},i=e.axes.x.count;if(0==a){for(var l=0;i>l;l++){var o=Pa(e,"x",l),s=o.component,c=r.orient(),d=s.tickLabelWidth()||m(t.label,t.ticklabel,s.preCalcTickLen(),e,"x",l,c),u=A.selectAll(".x-axis-"+l),h="right"==c?e.plotarea.left+e.plotarea.width+n.right:e.plotarea.left-n.left,f=e.axes.rotated||"top"==c?e.plotarea.top-n.top:e.plotarea.top+e.plotarea.height+n[c];n[c]+=d,u.attr("transform","translate("+h+","+f+")")}var u=A.selectAll("g.x-axis-0")}}function p(t,a,r,n){var i=w.chart.axes.yaxis,o=e.axes.y.groups.length,s=A.selectAll(".y-axis-0"),c=i[0].orient||(e.axes.rotated?"bottom":i[0].orient||"left");if(n||0==a){for(var d={left:0,top:0,right:0,bottom:0},u=0;o>u;u++){var h=i[u],f=h.orient;if(f=f||(e.axes.rotated?"bottom":null!=h.orient?h.orient:0==u?"left":"right"),h.show===!0){var g=e.axes.y.groups[u].component,p=A.selectAll(".y-axis-"+u),v=g.tickLabelWidth()||m(h.label,h.ticklabel,g.preCalcTickLen(),e,"y",u,f),y="bottom"==f||"top"==f?e.plotarea.left:"left"===f?e.plotarea.left-d[f]:e.plotarea.left+e.plotarea.width+d[f],x="bottom"==f?e.plotarea.height+e.plotarea.top:e.plotarea.top;d[f]+=e.axes.y.groups[u].disabled?0:v,p.attr("transform","translate("+y+","+x+")"),g&&1==g.plotBorderDrawn&&l(f,h,p,r)}}e.axes.rotated?null:s.selectAll("line.majorTicks").attr("x2","right"==c?-e.plotarea.width:e.plotarea.width)}}function m(e,t,a,r,n,i,l){var o={top:0,right:0,bottom:5,left:0},s=0,c=0,d=Pa(r,n,i),u=d.component,h=d.ticks;c="clr"===n?0:d.axisLabel.getBBox().height;var f=u.hideAxisLabel||e.show===!1||!it(e.text)||""===e.text||h.isHierarchy()&&i<r.dataObject.hierarchical.finalDepth;f?o.top=o.bottom=o.left=o.right=0:(o.top=ic(e.marginTop,5),o.bottom=ic(e.marginBottom,5),o.left=ic(e.marginLeft,5),o.right=ic(e.marginRight,5));var g=ic(t.marginRight,5),p=ic(t.marginLeft,5),m=ic(t.marginBottom,5),v=ic(t.marginTop,5);switch(l){case"top":s=null!=a?a.height+v+o.bottom:0,s=s+c+o.top;break;case"bottom":s=null!=a?a.height+m+o.top:0,s=s+c+o.bottom;break;case"left":s=null!=a?a.width+p+o.right:0,s=s+c+o.left;break;case"right":s=null!=a?a.width+g+o.left:0,s=s+c+o.right}return u.tickLabelWidth(s),s}function v(t,a){var r,n,i,l;if(r=n=i=l=0,"bottom"==t?l=-e.plotarea.height:"top"==t?l=e.plotarea.height:"left"==t?i=e.plotarea.width:"right"==t&&(i=-e.plotarea.width),"x"===a&&e.datalabels.hasFixedPosition){var o=e.axes.y.groups.map(function(e){return e.disabled}).indexOf(!1),s=w.chart.axes.yaxis[o].reversed,c=y(o);"bottom"==t?s?n-=c:l+=c:"top"==t?s?l-=c:n+=c:"left"==t?s?r+=c:i-=c:"right"==t&&(s?i+=c:r-=c)}return{x1:r,y1:n,x2:i,y2:l}}function y(t){var a,r=Si.scale.getScale(e,e.dataObject,e.plotarea,e.axes.y.orient,t,e.dataset,"y"),n=r.origRange,i=e.dataset.getDataType("y",t);if(i===Fo){var l=r.domain();a=r(l[l.length-1])+r.bandwidth()/2}else{var l=e.dataObject.getMinMaxY(t,0,e.datalabels.hasFixedPosition);a=r(l[1])}return hl(fl(a-n[0]),fl(a-n[1]))}function x(t,a){var r=e.plotarea;"left"===t?(r.left+=a,r.width-=a):"right"===t?r.width-=a:"bottom"===t?(r.height-=a,r.bottom+=a):(r.height-=a,r.top+=a)}function b(t,a,r,n,i,l){k={left:!1,right:!1,top:!1,bottom:!1},e.container.selectAll("g.plotareaBorder-property").selectAll("line").style("stroke",Pl);var o=a.orient(),s=(a.scale(),a.majorTicks(),t.node().getBBox().width);s+="left"==o?r.label.marginLeft:r.label.marginRight,s=a.tickLabelWidth(),("hidden"!==t.style("visibility")||"remove"!==l)&&(e.plotarea.width="add"==l?e.plotarea.width-s:e.plotarea.width+s,e.plotarea.left="left"==o?"add"==l?e.plotarea.left+s:e.plotarea.left-s:e.plotarea.left);var c=0,d="add"==l?"visible":"hidden";t.style("visibility",d),"add"==l&&t.style("display",null);for(var u=0;u<e.axes.y.groups.length;u++){var h=A.selectAll("g.y-axis-"+u),f=e.axes.y.groups[u].component,g=f.orient(),m=f.majorTicks(),y=w.chart.axes.yaxis[u]||w.chart.axes.yaxis[0];"hidden"!=h.style("visibility")&&0==c?(m=v(g),f.majorTicks(m),h.transition().duration(0).call(f,i,u,!0),c++):null!=m&&c>0&&(f.majorTicks(null),h.transition().duration(0).call(f,i,u,!0)),"visible"!=h.style("visibility")||k[g]?(f.plotBorderDrawn=!1,"visible"==h.style("visibility")?h.selectAll("path.domain").style("stroke",y.axisline.color):h.selectAll("path.domain").style("stroke",Pl)):(k[g]=!0,f.plotBorderDrawn=!0)}p(r,n,a,!0)}var w=e.systemConf,C=e.dataObject,k={left:!1,right:!1,top:!1,bottom:!1},A=e.svg.selectAll("g.xychart"),S=i(),P=e.systemConf.metadata,T=0,E=0,L=Si.DataProcessor.helpers,z=L.getParsedYAxisOrder;e.axes.animationDuration=S,e.zscale=e.dataObject.hasZaxis?Si.scale.getScale(e,C,e.plotarea,e.axes.x.orient,null,e.dataset,"z"):null,e.datalabels.hasFixedPosition=Xn(e);var D={left:e.plotarea.left,top:e.plotarea.top,width:e.plotarea.width,height:e.plotarea.height};Si.axis.constructTickObj(e,t,r,"left",D,n),Si.axis.constructTickObj(e,t,r,"bottom",D,n),e.zscale=e.dataObject.hasZaxis?Si.scale.getScale(e,C,e.plotarea,e.axes.x.orient,null,e.dataset,"z"):null,hc.updatePlotareaByBandWidth(e,D);for(var R=Si.scale.constructor(e,"left"),j=e.axes.rotated?"x":"y",M=0;M<R.length;M++){var I=s("left",M);I=c(R[M].scale,"left",M,n)}for(var M=0;M<R.length;M++){var I=Pa(e,j,M);null!=I.component&&u(I.component,M,j,n)}for(var B=Si.scale.constructor(e,"bottom"),H=e.axes.rotated?"y":"x",M=0;M<B.length;M++){var I=s("bottom",M);I=c(B[M].scale,"bottom",M,n)}for(var M=0;M<B.length;M++){var I=Pa(e,H,M);null!=I.component&&u(I.component,M,H,n)}e.dataset.getDataType("x")==Fo&&Si.scale.barBandwidth(e),e.updateZscale=function(){e.dataObject.hasZaxis?e.zscale.domain(C.getMinMaxZ()):null},e.updateScale=function(n,i,s,c){var d,u="y"==i?z(null==n||a(n)?n:n.yaxiscolumnorder):0,c="x"==i&&it(c)?c:u,h=A.selectAll("g."+i+"-axis-"+c),f=Pa(e,i,c),m=f.ticks,v="x"==i?w.chart.axes.xaxis:w.chart.axes.yaxis[u],y=v.ticklabel,k=f.component?f.component.orient():o(v,i,u),O="bottom"==k||"top"==k?r:t,T=v.show===!0&&qt(e,i+"axis",O),E=e.dataset.getColumnIdx(i,u),L=P.columns[E].datatype,L=m&&m.isHierarchialLevelType()&&e.dataObject.hierarchical.categoryTree?Fo:L,D=P.columns[E][L],R=m&&m.isHierarchy()&&e.dataObject.hierarchical.groupByTime,j=R?c:null;if(s){d=s;var M=Si.scale.getScale(e,C,e.plotarea,k,u,e.dataset,i,d);f.eventscale=f.scale=M}else{var I=e.chartTypes[0].name,B=w.chart.plot.plotoptions[I].outerPadding;d=L==Fo?C.getCategories(i,c):"x"==i?e.dataObject.getMinMaxX(rt(B,.2)):e.dataObject.getMinMaxY(u);var M=Si.scale.getScale(e,C,e.plotarea,k,c,e.dataset,i);f.eventscale=f.scale=M}if("y"!=i||h.empty()||"NoData"!=d[0]||"NoData"!=d[1])if("y"!=i||h.empty()||"hidden"!=h.style("visibility")||h.style("display")===Sl){if(C.isBubbleEnabled&&"y"==i&&(f.eventscale=f.scale=Si.scale.getScale(e,C,e.plotarea,k,u,e.dataset,"y")),T){f.component.scale(f.scale),D=P.axes.y[u].length>1&&"y"==i?ka(u,e):D;var H=(C.isStackedPercentChart||C.isPercentChart)&&"y"==i?Mr:Lr,V=null!=D?D.axisformat||D.format:null,m=f.ticks,F="bottom"==k||"top"==k?m.tickValueObj.longTickSize.height:m.tickValueObj.longTickSize.width,N=m.getTickValues(e.plotarea.width,e.plotarea.height,s,!1,null,f.Ticks,e.plotarea);m.tickValueObj=N;var Y="bottom"==k||"top"==k?m.tickValueObj.longTickSize.height:m.tickValueObj.longTickSize.width,_=m.preCalcTickLen,W=F>Y?Y-F:Y>F?Y-F:0;"bottom"==k||"top"==k?_.height=_.height+W:_.width=_.width+W;var X=m.getTicksforAxisComp();f.component.tickValues(X).tickRotation(N.rotation);var U=m.getActualTicklabel(),G=m.tickValueObj.maxTickSize.horizontal,Z=m.tickValueObj.maxTickSize.vertical,Q=Si.utils.getVal(at([v.ticklabel,e.systemConf.chart,e.systemConf.canvas,Us],"fontSize")),q="wrapOnSpace"==m.tickValueObj.mode||"wrapAll"==m.tickValueObj.mode,K=f.component.isMultiLineTick(),$=it(v.ticklabel.showAs),J=[null,k,e,N.rotation,v.ticklabel.textOverflow,f.scale,A,f.component,"ticklabel",v.ticklabel,c,!0],et=ja.apply(null,J),tt=function(t,a){var r=U(a),n=H(D,r,L,e,"axis",null,null,j);
d3.select(this).text(n),K?(q&&(n=Ga(n,m.tickValueObj.mode,G,Z,Q)),Nt(d3.select(this),n,{orient:k})):$&&it(m.tickValueObj.customTicks[a])&&(this.innerHTML="",Nt(d3.select(this),m.tickValueObj.customTicks[a],null,!0)),et(this,a)};f.component.tickFormat(V&&"auto"==V.specifier?function(e){d3.select(this).text(f.scale.tickFormat()(e))}:tt),f.component.isMultiLineTick()||it(y.showAs)?h.call(f.component,i,c):h.transition().duration(S).call(f.component,i,c);var nt=!h.empty()&&h.style("display")===Sl&&"y"===i;if(nt&&b(h,f.component,v,u,"y","add"),W&&0!=W){nt||x(k,W);var lt="x"==i?"y":"x";e.updateScale(n,lt),e.drawPlotareaClippath(),e.updatePlotareaProp()}"y"===i?(h.styles({display:null,visibility:"visible"}),p(v,u,f.component,!0)):g(v,c,f.component);var ot=e.plotarea.width;e.axes.rotated||"y"!=i?null:A.selectAll(".y-axis-"+u).selectAll("line.majorTicks").attr("x2","right"!=k?ot:-ot),1==f.component.plotBorderDrawn&&l(k,v,h,f.component)}}else T&&b(h,f.component,v,u,"y","add");else T&&b(h,f.component,v,u,"y","remove")}},Si.axis.get=function(){function e(a,n,i){return a.each(function(a){var l=jl(this);g=a.label,h=a.ticklabel,f=a.tickmark,p=a.grid;var m=Pa(v,n,i),k=m.ticks,O=k.tickValueObj;R=ic(R,0);var A=0>R?360-fl(R):R;A=A>360?fl(A)-360:A,d&&l.selectAll("g.axisgroup").selectAll("*").remove();var D=zt(l,"g",[a],".","class","axisgroup");if(c&&o.ticks(c[0],c[1]),v.isAxisCategory&&"clr"!==n){var j=Ma(v,O,x,n,i);D.attr("clip-path","url("+v.defsLocation+"#"+j+")")}C=v.axes.animationDuration;var M={tickValues:S,tickFormat:P,tickSizeInner:T,tickSizeOuter:E,gridSize:z,tickPadding:L,orient:x,rotation:A,scale:s,chart:v,axis:m};"clr"===n||it(h.showAs)||w?D.call(Ca,M,a):D.transition().duration(C).call(Ca,M,a);var I=D.selectAll(".tick"),B=null==S?s.ticks?s.ticks.apply(s,[I.nodes().length]):s.domain():S,H=D.selectAll(".tick").data(B,s),V=H.select("line.majorTicks"),F=m.axisLabel,N=D.selectAll("text.ticklabel").data(B,s);k.isHierarchialLevelType()&&r(H,n,i);Va(x,A,N,o,f.size);if("clr"!==n){var Y={data:b.map(function(e){return ac(v.systemConf.metadata.columns[e],{columnindex:e},!0)})};Ia(v,N,h,Y,n,i)}if(k.isHierarchialLevelType()||"between"!=f.align||t(s,H,"minorTicks"),"clr"!==n){g.tooltip===!0&&Ht(F.element),F.transformLabel(y,u,x);var _="left"==x?270:"right"==x?90:0;ja(F.element,x,v,_,"ellipsis",s,D,e,"axislabel")}if(z&&p.show&&(s.bandwidth&&"between"==f.align&&t(s,H,"majorTicks"),"clr"!==n)){var W=s.range(),X=null==e.tickValues()?null:s(e.tickValues()[0])+(s.bandwidth?s.bandwidth()/2:0),U=v.systemConf.chart.plot.border,G=U===!0?U.color:a.axisline.color;it(X)&&"transparent"!==p.color&&"transparent"!==G&&W[0]===X&&jl(V.nodes()[0]).style("stroke","transparent")}var Z=a.baseline;if(null!=Z){var Q=zt(D,"line",Z.show===!0&&s.domain()[0]<=Z.value&&Z.value<s.domain()[1]?[1]:[],".","class","zeroBase");Q.attrs({x1:"left"==x||"right"==x?0:s(Z.value),y1:"left"==x||"right"==x?s(Z.value):-u.height,x2:"left"==x||"right"==x?u.width:s(Z.value),y2:"left"==x||"right"==x?s(Z.value):0}).styles({fill:Sl,stroke:Z.color,"shape-rendering":"crispedges","stroke-width":Z.strokeWidth})}}),e}function t(e,t,r){var n,o,s,c,d=t.nodes(),u=d3.select(t.node()),h=d3.select(d[d.length-1]),g=t.selectAll("line."+r+":not(#minorTicksAlign)"),m=h.selectAll("line."+r),v=zt(u,"line",[1],"#","id",r+"Align"),y=a(e);if("minorTicks"==r?(s="bottom"==x||"top"==x?0:-f.size,c="bottom"==x?f.size:"top"==x?-f.size:0,i(f,v)):(n=z.x1,o=z.y1,s=z.x2,c=z.y2,l(p,v)),e.bandwidth)g.attr("transform","translate("+y.mid+")"),m.attr("transform","translate("+y.end+")"),v.attr("transform","translate("+y.start+")").attrs({x1:n,y1:o,x2:s,y2:c});else{var b=0;g.attr("transform",function(){var t=a(e,b++);return"translate("+t.mid+")"}),m.attr("transform","translate("+y.end+")"),v.attr("transform","translate("+y.start+")").attrs({x1:n,y1:o,x2:s,y2:c})}}function a(t,a){var r,n,i,l,o;if(t.bandwidth){var s=t.bandwidth(),c=(t.range(),t.ordinalRange),d=t.outerPaddingPx+s/2,u=t.domain().length>1?c[1]-c[0]-s:0;l=s/2+u/2,o=hl(d,l)}else{var h=v.dataObject.hierarchical?v.dataObject.hierarchical.leafCategories:e.tickValues(),f=Si.scale.getContinuousRangeBand(t,h,a),s=f.rangeBand;l=s,o=f.outerPaddingInPixel}return"bottom"===x||"top"==x?(r=-(o-.5)+",0",n=l+.5+",0",i=o+.5+",0"):(r="0,"+-o,n="0,"+l,i="0,"+o),{start:r,mid:n,end:i}}function r(e,t,a){var r=Pa(v,t,a),l=r.component,o=e.selectAll("line.minorTicks"),s=n(t,a);r.ticks.tickValueObj.tickMarkSize=s+l.tickSize();var c=a,d="left"==x||"right"==x?"x1":"y1",u="left"==x||"top"==x?s:-s,h="left"==x?"y1":"x1";if(c===v.dataObject.hierarchical.finalDepth){var g=("bottom"==x?f.size:0,e.nodes());e.selectAll("line#minorTicksAlign").remove();var p=d3.select(g[g.length-1]),m=zt(p,"line",[1],"#","id","minorTicksAlign"),y=v.axes.x.levels[c-1].scale,b=y.domain().length,w="top"==x||"bottom"==x?y.discreteWidth(b-1)+",0":"0,"+y.discreteWidth(b-1),C="left"==x||"right"==x?"x2":"y2",k="left"==x||"top"==x?-f.size:f.size;m.attr("transform","translate("+w+")").attr(d,u).attr(C,k),i(f,m)}o.attr(h,null),o.attr(d,u)}function n(e,t){for(var a=0;t>0;){var r=Pa(v,e,t-1),n=r.component;a+=n.tickLabelWidth(),t--}return a}function i(e,t){t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":e.strokeWidth,stroke:e.color})}function l(e,t){var a=ic(e.strokeWidth,1),r=O(e.style,a),n=A(e.lineCap,p.style);t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":a,stroke:p.color,"stroke-dasharray":r,"stroke-linecap":n})}var o,s,c,d,u,h,f,g,p,m,v,y,x,b,w,C,k=[],S=null,P=null,T=6,E=6,L=3,z=null,D=null,R=0;return e.axis=o,e.scale=function(t){return arguments.length?(s=t,o?o.scale(s):(o=Hl(x,s),o.scale(s)),e):s},e.systemconf=function(t){return arguments.length?(m=t,e):m},e.orient=function(t){return arguments.length?(it(x)&&x!=t&&(d=!0,o=null),x=t,e):x},e.tickArguments=function(t){return arguments.length?(k=null==t?[]:Array.prototype.slice.call(t),e):k.slice()},e.tickValues=function(t){return arguments.length?(S=null==t?null:Array.prototype.slice.call(t),e):S&&S.slice()},e.tickFormat=function(t){return arguments.length?(P=t,e):P},e.tickSize=function(t){return arguments.length?(T=E=+t,e):T},e.tickSizeInner=function(t){return arguments.length?(T=+t,e):T},e.tickSizeOuter=function(t){return arguments.length?(E=+t,e):E},e.tickPadding=function(t){return arguments.length?(L=+t,e):L},e.ticks=function(){return arguments.length?(c=arguments,e):c},e.majorTicks=function(t){return arguments.length?(z=t,e):z},e.plotarea=function(t){return arguments.length?(u=t,e):u},e.tickLabelWidth=function(t){return arguments.length?(D=t,e):D},e.tickRotation=function(t){return arguments.length?(R=t,e):R},e.preCalcTickLen=function(t){return arguments.length?(y=t,e):y},e.chartObj=function(t){return arguments.length?(v=t,e):v},e.columnIndices=function(t){return arguments.length?(b=t,e):b},e.isMultiLineTick=function(t){return arguments.length?(w=t,e):w},e};var sc=function(e){e=ic(e,{}),this.startWeekDay=it(e.startWeekDay)?e.startWeekDay:1,this.startMonth=it(e.startMonth)?e.startMonth:0};sc.MILLISEC=0,sc.SECOND=1,sc.MINUTE=2,sc.HOUR=3,sc.DATE=4,sc.MONTH=5,sc.SECOND_TYPE="ABSSECOND",sc.MINUTE_TYPE="ABSMINUTE",sc.HOUR_TYPE="ABSHOUR",sc.DAY_TYPE="ABSDAY",sc.DATETIME_TYPE="DATETIME",sc.DATE_TYPE="DATE",sc.ABSWEEK_TYPE="ABSWEEK",sc.ABSMONTH_TYPE="ABSMONTH",sc.ABSQUARTER_TYPE="ABSQUARTER",sc.ABSYEAR_TYPE="YEAR",sc.D3_WEEKDAY_FNS=[bo,wo,Co,ko,Oo,Ao,So],sc.DAY_MILLIS=864e5,sc.prototype.setZero=function(e,t){for(var a=0,r=0;t>=r;r++)switch(r){case sc.MILLISEC:a+=this.getMilliseconds(e),this.setMilliseconds(e,0);break;case sc.SECOND:a+=this.getSeconds(e),this.setSeconds(e,0);break;case sc.MINUTE:a+=this.getMinutes(e),this.setMinutes(e,0);break;case sc.HOUR:a+=this.getHours(e),this.setHours(e,0);break;case sc.DATE:a+=this.getDate(e)-1,this.setDate(e,1);break;case sc.MONTH:a+=this.getMonth(e),this.setMonth(e,this.startMonth);break;default:throw"unknown type 333: "+t}return a},sc.prototype.getBaseValue=function(e,t,a){switch(t){case sc.SECOND_TYPE:case sc.DATETIME_TYPE:var r=this.setZero(e,sc.MILLISEC);a&&r>0&&this.setSeconds(e,this.getSeconds(e)+1);break;case sc.MINUTE_TYPE:var r=this.setZero(e,sc.SECOND);a&&r>0&&this.setMinutes(e,this.getMinutes(e)+1);break;case sc.HOUR_TYPE:var r=this.setZero(e,sc.MINUTE);a&&r>0&&this.setHours(e,this.getHours(e)+1);break;case sc.DAY_TYPE:case sc.DATE_TYPE:var r=this.setZero(e,sc.HOUR);a&&r>0&&this.setDate(e,this.getDate(e)+1);break;case sc.ABSWEEK_TYPE:var r=this.setZero(e,sc.SECOND),n=this.startWeekDay;a?(r>0&&this.setDate(e,this.getDate(e)+1),n<this.getDay(e)?this.setDate(e,this.getDate(e)+(7-this.getDay(e)+n)):this.setDate(e,this.getDate(e)+(n-this.getDay(e)))):n>this.getDay(e)?this.setDate(e,this.getDate(e)-(7-n+this.getDay(e))):this.setDate(e,this.getDate(e)-(this.getDay(e)-n));break;case sc.ABSQUARTER_TYPE:case sc.ABSMONTH_TYPE:var r=this.setZero(e,sc.DATE);a&&r>0&&this.setMonth(e,this.getMonth(e)+1);break;case sc.ABSYEAR_TYPE:var r=this.setZero(e,sc.MONTH);a&&r>this.startMonth&&this.setFullYear(e,this.getFullYear(e)+1);break;default:throw"unknow type 222: "+t}},sc.prototype.getTicksList=function(e,t,a,r){for(var n=new Array,i=t.getTime(),l=e.getTime(),o=new Date(l);i>=l;){switch(n.push(o),o=new Date(l),r){case sc.SECOND_TYPE:case sc.DATETIME_TYPE:o.setTime(o.getTime()+1e3*cl(a));break;case sc.MINUTE_TYPE:o.setTime(o.getTime()+6e4*a);break;case sc.HOUR_TYPE:o.setTime(o.getTime()+36e5*a);break;case sc.DAY_TYPE:case sc.DATE_TYPE:o.setTime(o.getTime()+a*sc.DAY_MILLIS);break;case sc.ABSWEEK_TYPE:this.setDate(o,this.getDate(o)+a);break;case sc.ABSMONTH_TYPE:case sc.ABSQUARTER_TYPE:this.setMonth(o,this.getMonth(o)+a);break;case sc.ABSYEAR_TYPE:this.setFullYear(o,this.getFullYear(o)+a)}l=o.getTime()}return n},sc.prototype.range=function(e,t,a,r,n){function i(e,t){return null!=t&&t>=e?t:e}switch(e=new Date(e.getTime()),t=new Date(t.getTime()),this.getBaseValue(e,r,!1),this.getBaseValue(t,r,!0),r){case sc.SECOND_TYPE:case sc.DATETIME_TYPE:var l=1,o=dl((t.getTime()-e.getTime())/1e3),s=dl(o/a)||l;return s=i(s,n),{TYPE:Po,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.MINUTE_TYPE:var l=1,s=dl((t.getTime()-e.getTime())/(6e4*a))||l;return s=i(s,n),{TYPE:To,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.HOUR_TYPE:var l=1,s=dl((t.getTime()-e.getTime())/(36e5*a))||l;return s=i(s,n),{TYPE:To,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.DAY_TYPE:case sc.DATE_TYPE:var l=1,s=dl((t.getTime()-e.getTime())/(a*sc.DAY_MILLIS))||l;return s=i(s,n),{TYPE:Eo,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.ABSWEEK_TYPE:var l=1,c=dl((t.getTime()-e.getTime())/(a*sc.DAY_MILLIS*7));c=i(c,n);var s=7*dl(c)||l;return{TYPE:Lo,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.ABSMONTH_TYPE:var l=1,s=dl(this.getMonthsDiff(e,t)/a)||l;return s=i(s,n),{TYPE:zo,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.ABSQUARTER_TYPE:var l=1,d=this.getMonthsDiff(e,t)/a||l,u=dl(d/3);u=i(u,n);var s=3*u;return{TYPE:zo,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case sc.ABSYEAR_TYPE:var l=1,s=dl((t.getFullYear()-e.getFullYear())/a)||l;return s=i(s,n),{TYPE:Do,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};default:throw"UNKNOWN TYPE 111: "+r}},sc.MAX_DATE=new Date(2008,8,29,23,23,23,999),sc.prototype.getMaxDate=function(e,t){return Lr(e,sc.MAX_DATE,No,null,"axis",null,null,t)},sc.prototype.getMonthsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},sc.prototype.getYearsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},sc.prototype.getFullYear=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCFullYear():e.getFullYear()},sc.prototype.getMonth=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMonth():e.getMonth()},sc.prototype.getDay=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDay():e.getDay()},sc.prototype.getDate=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDate():e.getDate()},sc.prototype.getHours=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCHours():e.getHours()},sc.prototype.getMinutes=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMinutes():e.getMinutes()},sc.prototype.getSeconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCSeconds():e.getSeconds()},sc.prototype.getMilliseconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMilliseconds():e.getMilliseconds()},sc.prototype.setFullYear=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCFullYear(t):e.setFullYear(t)},sc.prototype.setMonth=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMonth(t):e.setMonth(t)},sc.prototype.setDate=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCDate(t):e.setDate(t)},sc.prototype.setHours=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCHours(t):e.setHours(t)},sc.prototype.setMinutes=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMinutes(t):e.setMinutes(t)},sc.prototype.setSeconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCSeconds(t):e.setSeconds(t)},sc.prototype.setMilliseconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)},function(e){"use strict";function t(e){return{top:ic(e.marginTop,5),right:ic(e.marginRight,5),bottom:ic(e.marginBottom,5),left:ic(e.marginLeft,5)}}function r(e){var t=e.alignMode,a=e.alignMode&&-1!=e.alignMode.indexOf("rotate"),r=it(e.rotation),n=0;if(a){var i=/\(([^)]+)\)/.exec(t);n=i?parseInt(i[1]):"auto"}else r&&!it(e.alignMode)?(n="auto"==e.rotation?e.rotation:parseInt(e.rotation),t="rotate",a=!0):it(e.alignMode)||(t="rotate(0)",a=!0);return{alignmentMode:t,isRotateMode:a,rotation:n}}function n(e,t,a,r){var n=e.length;t=sl(t),a=a||dl(n/t);for(var i=0,l=[],o=r?[]:null,s=r?[]:null,c=r?it(e[0].index):!1;n>i;)r?c?(l.push(e[i].value),o.push(e[i].index),s.push(e[i])):(l.push(e[i]),o.push(i)):l.push(e[i]),i+=a;return r?{nodes:s,ticks:l,indices:o}:l}function i(e,t,r,n,i,l){var o=[],s=[],c=[],d={data:[r]};return r.columnindex=ic(r.columnindex,i),e.forEach(function(e,r){var i=tt(t.showAs,e,t,d,n,r,l),u=[],h=[];if(a(i)?(o.push(u),s.push(h)):(u=o,h=s),c.push(i),it(i)){var f=document.createElement("div");f.innerHTML=i;var g=et(f.querySelectorAll("tspan")),p=f.querySelectorAll("image,img");g.length?g.forEach(function(e){u.push(e.textContent.trim()),h.push({fontSize:e.style.fontSize&&parseFloat(e.style.fontSize),fontFamily:e.style.fontFamily,fontStyle:e.style.fontStyle,fontWeight:e.style.fontWeight})}):u.push(f.textContent),p.length&&et(f.querySelectorAll("image,img")).forEach(function(e){u.push({width:+e.getAttribute("width"),height:+e.getAttribute("height")}),h.push({})})}}),{tickValues:o,styles:s,userRawTicks:c}}function l(e,t,a,r,n,i,l){il.save(),il.font=a+"px "+r;var o,s,c,d=0,u=null,h=null;n=ic(n,[]),it(t)||(t=[]);var f=function(e,f){var g=Wa(e,a,r,n[f]),p=g.width;i&&(p=g.width*g.height),l&&!s&&(s=-1!=e.indexOf(" ")),p>d&&(d=p,u=e,h=t[f],o=n[f],c=f)};return e.forEach(f),il.restore(),{actualVal:h,formattedVal:u,style:o,index:c,hasWhiteSpace:s}}function o(e,t,a){return"rotate("+e+" "+(t||0)+" "+(a||0)+")"}function s(e,t,a,r,n,i){var l=0;return l="height"===e?Math.abs(n+a.top+a.bottom):r>0?h(r,t.width,n,i).tickSpacing+a.left+a.right:t.width+a.left+a.right}function c(e,t){return t[Oa(e)]}function d(e,t,a){var r=ic(a.size,6),n=c(e,t),i={x:0,y:0};switch(e){case"left":i.x=-(n+r);break;case"top":i.y=-(n+r);break;case"right":i.x=n+r;break;default:i.y=n+r}return i}function u(){var e={};return e.x=e.y=e.width=e.height=0,e}function h(e,t,a,r){var n=e*(2*kl/360),i=(90-e)*(2*kl/360);if("bottom"===r||"top"===r)return{tickSpacing:fl(a/vl(n))+5,baseLen:0};var l=fl(vl(i)*a),o=fl(ml(i)*a*xl(n));return{tickSpacing:l+o+5,baseLen:fl(ml(i)*t)}}function f(e,t,a,r,n,i){var l=a.dataObject,o=t.minmaxlabels||{};if(o.show===!0){var s=Si.scale.getScale(a,l,a.plotarea,i,n,a.dataset,r),c=s.domain();rt(o.excludeIntervals,!0)?e=c:(c[0]!==e[0]&&e.splice(0,0,c[0]),c[1]!==e[e.length-1]&&e.push(c[1]))}return e}function g(e,t,a,r){var n=[1,2,5,10],i=n.length,l=e+t/2;l=+l.toFixed(12);for(var o,s,c=0;i>c;c++){var d,u=a/n[c];d=e%u?e-e%u+u:e;var h=fl(l-d);(o>h||null==o)&&(o=h,s=d)}if(null==s||e>s){var f=cl(yl(r)/wl);0>f&&(s=+e.toFixed(fl(hl(0,f)))),s=e}return s=s>e?s:e}function p(e,t){for(var a,r,n=null,i=t,l=[1,1.2,1.5,1.75,2,2.2,2.5,3,3.5,4,4.5,5,6,7,8,9,10],o=0;o<l.length;o++)r=l[o]*t,a=fl(e-r),n=null==n?a:n,n>a&&e>=r&&(n=a,i=r);return i}function m(e,t){var a=y(e);return it(t)&&(a=ul(t,a)),dl(e[0]/a)*a}function v(e){return dl(y(e))}function y(e,t){var a=it(t)?t:10,r=e[1]-e[0],n=gl(10,cl(yl(r/a)/wl)),i=a/r*n;return.15>=i?n*=10:.35>=i?n*=5:.75>=i&&(n*=2),n}var x=e.axis,b=function(e,t,a,r){this.axis=e,this.config=e.label,this.axisRect=t.bound,this.parentNode=r.isD3Selection?r:d3.select(r),this.orient=a,this.systemConfig=t.systemConf,this.order=t.axisOrder,this.plotRect=t.plotRect,this.show=!t.hide,this.show?this.add():this.element=zt(this.parentNode,"text",[],".","class","axislabel")};b.prototype={add:function(){var e=this;e.element=zt(e.parentNode,"text",[1],".","class","axislabel"),e.text=e.config.text,e.element.text(e.text),e.rect=null,e.transformLabel()},remove:function(){var e=this;e.rect=null,e.element=zt(e.parentNode,"text",[],".","class","axislabel")},setStyles:function(){var e=this,t=e.systemConfig;Bt(e.element,[e.config,t.chart,t.canvas,Us])},getBBox:function(){var e=this;if(!it(e.rect)){if(!e.element.isD3Selection||e.element.empty())return u();e.rect=e.element.node().getBBox()}return e.rect},transformLabel:function(e,a,r){function n(e,t,a,r,n){r=ic(r,0),n=ic(n,0),i.element.attrs({x:t,y:a,transform:o(e,r,n),"text-anchor":u})}var i=this;if(i.show!==!0)return i.remove();if(i.element.empty()&&i.show===!0||i.text!==i.config.text)return i.add();i.setStyles();var l,s,c={top:0,right:90,bottom:0,left:270},d=i.systemConfig,u="middle",h=ic(r,i.orient),f=c[h],g=ic(e,this.axisRect),p=ic(a,this.plotRect),m=i.axis.ticklabel,v=i.config,y=t(m),x=t(v),b=parseFloat(Si.utils.getVal(at([i.config,d.chart,d.canvas,Us],"fontSize")));switch(i.fontSize!==b?i.rect=null:i.fontSize=b,i.element.attr("dy","-0.25em"),h){case"top":l=p.width/2,s=g.height+y.top+x.bottom,n(f,l,-s);break;case"right":l=p.height/2,s=g.width+y.right+x.left,n(f,l,-s);break;case"bottom":l=p.width/2,s=g.height+y.bottom+x.top,i.element.attr("dy","0.91em"),n(f,l,s);break;case"left":l=g.width+y.left+x.right,s=p.height/2,n(f,-l,s,-l,s)}}};var w=function(e,t,a,r,n){this.type=e,this.config=t.ticklabel,this.axis=t,this.plotRect=a,this.helpers=r,this.tickCount=n,this.maxSize=function(){return Fa(this.config,this.plotRect)},this.cache={}};w.prototype={getScale:function(){var e=this,t=e.helpers.chart,a=e.helpers;return Si.scale.getScale(t,t.dataObject,e.plotRect,a.orient,a.axisOrder,t.dataset,e.type,e.extent)},getTicks:function(e,o,c){function u(e){if("auto"==mt){var t=b(ca,0);if(t.maxTickCount<e){var a=$==Fo?w(ca):b(ca,45,!0);if(a.maxTickCount<e){var r=b(ca,45,!0);return r.maxTickCount<e&&R.hasWhiteSpace?C(ca):r}return a}return t}return vt?b(ca):"zigzag"==mt?w(ca):"wrapOnSpace"==mt?C():"wrapAll"==mt?k():void 0}function x(e,t,a){var r,n,i,l,o=0,s=Yn(B.chart,xt,I.plotRect);if("x"===a&&(o=s*At*2),r=s-o,i=!!e,l=t||ca,i){if("height"===xt&&(90===e||270===e))return r/(l.width+fl(ut.top)+fl(ut.bottom));var c=e%90,d="height"===xt?c>0:c>0||90===e||270===e;if(d){var u=h(e,l.width,l.height,B.orient);return r/(u.tickSpacing+fl(ut.left)+fl(ut.right))}}return n="height"===xt?l.height+fl(ut.top)+fl(ut.bottom):l.width+fl(ut.left)+fl(ut.right),r/n}function b(e,t,a){var r,n=it(t)?t:kt;return"auto"===n?(kt=0,r=x(kt,e,_),!sa&&G>r?"width"===xt?(kt=B.chart.axes.x.count>1&&"x"==_&&0==q?90:45,r=x(kt,e,null),a=!0):a=!0:a=!1):(r=x(n,e,_),kt=n),{mode:"rotate",rotation:kt,maxTickCount:r,recalculate:a}}function w(e){var t=x(0,e,_);return{mode:"zigzag",rotation:0,maxTickCount:2*t}}function C(){if("auto"==mt){z=z.map(function(e){return e.split(" ")});var e=l(z,Q,ft,gt,Lt.styles);it(Pt)||(Pt=e.formattedVal);var t=Wa(Pt,ft,gt,e.style,!0)}var a=x(kt,t,_);return{mode:"wrapOnSpace",maxTickCount:a,rotation:kt}}function k(){var e=x(kt,ca,_);return{mode:"wrapAll",maxTickCount:e,rotation:kt}}var O,A,S,P,T,E,L,z,D,R,j,M,I=this,B=ic(c,I.helpers),H=B.chart,V=H.systemConf,F=H.dataObject,N=I.plotRect=ic(e,I.plotRect),Y=I.axis,_=I.type,W=Y.interval,X=Y.tickCount,U=Y.interval,G=ic(o,0),Z=c.extent,Q=Z,q=B.axisOrder,K=B.axisRotated,$=H.dataset.getDataType(_,q),et=H.systemConf.metadata,tt=H.dataset.getColumnIdx(_,q),rt=et.columns[tt],nt=et.columns[tt].datatype,lt="y"==_?et.axes.y[q].length>1:!1,ot=et.columns[tt],st=ic(lt&&"y"==_?ka(q,H):ot[nt],{}),ct=st.subfunction,dt="y"===_&&(H.dataObject.isStackedPercentChart||H.dataObject.isPercentChart)?Mr:Lr,ut=t(I.config),ht=d(B.orient,ut,I.axis.tickmark),ft=parseFloat(Si.utils.getVal(at([I.config,V.chart,V.canvas,Us],"fontSize"))),gt=Si.utils.getVal(at([I.config,V.chart,V.canvas,Us],"fontFamily")),pt=r(I.config),mt=pt.alignmentMode,vt=pt.isRotateMode,yt=pt.rotation,xt=Aa(_,K)?"height":"width",wt=Ta(H,this.type,q,yt),Ct=H.axes.x.count>1&&"x"==_&&q>0,kt=Ct?0:yt,Ot=H.chartTypes[0].name,At=H.systemConf.chart.plot.plotoptions[Ot].outerPadding||0,St=H.systemConf.chart.plot.plotoptions[Ot].padding||.2,Pt=null,Tt=Yn(B.chart,xt,N),Et="x"===_?Tt*At*2:0,Lt={},zt=c.maxTickSize||this.maxSize(),Dt=a(st.groupby)&&st.groupby.length>0||"AUTO"===st.groupby&&"YEAR"!==ct,Rt=Dt?q:null;switch(Dt&&"AUTO"===st.groupby&&(st.AUTO_GROUP_ORDER=Si.HierarchicalTimeDataAdapter.getAutoGroupOrder(ct).reverse()),wt||(0>kt?kt=360-fl(kt):kt>360&&(kt=fl(kt)%360)),$){case"numeric":A=it(Z)?Z:"x"===_?F.getMinMaxX():F.getMinMaxY(B.axisOrder,ll,H.datalabels.hasFixedPosition);var jt;if("y"===_&&H.datalabels.hasFixedPosition){var Mt=F.rangeCorrections.datalabels,It=_+B.axisOrder;J(Mt[It])&&(Mt[It]=ad(_,F.groupedDataBySplitAxes[B.axisOrder],H)),jt=Mt[It]}else jt=0;"height"===xt?(D=N.height-jt,G=G||sl(D/40),O=[D,0]):(D=N.width-jt,G=G||sl(D/100),O=[0,D]),it(X)&&(U=(A[1]-A[0])/X);var Bt,Ht,Vt,Ft,Nt;if(Nt=it(W)&&(A[1]-A[0])/W<D,S=_l().domain(A).range(O),Nt){if(Bt=cl((A[1]-A[0])/U)){if(Ht=y(A,Bt),Vt=dl(A[0]/Ht)*Ht,Vt-A[0]>U){var Yt=gl(10,cl(yl(U)/wl)),_t=cl((Vt-A[0])/Yt);Vt-=_t*Yt}}else{var Wt=A[1]-A[0],Yt=gl(10,cl(yl(Wt)/wl));Vt=A[0]-A[0]%Yt+Yt}Q=xo(Vt,A[1],U)}else if(+X>0)if(1===X)Ht=y(A,1),Vt=Math.ceil(A[0]/Ht)*Ht,Q=[Vt];else{var Vt,Ft,Xt,Ut=X-1,Wt=A[1]-A[0],Ht=Wt/Ut,Gt=cl(yl(Ht)/wl),Zt=gl(10,Gt);Zt*=Math.floor(Ht/Zt),Zt=+Zt.toFixed(12);var Qt=p(U,Zt,Ut);Vt=A[0],Ft=A[1],Xt=Wt-Qt*Ut;var qt=gl(10,cl(yl(Xt)/wl)+1);Vt=g(Vt,Xt,qt,Qt),Vt=+Vt.toFixed(12),Ft=Vt+Qt*X,Ft=+Ft.toFixed(12),Q=xo(Vt,Ft,Qt)}else Q="integer"===ct?xo(m(A,1),A[1],v(A)):S.ticks(G);Q=f(Q,I.config,H,_,B.axisOrder,B.orient),G=Q.length;break;case"ordinalNonLinear":case"ordinal":var Kt,$t=ft,Jt=F.hierarchical;if(T=it(Jt)&&Jt.categoryTree&&"x"==_&&0==q||F.isWaterfallEnabled,L=T&&("auto"==B.chart.systemConf.chart.width||"auto"==B.chart.systemConf.chart.height),it(Q)||(Q=F.getCategories(_,B.axisOrder).slice(0)),T&&it(Jt)&&(Q=F.hierarchical.leafNodes),nt===No&&!it(ct)){var ea=Xr(Q[Q.length-1]-Q[0]);ct=st.subfunction=ea.subFunction}G=Q.length,j={},j.width=j.height=ft,M=s(xt,j,ut,kt,ft,B.orient),Kt=sl((Tt-Et)/M),G>Kt&&"width"===xt&&(kt||I.config.rotation>0)&&(M=h(45,ft,$t,B.orient).tickSpacing+ut.left+ut.right),"x"==_&&q>0||L||(G>X?Q=n(Q,X,null,T):it(U)?Q=n(Q,G,U,T):G>Kt&&(Q=n(Q,Kt,null,T))),T&&(P=Q.nodes||Q,E=Q.indices,Q=Q.ticks||F.getCategories(_,B.axisOrder).slice(0)),G=Q.length;break;case"time":var ta=Na(st);if(!ta){var aa,ra,na;if(A=it(Z)?Z:"x"===_?F.getMinMaxX(0):F.getMinMaxY(B.axisOrder,0),aa=new Date(A[0]),ra=new Date(A[1]),it(ot[nt])||(ot[nt]=st),!it(ct)||"AUTO"===ct){var ea=Xr(ra-aa);ct=st.subfunction=ea.subFunction}na=new sc(st),na.useUTC=st.useUTC===!0,Pt=na.getMaxDate(st,Rt),Pt=Ga(Pt,mt,zt.horizontal,zt.vertical,ft),j=Wa(Pt,ft,gt),M=s(xt,j,ut,kt,ft,B.orient),G=(Tt-Et)/M;var ia=na.range(aa,ra,dl(G),ct,U,H);Q=f(ia.TICKS,I.config,H,_,B.axisOrder,B.orient),G=ia.TICKS.length;break}var la=Si.scale.getScale(H,F,N,B.orient,B.axisOrder,H.dataset,_,null);Q=la.ticks(),z=Q.map(function(e){return la.tickFormat()(e)}),G=Q.length}if("ordinalNonLinear"===$){var z=ta?z:bt(Q,dt,st,H,nt,"axis",Rt,mt,zt,ft);it(I.config.showAs)&&(Lt=i(Q,I.config,rt,H,tt,q),z=Lt.tickValues,Lt.length=z.length);var R=l(z,Q,ft,gt,Lt.styles);return{rawTickValues:Q,formatterTickValues:z,longestTickValue:R,scale:I.getScale(),longestTickDimension:Wa(R.formattedVal,ft,gt),margin:ut,tickMargin:ht,rotation:kt,customTickInfo:Lt,mode:mt,maxTickSize:zt}}S=I.getScale();var oa=S.actualRange,sa=oa&&oa[0]===oa[1];sa&&(Q=[S.invert(oa[0])]),z=ta?z:bt(Q,dt,st,H,nt,"axis",Rt,mt,zt,ft),it(I.config.showAs)&&(Lt=i(Q,I.config,rt,H,tt,q),z=Lt.tickValues,Lt.length=z.length),R=l(z,Q,ft,gt,Lt.styles),it(Pt)||(Pt=R.formattedVal);var ca=Wa(Pt,ft,gt,R.style,!0),da=Fa(I.config,H.chartarea);ca.width=hl(ca.width,da.horizontal),ca.height=hl(ca.height,da.vertical),L&&I.recalculatePlotSize(B.chart,Tt,ca,xt,G,ut,St,At);var ua=u(G),ha=ua.mode,fa=ua.maxTickCount;if(kt=ua.rotation,!sa&&(G>fa||ua.recalculate))if($===No)if(ta){var la=Si.scale.getScale(H,F,N,B.orient,B.axisOrder,H.dataset,_,null);Q=la.ticks(fa),G>fa&&(kt=45),z=Q.map(function(e){return la.tickFormat()(e)}),R=l(z,Q,ft,gt,Lt.styles)}else ia=na.range(aa,ra,fa,ct,U,H),Q=f(ia.TICKS,I.config,H,_,B.axisOrder,B.orient),z=bt(Q,dt,st,H,nt,"axis",Rt,mt,zt,ft);else G>fa&&(T?(Q=n(P||Q,fa,null,T),E=Q.indices,Q=Q.ticks):(Q=n(Q,fa),I.config.showAs&&(Lt.styles=n(Lt.styles,fa),Lt.userRawTicks=n(Lt.userRawTicks,fa))),z=n(z,fa),R=l(z,Q,ft,gt,Lt.styles));nt===No&&Dt&&(Dt&&!it(F.hierarchical)?F.hierarchical=new Si.HierarchicalTimeDataAdapter(H,Q,st.groupby,$!==No,rt):Dt&&F.hierarchical.update(Q)),(it(Lt.styles)||st&&st.format&&st.format.breakSpace)&&(R=l(z,Q,ft,gt,Lt.styles,!0));var ga=Wa(Pt,ft,gt,R.style);return{rawTickValues:Q,formatterTickValues:z,longestTickValue:R,scale:S,longestTickDimension:ga,margin:ut,tickMargin:ht,rotation:kt,mode:ha,tickValueIndices:E,customTickInfo:Lt,maxTickSize:zt}},recalculatePlotSize:function(e,t,a,r,n,i,l,o){var s,c,d;"height"===r?(s=a[r]+i.top+i.bottom,c=s*n,t=[c,0]):(s=a[r]+i.left+i.right,c=s*n,t=[0,c]),d=Da(t,n,l,o,s),c+=d,e.systemConf.chart[r]=c}},x.Ticks=w,x.AxisLabel=b}(Si),Si.axis.Ticks.prototype.ticklabelFitModels=function(e,t){var a={},r=e.length;return a.zigzag={},a.rotate={},a.type=r>t?t>2*r?"zigzag":"rotate":"default",a},Si.axis.ticks=function(e,t,a,r,n,i){"use strict";function l(){return o()&&r>0}function o(){return"x"==a&&e.axes.x.count>1}function s(t,a,i,l,o,s,u,f){var p,m=a,v=b===No&&Na(W),y=o.formatterTickValues;g=o.rawTickValues;var x,w,C=o.longestTickValue,O=o.maxTickSize,A=o.tickValueIndices,E=o.scale;it(o.customTickInfo)&&o.customTickInfo.length&&(x=o.customTickInfo.styles,w=o.customTickInfo.userRawTicks);var L=(c(n),wt(y)),z=function(e,t){var a,r;return it(x)&&(a=x[t]),r=Wa(e,S,P,a),u?r.width*r.height:"left"==n||"right"==n?r.width:r.width*r.height};if(!s){i.append("line").attr("class","domain").attrs({x1:0,y1:0,x2:"bottom"==n||"top"==n?t.width:1e-4,y2:"bottom"==n||"top"==n?1e-4:t.height}).style("stroke","black");var D=k.textOverflow==Sl?"":k.textOverflow,R=!1,j=-1,M=C.actualVal,I=C.formattedVal;u&&(I=d(o.longestTickValue,null,o)),Nt(a,I,null,u),h(a,f,o);var B=(E(M)||0)+(null==E.bandwidth?0:E.bandwidth()/2);B="bottom"==n||"top"==n?B+",0":"0,"+B,l.attr("transform","translate("+B+")"),ja(a,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:t,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},T,D,E,i,null,"ticklabel",k,r);var H,V,F;for(V=H=u?I:_t(a);"ordinalNonLinear"!=b&&!R&&j<g.length;){j+=1;var B=(E(M)||0)+(null==E.bandwidth?0:E.bandwidth()/2);B="bottom"==n||"top"==n?B+",0":"0,"+B,l.attr("transform","translate("+B+")"),ja(a,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:t,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},T,D,E,i,null,"ticklabel",k,r),H=_t(a),z(H,j)>z(V,j)&&(I=H,u&&(I=d(null,j,o)),V=I),Nt(a,V,null,u);var N=!g.length||j===g.length-1||1===g.length;F=N?null:v?L[j]:L[j]||"";var Y=N?!1:z(H,j)<z(F,j);Y?(M=L[j],H=F,I=F,u&&(I=d(null,j,o)),Nt(a,I,null,u)):R=!0}}var _=m.node().getBoundingClientRect(),X=i.node().getBoundingClientRect();return p={ticks:g,rotation:T,longTickSize:_,longtick:C,axisgroup:X,customTicks:w,mode:o.mode,maxTickSize:O},A&&(p.tickValueIndices=A),p}function c(e){switch(e){case"left":return j;case"right":return M;case"bottom":return B;case"top":return I}}function d(e,t,a){return a.customTickInfo.userRawTicks[it(t)?t:e.index]}function u(e,t,a,r,n,i){var l=zt(e,"text",[1],".","class","dummyText");return l.attrs({x:a.x||0,y:a.y||0,dy:a.dy||0}).attr("transform","rotate("+r+" "+a.x+" "+a.y+")"),n?t=d(i.longestTickValue,null,i):l.text(t),Nt(l,t,null,n),Bt(l,[k,m.chart,m.canvas,Us]),l}function h(e,t,a){e.attrs({dy:"zigzag"==a.mode?t.dy1||t.dy:t.dy,transform:"rotate("+t.rotate[0]+" "+t.rotate[1]+" "+t.rotate[2]+")"}).styles({"text-anchor":t.textAnchor})}var f={};Si.axis.ticks.maxTickSizeRatio_Vert="50%",Si.axis.ticks.maxTickSizeRatio_Hori="50%";var g,p=e.dataObject,m=e.systemConf,v=e.svg,y=e.canvasarea["bottom"==n||"top"==n?"height":"width"],x={top:5,right:5,bottom:5,left:5};f.isHierarchy=o,f.isHierarchialLevelType=l;var n,b=e.dataset.getDataType(a,r),w=p.getAxisRotated(),C=t.label||{},k=t.ticklabel||{},O=t.tickmark,A={},S=parseFloat(Si.utils.getVal(at([k,m.chart,m.canvas,Us],"fontSize"))),P=Si.utils.getVal(at([k,m.chart,m.canvas,Us],"fontFamily")),T=null!=k&&null!=k.rotation&&"auto"!=k.rotation?k.rotation:0;o()&&(T=0),T=null==T||""==T?0:parseFloat(T),T=0>T?360-fl(T):T,T=T>360?fl(T)%360:T;var E,L,z,D,R=C.show===!1||!it(C.text)||""===C.text||!qt(e,a+"axislabel",y)||o()&&r<e.axes.x.count-1;R?E=L=z=D=0:(D=ic(C.marginTop,5),z=ic(C.marginBottom,5),L=ic(C.marginLeft,5),E=ic(C.marginRight,5));var j=ic(k.marginRight,5),M=ic(k.marginLeft,5),I=ic(k.marginBottom,5),B=ic(k.marginTop,5),H="0.71em",V=e.systemConf.metadata,F=e.dataset.getColumnIdx(a,r),N=V.columns[F].datatype,Y=V.columns[F][N],_="y"==a?V.axes.y[r].length>1:!1,W=Y;W=_&&"y"==a?ka(r,e):Y,this.preCalcAxisLen=0;var X=ic(O.size,6);return f.preCalcApproxAxisLength=function(i){var l="x"==a&&0==r&&e.brush?e.brush.extent:null,o=Pa(e,a,r),s={axisRotated:w,axisOrder:r,chart:e,orient:n};o.Ticks||(o.Ticks=new Si.axis.Ticks(a,t,i,s)),this.tickValueObj=f.getTickValues(i.width,i.height,l,!0,null,o.Ticks,i);var c="x"==a?a+"-axis-"+r:a+"-axis-"+r,d=e.svg.selectAll("g."+a+"-axis"),u=zt(d,"g",[t],".","class",c),h=zt(u,"g",[t],".","class","axisgroup");h.selectAll("line.majorTicks").style("display","");var g=this.tickValueObj.axisgroup,p=g.width,v=g.height,y=k.maxWidth,b=k.maxHeight;"left"!==n&&"right"!==n||!it(k.width)?it(k.height)&&(v=ta(cc(k.height,b)||Si.axis.ticks.maxTickSizeRatio_Vert,i.height)):p=ta(cc(k.width,y)||Si.axis.ticks.maxTickSizeRatio_Hori,i.width),g=this.preCalcTickLen={x:g.left,y:g.top,width:p,height:v};var C="x"===a&&!w,O=!C,S={systemConf:m,bound:g,horizontal:C,vertical:O,axisOrder:r,plotRect:i,hide:R},P=0;if(o.axisLabel?(o.axisLabel.show=!R,o.axisLabel.transformLabel(g,i,n)):o.axisLabel=new Si.axis.AxisLabel(t,S,n,u),R)this.preCalcAxisLen="bottom"===n||"top"==n?g.height+I:g.width+M;else switch(P=o.axisLabel.getBBox().height,A.textAnchor="middle",n){case"left":A.y=g.height/2,A.x=-(g.width+M+x.right),A.db="",this.preCalcAxisLen=g.width+M+E+P+L;break;case"right":A.x=g.height/2,A.y=-(g.width+M+x.right),this.preCalcAxisLen=g.width+L+j+P+E;break;case"bottom":A.x=g.width/2,A.y=g.height+I+x.top,A.dy=H,this.preCalcAxisLen=g.height+I+z+P+D;break;case"top":A.x=g.width/2,A.y=g.height+B+x.bottom,A.dy=H,this.preCalcAxisLen=g.height+B+D+P+z}return this.preCalcAxisLen},f.getTickValues=function(t,l,o,d,h,f,g){var p={},m={axisRotated:w,axisOrder:r,chart:e,orient:n,extent:o,maxTickSize:this.tickValueObj?this.tickValueObj.maxTickSize:null},y=f.getTicks(i,h,m),x=it(k.showAs);T=isNaN(y.rotation)?T:y.rotation;var C=y.tickMargin,O=c(n),A=Va(n,T,null,null,X,O);C.dy=A.dy,b=e.dataset.getDataType(a,r);var S=ic(g,i),P=v.append("g").attr("class","dummy"),E="right"===n?S.left+S.width:S.left,L="bottom"===n?S.top+S.height:S.top;
P.attr("transform","translate("+E+","+L+")");var z=P.append("g").attr("class","tick"),D=u(z,y.longestTickValue.formattedVal,C,T,x,y);return D.call(function(e){p=s(S,e,P,z,y,it(h),x,A)}),P.remove(),p},f.getActualTicklabel=function(){var t,a=this.tickValueObj,r=a.ticks;return t=this.isHierarchy()&&!this.isHierarchialLevelType()&&a.tickValueIndices?function(e){var t=a.tickValueIndices.indexOf(e);return-1!=t?r[t]:null}:e.dataObject.isWaterfallEnabled&&a.tickValueIndices?function(e){return r[e]}:function(e){return r[e]}},f.getTicksforAxisComp=function(){var t=e.dataset.getDataType(a,r);return o(e,a)&&e.dataObject.hierarchical.categoryTree&&(t==Fo||"ordinalNonLinear"==t)||l()&&e.dataObject.hierarchical.groupByTime?null:e.dataObject.isWaterfallEnabled&&"x"==a?this.tickValueObj.tickValueIndices||null:this.tickValueObj.ticks},f},Si.axis.constructTickObj=function(e,t,a,r,n,i){var l,o,s=e.systemConf;l="left"==r&&e.axes.rotated||"bottom"==r&&!e.axes.rotated?"x":"y";for(var c=e.axes[l].count,d=0;c>d;d++){var u=s.chart.axes.yaxis;if(d>0&&"y"==l){o=i?u[d]:ac(u[d],u[0],!1);var h=null!=u[d]&&""!==u[d]?u[d]:{};o.interval=h.interval,o.tickCount=h.tickCount,o.minRange=h.minRange,o.maxRange=h.maxRange,o.categories=h.categories,u[d]=o}o="x"==l?s.chart.axes.xaxis:u[d],r=o.orient||("x"==l?e.axes.rotated?"left":"bottom":e.axes.rotated?"bottom":0==d?"left":"right");var f="bottom"==r||"top"==r?a:t,g=o.show===!0&&qt(e,l+"axis",f);if(g){var p=Pa(e,l,d);"y"!=l||p||(p={}),"x"!=l||p||(p=d>0?{}:p);var m=Si.axis.ticks(e,o,l,d,r,n);p.ticks=m;var v=m.preCalcApproxAxisLength(n);if("y"!==l||!e.axes.y.groups[d].disabled){var y=e.plotarea;"left"==r?(n.left+=v,n.width=n.width-v,y.left=n.left,y.width=n.width):"right"==r?(n.width=n.width-v,y.width=n.width):"bottom"==r?(y.height=y.height-v,y.bottom+=v,n.height=y.height,n.bottom+=y.bottom):"top"==r&&(y.height=y.height-v,y.top+=v,n.height=y.height,n.top+=y.top)}}else{var x="y"===l?e.axes.y.groups[d]:e.axes.x;x.axisLabel=x.Ticks=null}}"y"==l&&$(s.chart,"scroll")&&s.chart.scroll.enabled&&(e.svg.call(e.brush),e.brush.initialize(n))};var cc=function(e,t){return it(e)&&it(e)?e>t?t:e:e||t};Za.applyDefaultStyles=function(e,t,a){var r,n,i=e.svg.select(".seriesholder"),l=e.staticPaneSVG.select("g.labelholder"),o=e.chartTypes[0],s=l.selectAll('text[level^="'+t+'"],path[level^="'+t+'"]'),c=l.selectAll('text:not([level^="'+t+'"]), path:not([level^="'+t+'"])');if("bar"===o.name)r=i.selectAll('path[level^="'+t+'"]'),n=i.selectAll('path:not([level^="'+t+'"])');else{if("scatter"!==o.name&&"bubble"!==o.name)return;r=i.selectAll('g.scatter[level^="'+t+'"]'),n=i.selectAll('g.scatter:not([level^="'+t+'"])')}a===!0?(r.style("opacity",1),n.style("opacity",.1),s.style("opacity",1),c.style("opacity",.1)):(r.style("opacity",1),n.style("opacity",1),s.style("opacity",1),c.style("opacity",1))},Za.setState=function(e,t){var a=function(e){e.active=t};e.forEach(a)},Za.updateTickEventHandler=function(e,t){var a=e.cache.hierarchical,r=!t;if(it(a)&&it(a.data)){var n,i=e.dataObject.hierarchical;if(a.data){var l=a.data.filter(function(e){return!e.seriesDisabled});if(t&&(a.query=l.length?Za.getQuery(l[0],a.depth):"-1"),r){n=l[0];var o=n.level.split("_").slice(0,a.depth+1).map(Number),s=i.getCategoriesByLevelIndices(o),c=g.getAllChildren(s);a.query=Za.getQuery(n,a.depth),a.data=c,Za.setState(c,!0)}}}},Za.getQuery=function(e,t){var a=e.level.split("_").slice(0,t+1).map(Number);return a.slice(0,t+1).join("_")+"_"},Si.axis.polar=function(){function e(e){e.each(function(e){var a,u,h,f,g,p=jl(this),m=i.systemConf,v=e.axisline,y=e.tickmark,x=e.subtickmark||{},b=e.grid,w=e.ticklabel,C=w.events;null!=C&&(a=C.mousemove,u=C.mouseout,h=C.click,f=C.doubleclick,g=C.cursor);var k=e.tickOrient,S=v.show?rt(v.strokeWidth,1):0,P=rt(b.strokeWidth,1),T=rt(w.marginLeft,5),E=rt(y.size,3),L=rt(x.size,2),z=+x.count||0,D=c||(n.ticks?n.ticks():n.domain()),R=t(n,D,z),j=n.range(),M=zt(p,"g",[1],".","class","subticksGroup");M.style("stroke",x.color);var I=zt(M,LINE_ELEMENT,R),B=zt(p,"g",[1],".","class","ticksGroup"),H=zt(B,"g",D,".","class","tick"),V=zt(p,Xo,v.show?[1]:[],".","class","domain");V.attr("d",function(){var e=uo().innerRadius(l-1).outerRadius(l).startAngle(j[0]).endAngle(j[1])(1);return"M"+e.split(/L|M/gi)[1]}).styles({stroke:v.color,fill:Sl,"stroke-width":S,"stroke-dasharray":O(v.style,S),"stroke-linecap":A(v.lineCap,v.style),"pointer-events":Sl}),zt(H,LINE_ELEMENT,[1],".","class","tickmark"),zt(H,LINE_ELEMENT,[1],".","class","grid"),zt(H,_o,[1]);var F=H.select(_o),N=H.select(LINE_ELEMENT+".tickmark"),Y=H.select(LINE_ELEMENT+".grid");F.style("cursor",g||Tl).text(function(e){return s(e)}),Bt(F,[w,m.chart,m.canvas,Us]),d={data:o.map(function(e){return ac(i.systemConf.metadata.columns[e],{columnindex:e},!0)})};var _=function(e){r(a,d3.event,e)},W=function(e){r(u,d3.event,e)},X=function(e){r(h,d3.event,e)},U=function(e){r(f,d3.event,e)},G={mousemove:_,mouseout:W,click:X,dblclick:U},Z={singletouchmove:_,touchend:W,tap:X,dbltap:U};Ar(F,G,Z);var Q,q,K,$;switch(k){case ks:Q=l-S/2,q=-(E+T),K=-E,$=-L;break;default:Q=l+S/2,q=E+T,K=E,$=L}H.attr("transform",function(e){var t=$t(Q,n(e));return"translate("+t[0]+","+t[1]+")"}),F.attrs({dy:function(e){var t=Jt(n(e));return k==ks?t>kl/2&&3*kl/2>t?null:-aa(t)+"em":t>kl/2&&3*kl/2>t?aa(t)+"em":null},"text-anchor":function(e){var t=Jt(n(e));return t%kl==0?"middle":k==ks&&kl>t||k!=ks&&t>kl?"end":null},transform:function(e){var t=$t(q,n(e));return"translate("+t[0]+","+t[1]+")"}}),N.attrs({x2:function(e){return $t(K,n(e))[0]},y2:function(e){return $t(K,n(e))[1]}}).styles({stroke:y.color,"stroke-width":y.strokeWidth}),Y.attrs({x2:function(e){return $t(-l,n(e))[0]},y2:function(e){return $t(-l,n(e))[1]}}).styles({stroke:b.color,"stroke-width":P,"stroke-dasharray":O(b.style,P),"stroke-linecap":A(b.lineCap,b.style)}),I.attrs({x2:function(e){return $t($,n(e))[0]},y2:function(e){return $t($,n(e))[1]},transform:function(e){var t=$t(Q,n(e));return"translate("+t[0]+","+t[1]+")"}})})}function t(e,t,r){if(n=[],r&&t.length>1){for(var n,i,l,o=a(e.domain()),s=-1,c=t.length,d=(t[1]-t[0])/++r;++s<c;)for(i=r;--i>0;)(l=+t[s]-i*d)>=o[0]&&n.push(l);for(--s,i=0;++i<r&&(l=+t[s]+i*d)<o[1];)n.push(l)}return n}function a(e){var t=e[0],a=e[e.length-1];return a>t?[t,a]:[a,t]}function r(e,t,a){null!=e&&(d.data=d.data.map(function(e){return e.value=a,e}),tt(e,t,d,i))}var n,i,l,o,s,c,d;return e.scale=function(t){return arguments.length?(n=t,e):n},e.chartObj=function(t){return arguments.length?(i=t,e):i},e.radius=function(t){return arguments.length?(l=t,e):l},e.columnIndices=function(t){return arguments.length?(o=t,e):o},e.tickValues=function(t){return arguments.length?(c=t,e):c},e.tickFormat=function(t){return arguments.length?(s=t,e):s},e},Si.axis.polar.render=function(e,t){function a(e){var t=[],a=e+((E==Os?O:O/2)+P*(L==ks?-1:1)),n=L==ks?Il:Bl;return G.selectAll(_o).each(function(i){var l=U(this),o=e+((E==Os?O:O/2)+S+A)*(L==ks?-1:1),s=$t(o,B(i)),c=[r(s[0]+l.x,s[1]+l.y),r(s[0]+l.x,s[1]+l.y+l.height),r(s[0]+l.x+l.width,s[1]+l.y),r(s[0]+l.x+l.width,s[1]+l.y+l.height),a];t.push(n(c))}),n(t)}function r(e,t){return pl(gl(e,2)+gl(t,2))}function n(e,t){if(xt){var a=uo().innerRadius(e-1).outerRadius(e).startAngle(H[0]).endAngle(H[1])(1);return"M"+a.split(/L|M/gi)[1]}var r=t.ticks?t.ticks():t.domain(),a=r.reduce(function(a,r){var n=t(r),i=$t(e,n);return a+"L"+i[0]+" "+i[1]+" "},"");return"M"+a.substring(1)+"Z"}function i(t,a,r,n){var i=y.minmaxlabels,l=i.align,o=rt(i.padding,5),s=i.text,d=a.domain(),u=i.showAs,h=l==ks?n-o:"center"==l?(r+n)/2:r+o,f=i.show?"min"==u?[d[0]]:"max"==u?[d[1]]:d:[],g=zt(t,_o,f,".","class","minmaxlabels");Bt(g,[i,c.chart,c.canvas,Us]),g.attrs({"text-anchor":function(e){if("center"==l)return"middle";var t=Jt(a(e));return t%kl==0?"middle":l==ks&&kl>t||l!=ks&&t>kl?"end":null},dy:function(e){if("center"==l)return"1em";var t=Jt(a(e));return l==ks?t>kl/2&&3*kl/2>t?null:-aa(t)+"em":t>kl/2&&3*kl/2>t?aa(t)+"em":null},transform:function(e){var t=$t(h,a(e)),r="center"==l?o:0;return"translate("+t[0]+","+(t[1]+r)+")"}}).text(function(t,a){return s&&it(s[a])?Rn(s[a]+"",f,F,e):Lr(Y,t,N,e,"minmaxlabels")})}function l(){var e={};return o(e,"axisgroup"),o(e,"minmaxlabels"),o(e,"targetSeries"),d.firedList=e}function o(e,t){var a=[".targetSeries",".datalabel",".minmaxlabels",".axisgroup"].filter(function(e){return e!=="."+t}).join();X.selectAll(a).style("display",Sl);var r=U(X.node()),n=R+hl((z-r.width)/lt,(D-r.height)/nt),i=ta("minmaxlabels"===t?y.minmaxlabels.maxWidth:null,R,ta("50%",R));(R-i>n||0>=R||!isFinite(n))&&(e[t]=!0,X.selectAll("."+t).remove()),X.selectAll(a).style("display",null)}var t=t||"y",s=0,c=e.systemConf,d=e.renderer[0],u=e.dataObject,h=e.plotarea,f=e.canvasarea,g=e.systemConf.metadata.columns,p=e.chartTypes[0],m=p.value,v=p.name,y=c.chart.plot.plotoptions[v],x="x"==t?c.chart.axes.xaxis:c.chart.axes.yaxis[s],b=+y.outerPadding||0,w=+y.maxRadius||0,C=m===Si.charttype.dial,k=x.show&&qt(e,t+"axis",hl(f.width,f.height)),O=k&&x.axisline.show?rt(x.axisline.strokeWidth,1):0,A=rt(x.ticklabel.marginLeft,5),S=rt(x.tickmark.size,3),P=x.subtickmark?rt(x.subtickmark.size,2):0,T=Si.utils.getVal(x.ticklabel.fontSize||c.chart.fontSize||c.canvas.fontSize||Us.fontSize),E=x.orient||Os,L=x.tickOrient,z=h.width-2*b,D=h.height-2*b,R=hl(z,D)/2,j=ia(y,R),M=k?+y.padding||0:0;e.plotarea_approx={x:0,y:0,innerRadius:j};var I=Si.scale.constructor(e,"x"==t?ys:ms),B="x"==t?I[0].scale:I[s].scale,H=B.range(),V=e.dataset.getColumnIdx(t,s),F=g[V],N=F.datatype,Y=F[N],_=E==ks?L===Os?j-M-O/2-ul(P,S+A+T):j:R,W=Si.axis.polar().scale(B).chartObj(e).radius(_).columnIndices([V]).tickFormat(function(t){return Lr(Y,t,N,e,"axis")}).tickValues(null),X=zt(e.svg.selectAll("g.chartgroup"),"g",[1],".","class",t+"-axis"),G=zt(X,"g",k?[x]:[],".","class","axisgroup");G.call(W),X.style("visibility","hidden");var Z=uo().innerRadius(!C||y.needle.show||ci(y.datalabels,e)?0:j).outerRadius(R).startAngle(H[0]).endAngle(H[1]),Q=zt(X,Xo,[1],".","class","dummyArc").attr("d",Z(1)),q=zt(X,"g",[1],".","class","datalabel"),K=zt(X,"g",[1],".","class","targetSeries");if(C){if(!d){var $=0;d=e.renderer[$]=dc(v),e.rendererConf=[],e.rendererConf[$]=new Si.plot.rendererConf,Ki.setRendererProp(e,d,e.seriesdata[$],$,[])}d.firedList={},q.call(Si.labelRenderer.dial().renderer(d).args([e.seriesdata,0]),e.labelHandler,q),i(X,B,R,j),Mc.targetMarker(K,R,j,e);var J=+y.needle.width/2||7,et=zt(q,"circle",y.needle.show?[1]:[]);et.attrs({r:J,transform:"translate("+J+","+J+")"})}var tt=U(Q.node()),at=U(X.node()),nt=tt.height/R,lt=tt.width/R,ot=R+hl((z-at.width)/lt,(D-at.height)/nt),st={};if(C){var st=l(),at=U(X.node());ot=R+hl((z-at.width)/lt,(D-at.height)/nt),ot=ot>w?w:ot,ot=isFinite(ot)&&ot>0?ot:0}j=ia(y,ot)-(E==ks?(+y.strokeWidth||0)/2:0),_=(E==ks?L==ks?j:j-(a(R)-R):ot)-(L==ks?O/2:0)-(E==ks?M:0),W.radius(_),st.axisgroup?null:G.call(W),Z.outerRadius(ot).innerRadius(!C||y.needle.show||ci(y.datalabels,e)?0:j),Q.attr("d",Z(1)),C&&(st.minmaxlabels?null:i(X,B,ot,j),Mc.targetMarker(K,ot,j,e));var tt=U(Q.node()),at=U(X.node()),ct=ea(at,h.width,h.height,ot,0);X.attr("transform","translate("+(h.left+ct[0])+","+(h.top+ct[1])+")"),X.style("visibility",null);var dt=(L==ks&&E==Os?a(ot):ot-(E==ks?0:O/2))-(E==ks?0:M),ut=L==ks?(ot-dt)*lt:0,ht=L==ks?(ot-dt)*nt:0;if(e.plotarea_approx={x:ct[0],y:ct[1],width:tt.width-O-ut,height:tt.height-O-ht,radius:dt,actualRadius:ot,innerRadius:j},Q.remove(),q.remove(),K.remove(),u.isPolarAxisCategory){var t="y",ft=0,gt=c.chart.axes.yaxis[ft],R=e.plotarea_approx.radius,pt=e.plotarea_approx.x,mt=e.plotarea_approx.y,E=gt.orient||vs,vt=rt(gt.tickmark.size,6),yt=rt(gt.ticklabel[E==ms?"marginRight":"marginLeft"],3),xt="arc"===gt.grid.type,I=Si.scale.constructor(e,ms),bt=I[ft].scale,wt=gt.reversed&&!u.isstacked()?[0,R]:[R,0];bt.origRange=wt,bt.range(wt);var Ct={left:e.plotarea.left,top:e.plotarea.top,width:R,height:R},kt=Pa(e,t,0),Ot=Si.axis.ticks(e,gt,"y",0,E,Ct);kt.ticks=Ot,Ot.preCalcApproxAxisLength(Ct);var At=Ot.getTickValues(R,R,null,null,R/20,kt.Ticks),St=e.userdata.metadata,Pt=St.axes.y[ft].length>1,V=e.dataset.getColumnIdx(t,ft),N=St.columns[V].datatype,Y=Pt&&"y"==t?ka(ft,e):St.columns[V][N],Tt=u.isStackedPercentChart&&"y"==t?Mr:Lr,Et=Si.axis.get().orient(E).scale(bt).tickPadding(yt).tickSize(vt,0).plotarea({width:R,height:R}).systemconf(e.systemConf).chartObj(e).tickRotation(At.rotation).preCalcTickLen(Ot.preCalcTickLen).tickValues(At.ticks).tickFormat(function(t){var a=Tt(Y,t,N,e,"axis");d3.select(this).text(a)}).columnIndices(Pt&&"y"==t?St.axes.y[s]:[V]),Lt=e.svg.selectAll("g.y-axis").data(gt.show?[gt]:[]);Lt.call(Et,t,ft).attr("transform","translate("+(pt+e.plotarea.left)+","+(mt+e.plotarea.top-R)+")"),Lt.exit().remove();var Dt=Lt.selectAll(".tick");Dt.append(Xo);var Rt=Dt.select(Xo);Rt.attr("transform",function(e){return"translate(0,"+(R-bt(e))+")"}).attr("d",function(e){return n(R-bt(e),B)}).styles({fill:Sl,stroke:gt.grid.color,"stroke-width":gt.grid.strokeWidth}),G.selectAll(Xo+".domain").attr("d",function(){return n(R,B)}),bt.range(wt.reverse())}},Si.plot.render=function(e){var t=e.systemConf.chart.plot.renderer.mode.toLowerCase(),a=e.chartTypes[0],r={mode:!e.isAxisCategory&&!e.dataObject.isPolarAxisCategory&&4!==a.value||e.dataObject.pieWithAxis||24===a.value||27===a.value?"svg":t.toLocaleLowerCase()},n={};if(n.labelQueue=[],n.notesArray=[],n.labelArray=[],e.rendererConf||(e.rendererConf=[]),"function"!=typeof Si.plot[r.mode+"Renderer"])throw new SyntaxError(""+r.mode+"Renderer not found");return r[r.mode]=Si.plot[r.mode+"Renderer"](e,n),r.draw=function(t){e.chartRendered=!1,this[this.mode].draw(t)},r},Ki.renderCompletedEvents=function(e,t,a){function r(){try{tr(e,i.chart.plot.events,"plot",t?"onreload":"onload"),Qa(e,a,!(o&&t)),e.handleHiddenContainer(!0),tr(e,i.canvas.events,"chart",t?"onreload":"onload")}catch(r){Si.Chart.helpers.handleErrors(e,r)}}var n,i=e.systemConf,l=e.dataObject.hasLevelMarker&&!e.isAxisCategory,o=(e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&!e.dataObject.pieWithAxis||l,s=e.renderer,c=!1;e.isAxisCategory||e.dataObject.isPolarAxisCategory?setTimeout(function(){c=!0},e.axes.animationDuration+17):c=!0;var d=function(){if(yt()&&(e.chartRendered=!0),e.destroying)return!0;for(n=s.length;n--;){if(s[n].chartRendered!==!0||!c)return!1;a.notesArray=s[n].commonRendererProp().notes()}return r(),e.chartRendered=!0,clearInterval(u),!0},u=setInterval(d,1e3/60);o&&Qa(e,a,l||t)},Ki.arrangeSeriesRenderingOrder=function(e){var t=e.seriesdata,a=Si.DataProcessor.helpers;if(e.dataObject.isCombinationalChart){var r={defaultType:0,area:0,bar:1,line:2,bubble:3,bubblepie:4,scatter:5},n=e.userdata.seriesdata.type,i=rc(t);return i.map(function(e,t){return e.seriesidx=t,e}),i.sort(function(e,t){var i=a.getChartType(e.type||n,"string"),l=a.getChartType(t.type||n,"string"),o=null==r[i]?r.defaultType:r[i],s=null==r[l]?r.defaultType:r[l],c=e.seriesidx,d=t.seriesidx;return s>o?-1:o>s?1:d>c?-1:c>d?1:0}),i}return t},Ki.setRendererProp=function(e,t,a,r,n){function i(t,a,r,i,o){var s=e.seriesdata[r].color||e.seriesColor[r%e.seriesColor.length],c=e.seriesdata[r].yaxiscolumnorder,d=u.getParsedYAxisOrder(c),h=e.rendererConf[r];h.chartObj(e).dataset(e.dataset).axisrotated(e.dataObject.getAxisRotated()).yaxiscolumnorder(d).hasNegValue(e.dataObject.containsNegativeData(d)).stacked(e.dataObject.isstacked(o)).commonPlotOptions(e.systemConf.chart.plot.plotoptions[i]).color("bubblepie"==i?e.seriesColor:e.isAxisCategory?l(t,a,s,r,d,i):e.dataObject.isPolarAxisCategory?s:e.seriesColor).notes(n.notesArray).updateLabelArrayAndLabelQueue(n.labelArray,n.labelQueue)}function l(t,a,r,n,i,l){var o=d.chart.axes.xaxis.threshold.coloroverlay,s=null!=d.chart.axes.yaxis[i]&&null!=d.chart.axes.yaxis[i].threshold?d.chart.axes.yaxis[i].threshold.coloroverlay:null,c=o.show||null!=s&&s.show;if(c){var u=null!=s&&s.show?s:o.show?o:null,h=null!=s&&s.show?"y":o.show?"x":null,f=c?Si.axis.threshold.overlay(e,"continous"):null,g="y"===h?i:0;return e.rendererConf[n].threshold(c?u:null).thresholdType(h).colorOverlay(c?Si.axis.threshold.overlay(e,"discrete",u):null),"bar"==l||"scatter"==l||"bubble"==l?r:f(r,u,g,h)}return r}var o=e.chartTypes[r],s=o.name,c=o.value,d=e.systemConf,u=Si.DataProcessor.helpers;i(t,a,r,s,c),t.commonRendererProp(e.rendererConf[r]);var h=e.seriesdata[r].yaxiscolumnorder,f=u.getParsedYAxisOrder(h);if(t.chartRendered=!1,e.xymultiRenderer||e.dataObject.isPolarAxisCategory){var g=e.axes.y.groups[f],p=g.scale;e.rendererConf[r].xscale(e.axes.x.scale).yscale(p).datasetIndex(r),n.labelArray=e.rendererConf[r].params.labelArray,n.labelQueue=e.rendererConf[r].params.labelQueue}if(ir(c)&&!ur(c)&&(t.bandwidth1(e.barscale1).bandwidth2(e.barscale2),n.image||t.barDatasetIndex(n.barDatasetIndex),null!=a.disabled&&a.disabled||(n.barDatasetIndex=n.barDatasetIndex+e.seriesdata[r].data.length)),sr(c)){var m=e.rendererConf[r].params;m.categoryColorConfig=$r(e.seriesdata[r].plotoptions,m.commonPlotOptions)}},Ki.saveSeriesdataInRenderer=function(e,t){var a=e.rendererConf[t].params,r=a.xscale,n=a.yscale,i=a.yaxiscolumnorder,l=e.dataset,o=l.getDataType("x"),s=l.getDataType("y",i),c=e.seriesdata[t].data,d=e.renderer[t];if(o==Fo||s==Fo){d.seriesdataAfterUpdate=[];var u=Si.DataProcessor.helpers,h=(u.isCatNull(l,"x"),u.isCatNull(l,"y",i),o==Fo?r.domain():null),f=s==Fo?n.domain():null;c.forEach(function(t,a){d.seriesdataAfterUpdate[a]=e.dataObject.updateSeriesdatabyCategories(q(t),h,f,i,!0)})}else d.seriesdataAfterUpdate=null},Si.plot.rendererConf=function(){var e={};return e.params={},e.xscale=function(t){return arguments.length?(e.params.xscale=t,e):e.params.xscale},e.yscale=function(t){return arguments.length?(e.params.yscale=t,e):e.params.yscale},e.stacked=function(t){return arguments.length?(e.params.stacked=t,e):e.params.stacked},e.datasetIndex=function(t){return arguments.length?(e.params.datasetIndex=t,e):e.params.datasetIndex},e.axisrotated=function(t){return arguments.length?(e.params.axisrotated=t,e):e.params.axisrotated},e.commonPlotOptions=function(t){return arguments.length?(e.params.commonPlotOptions=t,e):e.params.commonPlotOptions},e.color=function(t){return arguments.length?(e.params.color=t,e):e.params.color},e.chartObj=function(t){return arguments.length?(e.params.chartObj=t,e):e.params.chartObj},e.notes=function(t){return arguments.length?(e.params.notesArray=t,e):e.params.notesArray},e.updateLabelArrayAndLabelQueue=function(t,a){return arguments.length?(e.params.labelArray=t,e.params.labelQueue=a,e):[e.params.labelArray,e.params.labelQueue]},e.hasNegValue=function(t){return arguments.length?(e.params.hasNegValue=t,e):e.params.hasNegValue},e.dataset=function(t){return arguments.length?(e.params.dataset=t,e):e.params.dataset},e.yaxiscolumnorder=function(t){return arguments.length?(e.params.yaxiscolumnorder=t,e):e.params.yaxiscolumnorder},e.threshold=function(t){return arguments.length?(e.params.threshold=t,e):e.params.threshold},e.thresholdType=function(t){return arguments.length?(e.params.thresholdType=t,e):e.params.thresholdType},e.colorOverlay=function(t){return arguments.length?(e.params.colorOverlay=t,e):e.params.colorOverlay},e},Si.plot.svgRenderer=function(e,t){var a={},r=e.systemConf,n=Si.DataProcessor.helpers;return a.draw=function(a){e.dataset.getDataType("x")==Fo&&e.isAxisCategory&&Si.scale.barBandwidth(e),t.barDatasetIndex=0;var i,l=[];e.chartRendered=!1;var o=e.dataObject.isCombinationalChart,s=o?Ki.arrangeSeriesRenderingOrder(e):e.seriesdata;e.seriesdata.forEach(function(c,d){var u=s[d],h=o?u.seriesidx:d;if(!(h>0)||e.xymultiRenderer||e.dataObject.isPolarAxisCategory){i=n.getChartType(u.type||e.userdata.seriesdata.type,Yo),i==Si.charttype.bubblepie&&J(e.bubblePieRendererIndex)&&(e.bubblePieRendererIndex=h);var f=[],g=Si.charttypenames.get(i),p=u.plotoptions,m=r.chart.plot.plotoptions[g],v=Wt(m,p,e,g),y=v.enabled,x=v.type;null==e.renderer[h]&&(e.renderer[h]=dc(g),e.rendererConf[h]=new Si.plot.rendererConf),e.renderer[h].chartRendered=!1,0==d&&(tr(e,r.chart.plot.events,"plot","init"),e.hideLoading(e.container)),y&&!a&&(lr(i)||nr(i))&&[ss,ls,as,Go,es,Ko].indexOf(x)<0?(l[h]=!1,f[h]=setInterval(function(){e.renderer[h].chartRendered&&clearInterval(f[h]),!l[h]&&(0==h||h>0&&e.renderer[h-1].chartRendered)&&(Ki.setRendererProp(e,e.renderer[h],u,h,t),uc(e,u,e.renderer[h]),l[h]=!0)},10)):(Ki.setRendererProp(e,e.renderer[h],u,h,t),uc(e,u,e.renderer[h]))}}),Ki.renderCompletedEvents(e,a,t)},a};var dc=function(e){switch(e){case"waterfall":case"gantt":case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":e="scatter"}return new qi[e]},uc=function(e,t,a,r){function n(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}if(r)a.update();else{clearTimeout(a.renderedTimer);var i=e.svg.selectAll("g.xychart").data([e.systemConf]);n(i,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}).datum(e.seriesdata).call(a),e.dataObject.isPolarAxisCategory&&i.selectAll("g.seriesholder").selectAll(function(){return this.childNodes}).attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),n(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top})}};Si.plot.imageRenderer=function(e,t){function a(){function t(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}function a(e){var t="",a=Object.keys(e),r=0;for(var n in e)t+=n+"="+e[n],e.hasOwnProperty(a[r+1])&&(t+="&"),r++;return t}function r(t){if(e.systemConf.chart.plot.renderer.image.addDimensionInSource===!0){var a=t.indexOf("?")>-1?"&":"?";t+=a+"WIDTH="+e.plotarea.width+"&HEIGHT="+e.plotarea.height}{var r=300;i.append("svg:image").attr("xlink:href",t).attr("width",sl(e.plotarea.width)).attr("height",sl(e.plotarea.height)).attr("x",0).attr("y",0).style("opacity",0).attr("onload",function(){e.hideLoading(e.container),e.svg.selectAll(".threshold").transition().style("opacity","1").duration(r)}).on("error",function(){throw e.chartRendered=!1,e.hideLoading(e.container),new ReferenceError("Invalid image source.")}).transition().style("opacity","1").duration(r).on("end",function(){e.chartRendered=!0})}}e.chartRendered=!1;var n=e.svg.selectAll("g.xychart");t(n,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),t(n,"labelholder",{x:e.plotarea.left,y:e.plotarea.top});var i=e.svg.select(".seriesholder");e.svg.selectAll(".threshold").styles({opacity:0});var l=e.systemConf.chart.plot.renderer.image.source;if("auto"!=l)return i.selectAll("*:not(.zmarea)").remove(),void r(l);i.selectAll("*:not(.zmarea)").remove(),e.showLoading(e.container);var o=e.seriesdata[0].type||e.userdata.seriesdata.type,s=getChartType(o,"string"),c=e.systemConf,d=c.chart.plot.plotoptions[s].datalabels.fontSize;d="function"==typeof d?d():d,c.chart.plot.plotoptions[s].datalabels.fontSize=d;var u=JSON.parse(JSON.stringify(c));u.chart.plot.renderer.mode="svg",$(e.userdata,"chart.plot.datalabels.fontColor")||delete u.chart.plot.datalabels.fontColor,$(e.userdata,"chart.plot.plotoptions."+s+".datalabels.fontColor")||delete u.chart.plot.plotoptions[s].datalabels.fontColor;var h={url:e.systemConf.chart.plot.renderer.image.exportUrl,type:"POST",data:{DATA:encodeURIComponent(JSON.stringify(u)),HEIGHT:sl(e.plotarea.height),WIDTH:sl(e.plotarea.width)}};e.xhr&&e.xhr.abort();var f=a(h.data),g=Bo(h.url).header("Content-type","application/x-www-form-urlencoded").post(f,function(t,a){i.selectAll("image").remove();var n=JSON.parse(a.responseText);n.rendered&&(e.hideLoading(e.container),r(n.serverPath)),delete e.xhr});e.xhr=g}var r={};return r.draw=function(r){e.systemConf.legend.highlightEffect.selectedSeries=Sl,e.systemConf.loader.enabled=!0,e.dataset.getDataType("x")==Fo&&e.isAxisCategory&&Si.scale.barBandwidth(e),t.barDatasetIndex=0;var n;e.chartRendered=!1;var i=e.dataObject.isCombinationalChart,l=i?Ki.arrangeSeriesRenderingOrder(e,e.seriesdata):e.seriesdata;a(),e.seriesdata.forEach(function(a,r){var o=l[r],s=i?o.seriesidx:r;if(e.isAxisCategory||!(s>0)){var c=getChartType(null,"object",s,e.userdata),d=c.name;null==e.renderer[s]?(n=getChartType(o.type||e.userdata.seriesdata.type,Yo),e.renderer[s]=dc(d),e.rendererConf[s]=new Si.plot.rendererConf):e.renderer[s].commonOption=null,Ki.setRendererProp(e,e.renderer[s],o,s,t),e.renderer[s].chartRendered=!1,0==r&&tr(e,e.systemConf.chart.plot.events,"plot","init")}}),Ki.renderCompletedEvents(e,r,t)},r};var hc={};hc.getAvailableBound=function(e,t){var a=e.plotarea,r=a.width,n=a.height,i=hl(r/2,ta(t.outerPadding,r/2,0)),l=hl(n/2,ta(t.outerPadding,n/2,0));return{x:i,y:l,width:r-2*i,height:n-2*l}},hc.updatePlotareaByBandWidth=function(e,t){var a,r=e.dataObject;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&r.allChartTypes.some(function(t){var r=Si.DataProcessor.helpers.getChartType(t,"string");return ir(t)?(a=e.systemConf.chart.plot.plotoptions[r],!0):void 0}),a&&a.strictBandWidth){var n=r.getCategories("x").length,i=ic(a.padding,.2),l=a.outerPadding;l=it(l)?l:.2,l=Si.scale.getOuterPadding(d?[0,t.width]:[t.height,0],n,i,l);var o=a.levelMarker,s=a.targetMarker||{},c=e.plotarea,d=e.axes.rotated,u=(d?t.height:t.width)/(n-i+2*l)*(1-i),h=[],f=rt(o.bandWidth,u),g=rt(o.maxBandWidth,u);levelMarkerBand=hl(f,g,u),o.enabled&&h.push(levelMarkerBand),s.enabled&&h.push(it(s.size)?hl(10*s.size,u):0);var p=rt(a.bandWidth,levelMarkerBand),m=rt(a.maxBandWidth,p);h.push(hl(p,m,u));var v=ul.apply(null,h),y=v/(1-i);v=y*(n-i+2*l),d?(c.height=v+(c.height-t.height),c.top+=c.adjust=(t.height-v)/2):(c.width=v+(c.width-t.width),c.left+=c.adjust=(t.width-v)/2)}},Si.legutil=function(){},Si.legutil.colorpallete=Jl(),Si.legutil.colorpallete.set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),Si.legutil.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),Si.legutil.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),Si.legutil.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),Si.legutil.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),Si.legutil.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),Si.legutil.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),Si.legutil.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),Si.legutil.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),Si.legutil.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),Si.legutil.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),Si.legutil.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),Si.legutil.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),Si.legutil.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),Si.legutil.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),Si.legutil.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),Si.legutil.patternPallete=Jl(),Si.legutil.imagePallete=Jl(),Si.legutil.imagePallete.set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),Si.legutil.imagePallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),Si.legutil.imagePallete.set("stones",["01.jpg","02.jpg","03.jpg"]),z(),Si.legutil.patternPallete.set("stripes-fill",["hatchfill","hatchDashfill","checkerBoard","horizontalStripesfill","verticalStripesfill","crossStripesfill"]),Si.legutil.patternPallete.set("stripes",["hatch","thinThickHatch","hatchLeft","hatchDash","horizontalStripes","crossStripes","verticalStripes","thickHatch","thinHatch","thinVerticalStripes","thinHorizontalStripes"]),Si.legutil.patternPallete.set("dotted",["circle","tinyCircle","crossCircle","floatingCircle","dot"]),Si.legutil.patternPallete.set("dotted-fill",["circlefill","crossCirclefill","floatingCirclefill","dotfill"]),Si.legutil.patternPallete.set("shapes",["thinThickHatch","crossCircle","star","wave","cap","nylon"]),Si.legutil.patternPallete.set("shapes-fill",["checkerBoard","floatingCirclefill","squarefill","starfill","wavefill","capfill","nylonfill"]),Ja(),Si.legutil.getMonochromeColorPallette=function(e){var t=[0,+e.count-1],a=[+e.colorGamma[0],+e.colorGamma[1]],r=X(e.baseColor,t,a);return xo(e.count).map(function(e,t){return r(t)})};var fc={};fc.getLegendData=function(e){if(oc.isQuantileColorScale(e)){var t=e.systemConf.legend.colorBand.ranges;if(t&&t.length)return t}return e.xymultiRenderer||e.isNonAxisMultiSeriesCategory?e.seriesdata:e.seriesdata[0].data[0]},fc.getLegendDataLength=function(e,t){return e.xymultiRenderer||e.isNonAxisMultiSeriesCategory?t.filter(function(e){return!fc.isHiddenItem(e)}).length:t.length},fc.isHiddenItem=function(e){return e.hideInLegend},fc.getClr=function(e,t,a){return e?a.color||t:t},fc.updateBubblePieData=function(e,t,a){a.dataObject.pieWithAxis&&e.data.forEach(function(r){var n=fr(a.chartTypes[t].value);r.forEach(function(t){t.disabled=e.disabled||!n||t.dummy})})},fc.updateHierarchyData=function(e,t,a){a.dataObject.isHierarchy&&(a.systemConf.seriesdata.chartdata[t].disabled=e.disabled)},fc.toggleChartEvents=function(e,t){var a=t?null:Sl,r=[];e.svg?((e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&r.push(e.eventHandler.trackerElement),r.push(e.svg)):r.push(e.container),r.forEach(function(e){e.style("pointer-events",a)})},fc.fadeChart=function(e,t,a){t.container.selectAll("g.chartgroup,svg.static,canvas.zc-canvas,div.zcnotes").style("opacity",e?null:a)},fc.isDisabled=function(e,t,a){return t||a?e.disabled:!t},fc.isAllEnabled=function(e,t){if(!t)return t;var a=e.filter(function(e){return e.disabled});return!a.length},fc.getFilterBoxSize=function(e,t){var a=it(e.size)?+e.size:t,r=it(e.width)?+e.width:a,n=it(e.height)?+e.height:a;return[r,n]},fc.updateData=function(e,t,a){oc.isQuantileColorScale(a)?a.axes.clr.scale=Si.scale.getScale(a,a.dataObject,null,null,null,a.dataset,"clr"):(fc.updateBubblePieData(e,t,a),fc.updateHierarchyData(e,t,a),a.dataObject.data=a.systemConf)},fc.isContinousLegend=function(e){var t=e.systemConf.legend.colorBand,a=oc.isQuantileColorScale(e);if(a){var r=t.ranges,n=e.dataset.getDataType("clr")===Fo;if(n||r&&r.length){var i=t.type;return"continuousDiscrete"===i||"continuous"===i}return!0}return!1},fc.getColorBandDimension=function(e){var t=e.chartarea,a=e.systemConf.legend,r=a.colorBand,n=fc.getOrient(a),i="bottom"===n||"top"===n,l=a.maxWidth,o=a.maxHeight,s=r.width,c=r.height;return i?(l=l||vc,o=o||pc,s=s||"40%",c=c||14):(l=l||mc,o=o||gc,s=s||14,c=c||"70%"),l=ta(l,t.width),o=ta(o,t.height),s=ta(s,t.width),c=ta(c,t.height),s=hl(s,l),c=hl(c,o),[s,c]},fc.getOrient=function(e){var t=e.hAlign,a=e.vAlign,r="right";return"bottom"===a?r="bottom":"top"===a?r="top":"left"===t&&(r="left"),r},fc.getLabelIndex=function(e,t,r){var n,i=t.stops,l=t.ranges,o=r.dataset.getDataType("clr")===Fo;
return!o&&i&&i.length?i.some(function(t,a){var r=t===e;return r?(n=a,!0):void 0}):l&&l.length&&l.some(function(t,r){var i;return i=a(t)?a(e)?t[0]===e[0]&&t[1]===e[1]:t[0]===e:t===e,i?(n=r,!0):void 0}),n},fc.hexToRGB=function(e){if(e&&-1==e.toString().indexOf("#"))return e;var a=t(la(e).replace(/#/g,""),16);return"rgb("+(a>>16&255)+","+(a>>8&255)+","+(255&a)+")"},fc.filterSelectionByColor=function(e,t,a,r){if(it(a)){var n,i=r.systemConf.legend.colorBand.ranges[a],l=r.axes.clr.scale,o=r.dataset.getDataType("clr")===Fo;if(1===i.length&&!o){var s=q(l.domain());s.splice(0,2),i=[s[2*a],s[2*a+1]]}return e.filter(function(e){var s=e.data||e,c=r.dataset.getClr(s);return n=da(c,r,l),o?n=n&&c===i[0]:(n=n&&c>=i[0]&&c<=i[1],c===i[0]&&(n=n&&ha(r,a)===l(c)),c===i[1]&&(n=n&&ha(r,a)===l(c))),t?n:!n})}return e};var gc="80%",pc="20%",mc="20%",vc="100%";Si.legend.render=function(e){function t(){var t=d.chartarea(e.chartarea).systemconf(n).color(e.seriesColor).chartObj(e);return t}function a(){i.legpos;(d=t(i))(e.legendarea.element.datum(i));var a,r,n,l,o=e.legendarea.element.node();if(c){var s=U(o);a=s.width,r=s.height,l=s.y,n=s.x}else a=o.offsetWidth,r=o.offsetHeight,l=o.offsetTop,n=o.offsetLeft;var u=null!=i.x&&""!==i.x&&null!=i.y&&""!==i.y;i.marginLeft=+i.marginLeft,i.marginRight=+i.marginRight,i.marginTop=+i.marginTop,i.marginBottom=+i.marginBottom,u||("center"==i.vAlign?(e.chartarea.width-=a+i.marginLeft+i.marginRight,e.plotarea.width-=a+i.marginLeft+i.marginRight,"left"==i.hAlign&&(e.chartarea.left+=a+i.marginLeft+i.marginRight,e.plotarea.left+=a+i.marginLeft+i.marginRight)):"top"==i.vAlign?(e.chartarea.top+=r+i.marginTop+i.marginBottom,e.plotarea.top+=r+i.marginTop+i.marginBottom,e.chartarea.height-=r+i.marginTop+i.marginBottom,e.plotarea.height-=r+i.marginTop+i.marginBottom):"bottom"==i.vAlign&&(e.chartarea.height-=r+i.marginTop+i.marginBottom,e.plotarea.height-=r+i.marginTop+i.marginBottom)),e.legendarea.x=n,e.legendarea.y=l,e.legendarea.width=a,e.legendarea.height=r}function r(){if(s){e.dataset.getDataType("clr")===Fo&&(e.userdata.legend=e.userdata.legend||{},e.userdata.legend.colorBand=e.userdata.legend.colorBand||{},e.userdata.legend.colorBand.ranges||(e.systemConf.legend.colorBand.ranges=e.userdata.legend.colorBand.ranges=oc.getCategories(e)));var t=e.systemConf.legend.colorBand.ranges;t&&t.length&&(e.userdata.legend.colorBand.ranges=e.systemConf.legend.colorBand.ranges=Ea(e,!0));var a=Si.scale.getScale(e,l,null,null,null,e.dataset,"clr"),r=a.domain(),n=a.copy();n.range(oc.getProcessedColorRange(xo(r.length),r,e.systemConf.legend.colorBand,e)),e.axes.clr={scaleType:"quantile",scale:a,indexScale:n}}else e.axes.clr={}}var n=e.systemConf,i=n.legend,l=e.dataObject,o=e.seriesdata,s=oc.isQuantileColorScale(e),c=fc.isContinousLegend(e),d=e.legend.component=c?Si.legend.continuous.get():Si.legend.discrete.get(),u=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?o.some(function(e){return!fc.isHiddenItem(e)&&e.seriesname!==ll}):!(e.chartTypes[0].value==Si.charttype.dial);u=u||s;var h=e.canvasarea[null==i||null==i.vAlign?"height":"top"===i.vAlign||"bottom"===i.vAlign?"height":"width"],f=null!=i&&null!=i.x&&""!==i.x&&null!=i.y&&""!==i.y;u=f||qt(e,"legend",h)?u:!1,r(),s&&Si.setDefaultOptions("filter",i,e.globalProp,er(e),!0),u&&i.enabled===!0?(e.legendarea.show=!0,e.legendarea.element.style("display",""),a()):(e.legendarea.show=!1,e.legendarea.element.style("display",Sl),c?null:Si.legend.events(e,e.legendarea.element.selectAll("li.series"),{allSelected:!0,isFirstClickAfterDeselection:!1}))},Si.legendHighlight=function(e,t){function a(e,t,a){x.selSeriesObj=i(t,a);for(var r=x.getLegendHighlightEffect(t,"selectedSeries"),n=x.selSeriesObj.selectedSeries,l=x.selSeriesObj.charttypes,o=n.length,c=0;o>c;c++){var d=Si.charttypenames.get(l[c]),u=x.getEffect(r,d,null,null,t);s(n[c],u,t,"select")}}function r(e,t,a){x.unselSeriesObj=l(t,a);for(var r=x.unselSeriesObj.unselectedSeries,n=x.unselSeriesObj.indices,i=x.unselSeriesObj.charttypes,o=r.length,c=0;o>c;c++){var d=Si.charttypenames.get(i[c]),u=x.getLegendHighlightEffect(n[c],"unselectedSeries"),h=x.getEffect(u,d,null,null,n[c]);s(r[c],h,n[c],"unselect")}}function n(){e.container.select(".highlight-canvas").style("visibility","hidden")}function i(a,r){function n(t,a){var l;if(ur(t)){var c=i.selectAll("g.heatmapseries_"+a);l=c.selectAll("path")}else if(ir(t)){var d=i.selectAll("g.barseries_"+a);l=d.selectAll("path.zcbar")}else if(t==Si.charttype.line){var u=i.selectAll("g.lineseries_"+a);l=u.selectAll("path.line")}else if(nr(t)||t==Si.charttype.web){var h=i.selectAll("g.areaseries_"+a);l=h.selectAll("path.area")}else{if(lr(t)){var f=i.selectAll("g.scatterseries_"+a);l=f.selectAll("g.scatter"),l=A(l,!0,r,e);var g=l.selectAll("path.outer"),p=l.selectAll("path.inner");return s.push(g,p),void o.push(t,t)}if(hr(t)){var m=i.selectAll("g.piegroup");l=m.selectAll(it(r)?"path":"path#arc_"+a)}else if(t==Si.charttype.funnel){var v=i.selectAll("g.funnelgroup"),y=v.selectAll("g.trapezoidgroup");l=y.selectAll(it(r)?"path":"path#funnel"+a)}else if(t==Si.charttype.pyramid){var x=i.selectAll("g.pyramidgroup");l=x.selectAll(it(r)?"g":"g#section_"+a)}else if(t==Si.charttype.wordcloud){var b=i.selectAll("g.wordcloudgroup");l=b.selectAll(it(r)?"text":"text.series_"+a)}else if(-1!=Si.chartcategory.hierarchy.indexOf(t)){var w=i.selectAll("g.hierarchychart");l=w.selectAll(".series_"+a)}}l=A(l,!0,r,e),s.push(l),o.push(t),(nr(t)||t==Si.charttype.web)&&n(Si.charttype.line,a),t==Si.charttype.line&&(Gs.IE||Gs.SAFARI)&&n(Si.charttype.scatter,a)}var i=t.selectAll("g.seriesholder"),l=O(null,"object",a,C).value,o=[],s=[];return n(l,a),{selectedSeries:s,charttypes:o}}function l(a,r){function n(t,a){var c,d;if(e.isAxisCategory&&!e.dataObject.pieWithAxis||e.isNonAxisMultiSeriesCategory)e.seriesdata.forEach(function(n,u){if(1!=n.disabled&&(it(r)?u===a:u!==a)){d=t||O(null,"object",u,C).value;var h=it(r)?a:u;if(ur(d)){var f=s.selectAll("g.heatmapseries_"+h);c=f.selectAll("path")}else if(ir(d)){var g=s.selectAll("g.barseries_"+h);c=g.selectAll("path.zcbar")}else if(d==Si.charttype.line){var p=s.selectAll("g.lineseries_"+h);c=p.selectAll("path.line")}else if(nr(d)||d==Si.charttype.web){var m=s.selectAll("g.areaseries_"+h);c=m.selectAll("path.area")}else{if(lr(d)){var v=s.selectAll("g.scatterseries_"+h);c=v.selectAll("g.scatter"),c=A(c,!1,r,e);var y=c.selectAll("path.outer"),x=c.selectAll("path.inner");return i.push(y,x),o.push(d,d),void l.push(h,h)}if(-1!=Si.chartcategory.hierarchy.indexOf(d)){var b=s.selectAll("g.hierarchychart");c=b.selectAll(".series_"+h)}else if(d==Si.charttype.wordcloud){var w=s.selectAll("g.wordcloudgroup");c=w.selectAll(".series_"+h)}}c=A(c,!1,r,e),i.push(c),l.push(u),o.push(d)}});else{d=t||O(null,"object",a,C).value;var u,h=function(t,n){var s=jl(this),c=it(r)?!A(s,!1,r,e).empty():this.getAttribute("id")!=u+a;return c&&(i.push(s),l.push(n),o.push(d)),c};if(hr(d))u="arc_",c=s.selectAll("g.piegroup").selectAll("path").filter(h);else if(d==Si.charttype.funnel)u="funnel",c=s.selectAll("g.trapezoidgroup").selectAll("path").filter(h);else if(d==Si.charttype.pyramid){u="section_";var f=s.selectAll("g.pyramidgroup");c=f.selectAll("g").filter(h)}}(nr(d)||d==Si.charttype.web)&&n(Si.charttype.line,a),d==Si.charttype.line&&(Gs.IE||Gs.SAFARI)&&n(Si.charttype.scatter,a)}var i=[],l=[],o=[],s=t.selectAll("g.seriesholder");return n(null,a),{unselectedSeries:i,indices:l,charttypes:o}}function o(e,t,a,r){if(null!=t&&t.constructor==Object&&null!=e&&null!=e.node()){var n=c(e,a,r),i={},l=v(a);for(var o in t)if(t.hasOwnProperty(o)){l?(i[o]=i[o]||[],e.each(function(){i[o].push(d3.select(this).style(o))})):i[o]=e.styles(o);var s=t[o];Gs.SAFARI||Gs.IE?e.attr(o,function(e){return Si.utils.getVal(s,[e,a])}).style(o,function(e){return Si.utils.getVal(s,[e,a])}):e.style(o,function(e){return Si.utils.getVal(s,[e,a])})}b[n]=b[n]||i,"select"===r&&x.raiseSelection(e)}}function s(t,a,r,n){if(null!=a&&a.constructor==Object&&null!=t&&null!=t.node()){if("svg"!==e.plot.renderer.mode)return void d(t,!1);var i=c(t,r,n),l=b[i],o=v(r);for(var s in l)if(l.hasOwnProperty(s)){var u=l[s],h=function(){return o?u[f++]:u},f=0;Gs.SAFARI||Gs.IE?t.style(s,h).attr(s,h):t.style(s,h)}}}function c(e,t,a){var r=e.node(),n=r.localName,i=r.getAttribute("class"),l=r.getAttribute("id"),o=n+"_"+t;return null!=i&&(o+="_"+i),null!=l&&(o+="_"+l),null!==a&&(o+="_"+a),o}function d(e,t){e.style("visibility",t?"visible":"hidden")}function u(t){return rr(e)?/(area|arearange)/.test(t)?"moody":"strokeEnlarge":/(bar|bullet|gantt|area|arearange|pie|funnel|pyramid|web|sunburst|waterfall)/.test(t)?"hatchfill":"heatmap"===t?"tinyHatchfill":/(treemap|wordcloud)/.test(t)?"blackyBorder":"strokeEnlarge"}function h(e,t){return/(line|scatter)/.test(t)&&/(((\D)+fill$)|illuminate|moody|flip)/.test(e)}function f(e,t,a){x.selSeriesObj=i(t,a);for(var r=x.getLegendHighlightEffect(t,"selectedSeries"),n=x.selSeriesObj.selectedSeries,l=x.selSeriesObj.charttypes,s=n.length,c=0;s>c;c++){var d=Si.charttypenames.get(l[c]),u=x.getEffect(r,d,null,null,t);o(n[c],u,t,"select")}}function g(e,t,a,r){if(e.chartRendered){var n=e.highlightContext||(e.highlightContext=updateCanvasContext(e,"highlight-canvas")),i=(e.systemConf,e.legendHighlight.getLegendHighlightEffect(a,"selectedSeries"));if(e.dataObject.isPolarAxisCategory&&n.translate(e.plotarea_approx.x,e.plotarea_approx.y),i!==Sl){var l=e.chartTypes[a],o=l.name,s=l.value,c=createCanvasRenderer(o),d=e.seriesdata[a],u=null;switch(Ki.setRendererProp(e,c,d,e.isNonAxisMultiSeriesCategory?0:a,{labelQueue:[]}),o){case"bar":case"area":case"heatmap":case"treemap":case"web":var h=e.systemConf.chart.plot.plotoptions[o].fillOpacity,f=qs[i];f&&(u=p(f,x.baseClr,h));break;case"scatter":case"bubble":case"line":u=e.legendHighlight.getEffect(i,s)}drawCanvas(e,d,c,n,u,r)}}}function p(e,t,a){return e.bgClr_base=canvasUtils.rgba(t,a),e.stroke="transparent,white,white",Qs.get(canvas_patterns,"canvasPatternFill",e)}function m(t,a){var r=x.getLegendHighlightEffect(a,"selectedSeries");if(r!==Sl){x.baseClr=ha(e,a);var n=e.chartTypes[a],l=n.name,o=n.value,s=i(a);if(s.selectedSeries[0].length>0)return void d(s.selectedSeries[0],!0);if(e.chartRendered){e.systemConf.chart.plot.animation.enabled=!1,e.systemConf.chart.plot.plotoptions[l].animation.enabled=!1,e.seriesdata[a].plotoptions&&e.seriesdata[a].plotoptions.animation&&(e.seriesdata[a].plotoptions.animation.enabled=!1);var c=dc(l),u=e.systemConf.seriesdata.chartdata[a],h=0;if(o===Si.charttype.bar||o===Si.charttype.stkdbar)for(var g=0;a>g;g++)n=e.chartTypes[g],o=n.value,void 0!=e.seriesdata[g].disabled&&e.seriesdata[g].disabled||!ir(o)||(h+=e.seriesdata[g].data.length);return Ki.setRendererProp(e,c,u,a,{labelQueue:[],barDatasetIndex:h}),uc(e,u,c),f(t,a),!0}}}function v(t){var a=O(null,Yo,t,C);return-1!=Si.chartcategory.hierarchy.indexOf(a)||oc.isQuantileColorScale(e)||or(a)||e.rendererConf&&e.rendererConf[e.isAxisCategory?t:0].thresholdType}function y(){if(e.dataObject.isHierarchy){var t=x.getEffect(x.getLegendHighlightEffect(0,"selectedSeries"),e.chartTypes[0].name),a=Object.keys(t);return a.length>0&&a.some(function(e){return"fill"!==e})}}var x={},b={},w=e.defsLocation,C=e.userdata,k=Si.DataProcessor.helpers,O=k.getChartType,A=fc.filterSelectionByColor;return x.highlightSelectedSeries=function(t,a,r){switch(x.baseClr=ha(e,it(r)?r:a),e.plot.renderer.mode){case"svg":f(t,a,r);break;case"canvas":g(e,t,a,r);break;default:m(t,a)}},x.highlightUnselectedSeries=function(e,t,a){for(var r=l(t,a),n=r.unselectedSeries,i=r.indices,s=r.charttypes,c=n.length,d=0;c>d;d++){var u=Si.charttypenames.get(s[d]),h=this.getLegendHighlightEffect(i[d],"unselectedSeries"),f=x.getEffect(h,u,null,null,i[d]);o(n[d],f,i[d],"unselect")}},x.reset=function(t,i,l,o){switch(e.plot.renderer.mode){case"svg":a(t,i,l),r(t,i,l);break;case"canvas":n()}o!==!1&&(b={},this.resetSelection())},x.getLegendHighlightEffect=function(t,a,r){var n=O(null,"string",t,C),i=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata[t].plotoptions:e.seriesdata[0].plotoptions,l=e.systemConf.chart.plot.plotoptions[n],o=i&&i.legendHighlightEffect&&l.legendHighlightEffect?Si.utils.getValueOfPlotOptions(i.legendHighlightEffect,l.legendHighlightEffect)(a):l.legendHighlightEffect&&l.legendHighlightEffect[a],s=e.systemConf.legend.highlightEffect[a];return"plot"===r?o||(s&&s!==Sl?s:u(n)):o||s||u(n)},x.getEffect=function(t,a,r,n,i){function l(){return/(waterfall)/.test(a)?!0:!1}function o(t,r){return"waterfall"==a?Jr(t,e.renderer[r].commonRendererProp().params.categoryColorConfig,x.baseClr):x.baseClr}r=r||x.baseClr;var s=l();r=s?o:r;var c=tt(t,e,r,qs);if(c&&c.constructor==Object)return c;t=null===t||h(t,a)?u(a):t;var d={};if(e.patternPallete&&/(flip|moody|illuminate)/.test(t)){var f=e.patternPallete[(i||0)%e.patternPallete.length],g=qs[f]?qs[f]:D(f),p=function(e,a){var n=s?o(e,a):r;if(g.ele)g.bgClr_base=oa(n,1,"darker",ql);else{var i="flip"===t?n:oa(n,1,"moody"===t?"darker":"brighter",ql);if(g.bgClr_base=i,g.stroke_base=i,"flip"===t){g=rc(g);var l=g.bgClr_base;g.bgClr_base=g.stroke_base,g.stroke_base=l;var c=vt(g.bgClr),d=vt(g.stroke);g.bgClr=d,g.stroke=c}}var u=Qs.get(Ks,"svgPatternFill",g);return"url("+w+"#"+u+")"};d.fill=s?p:p()}else if(/(saturate|grayscale|blur|glow|shadow|boxShadow)/.test(t)){var m,v=/(saturate|grayscale)/.test(t)?"colorMatrix":"dropShadow";switch(t){case"saturate":m={type:"saturate",values:"0.3"};break;case"grayscale":m={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":m={blur:6,source:"SourceGraphic"};break;case"glow":m={blur:3,color:"gold"};break;case"shadow":m={dx:5,dy:5,blur:3};break;case"boxShadow":d.fill=r,d.stroke="white",m={dx:0,dy:0,blur:5,color:"rgba(0,0,0,0.3)"}}var y=Qs.get(Js,v,m);d.filter="url("+w+"#"+y+")"}else if(/(moody|illuminate)/.test(t)){var b="moody"===t,C=function(e,t){var a=s?o(e,t):r;return-1!=a.indexOf("url")?b?"grey":"silver":oa(a,.6,b?"darker":"brighter",ql)};d.fill=s?C:C()}else if("strokeEnlarge"===t){if(d["stroke-width"]=3,n)for(var k in n)d[k]=n[k]}else if("fadeOut"===t)d["fill-opacity"]=d["stroke-opacity"]=.3;else if("blackyBorder"===t)d.stroke="rgba(0,0,0,0.5)",d["stroke-width"]=1;else if("invert"===t)d.fill="white",d.stroke=r,d["stroke-width"]=1,d["paint-order"]=null;else if("ridge"===t)d.fill=r,d.stroke="white",d["stroke-width"]=7;else if(t!==Sl){var g=qs[t];if(g){var C=function(e,a){var n=s?o(e,a):r,i=qs[t];i.bgClr_base=n,i.stroke="transparent,white,white";var l=Qs.get(Ks,"svgPatternFill",i);return"url("+w+"#"+l+")"};d.fill=s?C:C()}else d.fill=r}return d},x.raiseSelection=function(e){y()&&e.raise()},x.resetSelection=function(){if(y()){var e=t.selectAll("g.seriesholder").selectAll("g.hierarchychart");e.selectAll("*").sort(function(e,t){return e.index-t.index})}},x},Si.legend.discrete=function(){},Si.legend.discrete.get=function(){"use strict";function e(n){return n.each(function(n){var c,m=u(l),v=h(l,m),y=n.colorBox,x=n.itemDisabledStyle,b=[n,i.canvas,Us],w=null!=n.x&&""!==n.x&&null!=n.y&&""!==n.y,C=+Si.utils.getVal(n.fontSize||i.canvas.fontSize),k=at(b,"fontColor"),O=l.dataset.getColumnIdx(l.xymultiRenderer||l.isNonAxisMultiSeriesCategory?"clr":"x"),A=n.showAs,S=y.position||"left",P=n.expandable||{},T=P.show===!0,E=!!l.renderer.length,L=fc.getFilterBoxSize(y,C),z=L[0],D=L[1],R=n.hAlign,j=n.vAlign,M=l.legend.states=l.legend.states||{allSelected:!0,isFirstClickAfterDeselection:!1};c="wrap"===n.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"};var I=jl(this);e.update=function(){I.transition().call(e)};var B={display:"block",position:"absolute",left:null,top:null};I.styles(B);var H=zt(I,"div",[n],".","class","legendgroup"),V=n.shadow;if(V.show===!0){var F=V.x+"px "+V.y+"px "+V.blur+"px "+V.color;F=V.inset?F+" inset":F,I.style("box-shadow",F)}else I.style("box-shadow",null);var N=Kl(n.background.color.toString());I.style("background-color","rgba("+N.r+","+N.g+","+N.b+","+n.background.alpha+")");var Y=n.border;Y.show===!0?I.styles({border:+Y.size+"px "+Y.style+" "+Y.color,"border-radius":Y.radius+"px"}):I.style("border",null),l.filterEffectsID&&n.useChartEffect!==!1&&I.style("filter",l.filterEffectsID?"url(#"+l.filterEffectsID+")":null);var _=n.title,W=it(_.margin)?_.margin:3,X=zt(H,"ul",_.show===!0?[_]:[],".","class","zcheader"),U=zt(X,"li",[1],".","class","zcheader");X.styles({"white-space":"normal",overflow:"hidden",width:"","list-style-type":Sl,margin:0,padding:0}),U.styles({padding:ct(W),"white-space":"nowrap",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","vertical-align":"middle"});var Z=Si.legend.selectAllBox(U,l,M),Q=Z.element,q=Z.options,K=Z.size,$=q.disabledOpacity;fc.fadeChart(M.allSelected,l,$);var J=zt(U,"span",[1],".","class","legendtitle");J.text(G(_.text)).style("padding-"+S,q.show?n.textPadding+"px":null).style("margin-"+S,q.show?K+"px":null),Bt(J,[_,i.canvas,Us],!0),Q.style("margin",function(){var e=Math.max(0,(J.node().offsetHeight-Q.node().offsetHeight)/2)+"px",t="0px",a=(z-K)/2+"px",r=(z-K)/2+"px";return e+" "+r+" "+t+" "+a}),U.style("line-height",function(){var e=q.show?Q.node().offsetHeight:0,t=Math.max(J.node().offsetHeight,e);return t+"px"});var et=zt(H,"ul",[n],".","class","legseries");et.styles({"white-space":"normal","overflow-y":"hidden",width:"","list-style-type":Sl,margin:0,padding:0,"-webkit-overflow-scrolling":"touch","font-size":"0px"});var rt;T?(et.style("overflow","hidden"),rt=zt(H,"div",[1],".","class","expandable"),rt.styles({color:P.fontColor,"font-size":Si.utils.getVal(P.fontSize)+"px","font-family":P.fontFamily||at(b,"fontFamily"),"text-align":P.textAlign,cursor:Tl,display:"block",padding:n.itemMargin+"px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),rt.html(tt(P.text,0,l)||"0 more...")):H.select(".expandable").empty()||(H.selectAll(".expandable").remove(),et.style("overflow-y","hidden"),et.style("overflow-x","hidden"));var nt=zt(et,"li",m,".","class","series");zt(nt,"div",[1],".","class","legendfilterbox"),zt(nt,"span",[1],".","class","legendlabel"),nt.styles({color:function(e){return g(p(e,M.allSelected,M.isFirstClickAfterDeselection),k,x)},position:"relative","white-space":"nowrap",padding:+n.itemMargin+"px",overflow:"hidden","text-align":"left","line-height":it(y.size)?ul(C,D)+"px":(Gs.OSX||Gs.LINUX)&&Gs.FIREFOX?"1.2":"normal","font-size":C+"px",width:null==n.itemWidth||""==n.itemWidth?null:n.itemWidth+"px",height:null==n.itemHeight||""==n.itemHeight?null:n.itemHeight+"px","font-family":at(b,"fontFamily"),"font-weight":at(b,"fontWeight"),display:function(e){return f(e)?Sl:w||"center"==j?"block":"inline-block"}}).styles(c).style("vertical-align","top"),Si.legend.events(l,nt,M,$);var lt=nt.select("span.legendlabel");lt.style("padding-"+S,n.textPadding+"px").style("margin-"+S,z+"px").html(function(e,t){if(oc.isQuantileColorScale(l)){var a=n.colorBand,r=a.labels;if(r&&r.length)return r[t]}var i=l.xymultiRenderer||l.isNonAxisMultiSeriesCategory?t:0,o=l.xymultiRenderer||l.isNonAxisMultiSeriesCategory?0:t;return A?l.dataset.getCustomizedVal(l,A,i,0,o,e,"legend"):l.dataset.getDataPointValue(l,e,O,i,null,"legend")}).attr("title",function(){return n.tooltip?this.textContent:null});var ot={fontColor:function(e){return g(p(e,M.allSelected,M.isFirstClickAfterDeselection),k,x)},textDecoration:function(e){return p(e,M.allSelected,M.isFirstClickAfterDeselection)&&x.strikeout?"line-through":null}};Bt(lt,[ot,n,i.canvas,Us],!0);var st=et.select("span.legendlabel").node().offsetHeight,dt=0;it(y.size)||"wrap"===n.textOverflow?dt=(ul(C,D)-D)/2:st>D&&(dt=(st-D)/2);var ut=nt.select("div.legendfilterbox");ut.styles({width:z+Al,height:D+Al,"float":S,"margin-top":dt+Al,"border-color":Pl,"background-repeat":"repeat","line-height":D-y.strokeWidth+Al,"text-align":"center","font-family":y.fontFamily,"font-size":(y.fontSize||C)+Al,position:"absolute",display:"inline-block","box-sizing":"border-box"}),Si.legend.setColorBoxBackground(ut,l,M);var ht,ft,gt=nt.node().offsetHeight,pt=l.legend.expanded,mt=[],vt=null!=n.itemWidth?+n.itemWidth:null;nt.each(function(){var e=jl(this).select("div.legendfilterbox"),t=jl(this).select("span.legendlabel");ft=ft||e.node().getBoundingClientRect().width,ht=t.node().getBoundingClientRect().width;var a=ft+ht;mt.push(vt||a+2*+n.itemMargin)}),vt=null!=n.itemWidth?vt:Bl(mt);var yt=n.itemHeight||ul(st,D)+2*+n.itemMargin;et.style("overflow-y",(T&&pt||!T)===!0?"auto":"hidden"),et.style("overflow-x","hidden");var xt,bt=0,wt=[];if(o=0,w){var Ct=ta(n.maxHeight||gc,r.height);T&&(Ct=cl(Ct/gt)*gt);var kt=l.legendarea.element.node().getBoundingClientRect(),Ot=hl(l.canvasarea.width-kt.width,n.x),At=hl(l.canvasarea.height-hl(kt.height,Ct),n.y);I.style("left",Ot+"px"),I.style("top",At+"px"),et.style("max-height",Ct+"px")}else{var St=ta(n.maxWidth||("center"!=j?vc:mc),r.width);if(H.style("max-width",St+"px"),X.style("max-width",St+"px"),"center"!=j){var Ct=ta(n.maxHeight||pc,r.height),Pt=St-+n.marginLeft-+n.marginRight-(n.border.show?2*n.border.size:0);for(T&&(Ct=cl(Ct/gt)*gt,gt>Ct&&(Ct=gt));Pt>o&&bt<mt.length;)wt[bt]=mt[bt],o+=mt[bt],bt++;for(var Tt=function(e,t){return e+t};o>Pt&&bt>1;){wt=[],bt--;for(var Et=0;Et<mt.length;Et++)wt[Et%bt]=mt[Et%bt];o=wt.reduce(Tt)}var Lt=mt.length%bt,Dt=(mt.length-Lt)/bt,Rt=0==Lt?Dt:Dt+1;et.styles({height:Rt*yt+2+"px","max-height":Ct+"px","max-width":St+"px"});var jt=et.node().scrollHeight>et.node().offsetHeight?d:0;s=o+2+jt,et.style("width",s+"px");var Mt=t(n,I);xt=a(et),it(rt)&&xt>=v&&(zt(H,"div",[],".","class","expandable"),Mt=t(n,I)),I.styles({left:Mt.x+"px",top:Mt.y+"px"})}else{bt=1;var Ct=ta(n.maxHeight||gc,r.height);T&&(Ct=cl(Ct/gt)*gt),et.styles({"max-height":Ct+"px","max-width":St+"px"});var jt=et.node().scrollHeight>et.node().offsetHeight?d:0;s=vt+2+jt,xt=a(et),it(rt)&&xt>=v&&zt(H,"div",[],".","class","expandable"),et.styles({width:s+"px",height:null});var It=I.node().getBoundingClientRect().width;"right"==R||"center"==R?(I.style("left",r.width-It-+n.marginRight+"px"),I.style("top",r.top+ +n.marginTop+"px")):(I.style("left",+n.marginLeft+"px"),I.style("top",r.top+ +n.marginTop+"px"))}}if(T){var Ht=ic(xt,a(et));if(v>Ht){rt.styles({width:s+"px"});var Vt=tt(P.text,v-Ht,l)||v-Ht+" more...";pt?E&&pt&&rt.html(function(){return tt(P.ontoggle,this,pt,l)||"Show less.."}):rt.html(Vt),rt.on("click",function(){pt=l.legend.expanded=!l.legend.expanded;var e=tt(P.ontoggle,this,pt,l);it(e)&&(e+=""),pt?(this.innerHTML=e||"Show less..",et.style("overflow-y","auto")):(et.node().scrollTop=0,Ht=a(et),this.innerHTML=e||tt(P.text,v-Ht,l)||v-Ht+" more...",et.style("overflow-y","hidden"))})}else rt.remove()}}),e}function t(e,t){var a=e.hAlign,n=e.vAlign,i=t.node().getBoundingClientRect(),l=i.width,o=t.node().offsetHeight,s={};return"left"==a?s.x=r.left+ +e.marginLeft:"center"==a?s.x=r.width/2-l/2:"right"==a&&(s.x=r.width-l-+e.marginRight),"top"==n?s.y=r.top+ +e.marginTop:"bottom"==n&&(s.y=r.height+r.top-o-+e.marginBottom),s}function a(e){for(var t=e.node(),a=t.children,r=0,n=0,i=a.length;i>n&&xt(a[n],t);n++)r++;return r}var r,n,i,l,o=0,s=0,c=ro("legendClick","legendDblclick","legendMouseover","legendMouseout"),d=20,u=fc.getLegendData,h=fc.getLegendDataLength,f=fc.isHiddenItem,g=fc.getClr,p=fc.isDisabled;return e.dispatch=c,e.chartarea=function(t){return arguments.length?(r=t,e):r},e.systemconf=function(t){return arguments.length?(i=t,e):i},e.chartObj=function(t){return arguments.length?(l=t,e):l},e.color=function(t){return arguments.length?(n=t,e):n},e},function(){var e=fc.getLegendData,t=fc.getLegendDataLength,a=fc.isHiddenItem,r=fc.isDisabled,n=fc.isAllEnabled,i=fc.getClr,l=fc.updateData;Si.legend.events=function(o,s,c,d){function u(e,t,a){P.toggleItemNUpdateChart(e,t,a,T)}function h(e,t,a){P.highlightSeries(e,t,a,T,o,!0),P.highlightItem(e,t,a,T,!0)}function f(e,t,a){P.highlightSeries(e,t,a,T,o),P.highlightItem(e,t,a,T)}var g,p,m,v,y,x,b,w,C,k,O,A,S,P=o.legend.component,T=o.systemConf.legend,E=T.itemDisabledStyle,L=T.colorBox,z=[T,o.systemConf.canvas,Us],D=[T.itemHoverStyle,T,o.systemConf.canvas,Us],R=at(z,"fontColor"),j=o.systemConf.legend.events;if(null!=j&&(S=0==rt(j.enabled,!0),y=j.click,x=j.doubleclick,b=j.mouseover,w=j.mouseout,A=j.cursor,C=j.tap,k=j.taphold,O=j.tapholdend),!S){s.style("cursor",A||Tl);var M={chartObj:o},I=function(e,t){if(xc=null,null==b)h(this,e,t);else{var a=o.zcEventType?k:b;tt(a,d3.event,e,t,o)}},B=function(e,t){if(null==w)f(this,e,t);else{var a=o.zcEventType?O:w;tt(a,d3.event,e,t,o)}},H=function(e,t){var a=d3.event&&d3.event.touches;if(a&&Oc(),null==y)u(this,e,t);else{var r=o.zcEventType?C:y;tt(r,d3.event,e,t,o)}},V=function(e,t){if(null==x);else tt(x,d3.event,e,t,o)},F={mousemove:I,mouseout:B,click:H,dblclick:V},N={taphold:I,tapholdend:B,tap:H,dbltap:V};Ar(s,F,N,M)}P.filterSeriesNUpdate=function(r,n,i){m||(m=e(i),v=t(i,m));var o=m[n],s=m.filter(function(e,t){if(!c.allSelected&&!c.isFirstClickAfterDeselection){a(e)||(e.disabled=!c.allSelected),l(e,t,i),fc.toggleChartEvents(i,!0),fc.fadeChart(!0,i,d);var r=i.eventHandler.tooltipElement;r.hide(r.element)}return e.disabled}),u=s.length==v-1&&!o.disabled;u||(o.disabled=!o.disabled,i.dataObject.hierarchical&&!oc.isQuantileColorScale(i)&&(i.systemConf.seriesdata.chartdata[n].disabled=o.disabled),l(o,n,i),i.addRemoveSeries(o,0,o.yaxiscolumnorder,!c.allSelected&&!c.isFirstClickAfterDeselection)),c.allSelected||c.isFirstClickAfterDeselection||(c.isFirstClickAfterDeselection=!0)},P.toggleItemNUpdateChart=function(e,t,a,r){var l=o.legendarea.element;if(g=g||l.selectAll("div.legendfilterbox"),p=p||l.selectAll("div.selectAll"),r.filter.enabled){o.legendHighlight.resetSelection(),P.filterSeriesNUpdate(t,a,o);var s,d=jl(e),u=i(t.disabled,R,E);t.disabled&&(P.highlightItem(e,t,a,r,!1,!0),E.strikeout&&(s="line-through")),d.selectAll(".legendlabel").styles({color:u,"text-decoration":s}),Si.legend.setColorBoxBackground(g,o,c),null==d3.event.touches&&h(e,t,a)}c.allSelected||(c.allSelected=!c.allSelected),p.empty()||p.html(n(m,c.allSelected)?L.text||"&#10003;":(E.colorBox||{}).text||"")},P.highlightItem=function(e,t,a,n,i,l){if((l||!r(t,c.allSelected,c.isFirstClickAfterDeselection))&&n.itemHoverStyle){var o=jl(e);o.style("background-color",(i?n.itemHoverStyle:n).backgroundColor),Bt(o.selectAll("span"),i?D:z,!0)}},P.highlightSeries=function(e,t,a,r,n,i){if(n.highlightContext=null,oc.isQuantileColorScale(n)){var l=n.legendHighlight,o=a;i?t.disabled||n.seriesdata.forEach(function(e,t){l.highlightSelectedSeries(r,t,o),l.highlightUnselectedSeries(r,t,o)}):n.seriesdata.forEach(function(e,t){l.reset(r,t,o,n.seriesdata.length-1===t)})}else{var l=n.legendHighlight;i?t.disabled||(l.highlightSelectedSeries(r,a),l.highlightUnselectedSeries(r,a)):l.reset(r,a)}}}}(),function(){function e(e,r,n,i,o,s){n=l(n),i=l(i);var c=o.systemConf.legend,d=c.colorBox,u=c.shapes,h=(u?u[s%u.length]:null)||d.shape,f=h||!Si.legend.getHTML4ChartTypeSymbol||oc.isQuantileColorScale(o)?t(e,r,n,i,h,d):Si.legend.getHTML4ChartTypeSymbol(e,r,i,o,s);if(a(f))return'url("'+f+'")';var g="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+e+"' height='"+r+"'>";return g+=f,g+=" </svg>",'url("data:image/svg+xml;'+(Gs.IE?"base64":"utf8")+","+(Gs.IE?Xs(g):g)+'")'}function t(e,t,a,r,n,i){var o=V(n||"square")(10);return"<path d='"+o+"' transform='translate("+e/2+","+t/2+") scale("+e/(10+2*rt(i.strokeWidth,1))+")' style='stroke: "+l(a)+"; fill: "+l(r)+"; fill-opacity: "+i.fillOpacity+"; stroke-width: "+rt(i.strokeWidth,1)+"px; stroke-opacity: "+i.strokeOpacity+";'></path>"}function a(e){return e&&!("<"===e[0]||0===e.indexOf('url("data'))}function r(e,t,a,r){var n=document.createElement("canvas"),i=n.getContext("2d");n.width=t,n.height=a;var l=new Image;l.src=e.substring(5,e.length-2),l.width=t,l.height=a,l.onload=function(){i.drawImage(l,0,0,t,a);for(var e=i.getImageData(0,0,n.width,n.height),o=0;o<e.height;o++)for(var s=0;s<e.width;s++){var c=4*o*e.width+4*s,d=(e.data[c]+e.data[c+1]+e.data[c+2])/3;e.data[c]=d,e.data[c+1]=d,e.data[c+2]=d}i.putImageData(e,0,0,0,0,e.width,e.height),r.style("background","url("+n.toDataURL()+")")}}var n=fc.getClr,i=fc.isDisabled,l=fc.hexToRGB;Si.legend.setColorBoxBackground=function(t,l,o){var s,c,d,u,h,f,g,p,m,v=l.systemConf.legend,y=v.colorBox,x=v.itemDisabledStyle,b=x.colorBox||{},w=v.imagePallete?Si.legutil.imagePallete.get(v.imagePallete):null,C=it(w)&&w.length>0,k=l.patternPallete,O=k&&k.length,A=!l.patternPallete&&(it(v.shapes)||"square"!==y.shape),S=b.grayScale,P=+Si.utils.getVal(v.fontSize||l.systemConf.canvas.fontSize),T=fc.getFilterBoxSize(y,P),E=T[0],L=T[1],z=null;t.each(function(t,v){if(p=jl(this),m=i(t,o.allSelected,o.isFirstClickAfterDeselection),u=n(m,ic(y.strokeColor,ha(l,v)),x),s=d=n(m,ic(y.fillColor,ha(l,v)),x),h=y.borderRadius,f=m?b.fillOpacity:null,g=null,m&&S&&Gs.IE&&(d=pa(d),u=pa(u)),C)if(m&&x.color)s=x.color;else{s='url("'+w[v%w.length]+'")';var P=l.patternImageSizes&&l.patternImageSizes;z=P[v]?P[v%P.length][0]+Al+" "+P[v%P.length][1]+Al:null}else if(A)s=e(E,L,u,s,l,v),h=null;else if(O){var T=k[v%O],R=qs[T]?qs[T]:D(T);R.bgClr_base=d,R.stroke_base=d,R.width=E,R.x=R.y=0;var j="zp"+W(R,"legelegendndFill"),M=Ks.svgPatternFill(R,j,null,!0,!0,"objectBoundingBox"),I=M.width,B=M.height;s='url("'+M.url+'")',z=(E>2*I?I:E/2)+Al+" "+(L>2*B?B:L/2)+Al,c=y.strokeWidth+Al+"solid "+u}else c=y.strokeWidth+Al+"solid "+u;if(a(s)&&(z=z||E+Al+" "+L+Al,m&&S&&Gs.IE)){var H=z.split("px").map(function(e){return+e});r(s,H[0],H[1],p)}p.styles({background:s,"background-size":z,color:m?b.fontColor:y.fontColor||"white",border:c,"border-radius":it(h)?h+Al:null,opacity:m?f:null,filter:m&&S&&!Gs.IE?"grayscale(1)":null}).html(m?b.text||"":y.text)})}}(),function(){function e(e){return function(t){switch(e){case Ss:case Ts:case Ps:case Es:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.2*-t+" L"+.25*-t+" "+.2*-t+" L"+.25*-t+" "+.5*t+"Z  M"+.125*-t+" "+.5*t+" L"+.125*-t+" "+.5*-t+" L"+.125*t+" "+.5*-t+" L"+.125*t+" "+.5*t+"Z  M"+.25*t+" "+.5*t+" L"+.25*t+" "+.1*t+" L"+.5*t+" "+.1*t+" L"+.5*t+" "+.5*t+"Z";case Ls:case zs:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.28*t+" L"+.24*-t+" "+.08*t+" L"+.13*-t+" "+.19*t+" L"+.07*t+" "+.14*-t+" L"+.23*t+" "+.012*t+" L"+.5*t+" "+.5*-t+" L"+.5*t+" "+.5*t+"Z";case Is:case Ms:case Ys:return"M"+.045*t+" "+.045*-t+" L"+.5*t+" "+.045*-t+" A "+.455*t+" "+.455*t+" 0 0 0 "+.045*t+" "+.5*-t+"Z M"+.045*-t+" "+.045*t+" L"+.045*-t+" "+.41*-t+" A "+.455*t+" "+.455*t+" 1 1 0 "+.41*t+" "+.045*t+"Z";case Hs:return"M"+.5*-t+" "+.5*-t+" L "+.5*t+" "+.5*-t+" L "+.15*t+" "+.2*t+" L "+.15*t+" "+.5*t+" L "+.15*-t+" "+.5*t+" L "+.15*-t+" "+.2*t+"Z";case Vs:return"M0 "+.5*-t+" L"+.23*t+" "+.06*-t+" L"+.23*-t+" "+.06*-t+"Z M"+.5*-t+" "+.5*t+" L"+.5*t+" "+.5*t+" L"+.27*t+" 0 L"+.27*-t+" 0Z";case Fs:return V("line")(t);case Ws:return V("square")(t);case Rs:case js:case _s:case Ds:default:return V(e)(t)}}}function t(e,t,a){var r,n=at([e,t],"dashStyle"),i=O(n,.75*a);if(i&&i.length){var l=A(at([e,t],"lineCap"),n);r="stroke-dasharray:"+i+";stroke-linecap:"+l+";"}return r}function a(t,a,n,i,l,o){var s=e(t.symbol)(o),c="stroke:"+r(t[l?l+"StrokeColor":"strokeColor"]||i)+";stroke-width:"+t[l?l+"StrokeWidth":"strokeWidth"]+";stroke-opacity:"+t[l?l+"StrokeOpacity":"strokeOpacity"]+";fill:"+r(t[l?l+"FillColor":"fillColor"]||i)+";fill-opacity:"+t[l?l+"FillOpacity":"fillOpacity"]+";";return"<path d='"+s+"' transform='translate("+a/2+","+n/2+")' style='"+c+"'></path>"}var r=fc.hexToRGB;Si.legend.getHTML4ChartTypeSymbol=function(r,n,i,l,o){var s=l.isAxisCategory||l.dataObject.isPolarAxisCategory?o:0,c=l.chartTypes[s].name,d=l.systemConf.chart.plot.plotoptions[c],u=l.seriesdata[s].plotoptions,h=e(c)(r);switch(c){case Ds:case Fs:var f=.15*n,g=u&&u.marker?ac(d.marker,u.marker,!0):d.marker,p=t(u,d,f),m="",v="stroke:"+i+";stroke-width:"+f+";";if(p)v+=p;else if(0!=g.enabled){var y=c===Fs?.5:.65,x=c===Fs?.25:.45;m=a(g,r,n,i,"outer",hl(r,n)*y),m+=a(g,r,n,i,"inner",hl(r,n)*x)}return"<path d='"+h+"' transform='translate("+r/2+","+n/2+")' style='"+v+"'></path>"+m;
case Rs:case js:var g=u&&u.marker?ac(d.marker,u.marker,!0):d.marker;return g.imageUrl?g.imageUrl:a(g,r,n,i,"outer",.65*hl(r,n))+a(g,r,n,i,"inner",.45*hl(r,n));case _s:return a(d,r,n,i,null,hl(r,n)-(d.strokeWidth||1));default:var v="fill:"+i+";";return"<path d='"+h+"' transform='translate("+r/2+","+n/2+")' style='"+v+"'></path>"}}}(),function(){var e={show:!1,strokeColor:"#262626",strokeWidth:1,fillColor:Pl,fontColor:"#262626",disabledOpacity:.3,tooltip:{enabled:!0,color:"red",content:"Select atleast one legend"},events:{click:null}},t=fc.getLegendData,a=fc.isDisabled,r=fc.isAllEnabled,n=fc.getClr,i=fc.toggleChartEvents,l=fc.updateData;Si.legend.selectAllBox=function(o,s,c){function d(){(!c.allSelected||r(y,c.allSelected))&&(c.allSelected=!c.allSelected),c.isFirstClickAfterDeselection=!1,j.html(c.allSelected?b.text||"&#10003;":k.text||"");var e=w.events[s.zcEventType||"click"];tt(e,d3.event,c.allSelected,s)}function u(){if(h(),f(),i(s,c.allSelected),fc.fadeChart(c.allSelected,s,R),D.enabled){var e=s.eventHandler.tooltipElement;p||(p=e.element.selectAll("div#tooltipcontent").style("color"));var t=s.systemConf.tooltip,a=ct(it(t.borderWidth)?t.borderWidth:1);if(c.allSelected){var e=s.eventHandler.tooltipElement;g(e,null,a,p),e.hide(e.element)}else{var r=gr(z,d3.event);r={x:r[0],y:r[1]};var n=Pr(d3.event),l=br(n,r,0,0,s,{},!1,!1,!1,!0,!1),o=r.x-n.clientX,d=r.y-n.clientY;l.dLeft=o,l.dTop=d,l.helpers.color=D.color,l.helpers.backgroundColor=D.backgroundColor,l.helpers.borderColor=D.borderColor,g(e,"center",null,D.fontColor||p),e.show(s,l,D.content,!1,l.helpers),setTimeout(function(){var e=s.eventHandler.tooltipElement;g(e,null,a,p),e.hide(e.element)},4e3)}}}function h(){y||(y=t(s)),c.allSelected&&(y.forEach(function(e,t){e.disabled=!c.allSelected,l(e,t,s)}),s.addRemoveSeries(y,0,[0,0],!0))}function f(){if(!v){var e=s.legendarea.element;v=e.selectAll("div.legendfilterbox"),m=e.selectAll("span.legendlabel")}Si.legend.setColorBoxBackground(v,s,c);var t,a;c.allSelected?(t=S,a=null):(t=n(!0,S,C),a=JSON.parse(C.strikeout)?"line-through":null),m.styles({color:t,"text-decoration":a})}function g(e,t,a,r){e.element.attr("align",t).styles({"border-width":a}),e.element.selectAll("div#tooltipcontent").style("color",r)}e.events.click=s.legend.component.toggleSelectAll=u;var p,m,v,y=t(s),x=s.systemConf.legend,b=x.colorBox,w=ac(e,x.selectAllBox,!0),C=x.itemDisabledStyle,k=C.colorBox||{},O=[x,s.systemConf.canvas,Us],A=+Si.utils.getVal(x.fontSize||s.systemConf.canvas.fontSize),S=at(O,"fontColor"),P=(x.imagePallete?Si.legutil.imagePallete.get(x.imagePallete):null,fc.getFilterBoxSize(b,A)),T=P[0],E=P[1],L=Math.min(T,E)-(x.imagePallete||!it(x.shapes)||"square"===b.shape?0:+b.strokeWidth),z=s.container.node(),D=w.tooltip,R=w.disabledOpacity;c.allSelected=it(w.selected)?w.selected:c.allSelected;var j=zt(o,"div",[1],".","class","selectAll");j.styles({display:w.show?"inline-block":Sl,width:L+"px",height:L+"px",border:w.strokeWidth+"px solid "+w.strokeColor,"background-color":w.fillColor,"float":"left",position:"absolute","box-sizing":"border-box","text-align":"center","line-height":L+"px","font-family":b.fontFamily,"font-size":(b.fontSize||A-2)+"px",color:function(e){return w.fontColor||(a(e,c.allSelected,c.isFirstClickAfterDeselection)?k.fontColor:b.fontColor)}}).html(r(y,c.allSelected)?b.text||"&#10003;":k.text||""),o.style("cursor",w.show?Tl:null);var M={click:d},I={tap:d};if(w.show?Ar(o,M,I):(Sr(o,null,M),Sr(o,null,I)),s.eventHandler){var B=s.eventHandler.tooltipElement;B.hide(B.element)}return{element:j,options:w,size:L}}}(),function(){function e(e,t){var a=t.legend.title,r=zt(e,"text",a.show?[1]:[],".","class","legendtitle");Bt(e,[a,t.canvas,Us]),r.text(G(a.text)).attr("dy","0.91em")}function t(e,t,a){var r=t.systemConf.legend,n=r.background,i=r.colorBand,l=Lt(i.padding),o=r.border,s=o.show,c=ic(o.strokeWidth,1),d=O(o.style,c),u=A(o.lineCap,o.style),h=t.dataObject.getTransRectValue("radius",null,null,null,null,s?o.radius:void 0);e.attrs({d:Mt(a.x-l.left,a.y-l.top,a.width+l.left+l.right,a.height+l.top+l.bottom,h)}).styles({stroke:o.color,"stroke-width":s?o.size:0,"stroke-dasharray":d,"stroke-linecap":u,fill:n.color||Pl,"fill-opacity":n.alpha})}function a(e,t,a,r){e===xs?a[1]+=t:e===ys?r[1]+=t:e===ms?a[0]+=t:r[0]+=t}function r(e,t){var a=t.selectAll("g.zchart-minmaxlabels,line.majorTicks");a.style("display",Sl);var r=rc(U(t.node()));return a.style("display",null),r}function n(e,t,a,r,n,i,l,s){var c=t.align,d=[];return d[0]=a===ms?c===vs?i.width:c===ms?ul(i.width,s.width):ul(i.width,s.width/2):a===vs?c===vs?0:c===ms?s.width:s.width/2:c===xs||c===ys?0:-s.x,d[1]=l.height+o(e),a===ms||a===vs?d[1]-=hl(0,s.y):a===ys&&c===xs&&(d[1]+=s.height),n===xs&&(d[1]+=i.height),d}function i(e,t,a,r,n,i,s,c,d){var u=t.minmaxlabels,h=u.align,f=[];return f[0]=a===ms?h===vs?i.width:h===ms?ul(i.width,c.width):ul(i.width,c.width/2):a===vs?h===vs?d[0]:h===ms?d[0]+c.width:d[0]+c.width/2:h===xs||h===ys?d[0]:d[0]-c.x,f[1]=s.height+o(e),a===ms||a===vs?f[1]-=hl(0,c.y):a===ys&&h===xs&&(f[1]+=c.height),f[1]+=a===xs?i.height:d[1],f=l(f,t.axisline,a)}function l(e,t,a){var r=t.show?rt(t.strokeWidth,1):0,n=r-.5;return a===ms?e[0]-=n:a===vs?e[0]+=n:a===ys?e[1]+=n:e[1]-=n,e}function o(e){var t=e.legend.title;return t.show?it(t.margin)?t.margin:3:0}function s(e){var t={label:{},grid:{color:Pl},ticklabel:{fontColor:e.fontColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,tooltip:e.tooltip},minmaxlabels:{padding:2,align:"center",fontSize:e.fontSize},tickmark:{color:"#B0B0B0",size:3},axisline:{show:!1}},a=e.colorAxis||{};return a=ac(t,a,!0)}function c(e,t,l,o,s,c,d,u,h){var f=o.systemConf,g=U(l.node()),p=fc.getOrient(o.systemConf.legend),m=r(p,e),v=U(e.selectAll("g.zchart-minmaxlabels").node()),y=n(f,s.minmaxlabels,p,c,d,m,g,v),x=i(f,s,p,c,d,m,g,v,u);return a(p,h,y,x),t.attr("transform","translate("+y[0]+","+y[1]+")"),e.attr("transform","translate("+x[0]+","+x[1]+")"),{axisGroupPosition:x,bandGroupPosition:y}}Si.legend.continuous=function(){},Si.legend.continuous.get=function(){"use strict";function a(i){return i.each(function(a){function i(){o=U(w.node());var e,t,r=o.width,n=it(f.x)&&it(f.y);return n?[f.x-o.x+x.left,f.y-o.y+x.top]:(v!=ps?(e=m==vs?l.left+l.width-r-a.marginRight-o.x-x.right:m==ms?l.left+a.marginLeft+x.left-o.x:l.width/2-r/2,t=v===xs?l.top+x.top+a.marginTop-o.y:l.top+l.height-x.bottom-a.marginBottom-o.height-o.y):(e=m==vs?l.left+l.width-r-a.marginRight-o.x-x.right:l.left+a.marginLeft+x.left-o.x,t=l.top+a.marginTop+x.top-o.y),[e,t])}var o,h=d(r),f=(u(r,h),r.systemConf.legend),g=f.colorBand,p=s(f),m=a.hAlign,v=a.vAlign,y=rt(g.strokeWidth,1)/2,x=Lt(g.padding),b=p.show===!1,w=jl(this),C=zt(w,"path",[1],".","class","zchart-background"),k=zt(w,"g",[1],".","class","zcheader"),O=zt(w,"path",[1],".","class","colorband"),A=zt(w,"g",b?[]:[1],".","class","legend-axis");C.style("display",Sl),w.selectAll(".brush").style("display",Sl),e(k,n),Si.legend.colorBand(O,r),Si.legend.colorAxis(A,r,p);var S=b?[0,0]:jt(A).translate,P=c(A,O,k,r,p,m,v,S,y),T=i();b||(Si.legend.colorAxis.handleOverlapNOverlap(A,P.axisGroupPosition,T,r,l),P=c(A,O,k,r,p,m,v,S,y),T=i()),w.selectAll(".brush").style("display",null);new yc(r,{position:P.bandGroupPosition});T=i(),w.attr("transform","translate("+T[0]+","+T[1]+")"),o=U(w.node()),t(C,r,o),C.style("display",null),r.filterEffectsID&&a.useChartEffect!==!1&&w.style("filter",r.filterEffectsID?"url(#"+r.filterEffectsID+")":null)}),a}var r,n,i,l,o=ro("legendClick","legendDblclick","legendMouseover","legendMouseout"),d=fc.getLegendData,u=fc.getLegendDataLength;return a.dispatch=o,a.chartarea=function(e){return arguments.length?(l=e,a):l},a.systemconf=function(e){return arguments.length?(n=e,a):n},a.chartObj=function(e){return arguments.length?(r=e,a):r},a.color=function(e){return arguments.length?(i=e,a):i},a}}(),Si.legend.colorBand=function(e,t){var a,r,n,i=t.systemConf.legend,l=i.colorBand,o=fc.getColorBandDimension(t),s=o[0],c=o[1],d=i.vAlign===ys||i.vAlign===xs,u=l.ranges&&l.ranges.length,h=t.dataObject.getTransRectValue("radius",null,null,null,null,l.borderRadius),f=t.axes.clr.scale;if(u){r=f.range().filter(function(e){return null!==e});for(var g=[],p=[],m=0;u>m;m++)g.push(m,m+1),p.push(r[m],r[m]);a=g,r=p,n=Ul().domain(a).range([0,100])}else a=f.domain(),r=f.range(),a[0]===a[1]&&(r=[r[0],r[0]]),n=_l().domain([a[0],a[a.length-1]]).range([0,100]);var v={type:"linear",options:{linear:{x2:d?100:0,y1:d?0:100,gradientUnits:"objectBoundingBox",stopColor:r,stopOffset:a.map(function(e){return n(e)+"%"})}}},y=[0,s],x=T(v,y),b={chartObj:t},w=Qs.get($s,"svgGradientFill",x,b);e.attr("d",Mt(0,0,s,c,h)).styles({stroke:l.strokeColor,"stroke-opacity":l.strokeOpacity,"stroke-width":l.strokeWidth,"fill-opacity":l.fillOpacity,fill:"url("+t.defsLocation+"#"+w+")"})},function(){function e(e,t,a){return e==ys?[0,-a]:e==xs?[0,a]:e==ms?[t,0]:e==vs?[-t,0]:void 0}function t(e,t,r,i,l){var o=i.systemConf.legend,s=fc.getOrient(o),c=[],d=n(i,l),u={left:d.x1,top:d.y1,right:d.x2,bottom:d.y2},h={left:5,right:5,top:5,bottom:5},f="..";if(e.each(function(e,n){var i=a(this,t,r),l={left:i.x1,top:i.y1,width:i.width,height:i.height};Dt(this,this.textContent,l,u,ys,f,h),this.textContent===f&&jl(this).text(""),c[n]=a(this,t,r)}),(s===ys||s===xs)&&c.length&&oi(c[0],c[1])){var g=c[1].x2-c[0].x1;e.each(function(e,n){var i=a(this,t,r),l={left:i.x1,top:i.y1,width:i.width,height:i.height},o=rc(u);0===n?o.right=i.x1+g/2:o.left=i.x2-g/2,Dt(this,this.textContent,l,o,ys,f,h),this.textContent===f&&jl(this).text(""),c[n]=a(this,t,r)})}return c}function a(e,t,a,r){r=r||[0,0];var n=U(e),i={x1:n.x+t[0]+a[0]+r[0],y1:n.y+t[1]+a[1]+r[1],width:n.width,height:n.height};return i.x2=i.x1+n.width,i.y2=i.y1+n.height,i}function r(e,t,r,n){var i=[],l=0;e.each(function(){var e=jt(this.parentNode).translate;i.push(a(this,t,r,e));for(var o,s=l-1;s>=0&&!o;s--)o=oi(i[s],i[l]);((n.length?oi(i[l],n[0])||oi(i[l],n[1]):!1)||o)&&(jl(this.parentNode).style("display",Sl),i[l]={x1:0,y1:0,x2:0,y2:0}),l++})}function n(e,t){var a=e.systemConf.legend,r=fc.getOrient(a),n=a.hAlign,i=(a.vAlign,t.width-a.marginLeft-a.marginRight),l=t.height-a.marginTop-a.marginBottom,o=t.left+a.marginLeft,s=t.top+a.marginTop,c=r===xs||r===ys?vc:mc,d=r===xs||r===ys?pc:gc,u=ta(a.maxWidth||c,i),h=ta(a.maxHeight||d,l),f={};return r===ys?(f.y1=s+l-h,f.x1=n===ms?o:n===vs?o+i-u:o+(i-u)/2):r===xs?(f.y1=s,f.x1=n===ms?o:n===vs?o+i-u:o+(i-u)/2):r===vs?(f.y1=s,f.x1=o+i-u):(f.y1=s,f.x1=o),f.x2=f.x1+u,f.y2=f.y1+h,f}function i(e,t,a,r,n){var i=e.selectAll("path.domain");if(t.show){var l=rt(t.strokeWidth,1),o=0,s=0;a===ms?o=l/2:a===vs?o=-l/2:s=a===ys?-l/2:l/2,i.attr("transform","translate("+o+","+s+")").attr("d",r?"M0,0 L"+n[0]+",0":"M0,0 L0,"+n[1]).styles({"stroke-dasharray":O(t.style,l),"stroke-linecap":A(t.lineCap,t.style)})}else i.remove()}Si.legend.colorAxis=function(t,a,r){var n,l=a.systemConf.legend,o=l.colorBand,s=r.minmaxlabels,c=fc.getColorBandDimension(a),d=c[0],u=c[1],h=o.type,f=fc.getOrient(l),g=a.dataset.getColumn("clr"),p=g.datatype,m=g[p],v="-",y=Si.axis.get(),x=a.axes.clr.scale,b=x.domain(),w=s.show&&s.excludeIntervals?[]:b,C=f===ys||f===xs,k=C?[0,d]:[u,0],O=s.show&&s.excludeIntervals&&f===xs?[0,0]:f===ys||f===xs?[0,u]:[d,0],A=o.ranges&&o.ranges.length,S=o.labels;if(a.axes.clr.ticks=Si.axis.ticks(a,r,"clr",0,f,a.chartarea),A){b=Ea(a);var P=a.dataset.getDataType("clr")===Fo;"continuous"!==h||P?n=Wl().domain(b).range(k).padding(0):(b=$l(b),o.minRange!==b[0]&&b.splice(0,0,o.minRange),n=Ul().domain(b).range(k))}else{if(w[0]===w[1]){var T=fl(k[0]-k[1]);k=[T/2,T/2]}n=_l().domain([b[0],b[b.length-1]]).range(k)}n.origRange=k,w=s.show&&s.excludeIntervals?[]:b,y.orient(f).scale(n).tickSize(rt(r.tickmark.size,6),0).majorTicks(e(f,d,u)).systemconf(a.systemConf).chartObj(a).tickValues(w).tickFormat(function(e){if(S&&S.length){var t=fc.getLabelIndex(e,o,a);if(it(t))return d3.select(this).text(S[t])}var r=Lr(m,e,p,a,"legend",null,v);d3.select(this).text(r)}),t.datum(r).attr("transform","translate("+O[0]+","+O[1]+")").call(y,"clr"),t.selectAll("g.tick").style("display",null),t.selectAll("line.minorTicks").attr(C?"x2":"y2",null),i(t,r.axisline,f,C,c),t.call(ZC_legend_minmaxLabels,c,r,a,f)},Si.legend.colorAxis.handleOverlapNOverlap=function(e,a,n,i,l){var o=e.selectAll("g.zchart-minmaxlabels").selectAll("text"),s=e.selectAll("g.tick").selectAll("text"),c=t(o,a,n,i,l);r(s,a,n,c)}}();!function(){function e(e,t,a,r,n,i){var l,o,s,c;return e===ys?a===xs?(s="-0.3em",c=0===i?null:"end",o=-t[1]-r-ul(0,(n[1]-t[1])/2),l=0===i?0:t[0]):a===ys?(s="1em",c=0===i?null:"end",o=r+ul(0,(n[1]-t[1])/2),l=0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,o=-t[1]/2,l=0===i?-r-n[0]/2:t[0]+r+n[0]/2):e===xs?a===xs?(s="-0.3em",c=0===i?null:"end",o=-r-ul(0,(n[1]-t[1])/2),l=0===i?0:t[0]):a===ys?(s="1em",c=0===i?null:"end",o=t[1]+r+ul(0,(n[1]-t[1])/2),l=0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,o=t[1]/2,l=0===i?-r-n[0]/2:t[0]+r+n[0]/2):e===vs?a===ms?(s=0!==i?"1em":"-0.3em",c="end",l=-t[0]-r-ul(0,(n[1]-t[0])/2),o=0!==i?0:t[1]):a===vs?(s=0!==i?"1em":"-0.3em",c=null,l=r+ul(0,(n[1]-t[0])/2),o=0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",l=-t[0]/2,o=0!==i?-r-n[0]/2:t[1]+r+n[0]/2):a===ms?(s=0!==i?"1em":"-0.3em",c="end",l=-r-ul(0,(n[1]-t[0])/2),o=0!==i?0:t[1]):a===vs?(s=0!==i?"1em":"-0.3em",c=null,l=t[0]+r+ul(0,(n[1]-t[0])/2),o=0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",l=t[0]/2,o=0!==i?-r-n[0]/2:t[1]+r+n[0]/2),{x:l,y:o,dy:s,anchor:c}}function t(e,t,a){var r=e.type,n=e[r],i=a===xs||a===ys;return"triangleUp"===r||"triangleDown"===r?[0,0]:"lever"===r||"vernier"===r?[n.width,n.height]:"pentagon"===r?[n.size+2*n.bandWidth,t[i?1:0]+1.5*n.bandWidth+2]:[n.size,n.size]}ZC_legend_minmaxLabels=function(a,r,n,i,l){var o=i.systemConf,s=n.minmaxlabels,c=i.systemConf.legend,d=c.colorBand,u=c.filter.enabled?t(c.filter.slider,r,l):[0,0],h=rt(s.padding,2),f=s.align,g=s.text,p=d.ranges&&d.ranges.length,m=[],v=i.dataset.getColumn("clr"),y=v.datatype,x=v[y];if(s.show)if(p){var b=Ea(i);m=[b[0][0],b[b.length-1][b[b.length-1].length-1]]}else{var w=i.axes.clr.scale.domain();m=[w[0],w[w.length-1]]}var C=zt(a,"g",[1],".","class","zchart-minmaxlabels"),k=zt(C,"text",m);k.each(function(t,a){var n=e(l,r,f,h,u,a);jl(this).attrs({x:n.x,y:n.y,"text-anchor":n.anchor,dy:n.dy}).text(g?g[a]:Lr(x,t,y,i,"minmaxlabels"))}),Bt(k,[s,o.chart,o.canvas,Us])}}();var yc;!function(){function e(e,t,a,r){var n=a?[0,e.length-1]:[e.length-1,0],i=e[n[t]];return r(i)}function t(e,t,a,n,l,o){var s,c,d=t.domain().map(function(e){return t(e)}),u=q(d).sort(no),h=t.domain(),f=t.bandwidth();u.some(function(t,a){if(e[0]>=t&&e[0]<=t+f){var r=e[0]-t;s=.5>=r&&r>=0?ul(a-1,0):a}if(e[1]>=t&&e[1]<=t+f){var r=t+f-e[1];c=.5>=r&&r>=0?hl(a+1,u.length-1):a}return it(s)&&it(c)});var g=h;if(l!==Fo&&1===n[0].length&&(g=r(a,g)),!o){var p=s;s=u.length-1-c,c=u.length-1-p}return g=g.slice(s,c+1,0),l===Fo?e=g:(e=ao($l(g)),e=i(e,a)),e}function a(e,t,a,r,n){var l,s=t.bandwidth()/2;if(n===Fo)l=[t(e[0])+s,t(e[e.length-1])+s];else{var c,d,u=t.domain();e=i(e,a),u.forEach(function(t,a){e[0]>=t[0]&&(c=1===r[0].length?a+1:a),!it(d)&&e[1]<=t[0]&&(d=1===r[0].length?a:a-1)}),c=ul(0,rt(c,0)),d=ul(0,rt(d,u.length-1)),l=[t(u[c])+s,t(u[d])+s]}return l[0]===l[1]&&(l[0]-=o,l[1]+=o),l}function r(e,t){for(var a=e[2],r=e[e.length-1-2],n=[],i=0;i<t.length;i++)n.push([a,t[i][0]]),a=t[i][0];return n.push(a,r),n}function n(e,t){return e.indexOf(t)===e.lastIndexOf(t)}function i(e,t){return n(t,e[1])||(e[1]-=o),e}function l(e,t){return t[1]>t[0]?(e[1]=hl(e[1],t[1]),e[0]=ul(e[0],t[0])):(e[1]=ul(e[1],t[1]),e[0]=hl(e[0],t[0])),e}var o=1e-12;yc=function(r,n){var i,s,c,d,u,h,f=n.position,g=fc.getColorBandDimension(r),p=g[0],m=g[1],v=r.systemConf.legend,y=v.colorBand,x=fc.getOrient(v),b=r.dataset.getDataType("clr"),w=y.ranges,C=w&&w.length,k=r.systemConf.legend.filter.range,O=r.axes.clr.scale,A=O.domain(),S=x===ys||x===xs,P=S?[0,p]:[m,0];if(C)i=Wl().domain(b===Fo?A:Ea(r)).range(P).padding(0),s=i.bandwidth(),c=s/2;else{var T=[A[0],A[A.length-1]];T[0]===T[1]&&(h=[-1,1],T=[-Ol,Ol]),i=_l().domain(T).range(P)}if(d=i.domain(),C){if(k)u=a(k,i,A,w,b);else{var E=i(d[d.length-1]),L=i(d[0]);u=[E+c-o,L+c+o]}u.sort(no)}else u=k||h||i.domain(),u=u.map(function(e){return i(e)}).sort(no);var z={element:r.legendarea.element,orient:x,scale:i,initialExtent:u,brushOptions:v.filter,dimension:g,singleDomainContinuous:h,onClick:"resize",onBrush:function(a){if(a.initialized&&!h){var n=d3.event.selection;n=l(n,P),n=C?t(n,i,A,w,b,S):n.map(function(e){return i.invert(e)}).sort(no),r.systemConf.legend.filter.range=n,r.addRemoveSeries(),D.slider.style("fill",function(t,a){return e(n,a,S,O)})}},onEnd:function(e){var t;if(C){var n=r.systemConf.legend.filter.range;t=a(n,i,A,w,b)}else h&&(t=h.map(function(e){return i(e)}).sort(no));if(t){t.sort(no),e.initialized=!1;var l=d3.event.sourceEvent;D.context.transition().call(e.move,t).on("end",function(){e.initialized=!0,D.context.node().contains(l.srcElement||l.target)||D.tooltipComponent.hide()}),D.slider.transition().attr("transform",function(e,a){return"translate("+(S?t[a]:0)+","+(S?0:t[a])+")"})}}},D=r.legend.brush=new Yc(r,z);D.context.attr("transform","translate("+f[0]+","+f[1]+")"),D.slider.style("fill",function(a,r){var n=C?t(u,i,A,w,b,S):u.map(function(e){return i.invert(e)}).sort(no);return e(n,r,S,O)})}}();var xc,bc,wc,Cc,kc=jl(document.documentElement),Oc=function(e){if(Gs.isTouchDevice&&(!e&&wc&&bc||bc&&bc!=e)){var t=bc.container.node();if(document.body.contains(t)&&t.style.display!=Sl){wc[4]=!0;var a=bc.systemConf.tooltip,r=a.hideDelay;a.hideDelay=0,bc.eventHandler.tapOldInfo=null,bc.eventHandler.mouseOut.apply(Cc,wc),a.hideDelay=r}}};if(Si.documentTapEvent=Oc,Gs.isTouchDevice){var Ac=function(){var e=(new Date).getTime();(!xc||e-xc>500)&&Oc()},Sc={tap:Ac,taphold:Ac,dbltap:Ac};Ar(kc,{},Sc,{preventDefault:!1}),kc.on("touchmove",function(){Oc()})}Si.events.mouseevents=function(e,t,r,n,i,l,o,s,c,d,u){function h(){return e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)?At:e.eventHandler.trackerElement}function f(a,n,o){var s=U(o),c=a[0]-s.x,u=a[1]-s.y,h={x:c,y:u},f=x(h,l,Ct,r,!0),g=e.seriesdata,p=f.seriesPos,m=f.itemPos,v=f.subseriesindex[p],b=f.subseriesLength[p],w=f.itemPosShared,C=f.currentQualitativeRangePoint;Rt=f.highlightpoint,st=f.levelMarkerPoint;var k=e.eventHandler.oldInfo,O=e.eventHandler.tooltipElement,S=f.customPoint;if(n=Pr(n),it(S)){if("threshold-marker"===S.type){var P=ar(null,S,e,"mousemove");it(P)&&at(P,S,n),Ht.hoverPoint(S,n,h)}return void(e.eventHandler.oldInfo={customPoint:S,isNoInfo:!0})}if(it(C)&&r.tooltip.enabled!==!1&&("marker"===C.type||!it(p))){var T=br(n,h,0,0,e,f,kt,Dt,{},!0,!1,!1),E=jt.bulletEvents.getTooltipContent(C,0),L=ar(null,C,e,"mousemove");return it(L)&&at(L,C,n),A(),T.helpers.inheritColors=!0,T.helpers.itempos=C.itemIndex,T.helpers.chartType=C.chartType,O.show(e,T,E,!1,T.helpers),void(e.eventHandler.oldInfo={customPoint:C,isNoInfo:!0})}if(null==p)return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:!0});var z=e.chartTypes[p].value,D=z==Si.charttype.arearange,R=(ur(z),D?1:null),M=(null!=l.bandwidth?l.bandwidth():null,Tt(g[p].yaxiscolumnorder)),I=Ct[M].eventscale,B=e.renderer[p],H=Dt?v:v,V=Dt?w[p][H]:m,F=(null!=B.seriesdataAfterUpdate?B.seriesdataAfterUpdate[H]:g[p].data[v])[V],Y=Dt?l.domain()[m]:i.getX(F),_=i.getY(F,M),W=e.dataObject.getXYvalue(kt,Bt(z),l,I,M,F,"x",null,R),X=e.dataObject.getXYvalue(kt,Bt(z),l,I,M,F,"y",null,R);if(pt=K(F,p),ir(z)||null!=j(W,X)){if(null!=k&&!k.isNoInfo){var G=k.nearestPoint,Z=Et(k.type||e.userdata.seriesdata.type,Yo);if(G&&G.seriesPos==f.seriesPos&&G.itemPos==f.itemPos&&G.subseriesindex==f.subseriesindex&&Z==z)return d.selectAll("#zcbarhighlight,#zcareahighlight").style("display",""),t.style("visibility",Ot?"visible":"hidden"),void(yr(e)&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var Q=N({x:l(Y),y:I(_)},h),q=Dt?e.seriesdata.length:1;d.selectAll("#zcscatterhighlight").selectAll("*").remove(),d.selectAll("#zcbarhighlight").selectAll("*").remove(),d.selectAll("#zcareahighlight").selectAll("*").remove();for(var $=Jl(),J=0;q>J;J++){var et=Dt?J:p;if(Dt&&b>1)for(var tt=0;b>tt;tt++)y(e,et,Y,m,tt,f,Dt,Q>10,$);else y(e,et,Y,m,v,f,Dt,Q>10,$)}if(Ot){var rt=br(n,h,W,X,e,f,kt,Dt,$,!0,!1,fr(e.chartTypes[p].value)&&e.subrenderer[v][Y].fillColorFunc);O.show(e,rt,null,!0,rt.helpers)}}}function g(a,n,i){var o=10,s=e.dataObject.isPolarAxisCategory,c=U(i),u=a[0]-c.x-(s?e.plotarea_approx.x:0),h=a[1]-c.y-(s?e.plotarea_approx.y:0),f={x:u,y:h},g=e.eventHandler.oldInfo,p=Pr(n),m=f.y-n.clientY,v=f.x-n.clientX,x=Dt?k(f,l,Ct,r):O(f,l,Ct,r),b=x.seriesPos,w=x.itemPos,C=x.subseriesindex,A=e.eventHandler.tooltipElement,S=x.customPoint;if(it(S)){if("threshold-marker"===S.type){var P=ar(null,S,e,"mousemove");it(P)&&at(P,S,n),Ht.hoverPoint(S,n,f)}return void(e.eventHandler.oldInfo={customPoint:S,isNoInfo:!0})}if(!it(b))return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:!0});var T=e.seriesdata,E=Tt(T[b].yaxiscolumnorder),L=Ct[E].scale,z=e.chartTypes[b].value,D=z==Si.charttype.arearange,R=D?1:null,M=(null!=l.bandwidth?l.bandwidth():null,e.renderer[b]),I=null!=M.seriesdataAfterUpdate?M.seriesdataAfterUpdate[C]:T[b].data[C],B=I[w],H=e.dataset.getX(B),V=e.dataObject.getXYvalue(kt,Bt(z),l,L,E,B,"x",null,R),F=e.dataObject.getXYvalue(kt,Bt(z),l,L,E,B,"y",null,R);pt=K(B,b);if(s||null!=j(V,F)){var Y=N({x:V,y:F},f);if(null!=g&&!Dt){var _=g.nearestPoint,W=Et(g.type||e.userdata.seriesdata.type,Yo);if(_&&_.seriesPos==x.seriesPos&&_.itemPos==x.itemPos&&_.subseriesindex[_.seriesPos]==x.subseriesindex[x.seriesPos]&&W==z&&g.containerLeft===v&&g.containerTop===m)return d.selectAll(nr(z)?"#zcscatterhighlight,#zcareahighlight":"#zcscatterhighlight").style("display",""),t.style("visibility",Ot?"visible":"hidden"),void(yr(e)&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var X=Dt?e.seriesdata.length:1;d.selectAll("#zcscatterhighlight").selectAll("*").remove(),d.selectAll("#zcareahighlight").selectAll("*").remove();for(var G=Jl(),Z=0;X>Z;Z++){var Q=Dt?Z:b;y(e,Q,H,w,C,x,Dt,o>Y,G)}if(Ot){var q=br(p,f,V,F,e,x,kt,Dt,G,!1,s,fr(e.chartTypes[b].value)&&e.subrenderer[C][H].fillColorFunc),$=q.helpers;e.dataObject.isBubbleEnabled&&(q.distance=e.dataObject.getXYvalue(kt,Bt(z),l,L,E,B,"z",e.zscale)/2),A.show(e,q,null,!0,$),g=e.eventHandler.oldInfo,g&&(g.containerLeft=v,g.containerTop=m)}}}function p(t,a,r,l,o,s,c,u,h,f,g,p,m){var v=e.seriesdata,y=e.systemConf.legend.patternPallete?.5:.2,x=ua(e,o,G(o,s,c),o),b=e.legendHighlight.getLegendHighlightEffect(o,"selectedSeries","plot"),w=b===Sl?{fill:Pl}:e.legendHighlight.getEffect(b,"area",x,{fill:Pl,stroke:x},o);m||D(d.selectAll("g#zcbarhighlight")),t.style("display","").attr("transform","translate("+n.left+","+n.top+")").styles(w);var C,k,O,A,S,P,T,E,L=bt(r,l)("mode"),y=rt(l.hoveroptions.fillOpacity,.2),z=Lt(i,"x"),R=Lt(i,"y",f);if("linear"==L&&null!=p){var j=$l(p.map(function(e){return[e.x,e.y]})),M=zt(t,"polygon",[p],".","class","highlight"+o);M.attr("points",j.toString()).styles({"fill-opacity":y,display:""})}else{var I,B,H=Bt(a),V=e.dataObject.containsNegativeData(f),F=e.systemConf.chart.axes.xaxis.reversed,N=e.systemConf.chart.axes.yaxis[f||0].reversed;if(e.dataObject.isPolarAxisCategory){var Y=e.renderer[o];B=null!=Y.seriesdataAfterUpdate?Y.seriesdataAfterUpdate[s]:v[o].data[s];var _=N&&!H?h.domain().length-1:0,W=function(e){var t=H?h(e.y0+e.y):h(i.getY(e,f))+(null!=h.bandwidth?h.bandwidth()/2:0);return ul(t,h.range()[_])},X=function(e){var t;return t=H?0==o?hl(h.range()[0],h(V)):h(e.y0):h(h.domain()[_])+(null!=h.bandwidth?h.bandwidth()/2:0),ul(t,h.range()[_])},U="strokeEnlarge"===b;I=(U?oo:co)().angle(function(e){return u(i.getX(e))}).curve(Nl(L,kt)),U?I.radius(W):I.outerRadius(W).innerRadius(X)}else{var Z=a==Si.charttype.arearange,Q=Z?1:null,Y=e.renderer[o],q=null!=Y.seriesdataAfterUpdate?Y.seriesdataAfterUpdate[s]:v[o].data[s],K=q[c],$=e.dataObject.getXYvalue(kt,H,u,h,f,K,"x",null,Q),J=e.dataObject.getXYvalue(kt,H,u,h,f,K,"y",null,Q),et=0!=c,tt=c!=q.length-1;if(F?tt:et){var at=q[F?c+1:c-1],nt=e.dataObject.getXYvalue(kt,H,u,h,f,at,"x",null,Q),it=e.dataObject.getXYvalue(kt,H,u,h,f,at,"y",null,Q);C=($+nt)/2,k=(J+it)/2}if(F?et:tt){var lt=q[F?c-1:c+1],ot=e.dataObject.getXYvalue(kt,H,u,h,f,lt,"x",null,Q),st=e.dataObject.getXYvalue(kt,H,u,h,f,lt,"y",null,Q);O=($+ot)/2,A=(J+st)/2}S=kt?0:null==C?$:C,P=Il([k,J,A,h(h.domain()[N?0:1])]),T=kt?Bl([C,$,O,h(V)||$]):null!=C&&null!=O?O-C:null==C?null==O?1:O-$:$-C,E=kt?null==k?J-A:null==A?k-J:k-A:n.height-P;var ct=Math.max(0,-S),dt=Math.max(0,-P),ut=Math.max(0,S+T-n.width-(e.scrolledX||0)),ht=Math.max(0,P+E-n.height-(e.scrolledY||0));S=Math.max(0,S),P=Math.max(0,P),T-=ct+ut,E-=dt+ht,t.style("display","block"),B=q,I=so().defined(function(e){return!R(i.getY(e,f))&&!z(i.getX(e))}).curve(Nl(L,kt)),kt?I.x0(function(e,t){return H?0==o&&0==s&&0==t?ul(h.range()[0],h(V)):h(e.y0):null!=h.bandwidth?h.origRange[0]+h.bandwidth():ul(h.range()[0],h(V))}).x1(function(t){return e.dataObject.getXYvalue(kt,H,u,h,f,t,"x")}).y(function(t){return e.dataObject.getXYvalue(kt,H,u,h,f,t,"y",null,Q)}):I.x(function(t){return e.dataObject.getXYvalue(kt,H,u,h,f,t,"x")}).y0(function(t,a){return H?0==o&&0==s&&0==a?hl(h.range()[0],h(V)):h(t.y0):Z?e.dataObject.getXYvalue(kt,H,u,h,f,t,"y",null,0):null!=h.bandwidth?h.origRange[0]+h.bandwidth():hl(h.range()[0],h(V))}).y1(function(t){return e.dataObject.getXYvalue(kt,H,u,h,f,t,"y",null,Q)})}var ft={name:"rect",id:e.id,x:S,y:P,width:T,height:E},gt={chartObj:e},pt=Qs.get(tc,"rect",ft,gt),mt=zt(d.selectAll("#zcareahighlight"),"path",[1],".","class","highlight"+o);mt.datum(B).attr("d",I).attr("stroke","").attr("clip-path",e.dataObject.isPolarAxisCategory?null:"url("+e.defsLocation+"#"+pt+")").styles({"fill-opacity":y,display:""})}}function m(e,t,a,r,n,i){var l=q(t),o=Q(t,a,n);i||D(d.selectAll("g#zcareahighlight,g#zcscatterhighlight")),d.selectAll("g#zcbarhighlight").style("display",""),e.attr("d",o).attr("transform","translate("+l[0]+","+l[1]+")").style("display","")}function v(t,a,r,i,l,o,s,c,u,h,f,g,p,m,v,y){var x=a==Si.charttype.gantt,b=e.legendHighlight.getLegendHighlightEffect(g,"selectedSeries","plot"),w=rr(e)&&(or(a)||a===Si.charttype.scatter)&&"strokeEnlarge"!==b,C=ua(e,ma(i,e)?p:g,G(g,f,p),g);x||y||D(d.selectAll("g#zcbarhighlight")),m||e.dataObject.isPolarAxisCategory||(D(d.selectAll("g#zcareahighlight").selectAll("*")),D(d.selectAll("g#zcareahighlight")));var k,O,A=d.selectAll("#zcscatterhighlight"),S=r?ac(i.hoveroptions,r.hoveroptions,!0):i.hoveroptions;if(!x||!i.marker||i.marker.enabled!==!1){if(or(a)){var P=e.renderer[g],T=null!=P.seriesdataAfterUpdate?P.seriesdataAfterUpdate[f]:h[g].data[f],E=e.dataObject.getXYvalue(kt,Bt(a),s,c,u,T[p],"z",e.zscale);w?(O=.1*E,k=0):(O=.1*(E+ta("2.5%",hl(n.width,n.height))),k=E/2*.1)}else{var L=a===Si.charttype.line||nr(a),z=e.dataObject.isPolarAxisCategory,R=r&&r.marker?bt(r.marker,i.marker)("size"):i.marker.size,j=!L&&!z||null!=R&&""!==R?R||1:bt(r,i)("strokeWidth");j=null!=S.size&&""!==S.size?1:+j,x&&(S=r?ac(v.hoveroptions,r.hoveroptions,!0):v.hoveroptions);var M,I;z?(M=.7,I=.35):L?(M=.9,I=.4):w?(M=1,I=0):(M=2,I=1),O=j*M,k=j*I}if(A.attr("transform","translate("+n.left+","+n.top+")").style("display",""),F(t,null,w?{symbol:S.symbol}:S,{color:w?null:C,symbolSize:{inner:k,outer:O},transform:[l,o],imageSize:15}),w){var B=b===Sl?{fill:Pl}:e.legendHighlight.getEffect(b,"scatter",rl.test(b)?C:Pl,{fill:Pl,stroke:C},g);t.styles(B)}}}function y(e,t,a,o,s,c,u,h,f,g){var y=e.seriesdata,x=Tt(y[t].yaxiscolumnorder),b=Ct[x].scale,C=e.chartTypes[t].value,k=C==Si.charttype.arearange,O=C===Si.charttype.gantt,A=e.dataObject.isPolarAxisCategory,S=k||O?1:null,P=null!=l.bandwidth?l.bandwidth():null,T=e.renderer[t],E=null!=T.seriesdataAfterUpdate?T.seriesdataAfterUpdate[s]:y[t].data[s],L=E[o];if(o=L&&i.getActualX(L)===a?o:w(a,E),null!=o&&!X(e.seriesdata[t])){f.set(t,o),jc.updateSharedInfo(e,f,t);var z,D=E[o],R=e.dataObject.getXYvalue(kt,Bt(C),l,b,x,D,"x",null,S),j=e.dataObject.getXYvalue(kt,Bt(C),l,b,x,D,"y",null,S),M=y[t].plotoptions,I=r.chart.plot.plotoptions[Si.charttypenames.get(C)],B=e.zcEventType||"mousemove",H=ar(M,I,e,B),V=ar(M,I,e,"cursor");C===Si.charttype.line||C===Si.charttype.scatter&&h?jt.hideCursor(e.eventHandler.trackerElement):jt.addCursor(V);var F=d3.event||e.eventHandler.targetEvent;if(it(H)&&at(H,c,F,{x:R,y:j}),et(H,F)){if(Rt=g||Rt,(null!=Rt||u)&&ir(C)){var N=e.systemConf.chart.axes.yaxis[x||0].reversed,Y=bt(M,I)("border")||{},_=C===Si.charttype.bullet?0:Y.radius;_=Y&&Y.show?_:0;var T=e.renderer[t],W=e.dataObject.getTransRectValue("radius",null,null,null,null,_),U=e.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),Q=ua(e,ma(I,e)?o:t,G(t,s,o),t),q=U===Sl?{fill:Pl}:e.legendHighlight.getEffect(U,"bar",rl.test(U)?Q:Pl,{fill:Pl,stroke:Q},t),K=zt(d.selectAll("#zcbarhighlight"),"path",[1],".","class","highlight"+t+s).styles(q);u&&!ur(e.chartTypes[t].value)&&(Rt=Z(t,s,o)),m(K,Rt,W,T,N,u);var $=M&&M.levelMarker?ac(I.levelMarker,M.levelMarker,!0):I.levelMarker;if(O&&$.enabled){var J=e.dataObject.getTransRectValue("radius",null,null,null,0),tt={fill:$.color||Q},rt=zt(d.selectAll("#zcbarhighlight"),"path",[1],"#","id","levelMarkerpath");rt.styles(tt),m(rt,st,J,T,N)}}if(nr(C)||A){z=!0;var nt=d.selectAll("#zcareahighlight");p(nt,C,M,I,t,s,o,l,b,x,P,c.poly,u)}if(nr(C)||cr(C)||C===Si.charttype.line||A||O){var lt=d.selectAll("#zcscatterhighlight"),ot=zt(lt,"g",[1],".","class","highlight"+t);if(k||O){var ct,dt,ut=zt(ot,"g",[1],".","class","yrangePos_0"),ht=zt(ot,"g",[1],".","class","yrangePos_1"),ft={};if(O){ft=T.markerProperties;var gt=T.getMarkerPosition(D,ft.subseriesIndex,0,T);kt?(R=gt.y,j=gt.x+gt.width/2,ct=gt.y+gt.height,dt=gt.x+gt.width/2):(R=gt.x+gt.width/2,j=gt.y,ct=gt.x+gt.width/2,dt=gt.y+gt.height)}else ct=e.dataObject.getXYvalue(kt,Bt(C),l,b,x,D,"x",null,0),dt=e.dataObject.getXYvalue(kt,Bt(C),l,b,x,D,"y",null,0);v(ut,C,M,I,ct,dt,l,b,x,y,s,t,o,z,{size:ft.size,hoveroptions:I.hoveroptions.end}),v(ht,C,M,I,R,j,l,b,x,y,s,t,o,z,{size:ft.size,hoveroptions:I.hoveroptions.start})}else v(ot,C,M,I,R,j,l,b,x,y,s,t,o,z,null,u)}A&&d.selectAll("#zcareahighlight,#zcscatterhighlight").attrs({"clip-path":null,transform:"translate("+(n.left+e.plotarea_approx.x)+","+(n.top+e.plotarea_approx.y)+")"}).style("display","")}e.eventHandler.oldInfo={nearestPoint:c,type:C,chartObj:e,isNoInfo:!1}}}function x(t,a,r){var n,l,c,d,u,h,f,g,p=e.systemConf.chart.axes.xaxis.reversed,m=Si.scale.invert(Fo,t,o,kt,null,p),v=e.seriesdata,y=e.dataObject.isCombinationalChart,x=-1,w=[],C=null,k=!1,O=!1,A=null,S="x",P="y";kt&&(S="y",P="x");var z=v.map(function(v,z){var D=e.chartTypes[z].value;d=null==d?Or(e,D,null):d;var j=Tt(v.yaxiscolumnorder),M=e.systemConf.chart.axes.yaxis[j||0].reversed,I=r[j].eventscale,B=e.dataObject.containsNegativeData(j),V=Lt(i,"y",j),F={};if(X(v))return[null];x++;var N=e.renderer[z],_=N.commonOption||qa(e.rendererConf[z],z);jt.bulletEvents||(jt.bulletEvents=new Si.BulletEvent(e,N.commonOption,a,r[0].scale));var U=jt.bulletEvents;return v.data.map(function(r,v){var x=null!=N.seriesdataAfterUpdate?N.seriesdataAfterUpdate[v]:r;if(u=b(m,x)||null,null!=u){var X=ur(D);if(Dt){var G=da(i.getClr(x[u[0]]),e);return c=m,w[z]=w[z]||[],w[z][v]=u,q=G?0:null,O=!0,ir(D)&&(g=g||Si.scale.ordinalSubInvert(t,c,s,o,kt,D,p),f=g,f=e.userdata.seriesdata.stackGroup?e.userdata.seriesdata.stackGroup[f]:f),q}if(X){var Z=null;return x.forEach(function(r,l){var o=mr(e,r,a,I,j),s=da(i.getClr(r),e),d=R(o,t);s&&0==d&&!O&&null===Z&&(O=!0,c=l,n=o,Z=d)}),Z}if(ir(D)){for(var Q=u.length,q=null,K=0;Q>K;K++){var $=u[K];if(null==x[$])return null;var J=pr(e,x[$],v,_);if(V(x[$]))return null;var et=R(J,t,M),G=da(i.getClr(x[$]),e);G&&0==et&&!O&&(q=0,O=!0,c=$,n=J,D===Si.charttype.gantt&&(l=N.getGanttLevelMarkerProp(x[$],v,$,N,_))),Si.charttype.bullet===D&&(A=U.getCurrentPoint(t,x[$]))}return q}if(nr(D)||cr(D)||D===Si.charttype.line){u=u[0],d=or(D)?Or(e,D,e.dataObject.getXYvalue(kt,Bt(D),a,I,j,x[u],"z",e.zscale)/2):d;var G=da(i.getClr(x[u]),e);
if(lr(D)||D===Si.charttype.line){var tt=N.getSymbolSize?N.getSymbolSize(r):0,at=N.getSymbolBBox?N.getSymbolBBox(r):null;if(null!=at){var rt=E(x[u],i,a,I,j,D,null,S,P,at);q=H(t,rt[0],rt[1])}else q=T(x[u],t,a,I,j,D,null,S,P),q-=tt/2}else{var nt=D==Si.charttype.arearange;F=L(z,v,u,x,x[u-1],x[u],x[u+1],e.dataObject,i,kt,Bt(D),a,I,j,B,nt);var it=nr(D)||y?D===Si.charttype.bubblepie?W(t,F.curpt,z,v,x[u]):Y(t,F.points):!0;it&&(q=0==v?H(t,F.curpt,F.curNext):v==x.length-1?H(t,F.prevCur,F.curpt):Il([H(t,F.prevCur,F.curpt),H(t,F.curpt,F.curNext)]))}return G&&(null==d||d>q)&&null!=q&&(O=!0,d=q,f=z,h=v,c=u,C=F.points,k=D===Si.charttype.line||cr(D)),q}}})}),D=[],j=[],M=z.map(function(e,t){var a=Il(e);return null!=a?(D[t]=e.indexOf(a),j[t]=e.length):D[t]=j[t]=null,a});return k&&(M=M.map(function(t,a){var r=e.chartTypes[a].value;return r===Si.charttype.line||cr(r)?t:null})),f=Dt&&g?f:M.indexOf(Il(M)),null!=M[f]&&O||(f=null),it(A)&&"marker"===A.type?f=null:it(f)&&(A=null),{seriesPos:f,itemPos:c,itemPosShared:w,subseriesindex:D,subseriesLength:j,highlightpoint:n||null,levelMarkerPoint:l||null,distance:M[f],poly:C,currentQualitativeRangePoint:A,customPoint:Ht.getClosest(t,d)}}function b(e,t){var a=l.domain(),r=a[e],n=null,o=Lt(i,"x");return t.forEach(function(e,t){var a=!o(i.getX(e))&&i.getX(e)===r;return a&&(null==n?n=[t]:n.push(t)),a}),n}function w(e,t){var a=null,r=Lt(i,"x");return t.some(function(t,n){var l=!r(i.getX(t))&&i.getX(t)===e;return l&&(a=n),l}),a}function C(t,a,r,n,i,l){var o=e.systemConf.notes&&e.systemConf.notes.addOnDoubleclickEvent;if(Si.annotation&&o){if(!t){var s=e.seriesdata,c=n[r],d=c.slice(),u=d.splice(0,d.length);s.length>1&&u.push(s[a].seriesname),t={coordinate:[i,l],data:u,basedOn:"plot"}}Si.annotation.addNotes(e,t)}}function k(t,a,r,n){var l=a.invert(kt?t.y:t.x),o=n.seriesdata.chartdata,s=Zl(function(e){return i.getX(e)}).left,c=o.map(function(t,a){if(t.disabled)return null;var r=e.renderer[a];return t.data.map(function(e,t){return e=null!=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[t]:e,s(e,l,0,e.length-1)})}),d=o.map(function(n,l){if(n.disabled)return null;var o=e.renderer[l],s=Tt(n.yaxiscolumnorder),d=e.chartTypes[l].value,u=r[s].scale;return n.data.map(function(r,n){r=null!=o.seriesdataAfterUpdate?o.seriesdataAfterUpdate[n]:r;var h,f,g=c[l][n];if(r[g]&&(h={x:a(i.getX(r[g])),y:u(Bt(d)?r[g].y+r[g].y0:i.getY(r[g],s))},f=da(i.getClr(r),e)),g>0){var p=fl(t.x-h.x),m={x:a(i.getX(r[g-1])),y:u(Bt(d)?r[g-1].y+r[g-1].y0:i.getY(r[g-1],s))},v=fl(t.x-m.x),y=p>v?g-1:g;p=p>v?v:p;{N(h,t),N(t,m)}return{dist:f?p:null,xbis:y}}if(0==g){var p=f&&h?fl(t.x-h.x):null;return{dist:p,xbis:g}}})}),u=[],h=[],f=d.map(function(e,t){if(!e)return null;var a=e.map(function(e){return e.dist}),r=Il(a),n=a.indexOf(r);return u[t]=r?n:null,h[t]=r?e[n].xbis:null,r}),g=f.indexOf(Il(f)),p=h[g];return{itemPos:p,seriesPos:g,subseriesindex:u[g]}}function O(t,a,r){var n,l,o,s,c,d,u,h,f,g,p=e.seriesdata,m=null,v=e.dataObject.isPolarAxisCategory,y=(e.dataObject.isBubbleEnabled?e.zscale.range()[1]/2+50:null,null),x="x",b="y";kt&&(x="y",b="x"),p.map(function(p,w){var C=e.chartTypes[w],k=C.value,O=(C.name,k==Si.charttype.arearange),A=Or(e,k);X(p)||(e.dataObject.isCombinationalChart?(!it(n)||(it(h)?null!=A&&n>=A:y>A||null==y||null==A))&&(n=A):n=null==n?A:n);var L,z=e.renderer[w],D=Tt(p.yaxiscolumnorder),R=r[D].scale,j=e.dataObject.containsNegativeData(D),I=O?1:null,B={};return X(p)?[null]:p.data.map(function(r,p){r=null!=z.seriesdataAfterUpdate?z.seriesdataAfterUpdate[p]:r;var y=z.getSymbolSize&&!or(k)?z.getSymbolSize(r):0,C=v?r.map(function(t){var r=e.dataObject.getXYvalue(kt,Bt(k),a,R,D,t,"x"),n=e.dataObject.getXYvalue(kt,Bt(k),a,R,D,t,"y");return{x:r,y:n}}):null;return r.map(function(A,V){if(!S(A,i,D)){var F;if(cr(k)){var N=z.getSymbolBBox?z.getSymbolBBox(A):null;if(null!=N){var Y=E(A,i,a,R,D,k,I,x,b,N);l=H(t,Y[0],Y[1])}else l=T(A,t,a,R,D,k,I,x,b),l-=y/2;if(or(k)&&(F=l<=(s=e.dataObject.getXYvalue(kt,Bt(k),a,R,D,A,"z",e.zscale)/2),o=o||F,F||(l-=s)),k===Si.charttype.bubblepie){var _=S(A,i,D)?{x:0,y:0}:{x:e.dataObject.getXYvalue(kt,Bt(k),a,R,D,A,"x"),y:e.dataObject.getXYvalue(kt,Bt(k),a,R,D,A,"y",null,I)};l=W(t,_,w,p,A)?l:ll}}else{var X=P(A,w,p,V,r,t,L,k,a,R,D,j,O,C,v);l=X.distance,B=X.polygonPoints,L=A}var U;if(or(k)&&o){if(F)if(c=e.dataObject.getXYvalue(kt,Bt(k),a,R,D,A,"x"),d=e.dataObject.getXYvalue(kt,Bt(k),a,R,D,A,"y"),u){var G=kl*u.r*u.r,Z=kl*s*s,Q=pl(M(u.cx-c)+M(u.cy-d))<=fl(u.r-s);U=null==u.dist||l<u.dist||!(Z>G&&Q)}else U=!0}else U=null==n||n>=l;var q=da(i.getClr(A),e);q&&U&&null!=l&&(n=l,h=w,f=p,g=V,m=B.points,F&&(u={cx:c,cy:d,r:s,dist:l}))}})})});var w=null;return it(h)&&(w=n),{seriesPos:h,itemPos:g,subseriesindex:f,poly:m,customPoint:Ht.getClosest(t,w)}}function A(){d.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",Sl)}function S(t,a,r){return e.seriesdata[0].type==Si.charttype.stkdarea?!1:null==t||Lt(a,"x")(a.getX(t))||Lt(a,"y",r)(a.getY(t,r))}function P(t,a,r,n,l,o,s,c,d,u,h,f,g,p,m){var v=null,y=L(a,r,n,l,s,l[n],l[n+1],e.dataObject,i,kt,Bt(c),d,u,h,f,g),x=1==y.points.length;m&&(y.points=p);var b=nr(c)||m?Y(o,y.points):!0;if((1==l.length||x)&&!S(t,i,h)){v=I(o,y.curpt);var w=e.dataObject.isCombinationalChart,C=e.dataObject.noofAreaEnabledSeries,k=Or(e,Si.charttype.line);(C>1||1===C&&w)&&v>k&&(v=null)}if(b&&!S(t,i,h)){var O=H(o,y.curpt,y.curNext),A=H(o,y.prevCur,y.curpt),P=0!==n&&S(s,i,h);v=0==n?O:n==l.length-1?A:P?O:Il([A,O])}return{distance:v,polygonPoints:y}}function T(t,a,r,n,i,l,o,s,c){var d={};d[s]=e.dataObject.getXYvalue(kt,Bt(l),r,n,i,t,"x"),d[c]=e.dataObject.getXYvalue(kt,Bt(l),r,n,i,t,"y",null,o);var u=d.x-a[s],h=d.y-a[c];return pl(M(u)+M(h))}function E(t,a,r,n,i,l,o,s,c,d){var u=[];if(S(t,a,i))return 0;var h={};return h.x=e.dataObject.getXYvalue(kt,Bt(l),r,n,i,t,"x"),h.y=e.dataObject.getXYvalue(kt,Bt(l),r,n,i,t,"y",null,o),kt?u.push({x:h.x,y:h.y-d.width/2},{x:h.x,y:h.y+d.width/2}):u.push({x:h.x-d.width/2,y:h.y},{x:h.x+d.width/2,y:h.y}),u}function L(e,t,a,r,n,i,l,o,s,c,d,u,h,f,g,p){var m,v,y,x,b,w,C=p?1:null;v=S(i,s,f)?{x:0,y:0}:{x:o.getXYvalue(c,d,u,h,f,i,"x"),y:o.getXYvalue(c,d,u,h,f,i,"y",null,C)},m=0==a?{x:0,y:0}:S(n,s,f)?v:{x:o.getXYvalue(c,d,u,h,f,n,"x"),y:o.getXYvalue(c,d,u,h,f,n,"y",null,C)},y=a==r.length-1?{x:0,y:0}:S(l,s,f)?v:{x:o.getXYvalue(c,d,u,h,f,l,"x"),y:o.getXYvalue(c,d,u,h,f,l,"y",null,C)},b=S(i,s,f)?{x:0,y:0}:z(o,c,d,e,t,a,u,h,f,g,i,p),x=0==a?{x:0,y:0}:S(n,s,f)?b:z(o,c,d,e,t,a-1,u,h,f,g,n,p),w=a==r.length-1?{x:0,y:0}:S(l,s,f)?b:z(o,c,d,e,t,a+1,u,h,f,g,l,p);{var k=0==a?{x:0,y:0}:S(n,s,f)?v:{x:(m.x+v.x)/2,y:(m.y+v.y)/2},O=a==r.length-1?{x:0,y:0}:S(l,s,f)?v:{x:(y.x+v.x)/2,y:(y.y+v.y)/2},A=0==a?{x:0,y:0}:S(n,s,f)?b:{x:(x.x+b.x)/2,y:(x.y+b.y)/2},P=a==r.length-1?{x:0,y:0}:S(l,s,f)?b:{x:(w.x+b.x)/2,y:(w.y+b.y)/2},T=[];S(n,s,f)&&S(l,s,f)?T.push(v):0==a||S(n,s,f)?T.push(v,O,P,b):a==r.length-1||S(l,s,f)?T.push(k,v,b,A):T.push(k,v,O,P,b,A)}return{points:T,prevCur:k,curNext:O,curpt:v}}function z(e,t,a,r,n,i,l,o,s,c,d,u){var h,f,g=u?0:null;if(t){var p=e.getXYvalue(t,a,l,o,s,d,"y",null,g),m=u?e.getXYvalue(t,a,l,o,s,d,"x",null,g):o.range()[0];a?(f=0==r&&0==n&&0==i?ul(o.range()[0],o(c)):o(d.y0),h={x:f,y:p}):(f=null!=o.bandwidth?o.origRange[0]+o.bandwidth():ul(m,o(c)),h={x:f,y:p})}else{var p=e.getXYvalue(t,a,l,o,s,d,"x"),m=u?e.getXYvalue(t,a,l,o,s,d,"y",null,g):o.range()[0];a?(f=0==r&&0==n&&0==i?hl(o.range()[0],o(c)):o(d.y0),h={x:p,y:f}):(f=null!=o.bandwidth?m+o.bandwidth():hl(m,o(c)),h={x:p,y:f})}return h}function D(e){e.style("display",Sl)}function R(e,t,a){var r=e.x,n=e.y,i=r+e.width,l=n+e.height;a&&(kt?i=(r-=e.width)+e.width:l=n-e.height);var o=r<=t.x&&t.x<=i&&(a&&!kt?l<=t.y&&t.y<=n:n<=t.y&&t.y<=l);return o?0:null}function j(t,a){return R({x:n.left+(e.scrolledX||0),y:n.top+(e.scrolledY||0),width:n.width,height:n.height},{x:n.left+t,y:n.top+a})}function M(e){return e*e}function I(e,t){return M(e.x-t.x)+M(e.y-t.y)}function B(e,t,a){var r=I(t,a);if(0===r)return I(e,t);var n=((e.x-t.x)*(a.x-t.x)+(e.y-t.y)*(a.y-t.y))/r;return 0>n?I(e,t):n>1?I(e,a):I(e,{x:t.x+n*(a.x-t.x),y:t.y+n*(a.y-t.y)})}function H(e,t,a){return pl(B(e,t,a))}function N(e,t){var a=0,r=0;return a=t.x-e.x,a*=a,r=t.y-e.y,r*=r,pl(a+r)}function Y(e,t){for(var a,r,n,i,l,o,s=e.x,c=e.y,d=!1,l=0,u=t.length-1;l<t.length;u=l++)a=t[l].x,n=t[l].y,r=t[u].x,i=t[u].y,o=n>c!=i>c&&(r-a)*(c-n)/(i-n)+a>s,o&&(d=!d);return d}function W(t,a,r,n,l){var o=i.getX(l),s=e.subrenderer[n][o],c=s.data[r],d=c.startAngle,u=c.endAngle,h=bl(t.x-a.x,-(t.y-a.y));return ra(d,u,h)}function X(t){var a=t.plotoptions,n=Et(t.type||e.userdata.seriesdata.type,"string"),i=r.chart.plot.plotoptions[n];return t.disabled||0==rt(ar(a,i,e,"enabled"),!0)}function G(t,a,r){var n=e.renderer[t],i=null!=n.seriesdataAfterUpdate?n.seriesdataAfterUpdate[a]:e.seriesdata[t].data[a];return i[r]}function Z(t,a,r){if(it(t)&&it(r)){a=ic(a,0);var n=e.renderer[t],i=n.seriesdataAfterUpdate[a][r],l=n.commonOption||qa(e.rendererConf[t],t);return pr(e,i,a,l)}}function Q(t,a,r){if(ur(e.chartTypes[0].value)){var n=e.systemConf.chart.plot.plotoptions.heatmap,i=n.symbol&&V(n.symbol);return i?i(hl(t.width,t.height)):Mt(-t.width/2,-t.height/2,t.width,t.height,a,null,kt)}return Mt(t.x,t.y,t.width,t.height,a,r,kt)}function q(t){var a=n.left,r=n.top;return ur(e.chartTypes[0].value)&&(a+=t.x+t.width/2,r+=t.y+t.height/2),[a,r]}function K(t,a){return e.axes.clr.scaleType?oc.getItemIndex(e,e.axes.clr.indexScale,t):null!=a?a:void 0}function J(e){return e=e.split("_"),{levelIndices:e.map(Number),seriesIndex:+e[0],itemIndex:+e[e.length-1]}}function et(e,t){return!it(e)||e&&t.allowDefault===!0}function at(t,a,r,n){var i;if("threshold-marker"===a.type){var l="x"===a.thresholdType?"x":"y.groups["+a.yColumnIndex+"]";i=nc(e.axes,l+".threshold.line").getMetaInfo(a)}else i=nt(a);it(n)&&"object"==typeof n&&(i=ac(i,n,!0,!0)),tt(t,r,i,e)}function nt(t){var r,n=t.currentQualitativeRangePoint,i=ic(t.point,t.data),l=ic(t.level,i&&i.level);if(r=it(l)?J(l):{seriesIndex:t.seriesPos,subSeriesIndex:ic(t.subseriesindex,t.subseriesPos),itemIndex:t.itemPos},a(t.subseriesindex)&&t.subseriesindex.some(function(e){return it(e)?r.subSeriesIndex=e:void 0}),it(n)&&(r.rangeIndex=n.rangeIndex,r.targetIndex=n.targetIndex),it(r.seriesIndex)&&it(r.itemIndex)){if(it(i)&&a(i.data)&&(i=i.data),!a(i)){r.subSeriesIndex=ic(r.subSeriesIndex,0);var o=e.seriesdata,s=e.renderer[r.seriesIndex];i=it(s.seriesdataAfterUpdate)?s.seriesdataAfterUpdate[r.subSeriesIndex][r.itemIndex]:o[r.seriesIndex].data[r.subSeriesIndex][r.itemIndex],it(i.level)&&(r.levelIndices=J(i.level).levelIndices)}r.data=e.dataset.getMetaInfoObj(e,i,r.seriesIndex)}return r.point=i,r}function lt(){dt=e.legendarea.element.selectAll(".legseries").node(),ut=dt?dt.children:[],ht=e.legend.component.highlightItem,ft=r.legend,gt=!1,pt=null,mt=null,vt=r.legend.itemHoverStyle&&r.legend.itemHoverStyle.showOnDataHover,dt&&(yt=dt.clientHeight,xt=dt.scrollHeight>yt)}var ot,st,ct,dt,ut,ht,ft,gt,pt,mt,vt,yt,xt,bt=Si.utils.getValueOfPlotOptions,wt=i.getDataType("x"),Ct=c,u=u,kt=e.dataObject.getAxisRotated(),Ot=r.tooltip.enabled===!0,At=e.container.selectAll(".zohocharts_scroll"),St={target:"plot",chartObj:e},Pt=Si.DataProcessor.helpers,Tt=Pt.getParsedYAxisOrder,Et=Pt.getChartType,Lt=Pt.isCatNull,Dt=Rc.hasSharedSeries(e);dt&&(yt=dt.clientHeight,xt=dt.scrollHeight>yt),lt();var Rt,jt={},It=0,Bt=function(t){return e.dataObject.isstacked(t)},Ht=new Si.CustomPoints(e);return Ht.addPoints(e.cache.thresholdCustomPoints,!0),jt.initializeListener=function(){var a=e.eventHandler;ct=e.eventHandler.tapOldInfo=null,a.trackerElement=zt(d,"rect",[1],".","class","eventhandler"),a.tooltipElement=Si.events.tooltip(t,r,e),a.tooltipElement.initialize(),a.customPoints=Ht;var n=e.eventHandler.trackerElement;n.style("fill-opacity",0);var i=$(r.chart,"zoom.type",!0),l={click:a.click,dblclick:a.doubleclick,contextmenu:a.contextMenu},o={mousemove:a.mouseMove,mouseout:a.mouseOut};if(Ar(n,l,null,St,"chart"),Ar(n,o,null,St,"chartmove"),Ar(t,o,null,St),i&&i!==Sl)Si.setDefaultOptions("zoom",e.systemConf.chart,e.globalProp),a.initializeZoomListener();else{var s={tap:a.click,dbltap:a.doubleclick,singletouchmove:a.mouseMove,touchend:a.mouseOut};Ar(n,{},s,St)}var c=e.eventHandler.tooltipElement,u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h=e.container.node(),f=null;if(e.d3container.on(u,function(){var e=h.getBoundingClientRect();f&&(f.left!==e.left||f.top!==e.top)&&c.hide(c.element),f=e}),"auto"===r.tooltip.pointerEvents){var g=a.tooltipElement.element;g.on("mouseenter",function(){jt.mouseOnTooltip=!0}),g.on("mouseleave",function(){jt.mouseOnTooltip=!1,a.mouseOut()})}},jt.initializeZoomListener=function(){e.zoom=Si.events.zoom(e,kt,r,i);var t=e.eventHandler.trackerElement,a=jl(document.documentElement),n=e.zoom,l=e.eventHandler;n.zmInit();var o=!1,s={mousedown:function(){Sr(t,"chartmove"),Ar(a,c,null,St,"zoommove"),d3.event.preventDefault()}},c={mousemove:function(){e.eventHandler.mousePos=gr(t.node(),d3.event),o||(e.eventHandler.mouseOut(),n.zmStart(e.eventHandler.mousePos),o=!0),n.zmMove(e.eventHandler.mousePos)},mouseup:function(){Sr(a,"zoommove",c);var r=n.zmEnd(e.eventHandler.mousePos);o&&(e.eventHandler.mousePos=gr(t.node(),d3.event),n=e.zoom,n.zoomed(r));var i={mousemove:l.mouseMove,mouseout:l.mouseOut};Ar(t,i,null,St,"chartmove"),o=!1}},d={tap:l.click,dbltap:l.doubleclick,doubletouchmove:function(){e.eventHandler.mousePos=gr(t.node(),d3.event),o||(e.eventHandler.mouseOut(),n.zmStart(e.eventHandler.mousePos),o=!0),n.zmMove(e.eventHandler.mousePos)},touchend:function(){Sr(a,null,c);var r=n.zmEnd(e.eventHandler.mousePos);o?(e.eventHandler.mousePos=gr(t.node(),d3.event),n=e.zoom,n.zoomed(r)):l.mouseOut(),o=!1},singletouchmove:l.mouseMove};Ar(t,s,d,St,"zoom")},jt.updateParams=function(a){e=a,r=e.systemConf,n=e.plotarea,i=e.dataset,l=e.axes.x.eventscale,Ct=e.axes.y.groups,o=e.barscale1,s=e.barscale2,u=e.seriesColor,t=e.tooltip.element,Bt=function(t){return e.dataObject.isstacked(t)},kt=e.dataObject.getAxisRotated(),d=e.staticPaneSVG.selectAll("g.eventgroup"),wt=i.getDataType("x"),Ot=r.tooltip.enabled===!0,e.eventHandler.tooltipElement=Si.events.tooltip(e.tooltip.element,r,e),e.eventHandler.tooltipElement.initialize(),e.eventHandler.bulletEvents=null,Dt=Rc.hasSharedSeries(e),lt(),Ht.removePoints(0,Ht.points.length),Ht.addPoints(e.cache.thresholdCustomPoints,!0),(e.xymultiRenderer||e.dataObject.isPolarAxisCategory)&&_(e.eventHandler.trackerElement,e.plotarea)},jt.mouseMove=function(t){var a=t.element||this;if(e.chartRendered){var n=e.eventHandler.tooltipElement;if(null!=n&&null!=n.timeout&&clearTimeout(n.timeout),e.stopPropogate!==!1&&d3.event.stopPropagation(),e.eventHandler.targetEvent=d3.event,e.xymultiRenderer||e.dataObject.isPolarAxisCategory){e.eventHandler.mousemovetimer&&clearTimeout(e.eventHandler.mousemovetimer);var i=e.eventHandler.trackerElement.node();e.eventHandler.mousePos=gr(i,d3.event),e.eventHandler.mousemovetimer=setTimeout(function(){var t=e.dataObject.noofBarEnabledSeries>0,a=wt===Fo&&(t||Dt)?f:g;a(e.eventHandler.mousePos,e.eventHandler.targetEvent,i)},It)}else{var i=e.svg.node();e.eventHandler.mousePos=gr(i,d3.event);var l=e.eventHandler.mousePos[0],o=e.eventHandler.mousePos[1],s={x:l,y:o},c=d3.event.srcElement||d3.event.target,d=jl(c).attr("id"),h="zctooltip"==a.id||/(zctooltip|tooltipcontent|zctooltipafter|zctooltipbefore)/.test(d);if(!h){var p=e.seriesdata,m=e.chartTypes[0].name,v=p[t.seriesPos].plotoptions,y=r.chart.plot.plotoptions[m],x=e.zcEventType||"mousemove",b=ar(v,y,e,x),w=d3.event||e.eventHandler.targetEvent;if(it(b)&&at(b,t,w),et(b,w)&&(e.eventHandler.oldRenderer=t,t.renderer.defaultMouseOverFunc(t.data,t.seriesPos,t.itemPos)),Ot){var C={left:s.x,top:s.y};w=Pr(d3.event);var k=s.x-w.clientX,O=s.y-w.clientY;C.left-=k,C.top-=O,C.dLeft=k,C.dTop=O;var A={seriesindex:t.seriesPos,subseriespos:t.subseriesPos,color:t.color||u,svgFillFunc:t.renderer.fillColorFunc,itempos:t.itemPos,d:e.dataObject.isHierarchy?t.data.data||t.data:null};n.show(e,C,null,!0,A)}}pt=pt=K(t.data.data||t.data,e.isNonAxisMultiSeriesCategory?t.seriesPos:t.itemPos)}}if(vt&&null!==pt){if(ut[pt]){var S=fc.getLegendData(e);pt!==mt&&null!==mt&&ht(ut[mt],S[mt],mt,ft),ht(ut[pt],S[pt],pt,ft,!0),gt=!0,!xt||e.systemConf.legend.expandable&&e.systemConf.legend.expandable.show||(dt.scrollTop=ut[pt].offsetTop-yt/2)}mt=pt}},jt.mouseOut=function(t,a,n,i,l){if(jt.mouseOnTooltip!==!0){var o=e.seriesdata,s=this;n=n||0;var c=e.chartTypes[0].name,d=e.isNonAxisMultiSeriesCategory&&!e.dataObject.isPolarAxisCategory?o[n].plotoptions:o[0].plotoptions,u=r.chart.plot.plotoptions[c],h=e.eventHandler.oldInfo,f=r.tooltip.hideDelay,g={};h&&(g=ic(h.nearestPoint,g),h.customPoint&&(u=h.customPoint));var p=ar(d,u,e,"mouseout"),m=d3.event||e.eventHandler.targetEvent,v=e.eventHandler.tooltipElement;if(l||e.chartRendered){var y=0;if(it(p))if(!e.xymultiRenderer||null!=h&&!h.isNoInfo){var x;h&&it(h.nearestPoint)?x=h.nearestPoint:a&&(x={seriesPos:0,itemPos:n,point:a.data}),it(x)&&at(p,x,m)}else h&&it(h.customPoint)&&at(p,h.customPoint,m);if(et(p,m)){if(e.xymultiRenderer||e.dataObject.isPolarAxisCategory){m=d3.event;var b=e.eventHandler.trackerElement.node(),w=null!=m?gr(b,m):e.eventHandler.mousePos,C=U(b),k=kt?w[1]:w[0],O=kt?w[0]:w[1],S={x:k,y:O};y=R(C,S)}var P=null!=m?m.relatedTarget:null,T=null!=m?m.target:null;if(e.xymultiRenderer&&0==y&&null!=P&&null!=v&&(T==v.element.node()||T==v.element.selectAll("div#tooltipcontent").node()||P==v.element.node()||P==v.element.selectAll("div#tooltipcontent").node()))return;if(!e.xymultiRenderer&&!e.dataObject.isPolarAxisCategory)if(t=t||e.renderer[n],"zctooltip"==s.id||null!=P&&null!=v&&(T==v.element.node()||T==v.element.selectAll("div#tooltipcontent").node()||T==v.element.selectAll("div#zctooltipafter").node()||T==v.element.selectAll("div#zctooltipbefore").node()||P==v.element.node()||P==v.element.selectAll("div#tooltipcontent").node()||P==v.element.selectAll("div#zctooltipafter").node()||P==v.element.selectAll("div#zctooltipbefore").node())){var E=e.eventHandler.oldRenderer;null!=E&&E.renderer.defaultMouseOutFunc(E.data,e.isNonAxisMultiSeriesCategory?E.seriesPos:E.itemPos,l)}else t.defaultMouseOutFunc(a,n,l)}if(clearTimeout(e.eventHandler.mouseouttimer),e.eventHandler.mouseouttimer=setTimeout(function(){i!==!0&&(clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.timeout=setTimeout(function(){A(),v.hide()},ic(f,150)))},It),gt){if(it(ut[pt])){var L=fc.getLegendData(e);ht(ut[pt],L[pt],pt,ft)}pt=null}gt=!1,jt.hideCursor(e.eventHandler.trackerElement)}}},jt.click=function(t,n,i,o,s){if(e.chartRendered){var c=e.seriesdata,d=e.dataObject.isPolarAxisCategory,h=d3.event&&d3.event.touches,f=e.zcEventType||"click";h&&"taphold"!==f&&(Oc(e),xc=(new Date).getTime(),Cc=this,wc=[t,n,i,o],bc=e);var g=e.eventHandler.tooltipElement,p=d3.event||e.eventHandler.targetEvent;if(e.xymultiRenderer||d){var m=d3.event;ot=e.eventHandler.trackerElement.node();var v=gr(ot,m)||e.eventHandler.mousePos,y=U(ot),b=v[0]-y.x-(d?e.plotarea_approx.x:0),w=v[1]-y.y-(d?e.plotarea_approx.y:0),C={x:b,y:w};ot=this;var k=e.dataObject.noofBarEnabledSeries>0,A=wt===Fo&&k?x:O,S=A(C,l,Ct,r),P=S.seriesPos,o=S.itemPos,T=a(S.subseriesindex)?S.subseriesindex[P]:S.subseriesindex,E=ic(S.customPoint,S.currentQualitativeRangePoint);if(it(E)){var L=ar(null,E,e,f);it(L)&&at(L,E,m),e.eventHandler.oldInfo={customPoint:E,isNoInfo:!0}}if(null==P&&!it(E))return void(h&&(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null));if(it(P))var z=e.chartTypes[P].value,D=c[P].plotoptions,R=r.chart.plot.plotoptions[Si.charttypenames.get(z)],j=ar(D,R,e,f,S.currentQualitativeRangePoint),M=ar(D,R,e,"cursor");if(it(j)){var I=Tt(c[P].yaxiscolumnorder),B=Ct[I].eventscale,t=e.renderer[P],H=null!=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[T]:c[P].data[T],n=H[o];if(ir(z)){var V=S.highlightpoint||Z(P,T,o);jt.addCursor(M),at(j,S,p,{x:V.x,y:V.y})}else{var F=e.dataObject.getXYvalue(kt,Bt(z),l,B,I,n,"x"),Y=e.dataObject.getXYvalue(kt,Bt(z),l,B,I,n,"y"),_=nr(z)||d?null:N({x:F,y:Y},C),W=or(z)?e.zscale(e.dataset.getZ(n))/2:10;if(!(W>=_))return void jt.hideCursor(e.eventHandler.trackerElement);jt.addCursor(M),at(j,S,p,{x:F,y:Y})}}if(et(j,p)&&(g.hide(g.element),jt.hideCursor(e.eventHandler.trackerElement)),h&&"taphold"!==f&&et(j,p)){ct=e.eventHandler.tapOldInfo;var X=S.currentQualitativeRangePoint||{},G=ct&&ct.currentQualitativeRangePoint||{},Q=!ct||ct.itemPos!=o||ct.seriesPos!=P||ct.subseriesindex!=T||X.rangeIndex!=G.rangeIndex||X.targetIndex!=G.targetIndex||(S.highlightpoint&&S.highlightpoint.type||X.type)!=G.type;Q?(e.eventHandler.mouseMove({}),e.eventHandler.tapOldInfo={seriesPos:P,subseriesindex:T,itemPos:o,currentQualitativeRangePoint:X,type:S.highlightpoint&&S.highlightpoint.type||X.type}):(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null)}}else{var q=e.chartTypes[0].name,D=c[e.isNonAxisMultiSeriesCategory?i:0].plotoptions,R=r.chart.plot.plotoptions[q],j=ar(D,R,e,f);if(it(j)&&at(j,s,p),et(j,p)&&(g.hide(g.element),jt.hideCursor(e.eventHandler.trackerElement)),h&&"taphold"!==f&&et(j,p))if(ct=e.eventHandler.tapOldInfo,ct&&(s.level?s.level==ct.level:ct.itemPos==o&&ct.seriesPos==i&&0==ct.subseriesindex))t.defaultMouseOutFunc(n,o),e.eventHandler.tapOldInfo=null;else{if(t.defaultMouseOverFunc(n,i,o),Ot){var K=e.svg.node();e.eventHandler.mousePos=gr(K,d3.event);var b=e.eventHandler.mousePos[0],w=e.eventHandler.mousePos[1],C={x:b,y:w},$={left:C.x,top:C.y},p=Pr(d3.event),J=C.x-p.clientX,tt=C.y-p.clientY;$.left-=J,$.top-=tt,$.dLeft=J,$.dTop=tt;var rt={seriesindex:s.seriesPos,subseriespos:s.subseriesPos,color:s.color||u,svgFillFunc:s.renderer.fillColorFunc,itempos:s.itemPos,d:e.dataObject.isHierarchy?s.data.data||s.data:null};g.show(e,$,null,!0,rt)}e.eventHandler.tapOldInfo={seriesPos:i,subseriesindex:0,itemPos:o,level:s.level}}}}},jt.doubleclick=function(t,a,n){if(e.chartRendered){e.noPropogate&&d3.event.stopPropagation();var i=d3.event&&d3.event.touches;i&&(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null);var o=d3.event||e.eventHandler.targetEvent,s=e.eventHandler.tooltipElement,c=e.seriesdata,d=e.dataObject.isPolarAxisCategory,u=e.zcEventType||"doubleclick";if(e.xymultiRenderer||d){ot=e.eventHandler.trackerElement.node();var h=gr(ot,d3.event),f=U(ot),g=h[0]-f.x-(d?e.plotarea_approx.x:0),p=h[1]-f.y-(d?e.plotarea_approx.y:0),m={x:g,y:p};ot=this;var v=e.dataObject.noofBarEnabledSeries>0,y=wt===Fo&&v?x:O,b=y(m,l,Ct,r),w=ic(b.customPoint,b.currentQualitativeRangePoint);if(it(w)&&!it(A)){var k=ar(null,w,e,u);return it(k)&&at(k,w,o),void(e.eventHandler.oldInfo={customPoint:w,isNoInfo:!0})}var A=b.seriesPos;if(null==A)return;var S=b.itemPos,P=b.subseriesindex instanceof Array?b.subseriesindex[A]:b.subseriesindex,T=e.renderer[A],E=null!=T.seriesdataAfterUpdate?T.seriesdataAfterUpdate[P]:c[A].data[P],t=E[S],L=e.chartTypes[A].value,z=c[A].plotoptions,D=r.chart.plot.plotoptions[Si.charttypenames.get(L)],R=ar(z,D,e,u,b.currentQualitativeRangePoint),j=ar(z,D,e,"cursor");if(ir(L)){if(jt.addCursor(j),it(R)&&at(R,b,o),et(R,o)){var M=ic(b.highlightpoint,{});C(null,A,S,E,M.x,M.y)}}else{var I=Tt(c[A].yaxiscolumnorder),B=Ct[I].eventscale,H=e.dataObject.getXYvalue(kt,Bt(L),l,B,I,t,"x")+(d?e.plotarea_approx.x:0),V=e.dataObject.getXYvalue(kt,Bt(L),l,B,I,t,"y")+(d?e.plotarea_approx.y:0),F=nr(L)||d?null:N({x:H,y:V},m),Y=or(L)?e.zscale(e.dataset.getZ(t))/2:10;Y>=F&&(jt.addCursor(j),it(R)&&at(R,b,o,{x:H,y:V}),et(R,o)&&C(null,A,S,E,H,V)),et(R,o)&&jt.hideCursor(e.eventHandler.trackerElement)}}else{var _=e.chartTypes[0].name,z=c[e.isNonAxisMultiSeriesCategory?a:0].plotoptions,D=r.chart.plot.plotoptions[_],R=ar(z,D,e,u);it(R)&&at(R,{seriesPos:0,itemPos:a,point:t.data},o),et(R,o)&&C(n)}et(R,o)&&(s.hide(s.element),jt.hideCursor(e.eventHandler.trackerElement))}},jt.contextMenu=function(){var t=r.chart.plot.events.contextmenu;if(null!=t){var a=d3.event||e.eventHandler.targetEvent;tt(t,a,e),d3.event.preventDefault()}},jt.addCursor=function(t){var a=h(),t=t||($(r.chart,"zoom.type")&&e.systemConf.chart.zoom.type!=Sl?"crosshair":Tl);a.style("cursor",t)},jt.hideCursor=function(){var e=h();e.style("cursor","default")},jt},function(){"use strict";function e(e,t,a,r,n){return{x:n?t:e,y:n?e:t,width:n?r:a,height:n?a:r}}function t(e,t,a,r){this.chart=e,this.barOptions=t,this.scale={x:a,y:r},this.barOptions=t,this.axesRotated=e.dataObject.getAxisRotated(),this.cache=Jl()}t.prototype.getCurrentPoint=function(e,t){for(var a,r=this,n=r.getCurrentRectangles(t),i=n.length;i--;)if(a=n[i],Cr(e.x,e.y,a))return a;return null},t.prototype.getCurrentRectangles=function(t){if(t.isDummy)return[];var r=this,n=r.chart,i=n.dataset.getX(t);if(r.cache.has(i))return r.cache.get(i);var l,o,s,c,d=r.scale.y,u=r.scale.x,h=n.systemConf.chart.plot.plotoptions.bullet.levelMarker,f=n.systemConf.chart.plot.plotoptions.bullet.targetMarker,g=r.barOptions,p=u(i)+g.levelMarkerPadding,m=u.bandwidth(),v=hl(h.maxBandWidth,m),y="y",x=n.dataset.getDataType(y,0),b=[],w=t[h.dataindex]||[],C=r.axesRotated,k=u.domain().indexOf(i),O=null;a(w)||(w=[w]);var A=w.slice(0);if(x===No){var S=n.dataset.getColumn(y,0);s=it(S.time)?S.time:null}A.push(0),A=A.map(function(e){return x===No?jr(e,null,s).getTime():e}),A=A.sort(C?no:io);var P,T=A.map(function(e){return d(e)});for(A.splice(A.indexOf(0),1),c=T.length-1,P=c-1;c--;)o=T[c+1]-T[c],o>0&&(l=T[c]),l=T[c],o>0&&(O=e(p,l,v,o,C),O.currentStage=A[c],O.type="levelMarker",O.data=t,O.rangeIndex=P-c,O.itemIndex=k,O.events=h.events,O.chartType=n.chartTypes[0],b.push(O));if(f.enabled===!0){var E=0;v=ic(f.size,g.levelMarkerWidth-2*ic(f.padding,g.padding/2)),it(f.size)&&(v=10*hl(v,m/10)),o="line"===f.symbol?ul(ic(f.outerStrokeWidth,f.innerStrokeWidth,0)):v;var L=t[f.dataindex];p=u(n.dataset.getX(t))-E,l=d(L)-E,p+=(m-v)/2,l-=o/2,5>o&&(o=5,l-=2.5);var z=f.events||{},D=z.triggerOffset||0;p-=D/2,l-=D/2,v+=D+2*E,o+=D+2*E,O=e(p,l,v,o,C),O.type="marker",O.data=t,O.currentStage=L,O.itemIndex=k,O.targetIndex=0,O.events=f.events,O.chartType=n.chartTypes[0],b.push(O)}return r.cache.set(i,b),b},t.prototype.getTooltipContent=function(e,t){var a,r=this,n=r.chart,i=n.systemConf.chart.plot.plotoptions.bullet,l=wr(n,i.levelMarker),o=wr(n,i.targetMarker),s=nc(i,"levelMarker.events")||{},c=nc(i,"targetMarker.events")||{},d=("marker"===this.type?o:l)||n.dataset.getColumn("y",0),u=e.currentStage,h=d.datatype,f=n.dataset.getMetaInfoObj(n,e.data,t),g=Lr(d[h],u,h,n,"tooltip"),p={value:u,formattedValue:g,actualData:e.data,data:f};return a="marker"===e.type?tt(c.tooltipContent,p,n,"tooltip")||"Target: "+g:tt(s.tooltipContent,p,n,"tooltip")||"Range: "+g},Si.BulletEvent=t}(),function(e){function t(e,a,r){return this instanceof t?(a=ic(a,[]),r&&(a=t.toCircle(a)),this.chart=e,void(this.points=t.addType(a))):new t(a)}function a(e,t,a,n,i,l){var o=e.eventHandler.oldInfo,s=e.systemConf.tooltip,c=e.systemConf.tooltip.sharedSeriesInfo,d=e.staticPaneSVG.selectAll("g.eventgroup"),u=s.enabled===!0||l===!0,h=e.eventHandler.tooltipElement;o&&o.isNoInfo===!1&&e.eventHandler.mouseOut(),clearTimeout(h.timeout),d.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",Sl);var f=n.x+n.width/2,g=n.y+n.height/2;if(it(a)||(a={x:f,y:g}),it(t)&&(t=Pr(t)),!it(t)){var p=e.svg.node().getBoundingClientRect();t={clientX:f+e.plotarea.left+p.x,clientY:g+e.plotarea.top+p.y}}if(i&&"circle"===n._type&&r(n,f,g,d,e.plotarea),u){var m=br(t,a,f,g,e,null,e.axes.rotated,c,null,!1,!1),v=[n.text,n.formattedValue].join(": "),y=n.marker,x=ic(n.events,{}),b=x.tooltipContent;if(it(b)){var w=tt(b,t,{data:[n.columnInfo],itemIndex:n.itemIndex,point:n.point,pointFormatted:n.formattedValue},e);it(w)&&(v=w)}m.helpers.backgroundColor=ic(s.backgroundColor,y.fillColor,n.color),m.helpers.borderColor=ic(s.borderColor,y.strokeColor,n.color),h.show(e,m,v,!1,m.helpers)}}function r(e,t,a,r,n){var i=r.selectAll("#zcscatterhighlight").style("display",null).attr("transform","translate("+n.left+","+n.top+")"),l=nc(e.marker,"hoveroptions")||{},o={color:e.color,symbolSize:{inner:e.size/2,outer:e.size},transform:[t,a]};F(i,null,l,o)}t.prototype.getClosest=function(e,t){it(t)||(t=Number.MAX_VALUE);for(var a,r,n=this,i=n.points,l=i.length,o=null,s=null,c=t,d=0;l--;)a=i[l],"circle"===a._type?(r=a.triggerOffset||0,d=kr(e.x,e.y,a),r>d&&c>d&&(0>=d&&(s=a),c=d,o=a)):"rect"===a._type&&Cr(e.x,e.y,a)&&(o=s=a);return ic(s,o)},t.prototype.addPoints=function(e,a){return e?(a&&(e=t.toCircle(e)),Array.prototype.push.apply(this.points,t.addType(Et(e))),this):void 0},t.prototype.removePoints=function(e,t){return this.points.splice(e,t||1)},t.prototype.hoverPoint=function(e,t,r,n,i,l){n=n!==!1,i=i!==!1,n&&a(this.chart,t||d3.event,r,e,i,l)},t.prototype.leavePoints=function(){if(this.points.length){var e=this.chart;e.staticPaneSVG.selectAll("g.eventgroup").selectAll("#zcscatterhighlight").style("display",Sl),e.eventHandler.tooltipElement.hide()}},t.toCircle=function(e){return e.forEach(function(e){e._converted||it(e.r)||(e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e.r=ul(e.width,e.height)/2,e._converted=!0)}),e},t.addType=function(e){return e.forEach(function(e){e._type=it(e.r)?"circle":it(e.x)&&it(e.y)&&it(e.width)&&it(e.height)?"rect":"poly"}),e},e.CustomPoints=t}(Si);var Pc={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z",QT:"$Q"},Tc={decimal:"d",exponent:"e","float":"f",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"},Ec={Q:Ur},Lc=Object.keys(Ec).map(function(e){return"\\$"+e}),zc=new RegExp(Lc.join("|"));Si.events.tooltip=function(e,r,n){"use strict";function i(e,t,a,r){e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible");var n=r.type;("x"==n||"xy"==n)&&l(e,t,a,r,"x"),("y"==n||"xy"==n)&&l(e,t,a,r,"y")}function l(e,t,a,r,n){var i=e.staticPaneSVG.selectAll("line."+n+"-crosshair"),l="x"==n&&!e.axes.rotated||"y"==n&&e.axes.rotated;i.attrs({x1:l?t:e.plotarea.left,y1:l?e.plotarea.top:a,x2:l?t:e.plotarea.left+e.plotarea.width,y2:l?e.plotarea.height+e.plotarea.top:a}).styles({"shape-rendering":"crispEdges",stroke:r.color,"stroke-width":r.strokeWidth,"stroke-dasharray":O(r.dashStyle,r.strokeWidth),"pointer-events":Sl})}function o(e,t,a,r,i,l){if($(Si,"tooltip.getTheme")&&it(g.tooltip.theme)&&""!==g.tooltip.theme&&it(n.tooltip.content))return p.getCustomizedVal(n,n.tooltip.content,e,t,a,i,"tooltip",r);var o=d(n.chartTypes[e].name),s=p.getDataPoint(n,null,e,t,a,i),c=ua(n,o?a:e,s,e),u=(l||x).filter(function(r){return!(y[r]&&J(p.getDataPoint(n,r,e,t,a,i)))}),h=jc.getContentTemplate(n,El,u);return p.getCustomizedVal(n,h,e,t,a,i,"tooltip",c)}function s(e,r,i,l,o,s,c,d){var u=p.getColumnIdx("clr"),h=n.seriesdata[e].yaxiscolumnorder||[0,0],f=n.dataObject.pieWithAxis&&!n.dataObject.isCombinationalChart?Rc.getPieColumnIndex(n):p.getColumnIdx("y",h),g=o.keys(),m=o.y_val_pattern,v=jc.getRawSharedContent(n,o,x),y=0,b=function(e,t,a,r,i,o){if(n.ismultiy||null==u){var s=Z(n.seriesdata[t].seriesname)||o.replace(/val/gi,"col");e=e.replace("{{val(null)}}",s)}return p.getCustomizedVal(n,e,t,a,r,l,"tooltip",i,El,d&&d>1?d:El)},w=[];return v.forEach(function(d,u){var h=(a(d)?d:[d]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+f+")}}")||-1!=e.indexOf("{{per("+f+")}}"))});if(a(d)||h){y%=n.seriesdata.length;var x=g[y];if(h&&y++,J(x))return void w.push(u);var C=t(x),k=t(o.get(x)),O=m,A=s;if(a(A)){var S=p.getDataPoint(n,null,C,r,k,l);A=ua(n,c?k:C,S,C)}a(d)?d.forEach(function(e,t){d[t]=b(d[t],C,r,k,A,O)}):v[u]=b(v[u],C,r,k,A,O)}else{var C,k,x=g[0];it(x)?(C=t(x),k=t(o.get(x))):(C=e,k=i),v[u]=p.getCustomizedVal(n,d,C,r,k,l,"tooltip",s,El)}}),v=v.filter(function(e,t){return-1==w.indexOf(t)}),jc.getContentTemplate(n,v)}function c(e,t){return function(){var a=d3.interpolateRound(parseInt(e),parseInt(t));return function(e){return a(e)+"px"}}}function d(e){var t=/(bar|scatter|bubble$|bullet|gantt|wordcloud|waterfall)/.test(e)&&ma(g.chart.plot.plotoptions[e],n),a=/(^pie|funnel|pyramid)/.test(e);return t||a}var u="40%",h="100%",f={element:e},g=n.systemConf,p=n.dataset,m=g.metadata,v=m.axes,y=m.columns,x=v.tooltip||d3.range(y.length),b=g.tooltip,w=null,C=b.position||"relative",k="relative"===C,A={left:50,top:100,rotation:0};
if(b.theme&&""!==b.theme){var S=$(Si,"tooltip.getTheme")&&Si.tooltip.getTheme(b.theme,n);null!==S&&(b=n.systemConf.tooltip=ac(b,S.borderStyle,!0,!0),n.tooltip.content=[S.body],w=S.maxWidth)}var P,T,E,L,z=20,D=rt(b.hookHeight,6),R=it(b.borderWidth)?b.borderWidth:1,j=it(b.borderRadius)?b.borderRadius:5,I=it(b.borderStyle)?b.borderStyle:"solid",B=it(b.padding)?b.padding+"":"5",H=rt(b.withinChart,!0),V=rt(b.hookBorderWidth,/ /g.test(R)?1:+R),F=n.dataObject.getTransRectValue("radius",null,null,null,null,j),N=ta(b.maxWidth||w||u,n.chartarea.width),Y=ta(b.maxHeight||h,n.chartarea.height),_=ul(.05*n.chartarea.width,2*D),W=b.headerContent,X=b.footerContent,U=b.crosshair;return f.initialize=function(){var t=ai(b,n),a=+t+.35*+t,r=null!=n.userdata.canvas?n.userdata.canvas.fontColor:null,i=ct(j),l=b.useChartEffect===!1,o=null;!l&&n.filterEffectsID&&(o="url(#"+n.filterEffectsID+")"),e.styles({width:"auto","box-shadow":b.shadow,opacity:b.opacity,"z-index":b.zindex,"border-radius":i,"border-width":ct(R),"border-style":I,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","pointer-events":b.pointerEvents,filter:o});var s=zt(e,"div",b.borderTop?[b.borderTop]:[],".","class","borderTop");s.styles({height:b.borderTop+"px","border-radius":i,"border-bottom-left-radius":"1px","border-bottom-right-radius":"1px"}),L=zt(e,"div",[1],"#","id","tooltipcontent"),L.styles({"box-sizing":"relative"===C?null:"border-box","max-width":"relative"===C?N+"px":null,"min-width":"relative"===C?_+"px":null,"line-height":(b.lineHeight||a)+"px","word-wrap":"break-word","white-space":"normal","overflow-y":"auto",padding:ct(B)}),Bt(L,[{fontColor:null==b.fontColor&&null==r?"white":b.fontColor||r},b,n.systemConf.canvas,Us],!0),P=zt(e,"div",k?[1]:[],"#","id","zctooltipbefore"),P.styles({"margin-left":-(D+2*V)+"px",border:D+2*V+"px solid transparent"}),T=zt(e,"div",k?[1]:[],"#","id","zctooltipafter"),T.styles({"margin-left":-D+"px",border:D+"px solid transparent"}),E=e.selectAll("div#zctooltipbefore,div#zctooltipafter"),E.styles({"border-color":Pl,"border-top-color":"white",position:"absolute",top:"100%",left:"50%",width:0,height:0,content:" "})},f.show=function(r,n,l,u,h){function f(){if(j)return R.keys().map(function(e){var a=t(e),n=t(R.get(e)),i=p.getColumnIdx("clr"),l=r.seriesdata[a].yaxiscolumnorder||[0,0],o=r.ismultiy||null==i?p.getColumnIdx("y",l):i,s=p.getDataPoint(r,o,a,x,n),c=p.getMetaInfoObj(r,s,a);return{actData:s,metaInfo:c}});var e=p.getDataPoint(r,null,y,x,k,h.d),a=r.dataset.getMetaInfoObj(r,e,y);return{actData:e,metaInfo:a,seriesIndex:y,subseriesIndex:x,itemIndex:k}}it(h)||(h={});var g,m=h.color,v=h.svgFillFunc,y=h.seriesindex,x=h.subseriespos,w=h.subseriesLength,k=h.itempos,O=h.backgroundColor||b.backgroundColor,S=h.borderColor||b.borderColor,R=h.tooltipSharedInfo,j=h.tooltipShared,I=null!=y&&r.chartTypes[y].name||h.chartType&&h.chartType.name;u=null==l&&u===!0,(u||h.inheritColors)&&(g=d(I));var B=m;if(u||h.inheritColors){var _=g?k:y,G=p.getDataPoint(r,null,y,x,k,h.d);B=ua(r,_,G,y)}else a(B)&&(B=B[y%B.length]);B=j?"black":B,S=null!=S?S:B,O=null!=O&&""!=O?O:B,e.styles({visibility:"visible","background-color":O,"border-color":S});var Z,Q,q="",K="",$="",J=L.node();u&&null!=W&&(K=tt(W,d3.event,Z=f(),r)),q+=u?b.content?tt(b.content,d3.event,Z=Z||f(),r):j?s(y,x,k,h.d,R,m,g,w):o(y,x,k,B,h.d):l,u&&null!=X&&($=tt(X,d3.event,Z=Z||f(),r)),L.html(q),Tt(K)||(Q=document.createElement("div"),Q.innerHTML=K,K=Q),Tt($)||(Q=document.createElement("div"),Q.innerHTML=$,$=Q),J.insertBefore(K,J.firstChild),J.appendChild($);{var et=e.node();et.offsetWidth,et.offsetHeight}U.type!=Sl&&r.isAxisCategory&&i(r,n.actLeft||n.left,n.actTop||n.top,U),e.interrupt().transition(),e.transition().delay(0);var at;if("relative"===C){var rt=parseFloat(et.style.left),nt=parseFloat(et.style.top);at=Dc.relative(n,e,r,D,z,H,V,F,N,Y),A=at.hookPosition,(!rt||isNaN(rt)||!nt||isNaN(nt))&&e.styles({left:at.x+"px",top:at.y+"px"}),rt=!rt||isNaN(rt)?at.x:(2*rt+at.x)/3,nt=!nt||isNaN(nt)?at.y:(nt+at.y)/2,e.transition().duration(100).ease(Fl).styleTween("left",c(rt,at.x)).styleTween("top",c(nt,at.y))}else"fixed"===C?(at=Dc.fixed(n,e,r),e.styles({left:at.x+"px",top:at.y+"px"})):(at=Dc.block(n,e,r),e.styles({left:at.x+"px",top:at.y+"px"}).attr("align",at.align));if(L.styles({width:at.w,height:at.h,"max-width":at.maxw,"max-height":at.maxh}),b.borderTop){var lt=v?v(g?k:y,null,null,B,null,null,{width:hl(+at.w,+at.maxw)},!0):S,ot="object"==typeof lt?"url("+M(lt,!0).url+")":lt,st=e.selectAll("div.borderTop");st.styles({background:ot})}if(j)E.style("display",Sl);else{var ct="rotate("+A.rotation+"deg)",dt="50% 0%";E.styles({display:"",left:A.left+"%",top:A.top+"%",transform:ct,"-webkit-transform":ct,"-ms-transform":ct,"transform-origin":dt,"-webkit-transform-origin":dt,"-ms-transform-origin":dt}),P.style("border-top-color",S),T.styles({"border-top-color":O,opacity:1})}},f.hide=function(e){e=null==e?this.element:e,e.style("visibility","hidden"),n.systemConf.tooltip.crosshair.type!=Sl&&n.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},f.destroy=function(){this.element.remove()},f.getTooltipContent=function(){return o.apply(null,arguments)},f};var Dc={};Dc.relative=function(e,t,a,r,n,i,l,o,s,c){function d(t){var a;/(top|bottom)/.test(t)?e.left-S/2<E.left?(a=u(t==xs?"blx":"tlx"),L.x=E.left,T.left=ul(a,e.left-E.left)/S*100):e.left+S/2>E.right?(a=u(t==xs?"brx":"trx"),L.x=E.right-S,T.left=100*(1-ul(a,E.right-e.left)/S)):T.left=50:e.top-P/2<E.top?(a=u(t==ms?"trY":"tly"),L.y=E.top,T.top=ul(a,e.top-E.top)/P*100):e.top+P/2>E.bottom?(a=u(t==ms?"bry":"bly"),L.y=E.bottom-P,T.top=100*(1-ul(a,E.bottom-e.top)/P)):(L.y=e.top-P/2,T.top=50)}function u(e){return r+o[e]+pl(gl(l,2)+gl(l,2))}t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":s+Al,"max-height":c+Al});var h=t.node(),f=h.offsetWidth,g=h.offsetHeight,p=2,m=a.canvasarea,v=a.chartarea,y=n+r+(e.distance||0),x=e.dTop||0,b=e.dLeft||0,w=a.systemConf.tooltip,C=(w.relative||{}).orient,k=(w.borderTop||0,v.width-v.left+v.right),O=v.height,A=Rc.getSize(w,[k,O],[f,g],[s,c]),S=A.w,P=A.h,T={left:50,top:100,rotation:0},E={left:fl(hl(b,0))+(a.scrolledX||0),top:fl(hl(x,0))+(a.scrolledY||0),right:m.width-p-ul(b,0)+fl(hl(b,0)),bottom:m.height-ul(x,0)+fl(hl(x,0))},L={x:e.left-S/2,y:e.top-P-y,maxw:s+Al,maxh:c+Al};if(i&&!a.scrolledX&&!a.scrolledY){var z=e.top-P-y,D=e.left+S+y,R=e.left-S-y,j=e.top+P+y;C=C||(z>E.top?xs:D<E.right?vs:R>E.left?ms:j<E.bottom?ys:null),C==xs?(d(xs),T.rotation=0,T.top=100):C==vs?(L.x=e.left+y,d(vs),T.rotation=90,T.left=0):C==ms?(L.x=e.left-y-S,d(ms),T.rotation=-90,T.left=100):C==ys&&(d(ys),L.y=e.top+y,T.rotation=180,T.top=0)}return L.hookPosition=T,L},Dc.fixed=function(e,t,a){t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":null,"max-height":null}),t.style("border-width",0);var r,n=t.node(),i=n.offsetWidth,l=n.offsetHeight,o=a.canvasarea,s=e.dTop||0,c=e.dLeft||0,d=a.systemConf.tooltip,u=(d.fixed||{}).orient,h=d.borderTop||0,f=ic(d.borderWidth,1),g=Lt(f),p=g.top,m=g.right,v=g.bottom,y=g.left,x=o.width-y-m,b=o.height-p-v,w=Rc.getSize(d,[x,b],[i,l]),C=w.w,k=w.h,O={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},A={x:fl(hl(c,0)),y:fl(hl(s,0))},S=fl(hl(c,0)),P=fl(hl(s,0)),T=C,E=k,L=A.y-k,z=A.x+o.width+C,D=A.x-C,R=A.y+o.height+k,j=0>=s||s>0&&o.height-s>k;return u||(L>O.top?u=xs:z<O.right&&j?u=vs:D>O.left&&j?u=ms:R<O.bottom&&(u=ys)),u===xs?(A.y=P-k-p-v,T=x-(c>0?c:0),r="40%"):u===vs?(A.x=S+o.width,E=b-(s>0?s:0)):u===ms?(A.x=S-C-m-y,E=b-(s>0?s:0)):u===ys?(A.y=P+o.height-(s>0?s:0),T=x-(c>0?c:0),r="40%"):(A.y=P,T=x-(c>0?c:0),r="40%"),w=Rc.getSize(d,[x,b],[T,E]),A.w=w.w+Al,A.h=w.h-h+Al,A.maxw=x-(c>0?c:0)+Al,A.maxh=hl(b-(s>0?s:0),J(d.height)&&J(d.maxHeight)&&it(r)?ta(r,b):1/0)+Al,t.style("border-width",ct(f)),A},Dc.block=function(e,t,a){var r=a.chartarea,n=a.plotarea,i=a.systemConf.tooltip,l=i.block||{},o=i.borderTop||0,s=ic(i.borderWidth,1),c=Lt(s),d=c.top,u=c.right,h=(c.bottom,c.left),f=l.vAlign||xs,g=l.hAlign,p=e.dTop||0,m=e.dLeft||0,v=r.width-h-u,y=r.height,x=Rc.getSize(i,[v,y],["100%",a.tooltip.preCalculatedHeight]),b=x.w,w=hl(x.h,ta(Rc.MAXHEIGHT_BLOCK,y)),C={x:fl(hl(m,0))-ul(m,0)+r.left,y:fl(hl(p,0))-ul(p,0),w:b+Al,h:w-o+Al,align:g};return g===vs?C.x+=v-b:g===ps&&(C.x+=(v-b)/2),C.y+=f===ys?n.top+n.height+(n.bottom-w)-d-u:r.top,C};var Rc={};Rc.MAXHEIGHT_BLOCK="50%",Rc.updatePlotarea4BlockTooltip=function(e){var t=e.systemConf.tooltip,a=t.block||{},r=t.position||"relative";if(t.enabled&&"block"===r){if(J(t.height)&&!t.content){var n=Si.events.tooltip(e.tooltip.element,e.systemConf,e);n.initialize(),e.tooltip.element.selectAll("div#tooltipcontent").html(jc.getContentTemplate(e,El,El,!0)),e.tooltip.preCalculatedHeight=e.tooltip.element.node().clientHeight}else e.tooltip.preCalculatedHeight="20%";var i=e.plotarea;e.tooltip.blockarea=rc(i);var l=a.vAlign||xs,o=ic(t.borderWidth,1),s=Lt(o),c=s.top,d=s.right,u=s.bottom,h=s.left,f=e.chartarea,g=f.width-h-d,p=f.height,m=Rc.getSize(t,[g,p],["100%",e.tooltip.preCalculatedHeight]),v=hl(m.h,ta(Rc.MAXHEIGHT_BLOCK,p))+c+u;l===ps&&(l=xs),i.height-=v,i[l]+=v}},Rc.getSize=function(e,t,a,r){r=r||[];var n=t[0],i=t[1],l=a[0],o=a[1],s=r[0],c=r[1],d=ta(e.width,n,ta(l,n)),u=ta(e.height,i,ta(o,i)),h=ta(e.maxWidth,n,s||d),f=ta(e.maxHeight,i,c||u);return{w:hl(h,d),h:hl(f,u),maxw:h,maxh:f}},Rc.getPieColumnIndex=function(e){var t,a=rt(e.systemConf.chart.plot.plotoptions.bubblepie.dataindex,3);return e.systemConf.metadata.columns.some(function(e,r){return e.dataindex===a?(t=r,!0):void 0}),it(t)?t:e.dataset.getColumnIdx("y",0)},Rc.hasSharedSeries=function(e){return e.systemConf.tooltip.sharedSeriesInfo&&e.isAxisCategory&&!ur(e.chartTypes[0].value)};var jc={};jc.getContentTemplate=function(e,t,r,n){var i,l,o=e.systemConf,s=o.metadata,c=s.axes,d=s.columns,u=r||c.tooltip||d3.range(d.length),h=$l(c.y),f=o.tooltip,g=ta(f.maxWidth||"40%",e.chartarea.width),p=Rc.hasSharedSeries(e),m="column"===f.view,v=[];if(t)v=t;else{if(it(o.tooltip.theme)&&$(Si,"tooltip.getTheme"))u=e.tooltip.content;else if(p){var y=Jl();e.seriesdata.forEach(function(t,a){jc.updateSharedInfo(e,y,a)}),u=jc.getRawSharedContent(e,y,u)}u.forEach(function(e){var t,a=val="";if(d[e]){if(h.length>1&&h.indexOf(e)>-1&&!p){if(i)return;i=!0,u.forEach(function(e){h.indexOf(e)>-1&&(a+="{{col("+e+")}}",val+="{{val("+e+")}}")})}else a="{{col("+e+")}}",val="{{val("+e+")}}";t=[a,val]}else t=e;v.push(t)})}return m?(l=v.reduce(function(e,t){var r;return r=a(t)?"<tr style='vertical-align: top;'><td style='max-width:"+.4*g+"px;'>"+t[0]+": </td><td style='max-width:"+.6*g+"px;'><b>"+t[1]+"</b></td></tr>":"<tr style='vertical-align: top;'><td style='max-width:"+g+"px;'>"+t+"</td></tr>",e+r},""),l="<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>"+l+"</tbody></table>"):l=v.reduce(function(e,t,r){var n;return n=a(t)?t[0]+" : "+t[1]:t,e+n+(r==v.length-1?"":"<br>")},""),n&&(l=l.replace(/{{clr}}/g,"black")),l},jc.updateSharedInfo=function(e,t,a){var r=e.dataset,n=r.getColumnIdx("clr"),i=r.getColumnIdx("y",e.seriesdata[a].yaxiscolumnorder||[0,0]),l="{{val("+(e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?Rc.getPieColumnIndex(e):i)+")}}";t.y_val_pattern=t.y_val_pattern||"",t.y_col_pattern=t.y_col_pattern||"",-1==t.y_val_pattern.indexOf(l)&&(t.y_val_pattern+=l,t.y_col_pattern+=e.ismultiy||J(n)?""!=t.y_col_pattern?"":"{{val(null)}}":"{{val("+n+")}}")},jc.getRawSharedContent=function(e,t,r){var n=e.systemConf.metadata,i=n.axes,l=n.columns,o=$l(i.y),s=e.dataset,c=[],d="",u=e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?Rc.getPieColumnIndex(e):El,h=r.some(function(e){return el.lastIndex=0,"string"==typeof e&&el.test(e)}),f=function(e){var t=it(u)?u:e;return(a(d)?d:[d]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+t+")}}")||-1!=e.indexOf("{{per("+t+")}}"))})},g=e.isAxisCategory;if(h)r.forEach(function(t){it(l[t])&&(t=["{{col("+t+")}}","{{val("+t+")}}"]),d=t,(a(t)||"string"==typeof t)&&o.some(f)&&g?e.seriesdata.forEach(function(){c.push(a(t)?q(t):t)}):c.push(t)});else{var p="{{val("+s.getColumnIdx("x")+")}}",m=t.y_val_pattern,v="{{clr}}",y=t.y_col_pattern,x=p,b=["<div style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:"+v+"''></div>"+y,m];c.push(x),e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart&&(c.push(["{{col("+s.getColumnIdx("y",0)+")}}","{{val("+s.getColumnIdx("y",0)+")}}"]),c.push(["{{col("+s.getColumnIdx("z")+")}}","{{val("+s.getColumnIdx("z")+")}}"])),g?e.seriesdata.forEach(function(){c.push(q(b))}):c.push(q(b))}return c},qi.bar=function(){function e(d){return d.each(function(d){var u=jl(this);e.update=function(){u.transition().call(e)};var h=t.params,f=h.chartObj,g=h.xscale,p=h.stacked,m=h.datasetIndex,v=h.axisrotated,y=h.commonPlotOptions,x=h.color,b=h.labelQueue,w=h.hasNegValue,C=h.yaxiscolumnorder,k=h.dataset,A=f.systemConf,S=(f.plotarea,f.dataObject),P=(h.threshold,h.colorOverlay,A.chart.axes.yaxis[h.yaxiscolumnorder||0].reversed),T=f.systemConf.chart.axes.xaxis.reversed;i=h.yscale;var E=d[m],L=f.defsLocation,z=E.plotoptions,D=E.data,R=f.chartTypes[m].name,j=Si.utils.getValueOfPlotOptions(z,y),M=[v?i.range()[0]:g.range()[1],v?g.range()[1]:i.range()[0]],I=f.patternPallete&&f.patternPallete.length,B=f.dataObject.noofBarEnabledSeries,H="bullet"==R,V="gantt"==R,F="waterfall"==R,N=f.dataset.getDataType("y",C),Y=g.domain(),_=N==Fo?i.domain():null,W=(it(S.hierarchical)?S.getCategories("x"):Y,zt(u,"g",[E],".","class","barseries_"+m));if(!r||!n)return c=!0,void(e.chartRendered=!0);var X,U=z&&z.levelMarker?ac(y.levelMarker,z.levelMarker,!0):y.levelMarker,G=z&&z.border?ac(y.border,z.border,!0):y.border,Z=ma(y,f),Q=Wt(y,z,f,"bar"),K=Q.enabled,$=Q.easingType,J=Q.type,tt=K?100:0;s=c?K?300:0:Q.duration;var at=qa(f.rendererConf[m],m),rt=at.barWidth,nt=(at.levelMarkerWidth,at.padding,at.levelMarkerPadding,at.addRangeBand),lt=f.userdata.seriesdata.stackGroup,ot=lt?$a(m,lt):0;e.getParamValue=function(){return f.dataObject.getTransRectValue.apply(f.dataObject,et(arguments))};var ct,dt,ut;if(U&&(ut=U.color,U.overlayRange="below"),H||V){var ht=V?"marker":"targetMarker";ct=z&&z[ht]?ac(y[ht],z[ht],!0):y[ht],dt=zt(f.staticPaneSVG.selectAll("g.threshold"),"g",ct.enabled!==!0||E.disabled?[]:[m],".","class",V?"markerSeries"+m:"markerSeries")}var ft={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},gt=ft,pt=0,mt=null,vt=null,yt=ft;it(G)&&st(G.show)&&(pt=G.size,mt=G.color,vt=G.style,gt=e.getParamValue("radius",null,null,null,at,G.radius));var xt=O(vt,null==pt?2:pt),bt=e.fillColorFunc=sa(f,m,M),wt=ca(f,m);e.seriesdataAfterUpdate=[],D.forEach(function(t,d){function b(t,a,r,n,l){switch(t){case"x":return v?i(a.y0):e.getParamValue("x",a,r,n,l);case"y":return v?e.getParamValue("y",a,r,n,l):i(a.y0);case"width":return v?1:rt;case"height":return v?rt:1}}function O(e){var t=k.getX(e);return D=p?r(t):r(t)+n(l+d),R=i.bandwidth?i.origRange[0]:v?p?null!=w?i(w):i.range()[0]:null!=w?i(w):i.range()[0]:p?null!=w?i(w):i.range()[0]:null!=w?i(w):null!=i(0)?hl(i(0),i.range()[0]):i.range()[0],R=F?i(e.y0):R,M=v?0:rt,N=v?rt:0,{x:D,y:R,width:M,height:N}}function A(t,a){return G=e.getParamValue("x",t,d,a,at),Q=e.getParamValue("y",t,d,a,at),K=e.getParamValue("width",t,d,a,at),et=e.getParamValue("height",t,d,a,at),{x:G,y:Q,width:K,height:et}}e.getGanttLevelMarkerProp=Tn;var D,R,M,N,G,Q,K,et,st=E.disabled,ht=f.dataObject.updateSeriesdatabyCategories(q(t),Y,_,C,!0);T&&(ht=ht.slice(0).reverse()),e.seriesdataAfterUpdate[d]=ht;var vt;if(null!=o){vt=q(t);for(var Ct=o.count,kt=0;Ct>=kt;kt++)vt.splice(kt,0,[null,null]);if(c){var Ot=g(k.getX(t[0])),At={name:"rect",id:f.id,x:Ot,y:0,width:f.plotarea.width,height:f.plotarea.height},St={chartObj:f},Pt=Qs.get(tc,"rect",At,St);W.attr("clip-path","url("+L+"#"+Pt+")")}}var Tt=null!=o?vt:e.seriesdataAfterUpdate[d];X=J==es||c?s:s/(Tt.length*B);var Et=U&&U.enabled===!0&&(p&&B>0||!st)&&!f.dataObject.isStackedPercentChart&&(lt?f.dataObject.groupedByStack.has(ot):!0),Lt=(p?u:W).selectAll(p?"g.levelMarkerSeries_"+ot:"g.subseries_levelMarker_"+d).data(function(e){return Et?[e]:[]});(p?W:u).selectAll(p?"g.subseries_levelMarker_"+d:"g.levelMarkerSeries_"+ot).remove(),Lt.exit().selectAll("path.levelMarker").transition().duration(tt).attr("d",function(t,a){if(V){var r=jl(this).attr("d"),n=Ft(r),l=n[0].moves[0],o=n[3].moves[1],s=Tn(t,d,a,e,at),c=s.x||l,u=s.y+(v?0:s.height*(P?-1:1))||o,h=v?0:s.width,f=v?s.height:0;return Mt(c,u,h,f,gt,P,v)}var c=e.getParamValue("x",t,d,a,at)||Ft(jl(this).attr("d"))[0].moves[0],u=i(i.domain()[0]),h=v?0:e.getParamValue("width",t,d,a,at),f=v?e.getParamValue("height",t,d,a,at):0;return Mt(c,u,h,f,gt,P,v)}).remove();var Dt=W.selectAll("g.subseries_"+d).data(function(e){return st?[]:[e]});Dt.exit().selectAll("path.zcbar").transition().duration(tt).attr("d",function(t,a){var r=jl(this).attr("d"),n=Ft(r),l=n[0].moves[0],o=n[3].moves[1],s=e.getParamValue("x",t,d,a,at)||l,c=(v?e.getParamValue("y",t,d,a,at):V?e.getParamValue("y",t,d,a,at,null,0):(p?i(t.y0):null!=w?i(w):null!=i(0)?hl(i(0),i.range()[0]):i.range()[0])+2*nt())||o,u=v?0:e.getParamValue("width",t,d,a,at),h=v?e.getParamValue("height",t,d,a,at):0;return Mt(s,c,u,h,gt,P,v)}).remove();var Rt=Dt.enter().append("g").merge(Dt).attr("class","subseries_"+d);if(F){var jt=zt(p?u:W,"g",p||!st?[1]:[],".","class","connectorLines",null);ln(jt,Tt,{chart:f,yaxiscolumnorder:C,axisrotated:v,stacked:p,xscale:g,yscale:i,renderer:e,seriesindex:d,plotoptions:z,commonPlotOptions:y});var It=zt(p?u:W,"g",p||!st?[1]:[],".","class","comparisonLines",null);dn(It,Tt,{chart:f,yaxiscolumnorder:C,axisrotated:v,stacked:p,xscale:g,yscale:i,renderer:e,seriesindex:d,plotoptions:z,commonPlotOptions:y})}var Bt=V?Lt.enter().append("g").merge(Lt):Lt.enter().insert("g",":first-child").merge(Lt);Bt.attr("class",p?"levelMarkerSeries_"+ot:"subseries_levelMarker_"+d),Et&&p&&Y.length!=Tt.length&&Ka(Tt,Y,k,C);var Ht=Bt.selectAll("path.levelMarker").data(Tt,function(e){return V?e:k.getX(e)}),Vt=Ht.enter().append("path").merge(Ht).attr("class","levelMarker");Vt.styles({fill:function(t,r){if(V)return U.color||(Z?f.seriesColor[r%f.seriesColor.length]:x);var n=Z?f.seriesColor[r%f.seriesColor.length]:x,i=a(U.color)?U.color[0]:U.color;if(I){var l=V?Tn(t,d,r,e,at):Vc(t,U,f,at,h,d,m),o=l.x,s=l.y,c=l.width,u=l.height;i=bt(Z?r:m,null,null,i,null,null,{x:o,y:s,width:c,height:u})}return wn(t,U,f,n,ut)||i||n},"fill-opacity":U?U.fillOpacity:null,opacity:function(e){if(it(S.hierarchical)&&it(f.cache.hierarchical)){var t=f.cache.hierarchical;if(t.active)return e.active===!0?1:.1}}}).attr("d",function(t,a){var r=V?Tn(t,d,a,e,at):Vc(t,U,f,at,h,d,m),n=r.x,i=r.y,l=r.width,o=r.height;return V?Mt(n,i,l,o,yt,P,v):v?Mt(i,n,l,o,gt,P,v):Mt(n,i,l,o,gt,P,v)}).attr("level",function(e){return it(S.hierarchical)?e.level:void 0}),U&&(U.color=ut),Ht.exit().remove(),H?(En(dt,Tt,e,d,ct,Z,""),Ai.call(f,ct,e,Tt)):V&&(En(dt,Tt,e,d,ct.start,Z,0),En(dt,Tt,e,d,ct.end,Z,1));{var Nt=Rt.selectAll("path.zcbar").attr("class","zcbar").data(Tt,function(e){return V?e:k.getX(e)}),Yt=Nt.enter().append("path").style("fill-opacity",j("fillOpacity")).attrs({"class":"zcbar",height:0,d:function(e){var t=O(e);return d3.select(this).attr("y",t.y),v?Mt(t.y,t.x,t.width,t.height,ft,P,v):Mt(t.x,t.y,t.width,t.height,ft,P,v)}}).merge(Nt);Yt.attrs({stroke:function(e,t){return wt(Z?t:m,e,mt)},"stroke-width":pt,"stroke-dasharray":xt,level:function(e){return it(S.hierarchical)?e.level:void 0}}).styles({fill:function(t,a){return I?bt(Z?a:m,t,null,null,null,null,{x:e.getParamValue("x",t,d,a,at),y:e.getParamValue("y",t,d,a,at),width:e.getParamValue("width",t,d,a,at),height:e.getParamValue("height",t,d,a,at)}):bt(Z?a:m,t)},opacity:function(e){if(it(S.hierarchical)&&it(f.cache.hierarchical)){var t=f.cache.hierarchical;if(t.active)return e.active===!0?1:.1}},"fill-opacity":j("fillOpacity"),transition:"opacity ease 0.2s"})}if(null==o?Yt.transition().duration(c?X:0).delay(function(e,t){return J==es||c?0:(t*B+m)*X}).attr("d",function(t,a){var r=jl(this),n=parseFloat(r.attr("height"));return G=v&&!V?parseFloat(r.attr("y")):e.getParamValue("x",t,d,a,at),Q=v?e.getParamValue("y",t,d,a,at):V&&!n?e.getParamValue("y",t,d,a,at,null,0):parseFloat(r.attr("y")),K=v?parseFloat(r.attr("height")):e.getParamValue("width",t,d,a,at),et=v?e.getParamValue("height",t,d,a,at):n,Mt(G,Q,K,et,gt,P,v)}).on("end",function(e,t){jl(this).transition().delay(function(){return J==es||c?0:(t*B+m)*X}).duration(X).ease($).attr("d",function(e){var a=A(e,t);return Mt(a.x,a.y,a.width,a.height,gt,P,v)})}).attrs({y:function(t,a){var r=v?"x":"y";return e.getParamValue(r,t,d,a,at)},height:function(t,a){var r=v?"width":"height";return e.getParamValue(r,t,d,a,at)}}):Yt.transition().duration(c?X:0).attrs({d:function(e,t){var a=A(e,t);return Mt(a.x,a.y,a.width,a.height,gt,P,v)},y:function(t,a){var r=v?"x":"y";return e.getParamValue(r,t,d,a,at)},height:function(t,a){var r=v?"width":"height";return e.getParamValue(r,t,d,a,at)}}),Nt.exit().transition().duration(X).remove(),d>0&&p){var _t=zt(W,"g",st?[]:[1],".","class","subdividerseries_"+d),Wt=_t.selectAll("rect").data(Tt,function(e){return k.getX(e)}),Xt=Wt.enter().append("rect").merge(Wt).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:b("width"),height:b("height"),x:function(e,t){return b("x",e,d,t,at)},y:function(e,t){return b("y",e,d,t,at)}});Xt.transition().duration(X).ease($).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:b("width"),height:b("height"),x:function(e,t){return b("x",e,d,t,at)},y:function(e,t){return b("y",e,d,t,at)}}),Xt.exit().remove()}V&&Cn(e,Tt,W,d),e.getMarkerPosition=Ln}),b.push({renderer:e,charttype:"bar",chartObj:f,args:[E,m]})}),e.renderedTimer=setTimeout(function(){c=!0,e.chartRendered=!0},2*s+10),e}var t,r,n,i,l,o,s,c=!1;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e.bandwidth1=function(t){return arguments.length?(r=t,e):r},e.bandwidth2=function(t){return arguments.length?(n=t,e):n},e.barDatasetIndex=function(t){return arguments.length?(l=t,e):l},e.shiftInfo=function(t){return arguments.length?(o=t,e):o},e},qi.line=function(){function e(M){return M.each(function(S){var M=r.params;C=M.chartObj,n=M.xscale,i=M.yscale,v=M.stacked,l=M.datasetIndex,s=M.axisrotated,x=M.commonPlotOptions,d=M.color,y=M.labelQueue,w=M.hasNegValue,c=M.yaxiscolumnorder,o=M.dataset,b=C.systemConf;var I=C.defsLocation,B=S[l],H=B.plotoptions,V=B.data,N=C.chartTypes[l],_=N.name,X=N.value,U=Si.DataProcessor.helpers,G=Si.utils.getValueOfPlotOptions(H,x),Z=X!=Si.charttype.line,Q="arearange"==_,K=C.dataObject.isPolarAxisCategory,$=s?[i.range()[0],n.range()[1]]:[n.range()[1],i.range()[0]],J=C.canvasarea,et=G("mode"),tt=G("dashStyle"),at=rt(G("strokeWidth"),2),nt=G("strokeOpacity"),lt=G("strokeColor"),ot=Gs.IE||Gs.SAFARI||"stepBefore"==et||"stepAfter"==et||"step-before"==et||"step-after"==et||M.thresholdType,st=H&&H.marker?ac(x.marker,H.marker,!0):x.marker,ct=Wt(x,H,C,_),dt=ct.enabled,ut=ct.easingType;L=ct.duration,z=ct.type,z=z==as?ts:z;var ht=H&&H.animation&&H.animation.blink?ac(x.animation.blink,H.animation.blink,!0):x.animation.blink,ft=Kt(C,"marker")&&qt(C,"marker",hl(J.width,J.height))?st.enabled:!1,gt=A(G("lineCap"),tt);f=O(tt,at);var pt=H&&H.animation&&H.animation.marquee?ac(x.animation.marquee,H.animation.marquee,!0):x.animation.marquee;g=pt.enabled,p=pt.duration;var mt=!Z&&!K&&H&&H.gradients?ac(x.gradients,H.gradients,!0):x.gradients,vt=C.dataset.getDataType("x"),yt=C.dataset.getDataType("y",c),xt=vt==Fo?n.domain():null,bt=yt==Fo?i.domain():null,wt=vt!=Fo||it(C.dataObject.hierarchical)?C.dataObject.getCategories("x"):xt,Ct=b.chart.axes.yaxis[c].reversed;vt!=Fo&&0==wt.length&&dt&&z==ls&&(wt=C.dataObject.findXCategories()),e.seriesdataAfterUpdate=[],V.forEach(function(t,a){var r;r=vt==Fo||yt==Fo?C.dataObject.updateSeriesdatabyCategories(q(t),xt,bt,c):t,e.seriesdataAfterUpdate[a]=r,D[a]=Qr(M,r,P,E)});var kt=jl(this);e.update=function(){kt.transition().call(e)},u=zt(kt,"g",[B],".","class","lineseries_"+l),Q&&(u=zt(u,"g",[B],".","class","rangePos_"+E));var Ot,At=K?{inner:.32,outer:.56}:{inner:.4,outer:.7};if(ft&&!ot&&(st.color=B.color||C.seriesColor[l%C.seriesColor.length],Ot=W(st,"marker")+W(ht,"blink"),m=F(u,Ot,st,{color:st.color,symbolSize:At,strokeWidth:at}),delete st.color),ft&&!ot&&ht.enabled&&Y(m.selectAll(".outer,.inner"),ht),ft&&ot?(R.commonRendererProp(r).shiftInfo(P).yrangePos(E),R.chartRendered=!1,kt.call(R)):kt.selectAll("g.scatterseries_"+l).remove(),V.forEach(function(r,g){function p(){var e=vo(D[g](R),D[g](A));return function(t){return e(t)}}var m=B.disabled;if(C.brush&&C.brush.extent){var y=C.axes.x.scale.domain(),x=(C.axes.x.ticks.tickValueObj.ticks,vt==No?y[0].getTime():vt==Fo?wt.indexOf(y[0]):y[0]),b=vt==No?y[1].getTime():vt==Fo?wt.indexOf(y[y.length-1]):y[1],O=vt==Fo?function(e){return wt.indexOf(C.dataset.getX(e))}:function(e){return C.dataset.getX(e)};e.seriesdataAfterUpdate[g]=U.filterDataToViewPort(e.seriesdataAfterUpdate[g],x,b,O)}var A=e.seriesdataAfterUpdate[g];C.systemConf.chart.axes.xaxis.reversed&&(A=A.slice(0).reverse());var S,R=A,H=zt(u,"g",function(e){return m?[]:[e]},".","class","subseries_"+g);if(h=H.selectAll("path.line").data(function(e){return m?[]:[e]}),dt&&z!=is){if(z==ls)R=null!=k?k.map(function(){return Object.create(k[0])}):A.map(function(){return Object.create(A[0])});else{var V=z==ns?o.xidx:o.yidx(c),F=z==ns?n:i,N=K&&Ct&&!v?F.domain().length-1:0;R=A.map(function(e){var t=Object.create(e);if(v&&z!=ns)t.y0=0,t.y=K||null==w||null==F(w)?F.domain()[0]:ul(w,F.domain()[0]);else if(Q&&z==ts){var a=new Array(2),r=C.dataset.getY(e,c,0);a[0]=r,a[1]=null==t[V]?null:null!=w&&null!=F(w)?ul(w,r):r,t[V]=a}else t[V]=null==t[V]?null:K||null==w||null==F(w)?F.domain()[N]:ul(w,F.domain()[0]);return t})}S=q(R)}if(null!=P&&j){var Y=n(A[0][0])+(null!=n.bandwidth?n.bandwidth()/2:0),W=C.dataObject.getXYvalue(s,v,n,i,c,A[A.length-1],"x",null,E)-C.dataObject.getXYvalue(s,v,n,i,c,A[0],"x",null,E),X={name:"rect",id:C.id,x:Y,y:0,width:W,height:C.plotarea.height},G={chartObj:C},J=Qs.get(tc,"rect",X,G);u.attr("clip-path","url("+I+"#"+J+")")}var et=h.enter().append("path").attr("class","line").datum(R,function(e){return o.getX(e)}).attr("d",D[g]).style("stroke",B.color||d).style("fill",Sl).style("stroke-width",at).style("stroke-opacity",null==nt||""===nt?1:nt);dt&&(z==os||z==ls?Xt(R,S,A,wt,z,ut,L,M,function(e){return{d:D[g](e)}},et):z==is?t(et,ut,L):et.transition().duration(L).ease(ut).attrTween("d",p));var tt=(et.merge(h).datum(A,function(e){return o.getX(e)}).attrs({id:"line_"+l,"stroke-dasharray":f}).styles({"stroke-linecap":gt,"stroke-width":at,"stroke-opacity":rt(nt,1),fill:Sl,stroke:function(){if(!Z&&!K&&mt.type){var e={offset:_};mt=T(mt,$,lt||d,nt);var t=Qs.get($s,"svgGradientFill",mt,e);return"url("+I+"#"+t+")"}return lt||d}}),A);if(null!=P){var it=null!=P?Math.abs(C.dataObject.getXYvalue(s,v,e.oldXscale,i,c,A[0],"x",null,E)-C.dataObject.getXYvalue(s,v,n,i,c,A[0],"x",null,E)):null;h.datum(tt).attr("d",D[g]).transition().duration(L).ease(ut).attr("transform",function(){return null==it?null:"translate(-"+it+",0)"}),a(h)}else null==et.node()&&(h.datum(tt).attr("transform",null).transition().duration(L).ease(ut).attr("d",D[g]),a(h));var st=ft&&!ot?"url("+I+"#"+Ot+")":null;et.attrs({"marker-end":st,"marker-start":st,"marker-mid":st}),et.exit().remove()}),!ot||!ft){var St=ft?(st.size||at)*At.outer*10+at/2:0;y.push({renderer:e,charttype:"scatter",chartObj:C,args:[B,l,St,E]})}}),e.renderedTimer=setTimeout(function(){g&&S(u.selectAll("#line_"+l),p,f,e),e.chartRendered=!0,j=!0},j?2*L+20:L+20),e.oldXscale=n,e}function t(e,t,r){e.styles({"stroke-dasharray":function(){return this.getTotalLength()+" "+this.getTotalLength()},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(r).ease(t).style("stroke-dashoffset",0).on("end",function(){a(jl(this))})}function a(e){e.styles({"stroke-dasharray":f,"stroke-dashoffset":null})}var r,n,i,l,o,s,c,d,u,h,f,g,p,m,v,y,x,b,w,C,k,P,E,L,z,D=[],R=qi.scatter(),j=!1;return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.shiftInfo=function(t){return arguments.length?(P=t,e):P},e.yrangePos=function(t){return arguments.length?(E=t,e):E},e},qi.area=function(){function e(k){return k.each(function(k){var O=a.params;h=O.chartObj,r=O.xscale,n=O.yscale,v=O.stacked,m=O.datasetIndex,y=O.axisrotated,c=O.commonPlotOptions,o=O.color,s=O.labelQueue,u=O.hasNegValue,l=O.yaxiscolumnorder,i=O.dataset,d=h.systemConf;var A=h.defsLocation,S=h.dataObject.isPolarAxisCategory,P=k[m],T=P.plotoptions,E=P.data,L=h.chartTypes[m].name,z=Si.utils.getValueOfPlotOptions(T,c),D=z("fillOpacity"),R=z("strokeWidth"),j=z("strokeColor"),M=it(T)?Si.utils.getValueOfPlotOptions(T.marker,c.marker)("enabled"):c.marker.enabled,I=null!=R&&""!=R&&0!=t(R)||null!=j&&""!=j||M,B=Wt(c,T,h,L),H=B.enabled,V=B.easingType,F=B.type;f=B.duration,F=F==as?ts:F;var N=h.dataset.getDataType("x"),Y=h.dataset.getDataType("y",l),_=N==Fo?r.domain():null,W=Y==Fo?n.domain():null,X=N!=Fo||it(h.dataObject.hierarchical)?h.dataObject.getCategories("x"):_,U=d.chart.axes.yaxis[l].reversed;N!=Fo&&0==X.length&&H&&F==ls&&(X=h.dataObject.findXCategories());var G="arearange"==L,Z=G?1:null;e.seriesdataAfterUpdate=[],E.forEach(function(t,a){var i;if(i=N==Fo||Y==Fo?h.dataObject.updateSeriesdatabyCategories(q(t),_,W,l):t,h.brush&&h.brush.extent){var o=h.axes.x.scale.domain(),s=h.axes.x.ticks.tickValueObj.ticks,c=N==No?s[0].getTime():N==Fo?X.indexOf(o[0]):o[0],d=N==No?o[1].getTime():N==Fo?X.indexOf(o[o.length-1]):o[1],u=N==Fo?function(e){return X.indexOf(h.dataset.getX(e))}:function(e){return h.dataset.getX(e)};i=C.filterDataToViewPort(i,c,d,u)}e.seriesdataAfterUpdate[a]=i,h.systemConf.chart.axes.xaxis.reversed&&(i=i.slice(0).reverse()),p=null!=g?null==p||0==p?h.dataObject.getXYvalue(y,v,r,n,l,i[i.length-1],"x")-h.dataObject.getXYvalue(y,v,r,n,l,i[i.length-2],"x"):p:0,w[a]=qr(O,p,g,i,a)});var Q=jl(this);e.update=function(){Q.transition().call(e)};var K;if(S?(K=Q.selectAll("g.areaseries_"+m).data([P]),K.enter().insert("g",":first-child").merge(K).attr("class","areaseries_"+m),K=Q.selectAll("g.areaseries_"+m)):K=zt(Q,"g",[P],".","class","areaseries_"+m),I||M){if(b.commonRendererProp(a).shiftInfo(g),b.chartRendered=!1,G){b.yrangePos(1);var $=qi.line().commonRendererProp(a).shiftInfo(g).yrangePos(0);$.chartRendered=!1,Q.call($)}Q.call(b)}else Q.selectAll("g.lineseries_"+m+",g.scatterseries_"+m).remove();E.forEach(function(t,a){function s(){var e=vo(w[a](p),w[a](d));return function(t){return e(t)}}var c,d=e.seriesdataAfterUpdate[a],p=d;if(H){if(F==ls)p=d.map(function(){return Object.create(d[0])});else{var b=F==ns?i.xidx:i.yidx(l),C=F==ns?r:n,k=S&&U&&!v?C.domain().length-1:0;p=d.map(function(e){var t=Object.create(e);if(v&&F!=ns)t.y0=S&&F===is?hl(0,C.domain()[0]):0,t.y=S||null==u||null==C(u)?C.domain()[0]:ul(u,C.domain()[0]);else if(G&&F==ts){var a=new Array(2),r=h.dataset.getY(e,l,0);a[0]=r,a[1]=null==t[b]?null:null!=u&&null!=C(u)?ul(u,r):r,t[b]=a}else t[b]=null==t[b]?null:S||null==u||null==C(u)?C.domain()[k]:ul(u,C.domain()[0]);return t})}c=q(p)}var T=P.disabled,E=zt(K,"g",function(e){return T?[]:[e]},".","class","subseries_"+a),L=E.selectAll("path.area").data(function(e){return T?[]:[e]}),z=L.enter().append("path").datum(p,function(e){return i.getX(e)}).attr("class","area").style("opacity",D).style("fill",o).attr("d",w[a]);H&&(F==os||F==ls?Xt(p,c,d,X,F,V,f,O,function(e){return{d:w[a](e)}},z):null!=z.node()&&F==is?z.transition().duration(0).delay(f).attr("d",function(e){return w[a](e)}):z.transition().duration(f).ease(V).attrTween("d",s));var R=S?[h.plotarea_approx.radius,h.plotarea_approx.radius]:[y?n(n.domain()[0]):r(r.domain()[1]),y?r(r.domain()[1]):n(n.domain()[0])],j=e.fillColorFunc=sa(h,m,R);if(null!=g&&x){var M=r(d[0][0])+(null!=r.bandwidth?r.bandwidth()/2:0),I=h.dataObject.getXYvalue(y,v,r,n,l,d[d.length-1],"x")-h.dataObject.getXYvalue(y,v,r,n,l,d[0],"x"),B={name:"rect",id:h.id,x:M,y:0,width:I,height:h.plotarea.height},N={chartObj:h},Y=Qs.get(tc,"rect",B,N);
K.attr("clip-path","url("+A+"#"+Y+")")}var _=d,W=z.merge(L).datum(d,function(e){return i.getX(e)}).styles({opacity:D,fill:j(m,null,null,o)});if(null!=g){var Q=null!=g?Math.abs(h.dataObject.getXYvalue(y,v,e.oldXscale,n,l,d[0],"x",null,Z)-h.dataObject.getXYvalue(y,v,r,n,l,d[0],"x",null,Z)):null;L.datum(_).attr("d",w[a]).attr("transform",null).transition().duration(f).ease(V).attr("transform",function(){return null==Q?null:"translate(-"+Q+",0)"})}else null!=z.node()&&F==is?W.datum(_).style("fill-opacity",0).transition().duration(0).delay(f).attr("d",w[a]).style("fill-opacity",null):W.datum(_).style("fill-opacity",null).transition().delay(F!=os&&F!=ls||null==z.node()?0:f).duration(f).ease(V).attr("d",w[a]);L.exit().remove()}),I||M||(G?(s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,m,0,1]}),s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,m,0,0]})):s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,m,0]}))}),e.renderedTimer=setTimeout(function(){e.chartRendered=!0,x=!0},f),e.oldXscale=r,e}var a,r,n,i,l,o,s,c,d,u,h,f,g,p,m=0,v=!1,y=!1,x=!1,b=qi.line(),w=[],C=Si.DataProcessor.helpers;return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.shiftInfo=function(t){return arguments.length?(g=t,e):g},e},qi.scatter=function(){function e(m){return m.each(function(m){var w=v.params;a=w.chartObj,r=w.xscale,n=w.yscale,s=w.stacked,i=w.datasetIndex,d=w.axisrotated,h=w.commonPlotOptions,o=w.color,u=w.labelQueue,g=w.hasNegValue,l=w.yaxiscolumnorder,c=w.dataset,f=a.systemConf;var C=a.defsLocation,k=f.chart.axes.xaxis.reversed,S=f.chart.axes.yaxis[l].reversed,P=jl(this);e.update=function(){P.transition().call(e)};var T=m[i],E=T.plotoptions,L=a.chartTypes[i].value,z=a.chartTypes[i].name,D=L==Si.charttype.bubble,R=lr(L),j=a.dataObject.isPolarAxisCategory,M=T.data,I=zt(P,"g",[T],".","class","scatterseries_"+i);"arearange"===z&&(I=zt(I,"g",[T],".","class","rangePos_"+y));var B=Wt(h,E,a,z),H=B.enabled,F=B.easingType,N=B.type;p=B.duration;var _=E&&E.marker?ac(h.marker,E.marker,!0):h.marker,W=_.symbol,X=_.size;R?(X=rt(X,1),N=N==Go?qo:N):(X=(null==X||""==X?t(null!=E?Si.utils.getValueOfPlotOptions(E,h)("strokeWidth"):h.strokeWidth)||2:X)*(j?.56:.7),N=N==ts||N==as?es:N,N=N==ns?rs:N,o=T.color||o);var U=V(W,X),G=R?ma(h,a):!1,Z=10*X,Q=N==qo?0:_.outerFillOpacity,K=N==qo?0:_.outerStrokeOpacity,$=N==qo?0:_.innerFillOpacity,J=N==qo?0:_.innerStrokeOpacity,et=null!=_.imageUrl&&""!==_.imageUrl,tt={name:_.imageUrl},at=O(_.outerDashStyle,_.outerStrokeWidth),nt=O(_.innerDashStyle,_.innerStrokeWidth),lt=A(_.outerLineCap,_.outerDashStyle),ot=A(_.innerLineCap,_.innerDashStyle),st=e.fillColorFunc=sa(a,i,null,R?null:!0),ct=ca(a,i);e.seriesdataAfterUpdate=[];var dt=a.dataset.getDataType("x"),ut=a.dataset.getDataType("y",l),ht=b.isCatNull(c,"x"),ft=b.isCatNull(c,"y",l),gt=dt==Fo?r.domain():null,pt=ut==Fo?n.domain():null,mt=dt!=Fo||null==r.domain||it(a.dataObject.hierarchical)?a.dataObject.getCategories("x"):gt;if(M.forEach(function(t,u){function f(e){switch(N){case es:var t=null!=g&&null!=n(g)?n(ul(g,n.domain()[0])):n.origRange[0];return d?t:a.dataObject.getXYvalue(d,s,r,n,l,e,"x",null,y);case rs:var t=(null!=g&&null!=r(g)?r(ul(g,r.domain()[0])):r.origRange[0])+(null!=r.bandwidth?r.bandwidth()/2:0);return d?a.dataObject.getXYvalue(d,s,r,n,l,e,"x",null,y):t;case qo:case Ko:case ls:case os:case is:return a.dataObject.getXYvalue(d,s,r,n,l,e,"x",null,y);default:var i=(d?n:r).origRange,o=d&&S||!d&&k?i.length-1:0;return i[o]}}function m(e){switch(N){case es:var t=null!=g&&null!=n(g)?n(ul(g,n.domain()[0])):n.origRange[0];return d?a.dataObject.getXYvalue(d,s,r,n,l,e,"y",null,y):t;case rs:var i=(null!=g&&null!=r(g)?r(ul(g,r.domain()[0])):r.origRange[0])+(null!=r.bandwidth?r.bandwidth()/2:0);return d?i:a.dataObject.getXYvalue(d,s,r,n,l,e,"y",null,y);case qo:case Ko:case ls:case os:case is:return a.dataObject.getXYvalue(d,s,r,n,l,e,"y",null,y);default:var o=(d?r:n).origRange,c=d&&k||!d&&S?o.length-1:0;return o[c]}}function v(e){return(!j||e&&!e.isDummy)&&(j||L===Si.charttype.stkdarea||!ht(c.getX(e))&&!ft(c.getY(e,l)))?D?a.dataObject.getXYvalue(d,s,r,n,l,e,"z",a.zscale,y):Z:0}function O(e){var t=v(e);return t>0&&("line"==W||"vertical-line"==W)?"line"==W?{width:t,height:yt||1}:"vertical-line"==W?{height:yt||1,width:t}:void 0:null}var A;if(A=dt==Fo||ut==Fo?a.dataObject.updateSeriesdatabyCategories(q(t),gt,pt,l):t,a.brush&&a.brush.extent){var P=a.axes.x.scale.domain(),z=(a.axes.x.ticks.tickValueObj.ticks,dt==No?P[0].getTime():dt==Fo?mt.indexOf(P[0]):P[0]),M=dt==No?P[1].getTime():dt==Fo?mt.indexOf(P[P.length-1]):P[1],B=dt==Fo?function(e){return mt.indexOf(a.dataset.getX(e))}:function(e){return a.dataset.getX(e)};A=b.filterDataToViewPort(A,z,M,B)}e.seriesdataAfterUpdate[u]=A;var V,X,rt,vt=T.disabled;if(N==os||N==ls){if(V=A,k&&(V=V.slice(0).reverse()),X=V,N==ls)X=V.map(function(){return Object.create(V[0])});else if(N==os){var xt=j&&S&&!s?n.domain().length-1:0;X=V.map(function(e){var t=Object.create(e),a=j||null==g||null==n(g)?n.domain()[xt]:ul(g,n.domain()[0]);return s&&(t.y0=0,t.y=a),t[c.yidx(l)]=a,t})}rt=q(X)}var bt=zt(I,"g",function(){return vt?[]:[A]},".","class","subseries_"+u),wt=function(e){return e},Ct=bt.selectAll("g.scatter").data(wt).attr("class","scatter"),kt=Ct.enter().append("g").attr("class","scatter"),Ot=kt.size(),At=N!=cs?p:p/Ot,St=function(e,t){return(!j||e&&!e.isDummy)&&(j||L===Si.charttype.stkdarea||e&&!e.isDummy&&!ht(c.getX(e))&&!ft(c.getY(e,l)))?[{color:G?a.seriesColor[t%a.seriesColor.length]:o,index:G?t:i,data:e}]:[]};H&&(N==os||N==ls?Xt(X,rt,V,mt,N,F,p,w,function(e){return{transform:function(t,a){return"translate("+f(e[a])+","+m(e[a])+")"}}},kt,"scatter"):kt.attr("transform",function(e){return"translate("+f(e)+","+m(e)+")"+(et&&N===Ko?" scale(0)":"")}).transition().delay(function(e,t){return N==cs?t*At:0}).duration(At).ease(F).attr("transform",function(e){return"translate("+a.dataObject.getXYvalue(d,s,r,n,l,e,"x",null,y)+","+a.dataObject.getXYvalue(d,s,r,n,l,e,"y",null,y)+")"}));var Pt=kt.merge(Ct),Tt=zt(Pt,"path",St,".","class","outer");Tt.styles({"fill-opacity":Q,"stroke-opacity":K});var Et=zt(Pt,"path",et?[]:St,".","class","inner");Et.styles({"fill-opacity":$,"stroke-opacity":J}),x&&et&&Pt.attr("transform",function(e){var t=jl(this).attr("transform"),a=jl(this).attr("size"),r=v(e);return t+" scale("+a/r+")"}),Pt.transition().delay(function(e,t){return N!=os&&N!=ls||null==kt.node()?N==cs?t*At:0:p}).duration(At).ease(F).attr("transform",function(e){return"translate("+a.dataObject.getXYvalue(d,s,r,n,l,e,"x",null,y)+","+a.dataObject.getXYvalue(d,s,r,n,l,e,"y",null,y)+")"}).attr("level",function(e){return it(a.dataObject.hierarchical)?e.level:void 0}).styles({transition:"opacity ease .2s",opacity:function(e){if(it(a.dataObject.hierarchical)&&it(a.cache.hierarchical)){var t=a.cache.hierarchical;if(t.active)return e.active===!0?1:.1}}});var Lt=Pt.selectAll("path.outer").attr("d",function(e){var t=jl(this.parentNode).attr("size"),a=v(e.data),r=null!=t?et?a:t:N!=Ko||et?a:0;return U(r)}).styles({"stroke-width":_.outerStrokeWidth,fill:function(e){var t=v(e.data);if(et)return tt.width=tt.height=parseFloat(t),tt.x=tt.y=-parseFloat(t)/2,"url("+C+"#"+Qs.get(Ks,"imageFill",tt)+")";var a=t/2;return st(e.index,e.data,null,_.outerFillColor,null,R?[a,a]:null)},stroke:function(e){return ct(e.index,e.data,_.outerStrokeColor)},"stroke-dasharray":at,"stroke-linecap":lt}),Dt=Pt.selectAll("path.inner").attr("d",function(e){var t=jl(this.parentNode).attr("size"),a=null!=t?t:N!=Ko||et?v(e.data):0;return U(a/2)}).styles({"stroke-width":_.innerStrokeWidth,fill:function(e){var t=v(e.data)/4;return st(e.index,e.data,null,_.innerFillColor,null,R?[t,t]:null)},stroke:function(e){return ct(e.index,e.data,_.innerStrokeColor)},"stroke-dasharray":nt,"stroke-linecap":ot});Lt.transition().duration(At).ease(F).attr("d",function(e){return U(v(e.data))}).styles({"fill-opacity":_.outerFillOpacity,"stroke-opacity":_.outerStrokeOpacity}),Dt.transition().duration(At).ease(F).attr("d",function(e){return U(v(e.data)/2)}).styles({"fill-opacity":_.innerFillOpacity,"stroke-opacity":_.innerStrokeOpacity});var Rt=(E&&E.animation&&E.animation.blink?ac(h.animation.blink,E.animation.blink,!0):h.animation.blink)||{},jt=Rt.enabled;jt&&Y(Ct.selectAll(".outer,.inner"),Rt),Pt.attr("size",function(e){return v(e)}),Ct.exit().remove(),e.getSymbolSize=v,e.getSymbolBBox=O}),null!=Si.labelRenderer){var vt;if(R||D)vt=Z+_.outerStrokeWidth;else{var yt=rt(Si.utils.getValueOfPlotOptions(E,h)("strokeWidth"),2);vt=(_.size||yt)*Z*.5+yt/2}u.push({renderer:e,charttype:"scatter",chartObj:a,args:[T,i,vt,y]})}e.renderedTimer=setTimeout(function(){x=!0,e.chartRendered=!0},p)}),e}var a,r,n,i,l,o,s,c,d,u,h,f,g,p,m,v,y,x=!1,b=Si.DataProcessor.helpers;return e.commonRendererProp=function(t){return arguments.length?(v=t,e):v},e.shiftInfo=function(t){return arguments.length?(m=t,e):m},e.yrangePos=function(t){return arguments.length?(y=t,e):y},e},qi.pie=function(){function e(t){return t.each(function(t){function s(t,a){var r=Pr(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:P[a%P.length],coordinates:[r.pageX,r.pageY],element:this,data:t}}var c=C.params;k=c.chartObj,M=c.commonPlotOptions,P=c.color,B=c.notesArray,I=k.systemConf;var d=c.labelQueue,u=c.yaxiscolumnorder,h=c.dataset,f=c.datasetIndex||0,U=k.defsLocation,et=k.seriesdata[f],at=M.maxRadius+" _ "+M.outerPadding+" _ "+M.innerRadius,nt=k.chartTypes[f].name;H=nt===Bs;var lt=nt===Is,ot=!H&&!lt;q=ot?rt(M.dataindex,3):h.yidx(u),Q=Z||(H?k.plotarea_approx:k.plotarea),z=Q.width,L=Q.height,O=rt(Q.radius,hl(z,L)/2),m=!1;var st,ct=et.plotoptions,dt=M.datalabels,ut=Si.utils.getValueOfPlotOptions(ct,M),ht=rt(ut("maxRadius"),250),ft=M.levelMarker,gt=lt?+ut("outerPadding"):0,pt=ut("strokeWidth");w=void 0!==M.baseValue?M.baseValue:0;var mt=ci(dt,k),vt=mt?+(dt.padding||0)+(Zn(dt,k)?2*(Qn(dt,k)+qn(dt,k)):0):0,yt={},xt=0;if(v=Zn(dt,k),gt+=lt?vt:0,V=hl(ht,O-gt),lt&&mt){var bt=z*K,wt=z-2*V;bt>wt&&(vt=yt.padding=5,xt=ul(bt-wt,0),V-=xt/2)}if(A=ia(M,V),pt=rt(pt,1),H&&ft.enabled){var Ct,kt;if(it(M.bandWidth)||it(M.maxBandWidth)){var Ot=rt(M.maxBandWidth,V),At=hl(ta(M.bandWidth,V,V-A),Ot);Ct=-(V-A-At)/2,kt=-(V-A-At)/2,st=0===At?"hidden":null}else Ct=hl(0,ta(ft.innerPadding,O,0)),kt=hl(0,ta(ft.outerPadding,O,0));V+=kt,A-=Ct}V-=.5*pt,F=ul(A,V),W=(ct&&ct.models?ac(M.models,ct.models,!0):M.models)||{};var St=Wt(M,ct,k,nt),Pt=St.enabled,Tt=Pt?tt?200:St.duration:0,Et=tt?Fl:St.easingType,Lt=St.type,Dt=0==rt(ar(ct,M,k,"enabled"),!0),Rt=Dt?null:ar(ct,M,k,"cursor")||Tl;T=jl(this),E=zt(T,"g",[t],".","class","piegroup"),E.styles({"stroke-width":pt,"fill-opacity":ut("fillOpacity"),"stroke-opacity":M.strokeOpacity,cursor:Rt,visibility:st}),$.startAngle(M.startAngle).endAngle(M.endAngle).value(function(e){return e.disabled?0:fl(e[q]||0)});var jt=$(t=ot?t:et.data[0]);e.data=jt,Y=jt.reduce(function(e,t){return e+(t.value?1:0)},0),e.total=S=jt.reduce(function(e,t){return e+t.value},0),e.arc=J;var Mt=!0;if(Mt)J.outerRadius(F).innerRadius(A);else{var It=ta(ft.interPadding,F,10),Bt=t.length,Ht=(F-A-(Bt-1)*It)/Bt;J.innerRadius(function(e,t){return t*(Ht+It)+A}).outerRadius(function(e,t){return(t+1)*Ht+t*It+A}).startAngle(M.startAngle).endAngle(function(e){return e.endAngle})}j=uo().innerRadius(F).outerRadius(F+vt);var Vt=uo().innerRadius(F).outerRadius(F);N=pt;var Ft=o(E),Nt=(Ft.height+pt)/V,Yt=(Ft.width+pt)/V,_t=V+hl((z-2*gt-xt-(Ft.width+pt))/Yt,(L-2*gt-xt-(Ft.height+pt))/Nt);if(_t=hl(ht,ul(V,_t)),H){at+=" _ "+M.bandWidth+" _ "+ft.bandWidth+" _ "+ft.innerPadding+" _ "+ft.outerPadding;var Xt=k.axes.y.groups[0].scale,Ut=Xt.domain();jt.forEach(function(e){var t=e.data[q];p=g,(g=0>t)?(e.startAngle=Xt(null!=w?Math.min(w,Ut[1]):Ut[1]),e.endAngle=Xt(Math.max(t,Ut[0]))):(e.startAngle=Xt(null!=w?Math.max(w,Ut[0]):Ut[0]),e.endAngle=Xt(Math.min(e.value,Ut[1])))})}else _t!=V&&(V=_t,A=ia(M,V),F=ul(A,V),J.outerRadius(F).innerRadius(A),j=uo().innerRadius(F).outerRadius(F+vt),Vt=uo().innerRadius(F).outerRadius(F),o(E));var Gt=!H&&W.type?"url("+U+"#"+r(a())+")":null,Zt=[F,F],Qt=e.fillColorFunc=sa(k,f,Zt),qt=ca(k,0);if(_=2*ta(ut("sliceOutHeight"),V,0),R=E.selectAll(Xo).data(),D=zt(E,Xo,jt),D.attrs({"clip-path":Gt,id:function(e,t){return"arc_"+t}}).styles({display:"block",fill:function(e,t){return Qt(t,e.data)},stroke:function(e,t){return qt(t,e.data,M.strokeColor)}}),xr(k,D,Dt),!Dt){var Kt=function(e,t){var a=s(e,t);k.eventHandler.mouseMove(a)},$t=function(t,a){k.eventHandler.mouseOut(e,t,a)},Jt=function(t,a){var r=s(t,a);k.eventHandler.click(e,t,0,a,r)},ea=function(e,t){var a=Si.annotation?jn(e.data,null):e.data,r=j.centroid(e);r=[r[0]+X,r[1]+G];var n={coordinate:r,data:a,basedOn:"plot"};k.eventHandler.doubleclick(e,t,n)},aa={target:"plot",touchleave:!0,chartObj:k},ra={mousemove:Kt,mouseout:$t,click:Jt,dblclick:ea},na={singletouchmove:Kt,touchend:$t,tap:Jt,dbltap:ea};Ar(D,ra,na,aa)}if(/(\D)+onebyone/.test(Lt)&&!tt){var la=Lt==ds,oa=la?Tt:Tt/Y,da=0;D.transition().ease(Et).duration(function(e){return la?oa*(e.value/S):oa}).delay(function(e){var t=oa*da;return da+=la?e.value/S:1,t}).call(la?i:n)}else{var ua;ua=tt?at!=y?n:l:Lt==us?l:Lt==gs?n:i,D.transition().duration(Tt).ease(Et).call(ua).on("end",function(e){var t=e.data.disabled||e.startAngle===e.endAngle;jl(this).style("display",t?Sl:"block")})}e.renderedTimer=setTimeout(function(){if(y=at,x=A,b=F,H)k.renderer[0].endFunctions();else if(D.style("display",function(e){return e.data.disabled||!e.value?Sl:null}),Si.labelRenderer&&!ot){var t=[X,G],a=[E.datum(),0,jt,F,S,j,Vt,J,t,yt];d.push({renderer:e,charttype:Is,chartObj:k,args:a}),d.push({renderer:e,charttype:"pieInnerLabels",chartObj:k,args:a})}Si.annotation&&!ot&&(B=Si.annotation.preprocessAnnotations(k.seriesdata,0,function(e,t,a){var r=j.centroid(jt[a]);return[r[0]+X,r[1]+G]},B,k,c)),e.chartRendered=!0,tt=!0},Tt+1e3/60)}),e}function t(e){for(var t=[],a=[],r=0,n=0;e>n;n++)"gear1"==W.type?a.push([r++,0],[r++,1],[r++,1]):a.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(a),t}function a(){var e=-1,a=W.count,r="zigzag"==W.type?-50+A/5:"sun"==W.type?-1:-10,n=t(a),i=_l().range([0,2*kl]).domain([0,"gear1"==W.type?3*a:2*a]),l=_l().range([A,F]).domain([r,1]),o=oo().curve(Nl("linearClosed")).radius(function(e){return l(e[1])}).angle(function(t,a){return e="gear"==W.type?a%2==0?e+1:e:"gear1"!=W.type&&a%2!=0?e+1:e,i("gear1"==W.type?e++:e)});return o(n[0])}function r(e){var t={name:"pieModels",id:k.id,d:e},a={chartObj:k},r=Qs.get(tc,"polygon",t,a);return r}function n(e){Kr(e,J,[tt?x:A,A],[tt?b:A,F])}function i(e){e.attrTween("d",function(e){var t=vo(e.startAngle,e.endAngle);return function(a){return e.endAngle=t(a),J(e)}})}function l(e){e.attrTween("d",function(e,t){var a,r,n=R[t]||R[R.length-1];g?(a=tt&&n&&p?n.endAngle:e.startAngle,r=tt&&n&&p?n.startAngle:e.startAngle):(a=tt&&n&&!p?n.endAngle:H?e.startAngle:M.startAngle,r=tt&&n&&!p?R[t]?n.startAngle:n.endAngle:H?e.startAngle:M.startAngle);var i=vo(a,e.endAngle),l=vo(r,e.startAngle);return function(a){return e.endAngle=i(a)||0,e.startAngle=l(a)||0,J(e,t)}})}function o(t){var a=[];a[q]=1;var r=T.append(Xo).attr("d",J($([a])[0],e.data.length-1)).styles({fill:Sl,stroke:Sl}),n=U(r.node());r.remove();var i=ea(n,z,L,V,N);return X=H?Q.x:i[0],G=H?Q.y:i[1],t.attr("transform",function(){return"translate("+X+","+G+")"}),n}function s(){c=c||k.staticPaneSVG.selectAll("g."+td+"_0"),d=d||k.staticPaneSVG.selectAll("g.link_0"),u=u||k.staticPaneSVG.selectAll("g.label_0"),f=f||k.staticPaneSVG.selectAll("g.boundboxseries_0"),h=h||k.staticPaneSVG.selectAll("g.innerboundboxseries_0"),m=!0}var c,d,u,h,f,g,p,m,v,y,x,b,w,C,k,O,A,S,P,T,E,L,z,D,R,j,M,I,B,H,V,F,N,Y,_,W,X,G,Z,Q,q,K=.3,$=fo().sort(null),J=uo(),et=function(e){return $t(_,(e.startAngle+e.endAngle)/2)},tt=!1;return e.commonRendererProp=function(t){return arguments.length?(C=t,e):C},e.plotarea=function(t){return arguments.length?(Z=t,e):Z||Q},e.innerRadius=function(t){return arguments.length?(A=t,e):A},e.defaultMouseOverFunc=function(t,a,r){if(1!=Y){m||s();var n=et(t),i={transform:"translate("+n[0]+","+n[1]+")"};D.transition().ease(Fl).attr("transform","translate(0,0)"),E.selectAll("#arc_"+r).transition().ease(Fl).attrs(i),c.selectAll("#innerlbl0_0_"+r).transition().ease(Fl).attrs(i),v||d.selectAll("#link0_0_"+r).style("stroke-width",3*e.lineStrokeWidth),"circular"==e.showlabel&&(u.selectAll("#lbl0_0_"+r).transition().ease(Fl).attrs(i),f.selectAll("#boundboxlbl0_0_"+r).transition().ease(Fl).attrs(i)),u.selectAll("#lbl0_0_"+r).style("text-shadow","0 0 0 rgba(0,0,0,1)"),h.selectAll("#boundboxinnerlbl0_0_"+r).transition().ease(Fl).attrs(i)}},e.defaultMouseOutFunc=function(t,a,r){m||s();var n={transform:"translate(0,0)"};return u.selectAll(_o).style("text-shadow",null),v||d.selectAll(Xo).style("stroke-width",e.lineStrokeWidth),!xc&&r?(D.attrs(n),c.selectAll(_o).attrs(n),h.selectAll(Xo).attrs(n),void("circular"==e.showlabel&&(u.selectAll(_o).attrs(n),f.selectAll(Xo).attrs(n)))):(D.transition().ease(Fl).attrs(n),c.selectAll(_o).transition().ease(Fl).attrs(n),"circular"==e.showlabel&&(u.selectAll(_o).transition().ease(Fl).attrs(n),f.selectAll(Xo).transition().ease(Fl).attrs(n)),void h.selectAll(Xo).transition().ease(Fl).attrs(n))},e},qi.funnel=function(){function e(i){i.each(function(i){function o(){e.renderedTimer=setTimeout(function(){var t=a(p);if(Si.labelRenderer){var r=[g.seriesdata,0,p,m,z+2+q,O,dt,t];F.push({renderer:e,charttype:Hs,chartObj:g,args:r}),F.push({renderer:e,charttype:"funnelInnerLabels",chartObj:g,args:r})}Si.annotation&&(G=Si.annotation.preprocessAnnotations(g.seriesdata,0,function(e,t,a){return[A[A.length-1-a].bottomLeft[0]+(k/2-dt.width/2),A[A.length-1-a].bottomLeft[1]+(z+2+q)]},G,g,lt)),ft=!0,e.chartRendered=!0},bt?ft?Ct:300:0)}function h(e){e._groups[0].reverse(),e.data(p)}function V(t,a){var r=Pr(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:P[a%P.length],coordinates:[r.pageX,r.pageY],element:this,data:t}}lt=f.params,g=lt.chartObj,X=lt.commonPlotOptions,P=lt.color,G=lt.notesArray,_=lt.yaxiscolumnorder,C=lt.dataset,U=g.systemConf;var F=lt.labelQueue;nt=g.defsLocation,k=g.plotarea.width,S=g.plotarea.height,ot=!1,W=i[0].plotoptions;var tt=Si.utils.getValueOfPlotOptions(W,X);$=U.legend.imagePallete||rr(g),dt.canOverlap=tt("canOverlap"),Q=tt("split"),L=tt("threeDimension");var ut=X.emptyFunnel;Z=X.datalabels.padding;var pt=ci(X.datalabels,g),mt=ca(g,0);j=ic(X.minPadding,L?4:1),M=ic(X.maxPadding,10);var vt=Wt(X,W,g,Hs),yt=vt.type,xt=vt.easingType,bt=vt.enabled,wt=vt.duration,Ct=bt?200:0;q=ta(tt("outerPadding"),S,0)/2,x=tt("stemHeight"),b=tt("stemWidth"),et="width"===tt("weighted"),at=tt("weighted")===Sl,et&&(x=b=0,Q=!0),p=i=i[0].data[0],m=p.reduce(function(e,t){return e+(C.getY(t,_)&&!t.disabled?1:0)},0),y=m-1;var kt=s();dt.height=S-2*kt-.01*S-2*q;var Ot=tt("coneWidth");if(Ot=ta(Ot,dt.height,.95*dt.height),dt.width=hl(k,Ot),R=c(dt.height),dt.gapHeight=!bt||Q||ft?R:yt==rs?R:0,(et||at)&&it(X.maxSliceHeight)&&(dt.height-=ul(0,dt.height-R*y-ta(X.maxSliceHeight,dt.height)*m)),pt){var At=k*ct,St=k-dt.width;At>St&&(Z=dt.datalabelPadding=5,dt.width-=ul(At-St,0))}x=ta(x,dt.height,.2*dt.height),w=b=ta(b,dt.width,x*dt.width/dt.height)/2,v=dt.height-x,z=.05*dt.height,z=ul(ht,(z-p.length)/p.length),D=z=L?dt.canOverlap?z+M/2:R/2-gt:0,e.total=O=p.reduce(function(e,t,a){return e+(p[a].disabled?0:fl(C.getY(p[a],_)||0))},0),J=ul.apply(null,p.map(function(e,t){return p[t].disabled?0:fl(C.getY(p[t],_))/O})),Y=_l().domain(et?[0,J]:[x,dt.height]).range([dt.width/2-b,0]),N=_l().domain(et?[0,J]:[x,dt.height]).range([dt.width/2+b,dt.width]),A=t(p),K=[dt.width,dt.height],st=e.fillColorFunc=sa(g,0,K);var Pt=0==rt(ar(W,X,g,"enabled"),!0),Tt=Pt?null:ar(W,X,g,"cursor")||Tl,Et=jl(this);if(I=zt(Et,"g",[i],".","class","funnelgroup"),I.attr("transform","translate("+(k/2-dt.width/2)+","+(z+2+q)+")").styles({cursor:Tt,"stroke-opacity":tt("strokeOpacity"),"stroke-width":tt("strokeWidth")}),B=zt(I,"g",[1],".","class","ellipsegroup"),H=zt(I,"g",[1],".","class","trapezoidgroup"),T=zt(H,Xo,p),h(T),T.attr("id",function(e,t){return"funnel"+t}).styles({"fill-opacity":X.fillOpacity,fill:function(e,t){return st(t,e)},stroke:function(e,t){return mt(t,e,X.strokeColor)}}),E=zt(B,Xo,L?p:[]),h(E),E.attr("id",function(e,t){return"ellipse"+t}).styles({"fill-opacity":X.fillOpacity,fill:function(e,t){return st(t,e,.5)},stroke:function(e,t){return mt(t,e,X.strokeColor,.5)}}),xr(g,T,Pt),xr(g,E,Pt),!Pt){var Lt=function(e,t){var a=V(e,t);g.eventHandler.mouseMove(a)},Dt=function(t,a){g.eventHandler.mouseOut(e,t,a)},Rt=function(t,a){var r=V(t,a);g.eventHandler.click(e,t,0,a,r)},jt=function(e,t){var a=Si.annotation?jn(e,null):e,r=A[i.length-1-t].bottomLeft;r=[r[0]+(k/2-dt.width/2),r[1]+(z+2+q)];var n={coordinate:r,data:a,basedOn:"plot"};g.eventHandler.doubleclick(e,i.length-1-t,n)},Mt={target:"plot",touchleave:!0,chartObj:g},It={mousemove:Lt,mouseout:Dt,click:Rt,dblclick:jt},Bt={singletouchmove:Lt,touchend:Dt,tap:Rt,dbltap:jt};Ar(T,It,Bt,Mt),Ar(E,It,Bt,Mt)}var Ht=dt.canOverlap?2*b/dt.width*z:z+gt,Vt="M0,0L"+(dt.width/2-b)+","+v+"L"+(dt.width/2-b)+","+dt.height+"A"+b+","+Ht+",0,0,0,"+(dt.width/2+b)+","+dt.height+"L"+(dt.width/2+b)+","+v+"L"+dt.width+",0A"+dt.width/2+","+z+",0,0,0,0,0A"+dt.width/2+","+z+",0,0,0,"+dt.width+",0",Ft=zt(I,Xo,!ft&&ut.show&&bt?[1]:[],"#","id","emptyFunnel");if(Ft.attr("d",Vt).styles({stroke:ut.color||"grey",fill:Sl}),r(Vt),ft)T.transition().duration(Ct).ease(Fl).attr("d",function(e,t){return d(A[p.length-1-t])}),E.transition().duration(Ct).ease(Fl).attr("d",function(e,t){return u(A[p.length-1-t])}),l(i,Ct),o();else{l(i,0);var Nt=0,Yt=0;T.transition().duration(function(e){var t=C.getY(e,_);return yt==Jo?e.disabled||!t?0:et||at?wt/m:fl(t)/O*wt:wt}).delay(function(e){var t=C.getY(e,_);Nt+=e.disabled||!t?0:et||at?wt/m:fl(t);var a=yt==Jo?et||at?wt-Nt:(O-Nt)/O*wt:0;return a||0}).ease(xt).attrTween("d",function(e,t){return n(e,p.length-1-t,"funnel",yt)}).on("end",function(){Yt++}),Nt=0,E.transition().duration(function(e){var t=C.getY(e,_);return yt==Jo?e.disabled||!t?0:et||at?wt/m:fl(t)/O*wt:wt}).delay(function(e){var t=C.getY(e,_);Nt+=e.disabled||!t?0:et||at?wt/m:fl(t);var a=yt==Jo?et||at?wt-Nt:(O-Nt)/O*wt:0;return a||0}).ease(xt).attrTween("d",function(e,t){return n(e,p.length-1-t,"ellipse",yt)});var _t=setInterval(function(){Yt==p.length&&(yt!=rs&&(dt.gapHeight=R,A=t(p),T.transition().duration(bt?250:0).delay(50).ease(Fl).attr("d",function(e,t){return d(A[p.length-1-t])}),E.transition().duration(bt?250:0).delay(50).ease(Fl).attr("d",function(e,t){return u(A[p.length-1-t])})),o(),I.selectAll(Xo+"#emptyFunnel").transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(_t))},10)}})}function t(e){var t=0,a=dt.height,r=0,n=0;return A=[],w=b,e.forEach(function(i,l){var o=e[e.length-1-l],s=C.getY(o,_),c=o.disabled;n=O?(c?0:et||at?s?1/m:0:fl(s)/O)*(dt.height-(m-1)*dt.gapHeight):0,n=n||0,t+=c?0:s,n=r+n;var d=s/O;d=d||0;var u={};t!=O||0!=s&&!c?et?(u.bottomLeft=[Y(d),dt.height-n],u.topLeft=[Y(d),a],u.middleLeft=[Y(d),dt.height-n],u.bottomRight=[N(d),dt.height-n],u.topRight=[N(d),a],u.middleRight=[N(d),dt.height-n]):(u.bottomLeft=[dt.height-n>=v?dt.width/2-b:Y(n),dt.height-n],u.topLeft=[a>=v?dt.width/2-b:Y(r),a],u.middleLeft=[a>=v?dt.width/2-b:u.bottomLeft[0],a>=v&&dt.height-n<=v?v:dt.height-n],u.bottomRight=[dt.height-n>=v?dt.width/2+b:N(n),dt.height-n],u.topRight=[a>=v?dt.width/2+b:N(r),a],u.middleRight=[a>=v?dt.width/2+b:u.bottomRight[0],a>=v&&dt.height-n<=v?v:dt.height-n]):(u.topLeft=u.bottomLeft=u.middleLeft=[Y(et?J:dt.height),0],u.topRight=u.bottomRight=u.middleRight=[N(et?J:dt.height),0]),A.push(u),a=!s||c?dt.height-n:dt.height-n-dt.gapHeight,r=!s||c?n:n+dt.gapHeight}),A}function a(e){var t=[],a=dt.height,r=0,n=0;return e.forEach(function(i,l){var o=e[e.length-1-l],s=C.getY(o,_),c=o.disabled;n=(c?0:et||at?s?1/m:0:fl(s)/O)*(dt.height-(m-1)*dt.gapHeight)/2,n=n||0;var d=n;n=r+n;var u=s/O;u=u||0;var h=et?Y(u):dt.height-n>=v?dt.width/2-b:Y(n),f=et?N(u):dt.height-n>=v?dt.width/2+b:N(n);t.push({rightx:f+Z,leftx:h-Z,y:fl(dt.height-n),y0:fl(dt.height-n+d)}),n+=d,a=!s||c?dt.height-n:dt.height-n-dt.gapHeight,r=!s||c?n:n+dt.gapHeight}),t}function r(e){var t;if(et)t=null;else{var a={name:"FunnelClipPath",id:g.id,d:e},r={chartObj:g};t=Qs.get(tc,"polygon",a,r)}I.attr("clip-path",t?"url("+nt+"#"+t+")":null)}function n(e,t,a,r){var n=i(r,t),l=A[t],o="funnel"==a?vo(d(n),d(l)):vo(u(n),u(l));return function(e){return o(e)}}function i(e,t){var a=rc(A[e==es?0:t]);return e===rs?a.topLeft[0]=a.middleLeft[0]=a.bottomLeft[0]=a.topRight[0]=a.middleRight[0]=a.bottomRight[0]=dt.width/2:(a.middleLeft=a.bottomLeft=a.topLeft,a.middleRight=a.bottomRight=a.topRight),a}function l(e,t){E.each(function(a,r){var n=e[r].disabled||!C.getY(p[r],_),i=n?t:0;i?setTimeout(function(){o(r,n)},i):o(r,n)})}function o(e,t){var a=t?Sl:null;B.selectAll("#ellipse"+e).style("display",a),H.selectAll("#funnel"+e).style("display",a)}function s(){var e=S-2*q,t=.05*e,a=c(e);return t=(t-p.length)/p.length,t=ul(ht,t),t=L?dt.canOverlap?t+M/2:a/2-gt:0}function c(e){var t=X.padding;if(it(t))return tt(t,e,y,g);var a=e*ut;return hl(M,ul(j,a/y))}function d(e){var t=(e.topRight[0]-e.topLeft[0])/2,a=(e.bottomRight[0]-e.bottomLeft[0])/2,r=dt.canOverlap?2*t/dt.width*z:D,n=dt.canOverlap?2*a/dt.width*z:D;return"M"+e.topLeft[0]+" "+e.topLeft[1]+" A"+t+" "+r+" 0 0 0 "+e.topRight[0]+" "+e.topRight[1]+" L"+e.middleRight[0]+" "+e.middleRight[1]+" L"+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+a+" "+n+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]+" L"+e.middleLeft[0]+" "+e.middleLeft[1]+"Z"}function u(e){var t=(e.bottomRight[0]-e.bottomLeft[0])/2,a=dt.canOverlap?2*t/dt.width*z+gt:D;return"M"+e.bottomLeft[0]+" "+e.bottomLeft[1]+" A"+t+" "+a+" 0 0 1 "+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+t+" "+(dt.canOverlap?a:a+gt)+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]}function h(){F=F||g.staticPaneSVG.selectAll("g.link_0"),V=V||g.staticPaneSVG.selectAll("g.label_0"),ot=!0}var f,g,p,m,v,y,x,b,w,C,k,O,A,S,P,T,E,L,z,D,R,j,M,I,B,H,V,F,N,Y,_,W,X,U,G,Z,Q,q,K,$,J,et,at,nt,lt,ot,st,ct=.3,dt={},ut=.375,ht=1,ft=!1,gt=0;return e.commonRendererProp=function(t){return arguments.length?(f=t,e):f},e.defaultMouseOverFunc=function(e,t,a){ot||h(),$?(T.style("opacity",function(e,t){return t===a?null:.4}),E.style("opacity",function(e,t){return t===a?null:.4})):(T.style("fill",function(e,t){return st(t,e,t===a?.6:null)}),E.style("fill",function(e,t){return st(t,e,t===a?1:.5)})),V.selectAll("text").style("text-shadow",null),F.selectAll(Xo).style("stroke-width",null),V.selectAll("#lbl0_0_"+(p.length-1-a)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),F.selectAll("#link0_0_"+(p.length-1-a)).style("stroke-width",1)},e.defaultMouseOutFunc=function(){ot||h(),$?(T.style("opacity",null),E.style("opacity",null)):(T.style("fill",function(e,t){return st(t,e)}),E.style("fill",function(e,t){return st(t,e,.5)})),V.selectAll("text").style("text-shadow",null),F.selectAll(Xo).style("stroke-width",null)},e},qi.pyramid=function(){function e(a){a.each(function(a){function r(t,r){var n=Pr(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:r,color:E[r%E.length],coordinates:[n.pageX,n.pageY],element:t,data:a[r]}}var n=d.params;z=n.chartObj,p=n.commonPlotOptions,E=n.color,v=n.notesArray,h=n.yaxiscolumnorder,u=n.dataset,m=z.systemConf;var i=n.labelQueue;x=z.defsLocation,f=z.plotarea.width,g=z.plotarea.height;var Y=hl(f,g);B=p.datalabels.padding;var _=ci(p.datalabels,z);if(_){var W=f*V,X=f-Y;W>X&&(B=F.datalabelPadding=5,Y-=ul(W-X,0))}F.width=Y,F.height=4*Y/5;var U=a[0].plotoptions,G=Si.utils.getValueOfPlotOptions(U,p);y=m.legend.imagePallete||rr(z);var Z=G("strokeWidth"),Q=G("strokeOpacity"),q=G("threeDimension"),K=G("fillOpacity"),$=Wt(p,U,z,Vs),J=$.enabled,et=$.easingType,tt=N?J?200:0:$.duration;c=$.type;var at=0==rt(ar(U,p,z,"enabled"),!0),nt=at?null:ar(U,p,z,"cursor")||"pointer",it=jl(this);D=zt(it,"g",[a],".","class","pyramidgroup"),D.attr("transform","translate("+(f/2-F.width/2)+","+(g/2-F.height/2)+")").style("cursor",nt),I=a=a[0].data[0],M=a.length,L=[],b=F.height,C=F.width,k=q?F.height/6:0;var lt=25,ot=pl(gl(k/vl(lt*kl/180),2)-gl(k,2));C-=ot,O=_l().range([(C+ot)/2,0]).domain([0,b]),A=_l().range([(C+ot)/2,C]).domain([0,b]),S=_l().range([(C+ot)/2,C+ot]).domain([0,b]),P=_l().range([(C+ot)/2,ot]).domain([0,b]),T=_l().range([0,k]).domain([0,b-k/2]),R=[F.width,F.height],H=e.fillColorFunc=sa(z,0,R);var st=ca(z,0),ct=0;e.total=w=a.reduce(function(e,t){return e+(t.disabled?0:(ct++,fl(u.getY(t,h)||0)))},0);var dt=0;if(a.forEach(function(e){L.push({height:(dt+(e.disabled?0:fl(u.getY(e,h))))/w*(b-k/2)||0,previousHeight:dt/w*(b-k/2)||0}),dt+=e.disabled?0:fl(u.getY(e,h))}),j=zt(D,"g",a),j.attr("id",function(e,t){return"section_"+(M-1-t)}).styles({stroke:function(e,t){return st(M-1-t,a[M-1-t],p.strokeColor)},"stroke-opacity":Q,"stroke-width":Z,"fill-opacity":K,fill:function(e,t){return H(M-1-t,a[M-1-t])}}).each(function(e,t){var a=jl(this),r=zt(a,Xo,[e,e,e,e]);r.attr("class","section_"+(M-1-t))}),xr(z,j,at),!at){var ut=function(){var e=this.parentNode,a=t(jl(e).attr("id").replace(/section_/gi,"")),n=r(e,a);z.eventHandler.mouseMove(n)},ht=function(){var r=this.parentNode,n=t(jl(r).attr("id").replace(/section_/gi,""));z.eventHandler.mouseOut(e,a[n],n)},ft=function(){var n=this.parentNode,i=t(jl(n).attr("id").replace(/section_/gi,"")),l=r(n,i);z.eventHandler.click(e,a[i],0,i,l)},gt=function(e){var r=this.parentNode,n=t(jl(r).attr("id").replace(/section_/gi,"")),i=Si.annotation?jn(a[n],null):a[n],l=L[n].previousHeight,o=[O(l+T(l)/2)+(f/2-F.width/2),T(l)/2+l+(g/2-F.height/2)],s={coordinate:o,data:i,basedOn:"plot"};z.eventHandler.doubleclick(e,n,s)},pt={target:"plot",touchleave:!0,chartObj:z},mt={mousemove:ut,mouseout:ht,click:ft,dblclick:gt},vt={singletouchmove:ut,touchend:ht,tap:ft,dbltap:gt};Ar(j.selectAll(Xo),mt,vt,pt)}var yt=0;j.each(function(e,t){var a=D.selectAll("#section_"+t).selectAll(Xo);if(N)a.transition().duration(tt).ease(Fl).attr("d",function(e,a){return l(t,a)});else{var r=u.getY(e,h),n=c==Jo?(e.disabled||!r?0:fl(r))/w*tt:tt;yt+=e.disabled||!r?0:fl(r);var i=c==Jo?(w-yt)/w*tt:0;a.transition().duration(n).delay(i).ease(et).attrTween("d",function(a,r){return o(e,t,r)})}}),e.renderedTimer=setTimeout(function(){if(Si.labelRenderer){var t=[z.seriesdata,0,a,ct,0,w,F,s(a)];i.push({renderer:e,charttype:Hs,chartObj:z,args:t}),i.push({renderer:e,charttype:"funnelInnerLabels",chartObj:z,args:t})}Si.annotation&&(v=Si.annotation.preprocessAnnotations(z.seriesdata,0,function(e,t,a){var r=L[a].previousHeight;return[O(r+T(r)/2)+(f/2-F.width/2),T(r)/2+r+(g/2-F.height/2)]},v,z,n)),N=!0,e.chartRendered=!0},tt+10)})}function a(e,t){return"M"+O(e+T(e)/2)+" "+(T(e)/2+e)+" L"+A(e+T(e)/2)+" "+(T(e)/2+e)+" L"+A(t+T(t)/2)+" "+(T(t)/2+t)+" L"+O(t+T(t)/2)+" "+(T(t)/2+t)+" L"+O(e+T(e)/2)+" "+(T(e)/2+e)}function r(e,t){return"M"+A(e+T(e)/2)+" "+(T(e)/2+e)+" L"+S(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+S(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+A(t+T(t)/2)+" "+(T(t)/2+t)+" L"+A(e+T(e)/2)+" "+(T(e)/2+e)}function n(e,t){return"M"+S(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+P(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+P(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+S(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+S(e+T(e)/2)+" "+(-T(e)/2+e)}function i(e,t){return"M"+P(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+O(e+T(e)/2)+" "+(T(e)/2+e)+" L"+O(t+T(t)/2)+" "+(T(t)/2+t)+" L"+P(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+P(e+T(e)/2)+" "+(-T(e)/2+e)}function l(e,t,l){var o=L[e].height,s="down"==l?o:L[e].previousHeight;switch(t){case 0:return n(o,s);case 1:return i(o,s);case 2:return a(o,s);case 3:return r(o,s)}}function o(e,t,a){var r=vo(l(c==Jo?t:M-1,a,"down"),l(t,a));return function(e){return r(e)}}function s(e){var t=[];return e.forEach(function(a,r){var n=e.length-1-r,i=L[n].height,l=L[n].previousHeight,o=(i+l)/2,s={x:S(i+T(i)/2),y:-T(i)/2+i},c={x:S(l+T(l)/2),y:-T(l)/2+l},d={x:O(i+T(i)/2),y:T(i)/2+i},u={x:O(l+T(l)/2),y:T(l)/2+l},h=(s.x+c.x)/2,f=(s.y+c.y)/2,g=(d.x+u.x)/2,p=(d.y+u.y)/2,m=(O(o+T(o)/2)+A(o+T(o)/2))/2;t.push({rightx:h+B,leftx:g-B,y:f,y0:i+T(i)/2,midX:m,leftY:p})}),t}var c,d,u,h,f,g,p,m,v,y,x,b,w,C,k,O,A,S,P,T,E,L,z,D,R,j,M,I,B,H,V=.3,F={},N=!1;
return e.commonRendererProp=function(t){return arguments.length?(d=t,e):d},e.defaultMouseOverFunc=function(e,t,a){y?j.style("opacity",function(e,t){return M-1-t==a?null:.2}):j.style("fill",function(e,t){return H(M-1-t,I[M-1-t],M-1-t==a?.5:null)})},e.defaultMouseOutFunc=function(){y?j.style("opacity",null):j.style("fill",function(e,t){return H(M-1-t,I[M-1-t])})},e},qi.sunburst=function(){function e(a){return a.each(function(l){function c(t){var a=Pr(d3.event);return{renderer:e,seriesPos:i(t),coordinates:[a.pageX,a.pageY],element:this,data:t.data,level:o(t)}}var M=u.params;A=M.chartObj,E=M.commonPlotOptions,O=M.color,S=M.notesArray,b=M.yaxiscolumnorder,m=M.dataset,y=A.systemConf;var Y=M.labelQueue;w=A.plotarea.width,C=A.plotarea.height;var _,W=Si.utils.getValueOfPlotOptions,X=E.datalabels,U=+E.outerPadding||0,G="absolute"===E.showAsNegative;j=null,B=0,V=[];var Z=ci(X,A),Q=Z&&Zn(X,A)?Qn(X,A)+qn(X,A):0,q=0==rt(ar(null,E,A,"enabled"),!0),K=q?null:E.events?E.events.cursor||Tl:y.chart.plot.events.cursor||Tl;I=E.events&&E.events.highlightHierarchy;var $=Wt(E,null,A,Ys),J=$.enabled,et=$.type,tt=$.easingType,at=F?J?200:0:$.duration;p=hl(w,C)/2-U-2*Q;var nt=hl(ul(0,ta(E.innerRadius,p)),ta("95%",p)),it=e.fillColorFunc=sa(A,0,[p,p]),lt=ca(A,0);L=function(e){return ul(0,hl(2*kl,h(e.x0)))},z=function(e){return ul(0,hl(2*kl,h(e.x1)))},D=function(e){return f(e.y0)+_/2},R=function(e,t){return t=t||0,function(e){return f(e.y1)+t-_/2}},H=function(e){if(s(e))return 0;var t=m.getY(e,b)||0;return 0>t?G?fl(t):0:t},g=uo().startAngle(L).endAngle(z).innerRadius(D).outerRadius(R(f)),v=uo().startAngle(L).endAngle(z).innerRadius(D).outerRadius(R(f)),T=zt(a,"g",[l],".","class","hierarchychart"),T.attr("transform","translate("+w/2+","+C/2+")").style("cursor",K),x=[],T.selectAll(Xo).each(function(e){x.push({x0:e.x0,x1:e.x1})});var ot=d(l);e.total=ot[0].value,P=zt(T,Xo,ot);var st=[],ct=[],dt=[];if(l.forEach(function(e,t){ct[t]=[[]],ct[t].disabled=e.disabled,dt[t]=[],dt[t].disabled=e.disabled;var a=O[t%O.length];st[t]=_l().domain([0,k(e)]).range([a,oa(a,1.5,"brighter")])}),P.attr("class",function(e){return null!=o(e)?"series_"+i(e):null}).attr("id",function(e){return"arcPath_"+o(e)}).each(function(e,t){e.index=t;var a=i(e),r=o(e);if(B=ul(B,e.depth),e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var n=l[a].plotoptions,s=null!=n?W(n,E)("childrenColors"):E.childrenColors;if(null!=s)e.data.arcColor=s[N[r]%s.length];else{var c=st[a](N[r]);e.data.arcColor=c}}e.children||ct[a][0].push(e),dt[a].push(e),V[r]=e}else e.data.arcColor=Pl}),h=_l().range([0,2*kl]),f=_l().range([nt,p]).domain([ot[0].y1,1]),_=hl(ul(0,ta(E.padding,p,0)),.9*(p-nt)/B),P.transition().duration(at).ease(F?Fl:tt).attrTween("d",F||et===hs?t:et===fs?n:r),P.styles({fill:function(e){return e.fillColor=it(i(e),e.data)},stroke:function(e){return e.depth?E.strokeColor?E.strokeColor:lt(i(e),e.data):"white"},"stroke-opacity":function(e){return e.depth?W(l[i(e)].plotoptions,E)("strokeOpacity"):1},"fill-opacity":function(e){return e.depth?W(l[i(e)].plotoptions,E)("fillOpacity"):0},"stroke-width":function(e){return e.depth?W(l[i(e)].plotoptions,E)("strokeWidth"):0}}),xr(A,P,q),!q){var ut=function(e,t){var a=c(e,t);A.eventHandler.mouseMove(a)},ht=function(t){A.eventHandler.mouseOut(e,t,i(t))},ft=function(t,a){var r=c(t,a);A.eventHandler.click(e,t,i(t),t.itemPos,r)},gt=function(t){if(e.chartRendered){var a=null==t.children?null!=Si.annotation?jn(t,l.length>1?t.parent.data.seriesname:null):t:[t.data.seriesname,t.value],r=v.centroid(t);r=[r[0]+w/2,r[1]+C/2];var n={coordinate:r,data:a,basedOn:"plot"};A.eventHandler.doubleclick(t,i(t),n)}},pt={target:"plot",touchleave:!0,chartObj:A},mt={mousemove:ut,mouseout:ht,click:ft,dblclick:gt},vt={singletouchmove:ut,touchend:ht,tap:ft,dbltap:gt};Ar(P.filter(function(e){return 0!=e.depth}),mt,vt,pt)}e.renderedTimer=setTimeout(function(){if(null!=Si.labelRenderer){var t=uo().startAngle(L).endAngle(z).innerRadius(R(f)).outerRadius(R(f)),a=E.datalabels.padding+Q,r=uo().startAngle(L).endAngle(z).innerRadius(R(f,a)).outerRadius(R(f,a));l.forEach(function(a,n){var i=[ct,n,dt[n],p,function(t,a){if(a===qc)return e.total;var r=e.getProcessedNode(t);return r.parent.value},r,t,v,[w/2,C/2]];Y.push({renderer:e,chartObj:A,charttype:Is,args:i}),Y.push({renderer:e,chartObj:A,charttype:"pieInnerLabels",args:i})})}null!=Si.annotation&&l.forEach(function(t,a){S=Si.annotation.preprocessAnnotations(l,a,function(t){var a=e.getProcessedNode(t),r=v.centroid(a);return[r[0]+w/2,r[1]+C/2]},S,A,M)}),F=!0,e.chartRendered=!0},at+1e3/60)}),e}function t(e,t){var a=vo(F&&x[t]?L(x[t]):0,L(e)),r=vo(F&&x[t]?z(x[t]):0,z(e));return function(t){return g.startAngle(a(t)).endAngle(r(t)),g(e)}}function r(e){var t=vo(0,D(e)),a=vo(0,R(f)(e));return function(r){return g.innerRadius(t(r)).outerRadius(a(r)),g(e)}}function n(e){var t=vo(L(e),z(e));return function(a){return g.endAngle(t(a)),g(e)}}function i(e){var t=o(e);return t?+t.split("_")[0]:void 0}function l(e){var t=[],a=Xo+"#arcPath";if(I){var r=e.split("_");r.forEach(function(e){a=a+"_"+e,t.push(a)})}else t.push(a+"_"+e);return t}function o(e){return e.level||e.data&&e.data.level}function s(e){var t=i(e);return it(t)&&A.seriesdata[t].disabled}function c(e){var t=o(e),r=t&&t.split("_").length;return N[t]=1===r?Y=0:Y,!A.dataObject.hasHierarchyData&&1==r&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?e:(Y++,null)}function d(e){partition=go();var t=d3.hierarchy(e,c).sum(H).sort(no);return partition(t),t.descendants()}var u,h,f,g,p,m,v,y,x,b,w,C,O,A,S,P,T,E,L,z,D,R,j,M,I,B,H,V,F=!1,N={};e.commonRendererProp=function(t){return arguments.length?(u=t,e):u},e.defaultMouseOverFunc=function(e,t){j||(j=A.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+(A.plotarea.left+w/2)+","+(A.plotarea.top+C/2)+")"),M=zt(j,Xo,xo(I?B:1)));var a=A.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),r=l(o(e));if(a!==Sl){j.style("opacity",null);var n=T.selectAll(r.join()).nodes();M.each(function(e,r){var i=jl(this);if(n[r]){var l=jl(n[r]),o=ua(A,t,l.datum(),t);i.attr("d",l.attr("d")).styles(A.legendHighlight.getEffect(a,Ys,rl.test(a)?o:Pl,{fill:Pl,stroke:o},t))}else i.attr("d",null)})}},e.defaultMouseOutFunc=function(){j||(j=A.staticPaneSVG.selectAll("g#zchierarchyhighlight")),j.style("opacity",0)},e.getProcessedNode=function(e){return V[o(e)]};var Y;return e};var Mc=function(){};Mc.getValueWithinRange=function(e,t){return hl(ul(e,t[0]),t[1])},Mc.getNeedlePolygon=function(e,t,a){var r=ic(e.width/2,7),n=-ta(e.innerRadius,t.radius,0),i=-ta(e.radius,t.radius,a)+e.padding,l=-3*r;switch(i=hl(i,l),e.type){case"clock":return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" A"+r+" "+r+" 0 0 1 "+r+" "+n+" M0 "+(n-r)+" L0 "+i+" M"+-r+" "+(r+i)+" L0 "+i+" L"+r+" "+(r+i)+" L0 "+i;case"sharp":return"M"+r+" "+n+" L0 "+(n+r)+" L"+-r+" "+n+" L0 "+i+" L"+r+" "+n;default:return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" L0 "+i+" L"+r+" "+n}},Mc.createLevelsNColors=function(e,t,a,r){var n=[],i=[];if(dt=e[0].data[0],origValues=dt[0][t.dataindex]||t.values||[],clr=t.color,origValues instanceof Array||(origValues=[origValues]),void 0===clr&&origValues.length<=1&&(clr=["#d1d1d1"]),origValues.length>0){var l=origValues.slice(0);if(!clr)var o=a[0],s=[0,l.length-1],c=[t.colorGamma[0],t.colorGamma[1]],d=X(o,s,c);l.sort(no);var u=r[0];l.forEach(function(e,t){var a=origValues.indexOf(e),o=Mc.getValueWithinRange(e,r),s=Mc.getValueWithinRange(it(l[t+1])?l[t+1]:0,r);n[t]=0>o?[o,s]:[u,o],i[t]=clr?clr[a]:d(t),u=0>o?s:o})}else dt.forEach(function(e,t){n[t]=r,i[t]=(clr instanceof Array?clr[t]:clr)||"#d1d1d1"});return{values:n,colors:i}},Mc.targetMarker=function(e,t,a,r,n){function i(e){var t=e[p.dataindex];if(it(t)){t=Mc.getValueWithinRange(t,f);var a=h(t),r=$t(S,a),n=na(a)+x;return"translate("+r[0]+","+r[1]+") rotate("+n+",0,0)"}}function l(e){var t=e[p.dataindex];return it(t)?null:Sl}function o(e){var r=p.events&&p.events.triggerOffset||0;C.strokeWidth=(w+2*r)/10,e.attrs({transform:i,"class":function(e,t){return"ZCtargetmarker_eventhandler_"+t}}).styles({display:l,opacity:0}).each(function(){var e=jl(this);if(F(e,null,p,C),"line"===p.symbol){var n=w>=t-a?w:ul(w+r,t-a),i=r||1;e.selectAll("*").attr("d",V("rect")(n,i))}})}var s=r.systemConf,c=s.chart.plot.plotoptions.dial,d=r.dataset,u=0,h=r.axes.y.groups[0].scale,f=h.domain(),g=r.seriesdata,p=c.targetMarker,m=p.align,v=p.dAlign,y=+(p.padding||0),x=/line/.test(p.symbol)?90:0,b=!/(outer|inner)/g.test(m)&&/line/.test(p.symbol)?(t-a-2*y)/10:1,w=10*rt(p.size,b),C={symbolSize:{outer:1,inner:.5},color:r.seriesColor[0],strokeWidth:b},k=v===Os?w/2+y:v===ks?-(w/2)-y:0,S=m===Os?t+k:m===ks?a+k:(t+a)/2,P=zt(e,"g",p.enabled?[g[0].data[0][0]]:[],".","class","targetmarker"),T=zt(e,"g",p.enabled&&n?[g[0].data[0][0]]:[],".","class","targetmarker-eventhandler");P.attr("transform",i).styles({display:l,"stroke-dasharray":O(p.dashStyle,rt(p.outerStrokeWidth,1)),"stroke-linecap":A(p.lineCap,p.dashStyle)}).each(function(){var e=jl(this);F(e,null,p,C)}),o(T),Mc.handleEvents(r,T,p,"targetmarker",g);var E=p.label||{},L=rt(E.padding,2),z=m===Os?S+w/2+L:m===ks?(v===Os?a:S-w/2)-L:t+L,D=zt(e,"text",p.enabled&&ic(E.enabled,!0)&&!r.renderer[0].firedList.targetSeries?[g[0].data[0][0]]:[]);Bt(D,[E,s.chart,s.canvas,Us]),D.each(function(e){var t=jl(this);t.style("display",Sl);var a=e[p.dataindex];if(it(a)){if(a=Mc.getValueWithinRange(a,f),JSON.parse(c.minmaxlabels.show)&&-1!=f.indexOf(a))return;var n=h(a),i=Jt(n),l=$t(z,n),o=r.userdata.metadata.columns,s=o.filter(function(e){return e.dataindex===p.dataindex}),g=s.length?s[0]:o[d.getColumnIdx("y",0)],v=g.datatype,y=g[v],x=m===ks?0>i||i>kl?null:"end":0>i||i>kl?"end":null,b=m===ks?i>kl/2&&3*kl/2>i?null:-aa(i)+"em":i>kl/2&&3*kl/2>i?aa(i)+"em":null,w=it(E.text)?d.getCustomizedVal(r,E.text,u,null,null,e,"targetLabel"):Lr(y,a,v,r,"targetLabel");t.text(w).style("display",null).attrs({"text-anchor":x,dy:b,transform:"translate("+l[0]+","+l[1]+")"})}})},Mc.handleEvents=function(e,t,a,r,n){function i(){var t=gr(e.svg.node(),d3.event),a={x:t[0],y:t[1]},r={left:a.x,top:a.y},n=Pr(d3.event),i=a.x-n.clientX,l=a.y-n.clientY;return r.left-=i,r.top-=l,r.dLeft=i,r.dTop=l,r}function l(t,a,r,n){return tt(p[a],r,o(n),e)}function o(t){var r=h?t[1]:t[a.dataindex];return{value:r,formattedValue:Lr(c,r,d,e),actualData:u,data:s=s||e.dataset.getMetaInfoObj(e,u,0)}}var s,c,d,u=n[0].data[0][0],h="levelmarker"===r,f=e.systemConf.chart.plot.plotoptions.dial,g=e.systemConf.tooltip.enabled,p=a.events||{},m=rt(p.enabled,f.events.enabled),v=m?p.cursor||Tl:null;if(t.style("cursor",v),m){var y=e.dataset,x=e.userdata.metadata.columns,b=n[0].data[0].length,w=x.filter(function(e){return e.dataindex===a.dataindex}),C=w.length?w[0]:x[y.getColumnIdx("y",0)],k=function(t){var r=(h?t[1]:t[a.dataindex],o(t)),n=br(d3.event,{x:0,y:0},0,0,e,{seriesPos:0,subseriesindex:0,itemPos:0});if(g){var l=tt(p.tooltipContent,r,e)||(h?"Range: ":"Target: ")+r.formattedValue,s=e.eventHandler.tooltipElement;s.show(e,i(),l,!1,n.helpers)}},O=function(){if(g){var t=e.eventHandler.tooltipElement;t.hide(t.element)}};d=C.datatype,c=C[d];var A=function(t,a){var r=e.zcEventType||"mousemove";l(u,r,d3.event,t),k(t,a)},S=function(t){var a=e.zcEventType||"mouseout";l(u,a,d3.event,t),O()},P=function(t,a){var n=d3.event&&d3.event.touches,i=e.zcEventType||"click",o=b+a+1;if(l(u,i,d3.event,t),n&&"taphold"!==i){Oc(e),xc=(new Date).getTime(),Cc=this,wc=[e.renderer[0],t,0,o],bc=e;var s=e.eventHandler.tapOldInfo;s&&s.itemPos==o?(O(),e.eventHandler.tapOldInfo=null):(k(t,a),e.eventHandler.tapOldInfo={seriesPos:0,subseriesindex:0,itemPos:o,type:r})}},T=function(t){var a=e.zcEventType||"doubleclick";l(u,a,d3.event,t)},E={target:"plot",touchleave:!0,chartObj:e},L={mousemove:A,mouseout:S,click:P,dblclick:T},z={singletouchmove:A,touchend:S,tap:P,dbltap:T};Ar(t,L,z,E)}},qi.dial=function(){function e(A){return A.each(function(A){var S=r.params;n=S.chartObj,o=S.commonPlotOptions,l=S.color,s=S.dataset,c=S.yaxiscolumnorder,h=n.systemConf;var P=A[0].plotoptions;d=s.getY(A[0].data[0][0],c),v=m,m=0>d;var E=n.defsLocation,L=S.labelQueue;f=n.axes.y.groups[0].scale,p=f.domain(),u=n.plotarea_approx,o=P?ac(o,P,!0):o;var z=Wt(o,P,n,Bs),D=z.enabled,R=z.easingType,j=k?D?200:0:z.duration,M=jl(this).data(t(A));g=M.selectAll(Xo+".dial").data();var I=o.levelMarker;w=o.innerRadius+" _ "+o.outerPadding+" _ "+o.maxRadius+" _ "+o.bandWidth+" _ "+I.bandWidth+" _ "+I.innerPadding+" _ "+I.outerPadding;var B,H=u.radius,V=rt(I.strokeWidth,1),F=!0,N=ia(o,H);if(C=uo().endAngle(function(e){return f(e[1])}),F){var Y,_;if(it(I.bandWidth)||it(I.maxBandWidth)){var W=rt(I.maxBandWidth,H),X=Math.min(ta(I.bandWidth,H,H-N),W);Y=(H-N-X)/2,_=(H-N-X)/2,B=0===X?"hidden":null}else Y=ul(0,ta(I.innerPadding,H,0)),_=ul(0,ta(I.outerPadding,H,0));C.innerRadius(N+Y).outerRadius(H-_-.5*V).startAngle(function(e){return f(e[0])})}else{var U=ta(I.interPadding,H,10),G=A[0].data[0].length,Z=(H-N-(G-1)*U)/G;C.innerRadius(function(e,t){return t*(Z+U)+N}).outerRadius(function(e,t){return(t+1)*Z+t*U+N}).startAngle(o.startAngle)}var Q=Mc.createLevelsNColors(A,I,l,p);levelmarkerClr=Q.colors;var q=zt(M,"g",[1],".","class","levelmarkerSeries"),K=zt(q,Xo,I.enabled?Q.values:[]);K.attr("class",function(e,t){return"ZClevelmarker_"+t}).attr("transform","translate("+u.x+","+u.y+")").styles({stroke:function(e,t){return I.strokeColor||levelmarkerClr[t]},"stroke-width":V,"stroke-opacity":I.strokeOpacity,"fill-opacity":I.fillOpacity,fill:function(e,t){var a=levelmarkerClr[t],r=T(o.gradients,[H,H],a),n=r?Qs.get($s,"svgGradientFill",r,{offset:"pie"}):null;return n?"url("+E+"#"+n+")":a},visibility:B}),k&&w!=y?K.transition().duration(j).ease(Fl).call(function(e){Kr(e,C,[b,C.innerRadius()()],[x,C.outerRadius()()])}):K.attr("d",C),Mc.handleEvents(n,K,I,"levelmarker",A),r.commonPlotOptions(o),O.commonRendererProp(r),O.chartRendered=!1,M.call(O),i=O.innerRadius();var $=zt(M,"g",[1],".","class","targetSeries");Mc.targetMarker($,u.actualRadius,u.innerRadius,n,!0),$.attr("transform","translate("+u.x+","+u.y+")");var J=o.needle,et=zt(M,Xo,J.show?[d]:[],".","class","dial");et.attr("d",Mc.getNeedlePolygon(J,u,i)).styles({stroke:J.strokeColor||"black","stroke-width":J.strokeWidth,fill:J.fillColor||Sl}).transition().duration(j).ease(R).call(a),Si.labelRenderer&&L.push({renderer:e,charttype:Bs,chartObj:n,args:[A,0]})}),e}function t(e){var t=e[0].data[0];return e[0].data[0]=[t[0]],[e]}function a(e){var t,a,r,n,i=u.x,l=u.y,s=void 0!==o.baseValue?o.baseValue:0;e.attrTween("transform",function(e){k?n=jt(this).rotate:(a=m?p[1]:p[0],null!=s&&(a=m?hl(s,a):ul(s,a)),n=na(f(a))),t=hl(ul(e,p[0]),p[1]),r=na(f(t));var o=vo(n,r);return function(e){return"translate("+i+","+l+") rotate("+o(e)+",0,0)"}})}var r,n,i,l,o,s,c,d,u,h,f,g,p,m,v,y,x,b,w,C,k=!1,O=qi.pie();return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.endFunctions=function(){y=w,x=C.outerRadius()(),b=C.innerRadius()(),e.chartRendered=!0,k=!0},e.defaultMouseOutFunc=function(){if(n.systemConf.tooltip.enabled){var e=n.eventHandler.tooltipElement;e.hide(e.element)}},e},qi.packedbubble=function(){function e(t){return t.each(function(a){function r(t){var a=Pr(d3.event);return{renderer:e,seriesPos:n(t),subseriesPos:0,itemPos:i(t),coordinates:[a.pageX,a.pageY],element:this,data:t}}var m=c.params;h=m.chartObj;var v=m.color,O=m.notesArray,A=m.yaxiscolumnorder,S=m.dataset,P=h.systemConf,T=m.labelQueue;f=m.commonPlotOptions;var E=e.fillColorFunc=sa(h,0),L=ca(h,0),z=a.filter(function(e,t){return e.seriesIndex=t,k[t]=[],!e.disabled}),D=h.plotarea.width,R=h.plotarea.height,j=1===z.length,M=rr(h)||h.patternPallete,I=h.systemConf.notes,B=I&&I.enabled===!0&&I.plotValues;g=f.mode,y=ma(f,h);var H="absolute"===f.showAsNegative,V=+f.interPadding||0,F=+f.outerPadding||0,N=hl(D,R)-F;p=[h.plotarea.left+(D-N)/2,h.plotarea.top+(R-N)/2],x=function(e){if(!b&&o(e))return 0;var t=S.getY(e,A)||0;return 0>t?H?fl(t):0:t};var Y=0==rt(ar(null,f,h,"enabled"),!0),_=f.events?f.events.cursor||"pointer":P.chart.plot.events.cursor||"pointer",W=Wt(f,null,h,_s),X=W.enabled,U=W.type,G=W.easingType,Z=C?X?200:0:W.duration,Q=function(){var e=jl(this).attr("transform");return null!=e?e:"translate("+N/2+","+N/2+")"},q=function(e){return"translate("+e.x+","+e.y+")"},K=function(){var e=jl(this).attr("r");return null!=e?e:0},$=function(e){return e.r},J=function(){return f.fillOpacity},et=function(){return f.strokeOpacity},tt=!C&&(U===qo||U===Go);w.size([N,N]).padding(V),d=zt(t,"g",[1],".","class","hierarchychart"),d.attr("transform","translate("+(D-N)/2+","+(R-N)/2+")").style("cursor",_),u=zt(d,Uo,s(a,!0)),u.attrs({"class":function(e){return"series_"+n(e)}}).style("visibility",function(e){return o(e)?"hidden":null}),u=u.filter(function(e){return!o(e)});var at=s(z);e.total=at[0].value,u=u.data(at),u.attrs({transform:tt?q:Q,r:tt?$:K}).styles({fill:function(e,t){e.index=t,e.r=e.r||0,e.x=e.x||0,e.y=e.y||0,e.data.parent=e.parent,B&&(e.data.x=e.x,e.data.y=e.y),!e.children&&e.parent&&k[n(e)].push(e),e.arcColor=e.depth?"flat"!==g&&1===e.depth&&y?"grey":v[(y?i(e):n(e))%v.length]:"flat"==g||y||j?Sl:"grey";var a=l(e);return e.fillColor=!e.depth&&M?Sl:E(y?i(e):n(e),e.data,null,a)},"fill-opacity":tt?0:J,"stroke-opacity":tt?0:et,stroke:function(e){return e.arcColor===Sl?Sl:f.strokeColor?f.strokeColor:e.children?e.arcColor:L(y?i(e):n(e),e.data)},"stroke-width":function(){return f.strokeWidth}});var nt=u.size(),it=C||U!==qo?Z:Z/nt,lt=U===qo?it:0;if(u.transition().delay(function(e,t){return C?0:t*lt}).duration(it).ease(C?Fl:G).attrs({transform:q,r:$}).styles({"fill-opacity":J,"stroke-opacity":et}),xr(h,u,Y),!Y){var ot=function(e,t){var a=r(e,t);h.eventHandler.mouseMove(a)},st=function(t){h.eventHandler.mouseOut(e,t,n(t))},ct=function(t,a){var l=r(t,a);h.eventHandler.click(e,t,n(t),i(t),l)},dt=function(t){if(e.chartRendered){var r=Si.annotation?jn(t.data,a.length>1?a[n(t)].seriesname:null):t.data,i=[t.x,t.y];i=[i[0]+(D-N)/2,i[1]+(R-N)/2];var l={coordinate:i,data:r,basedOn:"plot"};h.eventHandler.doubleclick(t,n(t),l)}},ut={target:"plot",touchleave:!0,chartObj:h},ht={mousemove:ot,mouseout:st,click:ct,dblclick:dt},ft={singletouchmove:ot,touchend:st,tap:ct,dbltap:dt};Ar(u.filter(function(e){return!e.children}),ht,ft,ut)}e.renderedTimer=setTimeout(function(){if(Si.annotation&&a.forEach(function(e,t){O=Si.annotation.preprocessAnnotations(a,t,function(e){var t=[e.x,e.y];return[t[0]+(D-N)/2,t[1]+(R-N)/2]},O,h,m)}),Si.labelRenderer){var t=[(D-N)/2,(R-N)/2],r=function(t,a){return a===qc?e.total:t.parent.value};a.forEach(function(n,i){T.push({renderer:e,charttype:"hierarchy",chartObj:h,args:[a[i],i,null,null,r,k[i],t]})})}C=!0,e.chartRendered=!0},Z+17)}),e}function t(e){function t(e,i){var l=r(e);l?l.forEach(function(e,r){var n=it(i)?i+"_"+r:e.seriesIndex+"";a(e,n),t(e,n)}):(a(e,i),"flat"==g&&n.push(e))}function a(e,t){var a=t.split(/_/);e.seriesPos=+a[0],e.itemPos=+a[a.length-1]}var n=[];return t(e),"flat"==g?n:e}function r(e){var t=e.level&&e.level.split("_").length;return!h.dataObject.hasHierarchyData&&1==t&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?a(e[0][0])?e:e.filter(function(e){return a(e[0])||x(e)>0}):null}function n(e){var t=e.level||e.data&&e.data.level;return t?+t.split("_")[0]:void 0}function i(e){return e.data.itemPos}function l(e){return e.children?e.arcColor:null}function o(e){var t=n(e);return it(t)&&h.seriesdata[t].disabled}function s(e,a){b=a;var n=d3.hierarchy(t(e),r).sum(x).sort(no);return w(n),n.descendants()}var c,d,u,h,f,g,p,m,v,y,x,b,w=ho(),C=!1,k=[];return e.commonRendererProp=function(t){return arguments.length?(c=t,e):c},e.defaultMouseOverFunc=function(e,t,a){m||(m=h.staticPaneSVG.selectAll("g#zchierarchyhighlight"),v=zt(m,Xo,[1]));var r=jl(u.nodes()[e.index]),n=jt(r).translate,i=h.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),l=ua(h,y?a:t,e.data,t);m.style("opacity",null),v.attrs({transform:"translate("+(p[0]+n[0])+","+(p[1]+n[1])+")",d:V("circle")(2*+r.attr("r"))}).styles(h.legendHighlight.getEffect(i,_s,rl.test(i)?l:Pl,{fill:Pl,stroke:l},y?a:t))},e.defaultMouseOutFunc=function(){m||(m=h.staticPaneSVG.selectAll("g#zchierarchyhighlight")),m.style("opacity",0)},e};var Ic={};Ic.filterBySum=function(e,t){var a=function(e,a){return e+(a.disabled?0:fl(a[t]||0))};return e.filter(function(e){return e.reduce(a,0)>0})},qi.bubblepie=function(){function e(t){return t.each(function(t){var n=a.params,i=n.chartObj,l=n.datasetIndex,o=n.commonPlotOptions,s=n.dataset,c=n.axisrotated,d=n.stacked,u=n.xscale,h=n.yscale,f=n.yaxiscolumnorder,g=n.labelQueue,p=jl(this),m=t[l],v=m.plotoptions;if(Ki.saveSeriesdataInRenderer(i,l),l!==i.bubblePieRendererIndex)return void(e.chartRendered=!0);var y=Wt(o,v,i,Ms),x=y.duration,b=i.dataObject.bubblepieData,w=i.subrenderer,C=rt(o.dataindex,3),k=zt(p,"g",b?[1]:[],".","class","scatterseries");b&&b.forEach(function(e,t){w[t]=w[t]||{};var r=zt(k,"g",[1],".","class","subseries_"+t),n=function(e){return e&&s.getX(e)},l=zt(r,"g",Ic.filterBySum(e,C),".","class","scatter",null,n);l.each(function(e){if(e){var r=e.reference,n=s.getX(r),l=i.dataObject.getXYvalue(c,d,u,h,f,r,"x")||0,o=i.dataObject.getXYvalue(c,d,u,h,f,r,"y")||0,g=i.dataObject.getXYvalue(c,d,u,h,f,r,"z",i.zscale);w[t][n]=(w[t][n]||qi.pie()).commonRendererProp(a).plotarea({width:g,height:g,left:l-g/2,top:o-g/2}),w[t][n].chartRendered=!1,jl(this).attr("transform","translate("+(l-g/2)+","+(o-g/2)+")").call(w[t][n])}})}),e.renderedTimer=setTimeout(function(){r=!0,e.chartRendered=!0;var t=i.seriesdata;t.forEach(function(e,a){if(i.chartTypes[a].value===Si.charttype.bubblepie){var r=i.renderer[a];g.push({renderer:r,charttype:Rs,chartObj:i,args:[e,a]}),g.push({renderer:r,charttype:"pieInnerLabels",chartObj:i,args:[t,a,b]})}})},x)}),e}var t,a,r=!1;return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.shiftInfo=function(a){return arguments.length?(t=a,e):t},e},qi.heatmap=function(){function e(r){return r.each(function(r){var n=t.params,i=n.chartObj,l=n.xscale,o=n.yscale,s=n.datasetIndex,c=n.commonPlotOptions,d=n.labelQueue,u=n.yaxiscolumnorder,h=r[s],f=h.data,g=Wt(c,null,i,Ns),p=g.enabled,m=g.type,v=g.easingType,y=a?p?200:0:g.duration,x=e.fillColorFunc=sa(i,s),b=ca(i,s),w=i.dataObject.getTransRectValue("radius",null,null,null,null,c.borderRadius),C=c.symbol&&V(c.symbol),k=l.domain(),O=o.domain(),A=jl(this),S=zt(A,"g",[1],".","class","heatmapseries_"+s);e.seriesdataAfterUpdate=[],f.forEach(function(t,r){var n=e.seriesdataAfterUpdate[r]=i.dataObject.updateSeriesdatabyCategories(q(t),k,O,u),d=zt(S,"g",[1],".","class","subseries_"+r),h=zt(d,Xo,n);h.styles({fill:function(e){var t=mr(i,e,l,o,u);return x(s,e,null,null,null,[t.width,t.height])},"fill-opacity":c.fillOpacity,stroke:function(e){return b(s,e,c.strokeColor)},"stroke-width":c.strokeWidth,"stroke-opacity":c.strokeOpacity}).attr("transform",function(e){var t=mr(i,e,l,o,u);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=mr(i,e,l,o,u);return C?C(hl(t.width,t.height)):Mt(-t.width/2,-t.height/2,t.width,t.height,w)}),a||(Qt(h),h.attr("opacity",0).transition().duration(y).ease(v).on("start",function(){jl(this).attr("opacity",null)}).call(m===Ko?Zt:m===qo?Gt:Ut))}),Si.labelRenderer&&d.push({renderer:e,charttype:"hierarchy",chartObj:i,args:[h,s,null,null,null,$l(e.seriesdataAfterUpdate)]}),e.renderedTimer=setTimeout(function(){a=!0,e.chartRendered=!0},y+17)}),e}var t,a=!1;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e};var Bc={};Bc.getTileBound=function(e,t){var a=e.axes.x.scale,r=e.axes.y.groups[0].scale,n=t.x0||0,i=t.x1||0,l=t.y0||0,o=t.y1||0;return{x:a(n),y:r(l),width:a(i)-a(n),height:r(o)-r(l)}},Bc.getLevel=function(e){return e.level||e.data&&e.data.level},Bc.getSeriesIndex=function(e){var t=Bc.getLevel(e);return t?+t.split("_")[0]:void 0},Bc.getItemIndex=function(e){var t=Bc.getLevel(e);if(t){var a=t.split("_");return+a[a.length-1]}},Bc.getParentColor=function(e,t){var a=e.params,r=a.color,n=a.commonPlotOptions.parent.fillColor,i=Pl;if(t.depth){var l=r[Bc.getSeriesIndex(t)%r.length];if("{{clr-tint}}"===n)i=oa(l,.5,"brighter",d3.hsl);else if("{{clr-shade}}"===n)i=oa(l,.5,"darker",d3.hsl);else if("{{clr}}"===n)i=l;else if(n)i=n;else{var o=Kl(l);o.opacity=1e-4,i=o.toString()}}return i},Bc.isDisabled=function(e,t){var a=Bc.getSeriesIndex(t);return it(a)&&e.seriesdata[a].disabled};var Hc=function(e){var t=this,a=t.rp=e.params,r=t.chartObj=a.chartObj;t.commonRendererProp=e,t.dimension=hc.getAvailableBound(r,a.commonPlotOptions),t.createScale(),t.layout=t.getLayout(),t.processData()};Hc.prototype.createScale=function(){var e=this.chartObj,t=this.dimension;e.axes.x.scale=_l().domain([0,t.width]).range([0,t.width]),e.axes.y.groups[0]=e.axes.y.groups[0]||{},e.axes.y.groups[0].scale=_l().domain([0,t.height]).range([0,t.height])},Hc.prototype.getLayout=function(){var e=this,t=e.dimension,a=this.rp.commonPlotOptions,r=a.parent,n=Lt(a.padding),i=a.mode;return po().size([t.width,t.height]).tile(Yl(i)).round(!0).paddingInner(function(e){return e.value?(e.children[0]&&e.children[0].children?r:a).interPadding||0:0}).paddingTop(function(e){return e.depth&&e.value?n.top:0}).paddingBottom(function(e){return e.depth&&e.value?n.bottom:0}).paddingLeft(function(e){return e.depth&&e.value?n.left:0}).paddingRight(function(e){return e.depth&&e.value?n.right:0})},Hc.prototype.getValue=function(e){var t=this,a=t.chartObj,r=t.rp,n=Bc.getSeriesIndex(e),i=Si.DataProcessor.helpers.getParsedYAxisOrder(a.seriesdata[n||0].yaxiscolumnorder),l=a.dataset.getY(e,i)||0,o="absolute"===r.commonPlotOptions.negativeAs;return Bc.isDisabled(a,e)?0:0>l?o?fl(l):0:l},Hc.prototype.getChildren=function(e){var t=Bc.getLevel(e),r=t&&t.split("_").length;return!this.chartObj.dataObject.hasHierarchyData&&1==r&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?e:El},Hc.prototype.processData=function(){var e=this,t=e.chartObj,a=e.commonRendererProp,r=e.dimension,n=e.rp,i=n.commonPlotOptions,l=n.color,o=i.colorScheme||"solid",s=0,c={},d=[],u=[],h=[],f=[],g=[],p=[],m=d3.hierarchy(e.chartObj.seriesdata,function(t){return e.getChildren(t)}).sum(function(t){return e.getValue(t)}),v=e.layout(m).descendants();e.chartObj.seriesdata.forEach(function(e,a){var n=l[a%l.length];p[a]=sa(t,a,[r.width,r.height]),u[a]=0,h[a]=[],h[a].disabled=e.disabled,d[a]=_l().domain([0,k(e)]).range([n,oa(n,"solid"===o?0:"shades"===o?-1:1,"brighter",d3.hsl)])}),v.forEach(function(e,r){var n=Bc.getLevel(e),o=Bc.getSeriesIndex(e),p=Bc.getItemIndex(e);if(e.index=r,e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var m=ma(i,t)?l[p%l.length]:d[o](u[o]);e.data.arcColor=m}g[n]=e}e.children?e.data.arcColor=Bc.getParentColor(a,e):(f[o]||(f[o]=[]),f[o].push(e),u[o]++),e.depth&&h[o].push(e),Bc.isDisabled(t,e)||(c[n]=s++)}),t.renderer[0].fillColorFunc=p[0],e.processedData=v,e.previousSiblingsCount=c,e.seriesWiseNodes=h,e.leafNodes=f,e.nodes=g,e.fillColor=p},function(){function e(e,t,a){var r=Pr(d3.event);return{renderer:a,seriesPos:Bc.getSeriesIndex(e),coordinates:[r.pageX,r.pageY],element:this,data:e.data,level:Bc.getLevel(e)}}function t(e){var t,r=e.chartObj,n=e.dimension,i=e.processedData,l=e.rp.commonPlotOptions,o=r.dataset,s=r.eventHandler.trackerElement.node(),c=r.eventHandler.mousePos=gr(s,d3.event),d=U(s),u=c[0]-d.x,h=c[1]-d.y,f={x:u,y:h};if(r.chartRendered)return i.some(function(e){var i=Bc.getSeriesIndex(e),s=J(i)||0==rt(ar(r.seriesdata[i].plotoptions,l,r,"enabled"),!0);if(!s){var c=Bc.getTileBound(r,e),d=c.x,u=c.y,h=c.width,g=c.height,p=da(o.getClr(e.data),r),m={x:d+n.x,y:u+n.y,width:h,height:g},v=a(m,f);return p&&0==v&&!e.children?(t=e,!0):void 0}}),t}function a(e,t){var a=e.x,r=e.y,n=a+e.width,i=r+e.height;return a<=t.x&&t.x<=n&&r<=t.y&&t.y<=i?0:El}function r(e){var t={click:El,dblclick:El,contextmenu:El},a={mousemove:El,mouseout:El},r={tap:null,dbltap:null,singletouchmove:null,touchend:null};Sr(e,"chart",t),Sr(e,"chartmove",a),Sr(e,null,r)}Bc.addEvents=function(a){function n(){var r=t(a);if(r){var n=e(r,El,v);u.eventHandler.mouseMove(n);var i=ar(u.seriesdata[Bc.getSeriesIndex(r)].plotoptions,f,u,"cursor");u.eventHandler.addCursor(i)}else d&&(u.eventHandler.mouseOut(v,d,g(d)),u.eventHandler.hideCursor());d=r}function i(){var e=d;e?u.eventHandler.mouseOut(v,e,g(e)):c()}function l(){var r=t(a);if(r){var n=e(r,El,v);u.eventHandler.click(v,r,g(r),p(r),n),d=r}}function o(){var e=t(a);if(e){var r=Si.annotation?jn(e,m.length>1?m[g(e)].seriesname:El):e,n=Bc.getTileBound(u,e),i=[n.x+h.x,n.y+h.y],l={coordinate:i,data:r,basedOn:"plot"};u.eventHandler.doubleclick(e,g(e),l),d=e}}function s(e,t,a){e=e.data||e;var r=u.dataObject.getTransRectValue("radius",El,El,El,El,f.borderRadius),n=ma(f,u),i=u.staticPaneSVG.selectAll("g#zchierarchyhighlight"),l=i.selectAll(Xo),o=u.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),s=ua(u,n?a:t,e,t);i.style("opacity",El),l.attr("d",function(){var t=v.getProcessedNode(e),a=Bc.getTileBound(u,t);return"canvas"===u.plot.renderer.mode&&(r=It(r,a.width,a.height,!0)),Mt(a.x,a.y,a.width,a.height,r)}).styles(u.legendHighlight.getEffect(o,"treemap",rl.test(o)?s:Pl,{fill:Pl,stroke:s},n?a:t))}function c(){u.staticPaneSVG.selectAll("g#zchierarchyhighlight").style("opacity",0)}var d,u=a.chartObj,h=a.dimension,f=a.rp.commonPlotOptions,g=Bc.getSeriesIndex,p=Bc.getItemIndex,m=u.seriesdata,v=u.renderer[0],y=[u.plotarea.left+h.x,u.plotarea.top+h.y],x=u.eventHandler.trackerElement;_(x,u.plotarea),r(x),v.defaultMouseOverFunc=s,v.defaultMouseOutFunc=c;var b=u.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+y+")");zt(b,Xo,[1]);var w={target:"plot",touchleave:!0,chartObj:u},C={mousemove:n,mouseout:i,click:l,dblclick:o},k={singletouchmove:n,touchend:i,tap:l,dbltap:o};Ar(x,C,k,w)}}(),qi.treemap=function(){function e(g){return g.each(function(p){var m=t.params;n=m.chartObj,i=m.commonPlotOptions;var v=m.notesArray,y=n.systemConf,x=m.labelQueue;l=new Hc(t),o=l.dimension,s=l.nodes,c=l.leafNodes,d=l.seriesWiseNodes;var b=i.strokeWidth,w=i.strokeOpacity,C=i.fillOpacity,k=l.fillColor,O=ca(n,0),A=n.dataObject.getTransRectValue("radius",El,El,El,El,i.borderRadius),S=[o.x,o.y],P=Wt(i,El,n,"treemap"),T=P.enabled,E=P.type,L=u?Fl:P.easingType,z=u?T?200:0:P.duration,D=n.dataObject.totalnoofdatas,R=u?z:E===Zo||E===Qo?z/D:z,j=u?0:E===Zo?function(e){return l.previousSiblingsCount[h(e)]*(z/D)}:E===Qo?function(){return Cl()*D*(z/D)}:0,M=E===Go||E===Qo||E===Zo?0:El,I=i.events?i.events.cursor||Tl:y.chart.plot.events.cursor||Tl,B=i.parent,H=B.events.cursor;a=zt(g,"g",[p],".","class","hierarchychart"),a.attr("transform","translate("+o.x+","+o.y+")").styles({"stroke-width":b,"stroke-opacity":w,"fill-opacity":C,cursor:I});var V=l.processedData;e.total=V[0].value,r=zt(a,Xo,V),e.total||r.remove(),r.styles({fill:function(e){if(e.children)return e.fillColor=e.data.arcColor;var t=Bc.getTileBound(n,e),a=f(e);return e.fillColor=k[a](a,e.data,El,El,El,[t.width,t.height])},stroke:function(e){var t=(e.children?B.strokeColor:El)||i.strokeColor;return e.depth?t?t:e.children?e.data.arcColor:O(f(e),e.data):Pl},visibility:function(e){return e.value?El:"hidden"}}).attr("class",function(e){return it(h(e))?"series_"+f(e)+(e.children?" zchierarchyparent":""):void 0}).attr("id",function(e){return"tree_"+h(e)});var F=a.selectAll(Xo+".zchierarchyparent");F.styles({"stroke-width":B.strokeWidth,"stroke-opacity":B.strokeOpacity,"fill-opacity":B.fillOpacity,cursor:H}),u||r.attr("transform",function(e){var t=Bc.getTileBound(n,e),a=t.x+t.width/2,r=t.y+t.height/2;return E===$o?(a=o.width/2,r=o.height/2):E===rs?a=t.width/2:E===es&&(r=t.height/2),"translate("+a+","+r+")"}).attr("d",function(e){var t=Bc.getTileBound(n,e),a=-t.width/2,r=-t.height/2,i=t.width,l=t.height;return E===rs?i=0:E===es&&(l=0),Mt(a,r,i,l,A)}).style("opacity",M),r.transition().duration(R).delay(j).ease(L).attr("transform",function(e){var t=Bc.getTileBound(n,e);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=Bc.getTileBound(n,e);return Mt(-t.width/2,-t.height/2,t.width,t.height,A)}).style("opacity",El),e.renderedTimer=setTimeout(function(){if(Si.labelRenderer){var t=function(t,a){if(a===qc)return e.total;
var r=e.getProcessedNode(t);return r.parent.value};p.forEach(function(a,r){x.push({renderer:e,charttype:"hierarchy",chartObj:n,args:[d[r],r,El,El,t,c[r],S]}),x.push({renderer:e,charttype:"hierarchy",chartObj:n,args:[d[r],r,El,El,t,[d[r][0]],S,!0]})})}Si.annotation&&p.forEach(function(t,a){v=Si.annotation.preprocessAnnotations(p,a,function(t){var a=e.getProcessedNode(t),r=Bc.getTileBound(n,a);return[r.x+o.x,r.y+o.y]},v,n,m)}),Bc.addEvents(l),u=!0,e.chartRendered=!0},z+17+(j?4*D:0))}),e}var t,a,r,n,i,l,o,s,c,d,u=!1,h=Bc.getLevel,f=Bc.getSeriesIndex;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e.getProcessedNode=function(e){return l.nodes[h(e)]},e};var Vc=function(e,t,a,r,n,i,l){var o,s,c=e[t.dataindex]||[],d=it(t.dataindex),u=a.datalabels.hasFixedPosition,h=a.systemConf.chart.axes.yaxis[n.yaxiscolumnorder||0].reversed,f=a.userdata.seriesdata.stackGroup,g=f?$a(l,f):0,p=a.plotarea,m=n.stacked,v=n.axisrotated,y=n.hasNegValue,x=n.yaxiscolumnorder,b=n.dataset,w=n.yscale;null==c||c instanceof Array||(c=[c]),d&&!c.length?o=s=0:(o=Il(c),s=Bl(c));var C=b.getX(e),k=(m?r.bandwidth1(C)+(r.bandwidth2(g)||0):r.bandwidth1(C)+r.bandwidth2(r.barDatasetIndex+i))+r.levelMarkerPadding,O=d?w(v?hl(0,o):ul(0,s)):v&&null!=y?w(y):0,A=v?d?w(ul(0,s))-w(hl(0,o)):null!=y?p.width-w(y):p.width:r.levelMarkerWidth,S=v?r.levelMarkerWidth:d?w(hl(0,o))-w(ul(0,s)):null!=y?w(y):p.height;if(!d)if(w.bandwidth){var P=w.ordinalRange,T=w.bandwidth()/2;v?(O=w.origRange[0],A=P[h?0:P.length-1]+T):(O=P[P.length-1]+T,S=P[h?P.length-1:0]+T)}else{var E;if(u){var L=Fc(a,x);E=m?L[x][1]:L[1]}else E=w.domain()[1];var z=[w(E),w(it(y)?y:w.domain()[0])];v?(z.reverse(),O=z[0],A=fl(z[1]-z[0])):(O=z[0],S=fl(z[1]-z[0]))}return{x:k,y:O,width:A,height:S}},Fc=function(e,t){var a=e.dataObject.actual_yRange[t];return ao($l([a,[0]]))};Si.axis.threshold=function(e,t){function a(e,t,a,r){return e?(e.threshold||(e.threshold={}),e.threshold[r]=t.show?"line"==r?Si.axis.threshold.line():Si.axis.threshold.range():null,e.threshold[r]):null}function r(t,a,r,n,l,o){var s;return i.axisObj=function(e){return arguments.length?(a=e,i):a},i.thresholdIndex=function(e){return arguments.length?(r=e,i):r},i.type=function(e){return arguments.length?(n=e,i):n},i.values=function(e){return arguments.length?(s=e,i):s},i.chartObj=function(t){return arguments.length?(e=t,i):e},i.thresholdIndex(r).type(n).values(o.values).chartObj(e),"line"==l&&i.axisObj(a),t.parentObj(i),t}function n(t,n,i,l,o,s,c){var d=c&&c.underlay,u=(d?e.svg:e.staticPaneSVG).selectAll("g.threshold"),h=e.svg.selectAll("g."+o+"-axis-"+i),f=null==h||h.empty()||""!=h.style("visibility")&&"visible"!=h.style("visibility")?"hidden":"visible",g=zt(u,"g",c.show&&"visible"==f?[n]:[],".","class","threshold"+s+"-"+o+"-axis-"+i);if(null!=t&&n.show){var p=l&&null!=t.threshold&&null!=t.threshold[s]?t.threshold[s]:a(t,n,i,s);p=r(p,t,i,o,s,c),g.call(p)}}var i={},l=e.systemConf,o=l.chart.axes.xaxis,s=$(e.userdata,"chart.axes.xaxis")?e.userdata.chart.axes.xaxis:{};null!=s.threshold&&null!=s.threshold.line&&n(e.axes.x,o.threshold.line,0,t,"x","line",s.threshold.line),null!=s.threshold&&null!=s.threshold.range&&n(e.axes.x,o.threshold.range,0,t,"x","range",s.threshold.range);for(var c=l.chart.axes.yaxis,d=$(e.userdata,"chart.axes.yaxis")?e.userdata.chart.axes.yaxis:{},u=0;u<e.axes.y.count;u++)null!=d&&null!=d[u]&&null!=d[u].threshold&&null!=d[u].threshold.line&&n(e.axes.y.groups[u],c[u].threshold.line,u,t,"y","line",d[u].threshold.line),null!=d&&null!=d[u]&&null!=d[u].threshold&&null!=d[u].threshold.range&&n(e.axes.y.groups[u],c[u].threshold.range,u,t,"y","range",d[u].threshold.range)},Si.axis.threshold.textAlign=function(e,t,a,r,n,i){var l;return n=n||0,"left"==e?l=r?"left"==i||"bottom"==i?"x"==t?n:a.height-n:"x"==t?n:a.height-n:"left"==i||"bottom"==i?"x"==t?a.height-n:n:"x"==t?n:a.width-n:"center"==e?l=r?"left"===i||"bottom"===i?"x"==t?(a.width+n)/2:(a.height-n)/2:"x"==t?(a.width-n)/2:(a.height+n)/2:"left"==i||"bottom"==i?"x"==t?(a.height-n)/2:(a.width+n)/2:"x"==t?(a.height+n)/2:(a.width-n)/2:"right"==e&&(l=r?"x"==t?a.width:0:"left"==i||"bottom"==i?"x"==t?0:a.width:"x"==t?a.height:0),l},Si.axis.threshold.line=function(){function e(f){f.each(function(f){var g=jl(this);e.update=function(){g.transition().call(e)},o=d.chartObj(),n=d.thresholdIndex(),c=d.type(),u=d.axisObj(),h=d.values(),i=o.plotarea;var p=u.scale,m=p.range();m=m.slice(0,m.length),m.sort(function(e,t){return e-t});var v=null!=p.bandwidth?p.bandwidth()/2:0,y=f.label;y=Dn(y,$(o.userdata,"chart.axes."+c+"axis"+("x"===c?"":"."+n)+".threshold.line.label",!0));var x=f.marker||{},b=ic(x.enabled,!0);s=o.axes.rotated,l=o.systemConf;var w=[],C=[],k=[],A={x:2,y:2},S=l.chart.axes.xaxis.axisline,P=l.chart.axes.yaxis[n].axisline;it(S)&&S.show&&(A.x+=+S.strokeWidth-1),it(P)&&P.show&&(A.y+=+P.strokeWidth-1);var T,E=0,L=[],z=[],D=[],R=[],j=[],M=[],I=[],B=[],H=o.dataset.getDataType(c,n),F=nc(f.events,"enabled")!==!1,N=o.dataset.getColumn(c,n),Y=o.dataset.getColumnIdx(c,n);H==No&&(T=nc(N,No)||null),h.map(function(e,t){var r=null!=e&&""!=e?H==No?jr(e,null,T).getTime():e:null;null!=e&&""!==e&&p(r)+v>=m[0]&&p(r)+v<=m[m.length-1]&&(w[E]=r,C[E]=Rn(nc(f,"label.text["+t+"]")||"",h,N,o),k[E]=(a(f.color)?f.color[t]:f.color)||"black",L[E]=it(f.label)?(a(f.label.hAlign)?f.label.hAlign[t]:f.label.hAlign)||"center":"center",D[E]=(a(f.strokeWidth)?f.strokeWidth[t]:f.strokeWidth)||1,z[E]=a(f.dashStyle)?f.dashStyle[t]:f.dashStyle,R[E]=it(f.marker)&&f.marker.enabled?(a(f.marker.strokeWidth)?f.marker.strokeWidth[t]:f.marker.strokeWidth)||2:null,M[E]=f.marker&&f.marker.enabled?(a(f.marker.size)?f.marker.size[t]:f.marker.size)||1:null,E++)});var _=o.container.node().getBoundingClientRect(),W={left:_.left+i.left,top:_.top+i.top,width:i.width,height:i.height,right:_.left+i.left+i.width,bottom:_.top+i.top+i.height},X=W.left,U=W.top,Z=u.component.orient(),Q={top:0,left:0,right:0,bottom:0},q="..",K=o.cache.thresholdCustomPoints=ic(o.cache.thresholdCustomPoints,[]),J=t(f,o);g.attr("transform","translate("+i.left+","+i.top+")");var et=zt(g,"g",[f],".","class","thresline-"+n),tt=o.container.selectAll("g.plotareaBorder-property").node(),at=tt.border||tt["border-"+Z],rt=tt.border||tt["border-"+Oa(Z)],nt=at&&at.clr!==Pl?at.size:0,lt=rt&&rt.clr!==Pl?rt.size:0,ot=nt+lt,st=zt(et,"path",null!=x&&b?w:[],".","class","marker");st.attr("d",function(e,t){return V(a(x.symbol)?x.symbol[t]:x.symbol)(10*M[t])}).style("stroke-width",function(e,t){return R[t]||2}).style("stroke",function(e,t){return(a(x.strokeColor)?x.strokeColor[t]:x.strokeColor)||k[t]}).attr("fill",function(e,t){var r=a(x.fillColor)?x.fillColor[t]:x.fillColor;return r||(null===r?k[t]:"white")}),st.attr("transform",function(e,t){var a=R[t]/2,r=jl(this).node().getBBox();j[t]=r.width+nt;var l="bottom"==Z||"top"==Z?p(e)+v:"left"==Z?a+nt+r.width/2:i.width-(a+nt+r.width/2),s="bottom"==Z?i.height-r.width/2-nt-a:"top"==Z?a+r.height/2+nt:p(e)+v;return F&&K.push({x:l-j[t]/2,y:s-j[t]/2,width:j[t],height:j[t],color:k[t],text:C[t],type:"threshold-marker",triggerOffset:J,size:M[t],marker:x,point:h[t],formattedValue:Lr(N[N.datatype],h[t],N.datatype,o,"threshold",!1),thresholdType:c,columnIndex:Y,columnInfo:N,yColumnIndex:n,itemIndex:t,events:f.events||{}}),"translate("+l+","+s+")"});var ct=zt(et,"line",w);ct.attr("x1",function(e,t){return"bottom"==Z||"top"==Z?p(e)+v:"left"==Z?(j[t]||0)+R[t]:lt}).attr("y1",function(e,t){return"bottom"==Z?nt:"top"==Z?(j[t]||0)+R[t]:p(e)+v}).attr("x2",function(e,t){return"bottom"==Z||"top"==Z?p(e)+v:"left"==Z?i.width-lt:i.width-R[t]-(j[t]||0)}).attr("y2",function(e,t){return"bottom"==Z?i.height-R[t]-(j[t]||0):"top"==Z?i.height-lt:p(e)+v}).attr("stroke",function(e,t){return"    "+k[t]}).attr("stroke-width",function(e,t){return D[t]+"px"}).attr("shaperendering","crispedges").attr("stroke-dasharray",function(e,t){return O(z[t],D[t])});var dt=zt(et,"text",null!=y?w:[]);dt.text(function(e,t){return G(C[t])}).attr("x",function(e,t){var a=10*M[t]+A[c]+(R[t]||2),r="x"==c&&!s||"y"==c&&s?-Si.axis.threshold.textAlign(L[t]||"right",c,i,s,a,Z):Si.axis.threshold.textAlign(L[t]||"right",c,i,s,a,Z);return r}).attr("y",function(e){var t="x"==c&&!s||"y"==c&&s?p(e)+v:p(e)+v;return t-5}).attr("transform","x"==c&&!s||"y"==c&&s?"rotate(-90)":"rotate(0)").styles({"font-family":function(e,t){return B[t]=(a(y.fontFamily)?y.fontFamily[t]:y.fontFamily)||l.chart.fontFamily||l.canvas.fontFamily||Us.fontFamily,B[t]},"font-size":function(e,t){return I[t]=Si.utils.getVal((r(y.fontSize)||a(y.fontSize)?y.fontSize[t]:y.fontSize)||l.chart.fontSize||l.canvas.fontSize),I[t]+"px"},fill:function(e,t){return(a(y.fontColor)?y.fontColor[t]:y.fontColor)||l.chart.fontColor||l.canvas.fontColor||Us.fontColor},"font-weight":function(e,t){return(a(y.fontWeight)?y.fontWeight[t]:y.fontWeight)||l.chart.fontWeight||l.canvas.fontWeight||Us.fontWeight},"font-style":function(e,t){return(a(y.fontStyle)?y.fontStyle[t]:y.fontStyle)||l.chart.fontStyle||l.canvas.fontStyle||Us.fontStyle},"text-Anchor":function(e,t){return"left"==Z||"bottom"==Z?"center"==L[t]?"middle":"right"==L[t]?"end":"start":"center"==L[t]?"middle":"right"==L[t]?"start":"end"}}).each(function(e,t){var a,r=G(C[t]),n=10*M[t],l=Xa(r,I[t],B[t])+n,o="top"===Z||"bottom"===Z?i.height:i.width;l>o&&(a=hl(l-o,n)+ot,W.left=X+a,W.top=U+a,Dt(this,this.textContent,this.getBoundingClientRect(),W,zn(Z),q,Q))})})}function t(e,t){return ic(nc(e,"events.triggerOffset"),Or(t,t.chartTypes[0].value))}var n,i,l,o,s,c,d,u,h;return e.parentObj=function(t){return arguments.length?(d=t,e):d},e.getMetaInfo=function(e){return{itemIndex:e.itemIndex,point:e.point,data:ac(o.systemConf.metadata.columns[e.columnIndex],{columnindex:e.columnIndex})}},e},Si.axis.threshold.range=function(){function e(e){e.each(function(e){var l=jl(this);r=i.chartObj(),t=i.thresholdIndex(),n=i.type();var o=r.systemConf,s=e.label;s=Dn(s,$(r.userdata,"chart.axes."+n+"axis"+("x"===n?"":"."+t)+".threshold.range.label",!0));var c=[],d=[],u=[],h=[],f=[],g=[],p=[],m=[],v=[],y=[],x=[],b=[],w=r.container.node().getBoundingClientRect(),C=r.plotarea,k={left:w.left+C.left,top:w.top+C.top,width:C.width,height:C.height,right:w.left+C.left+C.width,bottom:w.top+C.top+C.height},S=r.axes[n].orient,P=i.axisObj().component.orient(),T={top:0,left:0,right:0,bottom:0},E="..",L=zt(l,"g",e.show?[e]:[],".","class","thresholdrangegroup-"+n),z=r.axes.rotated;if(e.show){var D,R=r.dataset.getDataType(n,t),j=r.dataset.getColumn(n,t);R==No&&(D=null!=j.time?j.time:null);var M=[],I=[],B={x:2,y:2},H=o.chart.axes.xaxis.axisline,V=o.chart.axes.yaxis[t].axisline;it(H)&&H.show&&(B.x+=+H.strokeWidth-1),it(V)&&V.show&&(B.y+=+V.strokeWidth-1);var F=z?r.axes.y.groups[t].scale:r.axes.x.scale,N=z?r.axes.x.scale:r.axes.y.groups[t].scale,Y=r.dataObject.noofBarEnabledSeries,_=null!=F.bandwidth&&Y?F.bandwidth():0,W=null!=N.bandwidth&&Y?N.bandwidth():0,X=null==F.bandwidth||Y?0:F.bandwidth()/2,U=null==N.bandwidth||Y?0:N.bandwidth()/2,Z=0,Q=("x"==n&&!z||"y"==n&&z?F:N).domain(),q=Q.length-1;e.values.map(function(t,n){I=null!=t&&""!=t?t.map(function(e){return R==No?jr(e,null,D).getTime():e}):null,I&&!(I[0]>Q[q]||I[1]<Q[0])&&(I[0]=ul(I[0],Q[0]),I[1]=hl(I[1],Q[q]),M[Z]=I,c[Z]=(a(e.fillColor)?e.fillColor[n]:e.fillColor)||"grey",d[Z]=rt(a(e.fillOpacity)?e.fillOpacity[n]:e.fillOpacity,"0.2"),u[Z]=(a(e.strokeColor)?e.strokeColor[n]:e.strokeColor)||"black",h[Z]=a(e.dashStyle)?e.dashStyle[n]:e.dashStyle,f[Z]=a(e.lineCap)?e.lineCap[n]:e.lineCap,g[Z]=(a(e.label.hAlign)?e.label.hAlign[n]:e.label.hAlign)||"center",p[Z]=Rn(nc(e,"label.text["+n+"]")||"",e.values,j,r),m[Z]=a(s.fontColor)?s.fontColor[n]:s.fontColor,b[Z]=a(s.fontStyle)?s.fontStyle[n]:s.fontStyle,y[Z]=a(s.fontFamily)?s.fontFamily[n]:s.fontFamily,x[Z]=a(s.fontWeight)?s.fontWeight[n]:s.fontWeight,v[Z]=s.fontSize instanceof Function||a(s.fontSize)?s.fontSize[n]:s.fontSize,Z++)});var K=zt(L,"g",M,".","class","rangebox-"+t);K.append("rect"),K.append("text");var J=K.select("rect"),et=K.select("text");J.attrs({x:function(e){return"x"==n&&!z||"y"==n&&z?F(e[0])+X+r.plotarea.left:r.plotarea.left+B[n]},y:function(e){return"x"==n&&!z||"y"==n&&z?r.plotarea.top:N(e[1])+U+r.plotarea.top},width:function(e){return"x"==n&&!z||"y"==n&&z?F(e[1])-F(e[0])+_:r.plotarea.width-B[n]},height:function(e){return"x"==n&&!z||"y"==n&&z?r.plotarea.height-B[n]:N(e[0])-N(e[1])+W}}).styles({fill:function(e,t){return c[t]},"fill-opacity":function(e,t){return d[t]},stroke:function(e,t){return u[t]},"stroke-dasharray":function(e,t){return O(h[t])},"stroke-linecap":function(e,t){return A(f[t],h[t])}}),et.attrs({transform:function(e,t){var a=J.nodes()[t].getBBox(),i=Si.axis.threshold.textAlign(g[t],n,r.plotarea,z,B[n],S);return"x"==n&&!z||"y"==n&&z?"translate("+(a.x+a.width/2)+","+(i+r.plotarea.top)+") rotate(-90)":"translate("+(i+r.plotarea.left)+","+(a.y+a.height/2)+")"},dy:"0.3em"}).styles({"font-family":function(e,t){return y[t]||o.chart.fontFamily||o.canvas.fontFamily||Us.fontFamily},"font-size":function(e,t){return Si.utils.getVal(v[t]||o.chart.fontSize||o.canvas.fontSize)+"px"},fill:function(e,t){return m[t]||o.chart.fontColor||o.canvas.fontColor||Us.fontColor},"font-weight":function(e,t){return x[t]||o.chart.fontWeight||o.canvas.fontWeight||Us.fontWeight},"font-style":function(e,t){return b[t]||o.chart.fontStyle||o.canvas.fontStyle||Us.fontStyle},"text-Anchor":function(e,t){return"center"==g[t]?"middle":"right"==g[t]?"end":"start"}}).text(function(e,t){return G(p[t])}).each(function(){Dt(this,this.textContent,this.getBoundingClientRect(),k,zn(P),E,T)})}})}var t,r,n,i;return e.parentObj=function(t){return arguments.length?(i=t,e):i},e},Si.axis.threshold.overlay=function(e,t,a){var r=e.dataObject.getAxisRotated();if("discrete"==t){var n=a.values.slice(0),i=a.overlayRange,l=a.defaultColor;return n.sort("below"==i||"equalandbelow"==i?no:io),function(e,t,r,o){if(null==a.values||0==a.length)return o;for(var s=0;s<n.length;s++){var c,d=n[s];switch(i){case"equal":c=r===d;break;case"equalandbelow":c=d>=r;break;case"equalandabove":c=r>=d;break;case"below":c=d>r;break;default:c=r>d}if(c){var u=a.values.indexOf(d);return null==t||null==t[u]?l?o:"black":t[u]}}return o}}return"continous"==t?function(t,a,n,i){var l="x"==i?e.axes.x.scale:e.axes.y.groups[0].scale,o=n,s=a.values;if(null==s||0==s.length)return t;var c=s.slice(),d=a.color,u=a.overlayRange,h=a.defaultColor;u&&(u=u.replace("equaland",""));var f,g=e.dataset.getDataType(i,n);if("time"==g){var p=e.dataset.getColumn(i,n);f=null!=p.time?p.time:null}c=c.map(function(e){return"time"==g?jr(e,null,f).getTime():e}),c.sort("x"==i&&!r||"y"==i&&r?function(e,t){return t>e?-1:e>t?1:0}:function(e,t){return e>t?-1:t>e?1:0});var m=l.domain().length,v="x"==i&&!r||"y"==i&&r?l(l.domain()[m-1])-l(l.domain()[0]):l(l.domain()[0])-l(l.domain()[m-1]),y=[];y.push(0);for(var x=0;x<c.length;x++){var b=l(c[x])+(null!=l.bandwidth?l.bandwidth()/2:0),w=b/v*100;100>w&&(y.push(w),y.push(w))}y.push(100);var C=[];("y"==i&&"below"==u&&!r||"x"==i&&"above"==u&&!r||"y"==i&&"above"==u&&r||"x"==i&&"below"==u&&r)&&C.push(t);for(var x=0;x<c.length;x++){var n=s.indexOf(c[x]);C.push(null==d||null==d[n]?h?t:"black":d[n])}("y"==i&&"above"==u&&!r||"x"==i&&"below"==u&&!r||"y"==i&&"below"==u&&r||"x"==i&&"above"==u&&r)&&C.push(t);for(var k=[],x=0;x<y.length;x++){var O={};O.offset=y[x]+"%",O.color=x%2==0?C[x/2]:C[(x-1)/2],k.push(O)}var A={};A.type="thresholdLinear",A.options={};var S=A.options,P=r?e.axes.y.groups[0].scale:e.axes.x.scale,E=r?e.axes.x.scale:e.axes.y.groups[0].scale,L="x"==i&&!r||"y"==i&&r;S.x1=L?P(P.domain()[0]):0,S.x2=L?P(P.domain()[m-1]):0,S.y1=L?0:E(E.domain()[m-1]),S.y2=L?0:E(E.domain()[0]),S.values=c,S.color=C,S.seriesclr=t,S.overlayRange=u;var z=(L?P:E).domain();S.scale=z[0]+"_"+z[1];var D=e.plot.renderer.mode,R=e.chartTypes[o].name,j=e.systemConf.chart.plot.plotoptions[R],M="line"===R?j.strokeOpacity:j.fillOpacity,I=[S.x1,S.x2,S.y1,S.y2],B=T(A,I,C,M),H={offset:R,chartObj:e,offset:k,dimension:I,color:C},V="svg"==D?Qs.get($s,"svgGradientFill",B,H):Qs.get(canvas_gradients,"canvasGradientFill",B,H);return"svg"==D?"url("+e.defsLocation+"#"+V+")":V}:void 0},Si.annotation=function(){},Si.annotation.draw=function(e,t){"use strict";var a=e.systemConf.notes,r=it(a)&&a.enabled===!0;if(r){var n=e.dataObject.isPolarAxisCategory,i=ic(a.chartValues,[]);if(i.forEach(function(t){Si.annotation.addNotes(e,{coordinate:[t.x,t.y],conf:t})}),e.isAxisCategory||n)for(var l=0,o=e.seriesdata.length;o>l;l++){var s=e.renderer[l];"image"===e.plot.renderer.mode&&Ki.setRendererProp(e,s,e.seriesdata,l,{image:!0});var c,d=e.rendererConf[l].params,u=d.xscale,h=d.yscale,f=d.stacked,g=d.datasetIndex,p=d.axisrotated,m=d.yaxiscolumnorder,v=e.dataset.getDataType("x")==Fo?u.domain():e.dataObject.getCategories("x"),y=e.chartTypes[g].value;c=ir(y)?function(t,a,r){var n=s.commonOption||qa(e.rendererConf[g],g);return[e.dataObject.getTransRectValue("x",t,a,r,n),e.dataObject.getTransRectValue("y",t,a,r,n)]}:function(t){var a=n?[e.plotarea_approx.x,e.plotarea_approx.y]:[0,0];return[e.dataObject.getXYvalue(p,f,u,h,m,t,"x")+a[0],e.dataObject.getXYvalue(p,f,u,h,m,t,"y")+a[1]]},t=Si.annotation.preprocessAnnotations(e.seriesdata,g,c,t,e,d,v)}t.forEach(function(t){Si.annotation.addNotes(e,t)})}return t=[]},Si.annotation.addNotes=function(e,t){var a,r,i,l,o=e.systemConf.notes,s=e.plotarea,c=e.canvasarea,d=c.width,u=c.height,h=t.coordinate,f=t.basedOn||"chart",g=t.data,p=t.conf||{},m=t.disabled,v=ic(p.type,o.type,"stickyNote"),y="block"===f||"plot"===f?s:c,x=p.overflow||o.overflow||"scroll";"block"===f&&(i="scroll"===x?"auto":"hidden",a=ta(o.maxWidth||"100%",y.width)),"block"===f&&(l="scroll"===x?"auto":"hidden",r=ta(o.maxHeight||"10%",y.height));var b="plot"==f?n(g):"block"==f?W(p,""):n(h);b="plot"!=f&&null!=p.id?p.id:f+b.replace(/[`~!@#$%^&*( )_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),p.id=b;var w=zt(e.notes,"div",[1],"#","id",f);w.styles({width:"0",height:"0"});var C=zt(w,"div",[t],"#","id",b);C.styles({display:m?Sl:null,position:"absolute",left:"0",top:"0","overflow-x":i,"overflow-y":l,"max-width":a+Al,"max-height":r+Al});var k=Si.annotation["stickyNote"===v?"stickyNote":"customNote"](),O=ac(o.options[v],t.conf||{},!0);if(k.chartObj(e).conf(O),Bt(C,[O,e.systemConf.canvas,Us],!0),C.call(k),!m){var A=C.node(),S="stickyNote"===v?ul(parseFloat(C.selectAll(".head").style("width")),parseFloat(C.selectAll(".body").style("width"))):0,P="stickyNote"===v?parseFloat(C.selectAll(".head").style("height"))+parseFloat(C.selectAll(".body").style("height")):0;h=h.map(function(t,a){var r="plot"===f?t+e.plotarea[0==a?ms:xs]:tt(t,e,r,A);return isNaN(+r)?ta(t,0==a?d:u,0):r});var T="plot"===f||"block"===f?p.transform:null;h=tt(T,e,p,A,h)||h,k.coordinate(h),h=In(h[0],h[1],S,P,d,u),C.styles({left:h[0]+Al,top:h[1]+Al});var E="plot"==f?g:b,L=Bn(o,E,f);return-1==L&&Mn(o,E,"",t.coordinate,f),C}},Si.annotation.preprocessAnnotations=function(e,t,a,r,i,l,o){function s(e,t){var a=e[0],r=e[1];return a>=0&&r>=0&&a<=t.width&&r<=t.height}function c(e,t,a,n){r.push({coordinate:e,data:t,conf:a,disabled:n,basedOn:"plot"})}if(!i.destroying){var d=i.systemConf.notes;if(!it(d)||d.enabled===!1)return r;var u=d.plotValues,h=i.isAxisCategory,f=i.isNonAxisMultiSeriesCategory,g=l.dataset,p=l.stacked,m=i.plotarea,v=l.yaxiscolumnorder,y=e[t],x=i.dataObject.isHierarchy?y:y.data,b=(h||f)&&e.length>1?y.seriesname:null,w=i.chartTypes[t].name,C=i.dataObject.seriesNames||(i.dataObject.seriesNames=i.seriesdata.map(function(e){return e.seriesname})),k=h&&e.length>1?u.filter(function(e){var t=e.data[e.data.length-1];return b==t||-1==C.indexOf(t)}):u;return k.forEach(function(t){for(var r=!1,i=t.data,l=0,d=h?x.length:1;d>l&&!r;l++)for(var u=0,k=x[l].length;k>u&&!r;u++){var O=x[l][u],A=jn(O,b);if(n(A)==n(i)){r=!0;var S=a(O,l,u),P=h&&!s(S,m)?!0:h||f?y.disabled:O.disabled;c(S,A,t,P)}}if(h&&!r&&("bar"===w?-1!=o.indexOf(g.getX(i)):!0)){r=!0;var O=jn(i);p&&(O.y=g.getY(i,v),O.y0=0);var S=a(O,0,u),P=h&&!s(S,m)?!0:h&&e.length>1&&-1==C.indexOf(i[i.length-1])?!1:y.disabled;c(S,O,t,P)}if(!r&&"sunburst"===w){var T=[b,y.value];n(T)===n(i)&&c(a(y),T,t,y.disabled)}}),r}},Si.annotation.addBlockAnnotations=function(e){var t=e.systemConf.notes;if(it(t)&&t.enabled!==!1){{Si.setDefaultOptions("notes",e.systemConf,e.globalProp)}t=e.systemConf.notes;var a,r,n=t.blockValues,i=e.plotarea,l=ta(t.maxWidth||"100%",i.width),o=ta(t.maxHeight||"10%",i.height),s=i.width,c=i.height,d=i.left,u=i.top,h=i.bottom;n.forEach(function(n){var f=n.hAlign,g=n.vAlign,p=n.overflow||t.overflow||"scroll",m=f===vs,v=f===ms,y=g===xs,x=g===ys;if(!(r&&y||a&&x)){{var b=function(e,t,a){var r=a.getBoundingClientRect(),n=m?d+s:v?d:d+s/2,i=m?r.width:v?0:r.width/2;return ul(n-i,0)},w=function(e,t,a){var r=a.getBoundingClientRect(),n=y?u:u+c,i=y?0:r.height;return n-i},C=Si.annotation.addNotes(e,{coordinate:[b,w],conf:n,basedOn:"block"}),k=C.node(),O=k.getBoundingClientRect(),A=O.height;O.width}"fire"===p&&(k.scrollHeight>o||k.scrollWidth>l)?C.remove():(i.height=c-A,y?i.top=u+A:x&&(i.bottom=h+A)),r=r||y,a=a||x}})}},Si.annotation.stickyNote=function(){function e(e){e.each(function(e){var n=jl(this),i=t.systemConf.notes,l=t.canvasarea.width,o=t.canvasarea.height,s=t.notes,c=e.basedOn||"chart",d=(e.data,e.coordinate),u="string"==typeof d[0]&&d[0].indexOf("%")>-1,h="string"==typeof d[1]&&d[1].indexOf("%")>-1,f=a.text,g=s.selectAll(".head").size(),p=a.color,m="open"===a.mode,v=rt(a.bodyWidth,100),y=rt(a.bodyHeight,100),x=rt(a.headWidth,15),b=rt(a.headHeight,15),w=m?0:1;p=p instanceof Array?p[g%p.length]:p;to().on("drag",function(){if(!d3.event.defaultPrevented){var e=jl(this.parentNode),t=parseFloat(e.style("left"))+d3.event.x,a=parseFloat(e.style("top"))+d3.event.y,n=ul(w%2!=0?0:v,x),s=(w%2!=0?0:y)+b;t=t>l-n?l-n:0>t?0:t,a=a>o-s?o-s:0>a?0:a,r[0]=t,r[1]=a;var d=t+Al,f=a+Al;if(e.styles({left:d,top:f}),"plot"!=c){var g=e.attr("id"),p=Bn(i,g,c);-1!=p&&(i.chartValues[p].x=u?t/l*100+"%":t,i.chartValues[p].y=h?a/o*100+"%":a)}}});n.attr("class","group").styles({width:0,height:0,"z-index":2});var C=zt(s,"textarea",[1]);C.styles({width:v+Al,height:y+Al,position:"absolute","border-color":Pl,"border-radius":(a.bodyBorderRadius||0)+Al,"background-color":Pl,overflow:"hidden",display:Sl,resize:Sl,"z-index":2,outline:Sl}).on("blur",function(){var e=C.attr("eleID");if(C.style("display",Sl),null!=e){var t=jl("#"+e),a=t.selectAll(".body");a.style("color",null),t.style("z-index",2)}}).on("input",function(){var e=jl(this);if(e.style("display")!==Sl){var t=jl("#"+e.attr("eleID")),a=t.selectAll(".body"),r=t.attr("id"),n=C.node().value,l=t.datum(),o=l.basedOn||"chart",s=l.data;a.text(n);var c="plot"==o?s:r,u=Bn(i,c,o);-1==u?Mn(i,c,n,d,o):i[o+"Values"][u].text=n}}).text(f);var k=zt(n,"div",[1],".","class","head");k.attr("customColor")||k.style("background-color",p).attr("customColor",p),k.styles({width:x+Al,height:b+Al,border:a.border,"border-radius":(a.headBorderRadius||0)+Al,"z-index":"auto"});var O=function(){if(!d3.event.defaultPrevented){var e=w%2==0,t=jl(this.nextSibling),a=jl(this.parentNode);if(C.on("blur")(),e)a.transition().delay(250).duration(0).styles({left:r[0]+Al,top:r[1]+Al});else{var n=In(parseFloat(a.style("left")),parseFloat(a.style("top")),v,b+y,l,o);a.styles({left:n[0]+Al,top:n[1]+Al})}t.style("color",null).transition().ease(Fl).styles({width:e?0+Al:v+Al,height:e?0+Al:y+Al,display:e?null:"block"}),t.transition().delay(250).style("display",e?Sl:null),s.selectAll(".group").style("z-index",1),a.style("z-index",2),w++}},A={click:O},S={tap:O};Ar(k,A,S);var P=n.selectAll("div.body").empty()?{"background-color":p}:{},T=zt(n,"div",[1],".","class","body");T.styles({width:m?v+Al:"0",height:m?y+Al:"0",display:m?null:Sl,border:a.border,overflow:"hidden","box-shadow":a.shadow,"border-radius":(a.bodyBorderRadius||0)+Al,"z-index":"auto"}).styles(P).text(f);var O=function(){var e=jl(this),t=jl(this.parentNode);C.on("blur")(),C.styles({display:null,left:t.style("left"),top:parseFloat(t.style("top"))+b+Al,color:t.style("color"),"font-size":t.style("font-size"),"font-family":t.style("font-family"),"font-weight":t.style("font-weight"),"font-style":t.style("font-style")}).attr("eleID",t.attr("id")),C.node().value=e.text(),C.node().focus(),e.style("color",Pl),s.selectAll(".group").style("z-index",1),t.style("z-index",2),C.style("z-index",3)},A={click:O},S={tap:O};Ar(T,A,S)})}var t,a,r;return e.chartObj=function(a){return arguments.length?(t=a,e):t},e.conf=function(t){return arguments.length?(a=t,e):a},e.coordinate=function(t){return arguments.length?(r=t,e):r},e},Si.annotation.customNote=function(){function e(e){e.each(function(e){jl(this).html(tt(t.htmlEl,r,e.conf))})}var t,a,r;return e.coordinate=function(t){return arguments.length?(a=t,e):a},e.conf=function(a){return arguments.length?(t=a,e):t},e.chartObj=function(t){return arguments.length?(r=t,e):r},e},Si.events.zoom=function(e,t,a){"use strict";function r(t,r,n,i){a.chart.axes[t+"axis"].disableBaseValue=!0;var l=g[t]={};i==Fo?l.categories=n:(l.minRange=n[0],l.maxRange=n[1]),e.updateScale(f[r],t,n)}function n(t,a){return t=tt(t,e,c),t=null!=t?t:a}function i(e){return{x:hl(ul(e[0]-m.left,0),m.width),y:hl(ul(e[1]-m.top,0),m.height)}}var l,o,s,c,d=!1,u={},h=e.svg,f=a.seriesdata.chartdata,g=a.chart.zoom,p=2,m=e.plotarea,v=g.selectionArea,y=g.resetButton,x=y.border,b=y.shadow,w=y.label,C=g.type,k=x.show,S=y.x,P=y.y,T=k?x.radius:0,E=null;b.show&&(E=Qs.get(Js,"dropShadow",b),E=E?"url("+e.defsLocation+"#"+E+")":null);var L=g.events||{};return u.zmInit=function(){s=zt(h.selectAll(".seriesholder"),"rect",[1],".","class","zmarea"),s.styles({fill:v.fillColor||"grey","fill-opacity":v.fillOpacity,visibility:"hidden"});var t=zt(e.staticPaneSVG.select(".eventgroup"),"rect",[1],".","class","zmbtn"),r=O(x.style,x.size);t.attrs({rx:T,ry:T,filter:E}).styles({fill:y.fillColor,"fill-opacity":y.fillOpacity,stroke:x.color,"stroke-width":k?x.size:0,"stroke-dasharray":r,"stroke-linecap":A(x.lineCap,r),visibility:"hidden",cursor:Tl});var i={click:u.reset},l={tap:u.reset};Ar(t,i,l);var o=zt(e.staticPaneSVG.select(".eventgroup"),"text",[1],".","class","zmbtn");o.attr("dy","0.9em").styles({visibility:"hidden","pointer-events":Sl}).text(w.text),Bt(o,[w,a.chart,a.canvas,{fontColor:"white",fontSize:11,fontFamily:"verdana"},Us]);var d=o.node().getBBox();t.attrs({width:d.width+w.marginLeft+w.marginRight,height:d.height+w.marginTop+w.marginBottom}),c=t.node().getBBox(),S=n(S,m.left+m.width-c.width),P=n(P,10),t.attrs({x:S,y:P}),o.attrs({x:S+w.marginLeft,y:P+w.marginTop})},u.zoomInitialized=!1,u.zmStart=function(a){C=g.type,d=!0,l=i(a);var r={};s.style("visibility","visible");var n=C.indexOf("x")>-1&&!t||C.indexOf("y")>-1&&t,o=C.indexOf("y")>-1&&!t||C.indexOf("x")>-1&&t;n?r.x=l.x:r.width=m.width,o?r.y=l.y:r.height=m.height,s.attrs(r),u.zoomInitialized=!0,tt(!0,L.zoomstart,l,{x:g.x,y:g.y},e)},u.zmMove=function(a){if(C=g.type,d){var r=i(a),n={},c=C.indexOf("x")>-1&&!t||C.indexOf("y")>-1&&t,u=C.indexOf("y")>-1&&!t||C.indexOf("x")>-1&&t;Fn(d3.event)&&(l=i(Hn(e.eventHandler.trackerElement.node(),0)),r=i(Hn(e.eventHandler.trackerElement.node(),1))),o=r,c&&(n.x=(r.x<l.x?r:l).x,n.width=fl(r.x-l.x)),u&&(n.y=(r.y<l.y?r:l).y,n.height=fl(r.y-l.y)),s.attrs(n)}tt(!0,L.zoom,r,{x:g.x,y:g.y},e)},u.zmEnd=function(e){return u.zoomInitialized?(Fn(d3.event)||(o=i(e)),s.attrs({height:0,width:0}).style("visibility","hidden"),d=!1,u.zoomInitialized=!1,{startPt:l,endPt:o}):!1},u.zoomed=function(n,i,l,s){C=g.type;var c=null!=i,d=t?"y":"x",h=t?"x":"y",f=C.indexOf("x")>-1&&(c||fl(n.startPt[d]-n.endPt[d])>p),m=C.indexOf("y")>-1&&(c||fl(n.startPt[h]-n.endPt[h])>p),v=C.indexOf("x")>-1&&(c?l[0]!=l[1]:n.startPt[d]!=n.endPt[d])||C.indexOf("y")>-1&&(c?s[0]!=s[1]:n.startPt[h]!=n.endPt[h]);if(v){if(tr(e,a.chart.axes.events,null,"init"),f){var y=e.dataset.getDataType("x");if(!c){var x=e.axes.x.scale,b=a.chart.axes.xaxis.reversed,w=Si.scale.invert(y,n.startPt,x,t,"x",b),k=Si.scale.invert(y,n.endPt,x,t,"x",b);if(w>k){var O=w;w=k,k=O}l=y==Fo?x.domain().slice(w,k+1,0):[w,k]}r("x",c?i:0,l,y)}if(m)for(var A=c?i:0,S=c?i+1:e.axes.y.groups.length;S>A;A++){var y=e.dataset.getDataType("y",A);if(!c){var P=e.axes.y.groups[A].scale,b=a.chart.axes.yaxis[A].reversed,T=Si.scale.invert(y,n.startPt,P,t,"y",b),E=Si.scale.invert(y,n.endPt,P,t,"y",b);T>E&&(T=T+E-(E=T)),s=y==Fo?P.domain().slice(T,E+1,0):[T,E]}r("y",A,s,y)}tr(e,a.chart.axes.events,null,"onreload"),e.updatePlotareaProp(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),u.clipMarker||(e.drawPlotareaClippath(),u.clipMarker=!0),e.drawThreshold(!0),e.staticPaneSVG.selectAll(".zmbtn").style("visibility","visible"),tt(!0,L.zoomend,o,{x:g.x,y:g.y},e)}},u.reset=function(){if(delete g.x,delete g.y,tr(e,a.chart.axes.events,null,"init"),C=g.type,C.indexOf("x")>-1&&(a.chart.axes.xaxis.disableBaseValue=!1,e.updateScale(f[0],"x",null)),C.indexOf("y")>-1)for(var t=0;t<e.axes.y.groups.length;t++)a.chart.axes.yaxis.disableBaseValue=!1,e.updateScale(f[t],"y",null);tr(e,a.chart.axes.events,null,"onreload"),e.updatePlotareaProp(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),e.drawThreshold(!0);var r=setInterval(function(){e.chartRendered&&(e.drawPlotareaClippath(),u.clipMarker=!1,clearInterval(r))},10);e.staticPaneSVG.selectAll(".zmbtn").style("visibility","hidden"),tt(L.reset,e)},u};var Nc=function(e,t){function a(){x=e.dataObject.getAxisRotated(),b=x?"left":"bottom";var r=e.axes.x.scrollScale=Si.scale.getScale(e,e.dataObject,e.plotarea,b,0,e.dataset,t,null,0),i=f(e,e.plotarea),l=p(r,i);return(w=Math.abs(l-e.plotarea[x?"height":"width"])>=1||z)?(a.initialized,a.component=x?Vo():Ho(),a.component.on("brush",function(){return e.isBrushing=!0,O&&k?(O=!1,null):(O=k?!0:!1,void a.scrollNrender())}).on("start",function(){k=!1,e.isBrushing=!0;var t=n(d3.event.selection);t[0]===t[1]?a.scrollNrender(!0):k=!1}).on("end",function(){k=!1,O=!1,e.isBrushing=!1}),a.context||(a.context=zt(e.svg,"g",[1],".","class","brush")),void(x?(e.plotarea.width-=P.height||T.scrollHeight,a.context.attr("transform","translate("+(e.plotarea.left+e.plotarea.width)+","+e.plotarea.top+")")):(e.plotarea.bottom+=P.height||T.scrollHeight,e.plotarea.height-=P.height||T.scrollHeight,a.context.attr("transform","translate("+e.plotarea.left+","+(e.plotarea.top+e.plotarea.height)+")")))):void e.svg.selectAll("g.brush").remove()}function r(e){return x?[{x:0,y:e[0]},{x:0,y:e[1]}]:[{x:e[0],y:0},{x:e[1],y:0}]}function n(a){if(y==Fo)return[a[0],a[1]];var n=r(a),i=Si.scale.invert(y,n[0],e.axes.x.scrollScale,x,t),l=Si.scale.invert(y,n[1],e.axes.x.scrollScale,x,t);return[e.axes.x.scrollScale(i),e.axes.x.scrollScale(l)]}function i(t){var r=n(t),i=a.categoryPosInScreen,l=a.scrollBarLength||p(e.axes.x.scrollScale,i);if(a.scrollBarLength=l,A=O?!1:r[0]===r[1],k=k||A){if(!A){var o=l*(x?-1.5:.5);r[0]+=r[1]-S[1]+o,r[1]=r[0]+l}r[0]-=l/2,r[1]-=l/2,x?(r[0]=r[0]<0?0:r[0],r[1]=r[0]+l,r[1]=r[1]>e.plotarea.height?e.plotarea.height:r[1],r[0]=r[1]-l):(r[0]=r[1]>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0]<0?0:r[0],r[1]=r[0]+l,r[0]=r[0]+l>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0],r[1]=r[0]+l),A&&(S=r)}return r}function l(a){var r,n=Si.scale.invert(y,a[0],e.axes.x.scrollScale,x,t),i=Si.scale.invert(y,a[1],e.axes.x.scrollScale,x,t);return r=y==Fo?x?e.axes.x.scrollScale.domain().slice(i,n+1,0):e.axes.x.scrollScale.domain().slice(n,i+1,0):[n,i]}function o(){var t,r,n=jt(a.context).translate;x?(t=e.plotarea.left+e.plotarea.width,r=e.plotarea.top):(t=e.plotarea.left,r=n[1]),a.context.attr("transform","translate("+t+","+r+")"),L&&C.styles({left:t+"px",top:r+"px"});var i={};i[x?"width":"height"]=P.height||T.scrollHeight;var l={};s(a.context.selectAll("rect.selection"),P.slider,T.slider,i),s(a.context.selectAll("rect.overlay"),P.tracker,T.tracker,i),s(a.context.selectAll("rect.handle"),P.resizer,T.resizer,l),c()}function s(e,t,a,r){t=t||{},e.styles({visibility:"visible",cursor:t.cursor||a.cursor,fill:t.fillColor||a.fillColor,"fill-opacity":t.fillOpacity,"stroke-opacity":t.strokeOpacity,"stroke-width":t.strokeWidth,stroke:t.strokeColor}).attrs({rx:t.radius,ry:t.radius,opacity:null}).attrs(r)}function c(){var e=P.resizer||{};e.enabled||a.context.selectAll(".handle").remove()
}function d(e,t,a){e.axes.x.scrollScale=Si.scale.getScale(e,e.dataObject,t,b,0,e.dataset,a,null,0)}function u(t,a,r,n){var i=e.axes.x.scrollScale,l=x?t.height:t.width,o=e.dataObject.getCategories("x"),o=o&&o.length?o:e.dataObject.findXCategories(),s=o.length;n=n>s?s:n;var c=i?g(i,n-1,o[n-1]):cl((l-r)/s*n);return c}function h(t,a,r,n){var i=e.axes.x.scrollScale,l=(x?t.height:t.width,za(n,a)),o=m(e,t,r,l);r=i&&i.bandwidth?Da(i.range(),o,a,r,l):2*l*r;var o=m(e,t,r,l),s=u(t,a,r,o);return s}function f(e,t){var a,r=(x?t.height:t.width,P.visibleCategories),n=e.chartTypes[0].name,i="gantt"==n||"bullet"==n||"bar"==n?e.systemConf.chart.plot.plotoptions[n].padding||.2:.2,l=e.systemConf.chart.plot.plotoptions[n].outerPadding||.02;return a=r?u(t,i,l,r):h(t,i,l,P.categoryThickness||E)}function g(e,t,a){return e.bandwidth?e.ordinalRange[t]:e(a)}function p(e,t){return e.bandwidth?x?e.range()[0]-t:t+e.bandwidth():x?e.range()[0]-t:t}function m(e,t,a,r){return cl(x?(t.height-a)/r:(t.width-a)/r)}function v(){var t=e.plotarea,a=e.userdata;a.chart.scroll.enabled=!1,a.chart.axes.xaxis.show=!1,a.chart.axes.yaxis[0].show=!1,a.canvas.title.show=!1,a.canvas.subtitle.show=!1,a.chart.plot.renderer?a.chart.plot.renderer.mode="canvas":a.chart.plot?a.chart.plot.renderer={mode:"canvas"}:a.chart.plot={renderer:{mode:"canvas"}},a.chart.marginTop=0,a.chart.marginBottom=0,a.chart.marginLeft=0,a.chart.marginRight=0,a.canvas.intelligence={},a.credits?a.credits.show=!1:null,a.chart.plot.datalabels?a.chart.plot.datalabels.show=!1:null,a.legend.enabled=!1,C=e.container.selectAll("div.zcoverview"),C.styles({position:"absolute",width:t.width+"px",height:+P.height+"px","pointer-events":Sl,"box-sizing":"border-box"}),Si.charts(C.node(),a)}var y,x,b,w,C,k,O,A,S,P=e.systemConf.chart.scroll,T={slider:{fillColor:"#B3B6B7",cursor:Tl},tracker:{fillColor:"#ECF0F1",cursor:Tl},resizer:{fillColor:Sl},scrollHeight:10},E=15,L=(P.overview||{}).enabled,z=(P.resizer||{}).enabled;return e.isBrushing=null,a.initialize=function(r){if(!w)return void e.svg.selectAll("g.brush").remove();y=e.dataset.getDataType(t),b=x?"left":"bottom",d(e,r,t),a.categoryPosInScreen=f(e,r),a.extent=[];var n=x?"y":"x",i=x?[{y:a.categoryPosInScreen||.01,x:0},{y:r.height,x:0}]:[{x:0,y:0},{x:a.categoryPosInScreen||.01,y:0}];a.setExtent(i),a.initialized=!1,a.context.call(a.component),a.context.call(a.component.move,[i[0][n],i[1][n]]),a.initialized=!0,L&&v(),o()},a.scrollNrender=function(r){a.updateExtentPosition(r),a.initialized&&(e.updateScale(e.seriesdata[0],t,a.extent),e.drawThreshold(!0),e.drawPlotareaClippath(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e))},a.updateExtentPosition=function(e){var t=i(d3.event.selection),n=x?"y":"x",l=r(t);a.setExtent(l),(e||O)&&(a.context.call(a.component.move,[l[0][n],l[1][n]]),c()),e&&(A=!1)},a.setExtent=function(t){var r=x?[P.height,e.plotarea.height]:[e.plotarea.width,P.height];a.component.extent([[0,0],r]);var n=l(t);a.extent=n},a};Nn.initialize=function(e){if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){a?e.scrolledY=e.scrolledY||0:e.scrolledX=e.scrolledX||0;var t=zt(e.container.selectAll(".d3container"),DIV_ELEMENT,[1],".","class","zohocharts_scroll");t.styles({width:100+Al,height:100+Al,overflow:"auto",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)","box-sizing":"content-box","-webkit-tap-highlight-color":Pl,"-webkit-overflow-scrolling":"touch"}),zt(t,DIV_ELEMENT,[1],".","class","child").styles({width:200+Al,height:200+Al});var a=e.dataObject.getAxisRotated(),r=e.defaultScroll,n=t.node(),i=a?n.offsetWidth-n.clientWidth:n.offsetHeight-n.clientHeight;t.attr("scrollbarSize",i),r||(r=e.defaultScroll={},r.tickmarkSize=+e.systemConf.chart.axes.xaxis.tickmark.size,r.marginRight=+e.systemConf.chart.marginRight),a?(e.plotarea.bottom+=i,e.plotarea.width-=i):e.systemConf.chart.axes.xaxis.tickmark.size=+r.tickmarkSize+i}};var Yc;!function(){Yc=function(e,t){function a(e){i.attr("transform",function(t,a){return"translate("+(d?e[a]:0)+","+(d?0:e[a])+")"})}function r(e){u.initialized=!1,d3.event.selection=e,n.call(u.move,e),u.initialized=!0,t.onBrush(u),a(e)}this.chartObj=e,this.options=t,this.isResizeInitiated=null;var n,i,l,o,s=(t.scale,t.orient),c=t.dimension,d=s===xs||s===ys,u=this.component=(d?Ho:Vo)(),h=t.initialExtent,f=[0,c[d?0:1]],g=this,p=t.onClick;u.on("brush",function(){if(g.updateTrackerBound(),u.initialized){var e=d3.event.selection;e[0]===e[1]&&f.indexOf(e[0])>-1?(e=g.resizeFilterRange(e[0],f,!0),r(e)):(a(e),t.onBrush(u),o.show()),h=e,l=d3.event.type}}).on("start",function(){this.isResizeInitiated=!1,l=d3.event.type}).on("end",function(){if(u.initialized){var e=d3.event.selection=d3.event.selection||h,a=d3.event.sourceEvent;if("start"===l){var i=gr(n.node(),d3.event),s=hl(ul(i[d?0:1],f[0]),f[1]);e="reposition"===p?g.repositionFilterRange(s,h):g.resizeFilterRange(s,h),r(e),o.show()}else n.node().contains&&n.node().contains(a.srcElement||a.target)||o.hide();t.onEnd(u),h=d3.event.selection,l=d3.event.type}}),this.context||(this.context=n=zt(t.element||e.svg,"g",t.brushOptions.enabled?[1]:[],".","class","brush",{"pointer-events":"visible"})),u.initialized=!1,u.extent([[0,0],c]),n.call(u),this.drawSlider(),i=this.slider,a(t.initialExtent),o=this.tooltipComponent=new _c(this),n.call(u.move,t.initialExtent),u.initialized=!0,this.drawTracker(),n.selectAll(RECT_ELEMENT+".selection").style("opacity",0)},Yc.prototype.repositionFilterRange=function(e,t){var a=this.options.scale,r=fl(t[1]-t[0]),n=a.range().sort(no),i=[e-r/2,e+r/2];return i[1]>n[1]&&(i[1]=n[1]-(a.bandwidth?.1*r:0),i[0]=i[1]-r),i[0]<n[0]&&(i[0]=n[0]+(a.bandwidth?.1*r:0),i[1]=i[0]+r),i},Yc.prototype.resizeFilterRange=function(e,t,a){var r,n=fl(t[0]-e),i=fl(t[1]-e);if(a){var l=5e-5;r=i>n?[t[0],e+l]:[e-l,t[1]]}else r=i>n?[e,t[1]]:[t[0],e];return r.sort(no)}}(),function(){function e(e,t){var a=e.split(" "),r={dx:parseFloat(a[0]),dy:parseFloat(a[1]),color:a[3],blur:parseFloat(a[2]),x:"-50%",y:"-50%",width:"200%",height:"200%"};return e=Qs.get(Js,"dropShadow",r),e="url("+t.defsLocation+"#"+e+")"}function t(e,t,a,r){var n,i,l=t[0],o=t[1];switch(e){case"lever":case"vernier":case"pentagon":a?(n=0,i=o/2):(n=l/2,i=0);break;case"triangleUp":a?(n=0,i=-r.size/2):(n=-r.size/2,i=0);break;case"triangleDown":a?(n=0,i=o+r.size/2):(n=l+r.size/2,i=0);break;case"hollowCircle":a?(n=0,i=o/2):(n=l/2,i=0);break;case"circle":a?(n=0,i=o/2):(n=l/2,i=0)}return[n,i]}Yc.prototype.drawSlider=function(){var a=this.chartObj,r=this.options,n=this.context,i=r.orient,l=i===xs||i===ys,o=r.dimension,s=r.brushOptions.slider,c=s.shadow,d=s.type,s=s[d],u=l?"":" rotate(-90)";c&&(c=e(c,a));var h=this.slider=zt(n,"g",l?[{type:"w"},{type:"e"}]:[{type:"n"},{type:"s"}],".","class","handle--custom");switch(h.attr("cursor",l?"ew-resize":"ns-resize").selectAll("*").remove(),d){case"lever":var f=a.dataObject.getTransRectValue("radius",null,null,null,null,s.radius);h.append(Xo).attrs({d:Mt(-s.width/2,-s.height/2,s.width,s.height,f),filter:c}).styles({fill:s.fillColor,stroke:s.strokeColor}),h.append(Xo).attrs({d:"M"+-s.stripePadding/2+" "+-s.stripeHeight/2+" L"+-s.stripePadding/2+" "+s.stripeHeight/2+" M"+s.stripePadding/2+" "+-s.stripeHeight/2+" L"+s.stripePadding/2+" "+s.stripeHeight/2}).styles({stroke:s.stripeColor});break;case"triangleUp":h.append(Xo).attrs({d:V("triangle-down")(s.size),filter:c}).style("fill",s.fillColor);var f=a.dataObject.getTransRectValue("radius",null,null,null,null,0);h.append(Xo).attr("d",Mt(-s.size/2,s.size/2,s.size,o[l?1:0],f)).style("fill",Pl);break;case"triangleDown":h.append(Xo).attrs({d:V("triangle-up")(s.size),filter:c}).style("fill",s.fillColor);var f=a.dataObject.getTransRectValue("radius",null,null,null,null,0);h.append(Xo).attr("d",Mt(-s.size/2,-s.size/2-o[l?1:0],s.size,o[l?1:0],f)).style("fill",Pl);break;case"hollowCircle":h.append(Xo).attrs({d:V()(s.size),filter:c}).styles({fill:s.outerFillColor,stroke:s.outerStrokeColor}),h.append(Xo).attrs({d:V()(.4*s.size)}).styles({fill:s.innerFillColor,stroke:s.outerStrokeColor});break;case"circle":h.append(Xo).attrs({d:V()(s.size),filter:c}).styles({fill:s.outerFillColor,stroke:s.outerStrokeColor,"stroke-width":s.outerStrokeWidth}),h.append(Xo).attrs({d:V()(.3*s.size)}).styles({fill:s.innerFillColor,stroke:s.outerStrokeColor});break;case"vernier":var g=h.nodes(),p=jl(g[0]),m=jl(g[1]),v=s.width,y=s.height,x="M"+.5*-v+" "+.5*-y+" L"+.5*v+" "+.5*-y+" L"+.5*v+" "+.5*y+" L"+.5*-v+" "+.2*y+" Z",b="M"+.5*-v+" "+.5*-y+" L"+.5*v+" "+.5*-y+" L"+.5*v+" "+.2*y+" L"+.5*-v+" "+.5*y+" Z";p.append(Xo).attr("d",x),m.append(Xo).attr("d",b),h.selectAll(Xo).attr("filter",c).styles({fill:s.fillColor,stroke:s.strokeColor});break;case"pentagon":var w=s.size,C=s.bandWidth,y=o[l?1:0],k="M"+(.5*-w-C)+" "+(.5*-y-C)+" L"+(.5*w+C)+" "+(.5*-y-C)+" L"+(.5*w+C)+" "+.5*y+"L0 "+(.5*y+1.5*C+2)+" L"+(.5*-w-C)+" "+.5*y+"ZM"+.5*-w+" "+.5*-y+" L"+.5*w+" "+.5*-y+" L"+.5*w+" "+(.5*y-.5*C)+"L0 "+(.5*y+.5*C)+" L"+.5*-w+" "+(.5*y-.5*C)+"Z",O="M"+.5*-w+" "+.5*-y+" L"+.5*w+" "+.5*-y+" L"+.5*w+" "+.5*y+" L"+.5*-w+" "+.5*y+"Z";h.append(Xo).attrs({d:O}),h.append(Xo).attrs({d:k,filter:c}).styles({"fill-rule":"evenodd",fill:s.fillColor,stroke:s.strokeColor})}var A=t(d,o,l,s);h.selectAll(Xo).attr("transform","translate("+A[0]+","+A[1]+")"+u)}}(),function(){Yc.prototype.drawTracker=function(){var e=this.options,t=this.context,a=e.brushOptions.track;t.selectAll(RECT_ELEMENT+".overlay").styles({fill:a.fillColor,"fill-opacity":a.fillOpacity})},Yc.prototype.updateTrackerBound=function(){var e,t=this.chartObj,a=this.options,r=this.context,n=a.scale,i=a.orient,l=a.dimension,o=r.selectAll(RECT_ELEMENT+".overlay"),s=[0,0],c=l,d=d3.event.selection.slice(),u=i===xs||i===ys;if(n.bandwidth){var h=n.bandwidth();d[0]-=d[0]%h,d[1]+=h-d[1]%h}else a.singleDomainContinuous&&(d[0]=s[u?0:1],d[1]=c[u?0:1]);e=u?"M"+s[0]+" "+s[1]+"L"+d[0]+" "+s[1]+"L"+d[0]+" "+c[1]+"L"+s[0]+" "+c[1]+"ZM"+d[1]+" "+s[1]+"L"+c[0]+" "+s[1]+"L"+c[0]+" "+c[1]+"L"+d[1]+" "+c[1]+"Z":"M"+s[0]+" "+s[1]+"L"+c[0]+" "+s[1]+"L"+c[0]+" "+d[0]+"L"+s[0]+" "+d[0]+"ZM"+s[0]+" "+d[1]+"L"+c[0]+" "+d[1]+"L"+c[0]+" "+c[1]+"L"+s[0]+" "+c[1]+"Z";var f={name:"brush",id:t.id,d:e},g={chartObj:t};clipID=Qs.get(tc,"polygon",f,g),o.attr("clip-path","url("+t.defsLocation+"#"+clipID+")")}}();var _c;!function(){function e(e){var t=e.options.orient;return t===xs||t===ys}function t(e){var t=e.systemConf.legend.colorBand,a=t.ranges,n=a&&a.length,i=e.systemConf.legend.filter.range,l=e.axes.clr.scale.domain();if(n){if(e.dataset.getDataType("clr")===Fo){var o=i||l;return[o[0],o[o.length-1]]}return i?r(i,a):[a[0],a[a.length-1]]}return i||l}function r(e,t){e[1]+=1e-12;var a,r,n=1===t[0].length;return t.forEach(function(t,n){t[0]<=e[0]&&(a=n),t[1===t.length?0:1]<=e[1]&&(r=n)}),J(a)?a=0:n?a++:null,J(r)?r=t.length-1:null,[t[a],t[r]]}_c=function(e){this.brushComponent=e;var t=e.options,a=this.tooltipOptions=t.brushOptions.slider.tooltip,r=this.container=zt(e.slider,"g",a.enabled?[1]:[]);r.style("pointer-events",Sl).style("display",Sl),this.boundBoxEle=zt(r,Xo,[1]),this.textEle=zt(r,_o,[1]),this.styleText(),this.styleBoundBox(),this.positionTooltip(),this.addHoverEvents()},_c.prototype.show=function(){Qt(this.container),this.container.styles({opacity:null,display:null}),this.updateTextContent(),this.drawBoundBox()},_c.prototype.hide=function(){this.container.transition().style("opacity",0).on("end",function(){jl(this).style("display",Sl)})},_c.prototype.styleText=function(){var t=this.textEle,a=this.brushComponent,r=a.options.orient,n=a.chartObj.systemConf,i=e(a);Bt(t,[this.tooltipOptions,n.chart,n.canvas,Us]),t.attrs({"text-anchor":i?"middle":r===ms?"start":"end",dy:i?r===xs?"0.9em":"-0.3em":"0.3em"})},_c.prototype.styleBoundBox=function(){var e=this.tooltipOptions;this.boundBoxEle.styles({fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth})},_c.prototype.positionTooltip=function(){var e,t,a=this.brushComponent,r=this.tooltipOptions,n=a.options.orient,i=U(a.slider.node()),l=r.padding+r.margin;switch(n){case ys:e=0,t=i.y-l;break;case vs:e=i.x-l,t=0;break;case ms:e=i.x+i.width+l,t=0;break;case xs:e=0,t=i.y+i.height+l}this.container.attr("transform","translate("+e+","+t+")")},_c.prototype.addHoverEvents=function(){var e=!0,t=this,a={mousemove:function(){var a=jl(d3.event.srcElement||d3.event.target).attr("class");"overlay"!==a?(t.show(),e=!0):e&&(t.hide(),e=!1)},mouseleave:function(){t.hide(),e=!1}};Ar(t.brushComponent.context,a)},_c.prototype.updateTextContent=function(){var r,n=this.brushComponent,i=n.chartObj,l=t(i),o=e(n),s=i.dataset.getColumn("clr"),c=s.datatype,d=s[c];if(i.dataset.getDataType("clr")===Yo){var u,h=i.systemConf.legend.colorBand,f=h.ranges&&h.ranges.length;if(f){var g=Ea(i);u=[g[0][0],g[g.length-1][it(g[g.length-1][0])?0:1]]}else{var p=i.axes.clr.scale.domain();u=[p[0],p[p.length-1]]}var m=fl(u[1]-u[0]);if(m){var v=Math.floor(Math.log(m)/Math.LN10)-2;r=Math.abs(Math.min(v,0))}}var y=0;this.textEle.text(function(){var e=o?y:+!y,t=l[e?l.length-1:0];return y++,it(r)&&(t=a(t)?t.map(function(e){return+e.toFixed(r)}):+t.toFixed(r)),Lr(d,t,c,i,"legend",ll,"-")})},_c.prototype.drawBoundBox=function(){var e=this.textEle.nodes(),t=this.tooltipOptions,a=t.padding,r=this.brushComponent.chartObj.dataObject.getTransRectValue("radius",null,null,null,null,t.borderRadius||0),n=0;this.boundBoxEle.attr("d",function(){var t=U(e[n++]);return Jn(t.x-a,t.y-a,t.width,t.height,r,a,xs,{},0)})}}();var Wc="x",Xc="y",Uc="z",Gc="per",Zc="splitper",Qc="maxper",qc="percent",Kc="splitpercent",$c="maxpercent",Jc="datalabels",ed="stackLabels",td="innerLabel";Si.labelRenderer=function(){},Si.labelRenderer.drawLabelsFromQueue=function(e,t,a){if(a.labelHandler=null,"image"!==a.plot.renderer.mode){var r=a.dataObject;if(a.isAxisCategory){var n=function(){var e=r.groupedByStack;e.keys().forEach(function(t,n){var i=e.get(t),l=i.stackLabelIndex;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&null!=l){var o={renderer:a.renderer[l],chartObj:a,args:[{data:[i.stackExtent]},l,ed,n],charttype:Ss};Si.labelRenderer.drawLabel(o)}})};n()}e.forEach(function(e){Si.labelRenderer.drawLabel(e)});var i=Wn(a),l=t.length,o={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom},s=function(){var e=r.isContinousChart;t=e?t.sort(function(e,t){return no(e.x1,t.x1)}):t;for(var a=1;l>a;a++){var n,i,s,c=0,d=!1,u=0,h=t[a].pointRadius||0,f=t[a].x1,g=t[a].y1,p=t[a].x2,m=t[a].y2,v=t[a].x2-t[a].x1,y=t[a].y2-t[a].y1,x=t.slice(0,a);x=e?x.reverse():x;do{switch(u){case 0:n=t[a],i="hidden"===n.overlap||r.isBubbleEnabled;break;case 1:n.y1=g-y/2,n.y2=m-y/2,s=ys;break;case 2:n.x1=(f+p)/2+h,n.x2=(f+p)/2+h+v,n.y1=m+1,n.y2=m+y+1,s=ms;break;case 3:n.x1=f,n.x2=p,n.y1=m+2*(h+1),n.y2=m+2*(h+1)+y,s=xs;break;case 4:n.x1=(f+p)/2-h-v,n.x2=(f+p)/2-h,n.y1=m+1,n.y2=m+y+1,s=vs}for(var b=a-1;b>=0;b--)if(d=oi(x[b],n)){c++;break}}while(++u<5&&d);if(0!=c){var w=r.isPolarAxisCategory?!0:si(n,o),C=t[a].translateFunction,k=t[a].id,O=t[a].isStackedLabels;if(!w||5==c||i)C(k,null,null,!0,ll,ll,O),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;else{var A=n.x1-f,S=n.y1-g;C(k,A,S,null,void 0,s,O)}}}},c=function(){var e=r.getAxisRotated();t.sort(function(t,a){return e?io(t.y1,a.y1):no(t.x1,a.x1)});for(var a=0;l>a;a++){for(var n=!1,i=0,s=0,c=t[a].x1,d=t[a].y1,u=t[a],h=t.slice(0,a).sort(function(t,a){return e?io(t.x1,a.x1):no(t.y1,a.y1)}),f="hidden"===u.overlap,g=a-1;g>=0&&2>i;g--){var p=oi(h[g],u);p&&(e?(s=h[g].x2-u.x1,u.x2+=s,u.x1+=s):(s=h[g].y1-u.y2,u.y2+=s,u.y1+=s),i++),n=n||p}if(n){var m=si(u,o),v=t[a].translateFunction,y=t[a].id,x=t[a].isStackedLabels;if(!m||i>1||f)v(y,null,null,!0,ll,ll,x),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;else{var b=u.x1-c,w=u.y1-d;v(y,b,w,ll,ll,ll,x)}}}},d=function(){if(l){var r,n,i,o=[],s=[],c=t.TOP,d=t.BOTTOM,u=0,h=0,f=[],g=[],p=0,m=0,v=0,y=0;t.forEach(function(e){var t=e.isLeft;if(t){var a=Oi(e,i,c,d,r,s,h,y,!0);i=a.totalslot,r=a.prev,h=a.count,y=a.need}else{var a=Oi(e,i,c,d,n,o,u,v);i=a.totalslot,n=a.prev,u=a.count,v=a.need}}),v||y?("funnel"===t.actualType&&o.reverse(),p=ki(o,p,f,c),s.reverse(),m=ki(s,m,g,c),Ci(f,c,i,p),Ci(g,c,i,m),t.forEach(function(e){a.labelHandler.update(e.id,e.DX,e.translate||0,e.hide,void 0,e.overlappingHookPosition)}),e.forEach(function(e){var t=e.args[1],r=a.labelHandler.getQueue(t);r&&r.properties&&r.properties.onOverlap&&r.properties.onOverlap()})):(e.forEach(function(e){var t=e.args[1],r=a.labelHandler.getQueue(t);r&&r.properties&&r.properties.onNonOverlap&&r.properties.onNonOverlap()}),t.forEach(function(e){a.labelHandler.update(e.id,0,0,null,e.actualDY)}))}};if((r.isCombinationalChart||r.isContinousChart||r.isPolarAxisCategory?s:r.noofBarEnabledSeries?c:d)(),a.staticPaneSVG.select(".temp_label").remove(),a.labelHandler){var u=a.staticPaneSVG.selectAll("g.labelholder"),h=a.plot.renderer.mode;e.forEach(function(e){var t=e.args[1],n=r.isAxisCategory?e.args[3]:null,i=/(pieInnerLabels|funnelInnerLabels)/.test(e.charttype),l=a.labelHandler.getQueue(t,n,null,i),o=Ji[h]().args(l);u.call(o,t,i)}),a.labelHandler.draw()}}},Si.labelRenderer.drawLabel=function(e){var t=e.chartObj,a=e.renderer,r=e.charttype,n=e.args,i=t.staticPaneSVG.selectAll("g.labelholder"),l=t.labelHandler;if(!t.labelHandler){var o=t.plot.renderer?t.plot.renderer.mode:"svg";l=t.labelHandler=$i[o].initialize(t),l.chartType=r}var s=Si.labelRenderer[r]();s.renderer(a).args(n),i.call(s,l)},Si.labelRenderer.bar=function(){function e(e,s){e.each(function(){function e(){if(Q===Fo){var e=b.domain();return b(e[e.length-1])+b.bandwidth()/2}var t=p.dataObject.rangeCorrections.datalabels,a=[0],r=n?X?1:-1:X?-1:1;for(var i in t)i.indexOf("y")>-1&&a.push(t[i]);return b(b.domain()[1])+Bl(a)*r}var c,d=r[0],u=r[1],h=r[2]||Jc,f=a.commonRendererProp().params,g=d.plotoptions,p=f.chartObj,m=p.systemConf,v=f.commonPlotOptions,y=f.dataset,x=f.stacked,b=f.yscale,w=f.yaxiscolumnorder,C=f.labelArray,k=h===ed,O="canvas"===p.plot.renderer.mode;n=f.axisrotated,c=ni(v,k?El:g,p,u),k&&(c=c.stackLabels);var A=k?di(c,p):ci(c,p);if(!d.disabled&&A){var S=Wn(p),P=c.textOverlap,T=Si.labelRenderer.bar.getVAlign(p,u,h),E=c.showZeros,L=ma(v,p),z=S.left,D=S.top,R=S.right,j=S.bottom,M=p.svg.node().getBoundingClientRect(),I=M.left+p.plotarea.left,B=M.top+p.plotarea.top,H=.75*(n?p.plotarea.width:p.plotarea.height),V=gi(p,f,c,h,El,u),F=V.contentType||"text",N="html"===F&&V.multiLine,Y=T===bs,_=o.isCatNull(y,"x"),W=o.isCatNull(y,"y",w),X=m.chart.axes.yaxis[w||0].reversed,G=p.barscale2.bandwidth()||0,Z=ai(c,p),Q=p.dataset.getDataType("y",w);if(!Y||p.dataObject.rangeCorrections.datalabels["y"+w]){var q=0,K=0,$=0,J=0,tt=0;if(Zn(c,p)){var at=Gn(c,p),nt=$n(at.hook);q=Qn(c,p),K=qn(c,p),$=x||T===As?0:nt.height,J=nt.width,tt=at.radius}var lt="clip"===P,ot=m.chart.plot.datalabels.handleOverlapping&&P!==Sl,st=ul(0,rt(c.padding,2))+q+$+(Y&&K?K/2-1:0),ct=Y&&e();st=st>H?H:st,i=c.textDirection,i=!i||x&&!k?n?ws:Cs:i,l=n?i==Cs?90:0:i==Cs?0:270;var dt=a.commonOption,ut=function(){return p.dataObject.getTransRectValue.apply(p.dataObject,et(arguments))},ht=zt(p.staticPaneSVG.select(".labelholder"),_o,[1],".","class","temp_label"),ft=s.update,gt=s.add;d.data.forEach(function(e,r){var o=a.seriesdataAfterUpdate&&!k?a.seriesdataAfterUpdate[r]:d.data[r];k&&Y&&b.domain()[0]<0&&(o=t(o));var s=[];ii(ht,c,p,f.color,!1,u),ht.styles({fill:Pl}),o.forEach(function(e,t){var a,o=El,d=X?-1:1,h=k?e[1]<0:y.getY(e,w)<0;ht[F](function(){if(k){{var t=e[1];e[0]}a=E||0!=t?V(e):El}else a=_(y.getX(e))||W(y.getY(e,w))||!E&&0==y.getY(e,w)?El:V(e);return a}),N&&vi(ht,0);var f,g,m,v,A,S;o=U(ht.node());var L=0,M=0;if(k){var H=dt.bandwidth1(e[0])+dt.bandwidth2(dt.stackGroupIndex)+dt.levelMarkerPadding,Q=b(e[2]||e[1]);f=n?Q:H,g=n?H:Q,n?i==Cs?(f+=(h?-st:st)*d,m=X?h?"-0.3em":"1em":h?"1em":"-0.3em"):(g+=G/2,m="0.3em",Y?(f=ct+st*d+(N?0:0)*d,v=X?"end":El):(f+=(h?-st:st)*d,v=X?h?El:"end":h?"end":El,N&&(f+=o.width/2*(h?-1:1)*d))):(f+=G/2,g+=(h?st:-st)*d,i==ws?(m="0.3em",v=X?h?El:"end":h?"end":El):(v="middle",Y?(g=ct-st*d,m=X?"1em":"-0.3em"):m=X?h?"-0.3em":"1em":h?"1em":"-0.3em"))}else{var et=o,H=ut("x",e,r,t,dt)||0,Q=ut("y",e,r,t,dt)||0,at=ut("width",e,r,t,dt)||0,rt=ut("height",e,r,t,dt)||0,nt=lt;if(f=H,g=Q,n)x?(g+=rt/2,m="0.3em",T==As?(f+=at/2*d,v="middle"):T==xs?(f+=(h?st:at-st)*d,v=X?h?"end":El:h?El:"end",N&&!Y&&(f+=et.width/2*(h?1:-1)*d)):(f+=(h?at-st:st)*d,v=X?h?El:"end":h?"end":El,N&&!Y&&(f+=et.width/2*(h?-1:1)*d))):i==ws?(M=Kn(o.height,q,tt,J),g+=rt/2+M/2,m="0.3em",nt=nt&&T!=xs&&et.width>at,A=X?h?ms:vs:h?vs:ms,Y?(v=X?"end":El,f=ct+st*d+(N?0:0)*d,A=X?vs:ms):nt?T==ys?f+=X?h?-at+st:-at:h?0:st:T==As&&(f+=X?-at+q:q):(v=X?h?El:"end":h?"end":El,T==As?(f+=(et.width>at?h?at:0:at/2)*d,v=et.width>at?v:"middle"):f+=T==xs?(h?-st:at+st)*d:(h?at-st:st)*d,!N||T===As&&et.width<=at||(f+=(h?-o.width/2:o.width/2)*d))):(L=Kn(o.width,q,tt,J),m=X?h?"-0.3em":"1em":h?"1em":"-0.3em",nt=nt&&et.width>rt,A=X?h?ys:xs:h?xs:ys,T==As?(et.height>at?N?(f+=(X?h?at:0:h?0:at)*d,f+=X?et.height/2*(h?1:-1):0):f+=(X?h?0:at:h?at:0)*d:f+=at/2*d,m=et.height>at?m:"0.3em"):f+=T==xs?(h?-st:at+st)*d:(h?at-st:st)*d,nt?(f+=L/2,g+=q):(g+=rt/2,v="middle",T==As&&(m="0.3em")));else if(x)f+=at/2,v="middle",T==As?(g+=rt/2*d,m="0.3em"):T==xs?(g+=(h?rt-st:st)*d,m=X?h?"1em":"-0.3em":h?"-0.3em":"1em"):(g+=(h?st:rt-st)*d,m=X?h?"-0.3em":"1em":h?"1em":"-0.3em");else if(i==ws){M=Kn(o.height,q,tt,J);var gt=!X&&h||X&&!h?et.width:0;nt=nt&&T!=xs&&et.width+st>rt,m="0.3em",A=X?h?ms:vs:h?vs:ms,nt?(f+=at/2,g+=T==As?X?q:rt-q:X?h?-st:0:rt+(h?0:-st)):(f+=at/2,T==As?(g+=et.width>rt?N?(h?o.width/2:rt-o.width/2)*d:(h?0:rt)*d+gt:rt/2*d,v=et.width>rt?El:"middle"):T==xs?(g+=(h?rt+st:-st)*d+gt,N&&(g-=o.width/2)):(g+=(h?st:rt-st)*d+gt,N&&(g-=o.width/2)))}else L=Kn(o.width,q,tt,J),nt=nt&&et.width+2*q>at,m=X?h?"-0.3em":"1em":h?"1em":"-0.3em",A=X?h?ys:xs:h?xs:ys,Y?(g=ct-st*d,A=X?xs:ys,m=X?"1em":"-0.3em"):T==As?(g+=(et.height<rt?rt/2:h?0:rt)*d,m=et.height<rt?"0.3em":m):g+=T==xs?(h?rt+st:-st)*d:(h?st:rt-st)*d,nt?f+=q:(f+=at/2,v="middle")}if(N){m=parseFloat(m);var pt=1.1*(c.showAs.length-1);m===-.3?(S=m,m-=pt):.3===m&&(S=m,m-=pt/2),m+="em",nt||Y||(v="middle")}if(ht.attrs({x:f,y:g,dy:m,"text-anchor":v,transform:"rotate("+l+" "+f+" "+g+")"}),Y&&jt!==!1){var mt=ta(it(c.maxWidth)?c.maxWidth:"30%",p.plotarea.width);if("html"===F){vi(ht,f);var vt=U(ht.node()),yt={left:vt.x,top:vt.y,right:vt.x+mt,bottom:vt.y+vt.height},xt=(vt.width,xi(ht,Z));yi(ht,p,[0,0],0,yt,xt),a=ht.html()}else{var vt=U(ht.node()),yt={left:vt.x,top:vt.y,right:vt.x+mt,bottom:vt.y+vt.height};hi(ht,p,[0,0],0,yt),a=ht.text()}}var bt=0,wt=0,Ct=0,kt=0;if(A=T===As?El:A,n?kt=(i===Cs?L:M)/2:Ct=(i===Cs?L:M)/2,!lt){N&&vi(ht,f);var Ot=q+K/2,At=0,St=0,et=ht.node().getBoundingClientRect(),Pt=et.left-I-Ot-Ct-At,Tt=Pt+et.width+2*Ot+2*Ct,Et=et.top-B-Ot-kt-St,Lt=Et+et.height+2*Ot+2*kt,zt=f+(z>Pt?z-Pt:Tt>R?-(Tt-R):0);zt==f||Y&&n||(bt=zt-f,f=zt);var Dt=g+(D>Et?D-Et:Lt>j?-(Lt-j):0);Dt==g||Y&&!n||(wt=Dt-g,g=Dt)}var Rt=da(y.getClr(e),p),jt=k||Rt;if(ot)if(x&&!k){ht.attrs({x:f,y:g}),N&&vi(ht,f),o=U(ht.node());var H=ut("x",e,r,t,dt)||0,Q=ut("y",e,r,t,dt)||0,rt=ut("height",e,r,t,dt)||0,at=ut("width",e,r,t,dt)||0;X&&(n?H-=at:Q-=rt);var Mt={x1:o.x-q,y1:o.y-q,x2:o.x+o.width+q,y2:o.y+o.height+q},It={x1:H,y1:Q,x2:H+at,y2:Q+rt},Bt=si(Mt,It);Bt||(jt=!1)}else if(!lt||k){N&&vi(ht,f);var et=ht.node().getBoundingClientRect(),Ht=et.left-I,Vt=et.top-B,Ft={id:"lbl"+u+"_"+r+"_"+t,translateFunction:ft,isStackedLabels:k,x1:Ht-q+bt-Ct,y1:Vt-q+wt-kt,x2:Ht+et.width+q+bt+(l?$+2*K:0)+Ct,y2:Vt+et.height+q+wt+(l?0:$+2*K)+kt,overlap:Y&&"hidden"!==P&&P!==Sl?"hidden":P};C.push(Ft)}else{if(i!=Cs){var Nt=ut(n?"width":"height",e,r,t,dt)||0;at=T==xs?o.width:Nt-(T==ys?st+q:2*q)}else at=G-2*q;o.width=hl(at,o.width)}var Yt={X:f,Y:g,DY:m,ANCHOR:v,text:a,display:jt,height:o.height+M,width:o.width+L,hookPosition:A,adjustVal:i===Cs?n?wt:bt:El};void 0!==S&&(Yt.actualDY=S),O&&"html"===F&&(Yt.tspanInfo=xi(ht,Z)),s.push(Yt)}),s.dataUpdate=o;var h=gt(s,u,r,El,k);h.properties={type:Ss,dataLabels:c,rotation:l,color:f.color,dataUpdate:o,showlabel:A,multiColoring:L,textDirection:i,rp:f,contentType:F,isMultiLine:N}})}}})}function t(e){var t=eo();return e.filter(function(e){var a=e[0];return t.has(a)?!1:(t.add(a),!0)})}var a,r,n,i,l,o=Si.DataProcessor.helpers;return e.renderer=function(t){return arguments.length?(a=t,e):a},e.args=function(t){return arguments.length?(r=t,e):r},e},Si.labelRenderer.bar.getVAlign=function(e,t,a){if(e.dataObject.noofBarEnabledSeries){var r=a===ed,n=e.systemConf.chart.plot.plotoptions[e.chartTypes[t].name],i=ni(n,r?El:e.seriesdata[t].plotoptions,e,t);r&&(i=i.stackLabels);var l=e.dataObject,o=l.getAxisRotated(),s=l.isstacked(),c=i.labelPos||xs,d=i.textDirection,u=r?di(i,e):ci(i,e);return u?(d=!d||s&&!r?o?ws:Cs:d,a===Jc&&c===bs&&(s||o&&d!==ws||!o&&d===ws)&&(c=xs),c):void 0}},Si.labelRenderer.pie=function(){function e(e,c){e.each(function(){var e=n[0],d=n[2],u=n[3],h=n[4],f=n[5],g="translate("+n[8][0]+","+n[8][1]+")",p=n[9]||{},m=r.commonRendererProp().params;o=m.chartObj,s=o.dataset;var v,y=o.systemConf,x=m.commonPlotOptions,b=m.labelArray,w=m.datasetIndex||n[1]||0,C=(r.plotarea?r.plotarea():o.plotarea).height;l=dr(o.chartTypes[w].value),e=e[w],i=n[6];var k,O,A,S,P=y.chart.plot.datalabels.handleOverlapping===!0,T=e.plotoptions,v=ni(x,T,o,w);if(S=ci(v,o),!e.disabled&&S){var E=v.type,L=v.line,z=gi(o,m,v,Jc,h,w),D=z.contentType||"text",R="html"===D,j=R&&z.multiLine,M=0,I=0,B=0,H=0;if(Zn(v,o)){var V=Gn(v,o),F=$n(V.hook);M=Qn(v,o),I=M+qn(v,o)+F.height,B=F.width,H=V.radius}S=S?E:"hidden",k=(p.padding||+(v.padding||0))+I,A=ai(v,o),O=+(Si.utils.getValueOfPlotOptions(T,x)("outerPadding")||0),r.autoLabelDone=!1,r.showlabel=S,r.lineStrokeWidth=rt(L.strokeWidth,1);var N=zt(o.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");N.attr("transform",g);var Y=c.add;(l?e:e.data).forEach(function(e,s){var c=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[s]:l?e:d,h=[];ii(N,v,o,m.color),N.style("fill",Pl),c.forEach(function(e,n){var i,o=null,c=!t(e),d=0,g=a(e),p=0>g||g>kl,m="doubleside"==S?0>g||g>kl?-(u+k):u+k:f.centroid(e)[0],v=f.centroid(e)[1]+ul(0,A-O-10-(u+f.centroid(e)[1])),y=j?"middle":p?"end":"start",x=j?"0.9em":"circular"==S&&g>kl/2&&3*kl/2>g?aa(g)+"em":"0.3em",C=x,T=e.data,E=l?0==e.depth:t(e);if(i=E?null:z(T),N[D](i).attrs({x:m,y:v,dy:x,"text-anchor":y}),c&&j){vi(N,m);var o=U(N.node());if("circular"==S){var L=_l().range([-1,0]).domain(kl>g?[0,kl]:[2*kl,kl]);v+=L(g)*o.height,m+=(g>0&&kl>g?.5:g>kl&&2*kl>g?-.5:0)*o.width}else v-=.5*o.height,m-=o.width/2*(p?1:-1);N.attr("y",v),vi(N,m)}if(P){r.showlabel="auto";var V=5,F=10;if(j||(x="0.3em",N.attr("dy",x)),c){o=U(N.node()),d=Kn(o.height,M,H,B);var Y=p?-(u+k+F):u+k+F;j&&(Y+=o.width/2*(p?-1:1));var _={id:"lbl"+w+"_"+s+"_"+n,x1:o.x-I,x2:o.x+o.width+I,y1:o.y-V-I-d/2,y2:o.y+o.height+V+I+d/2,isLeft:p,actualDY:C,DX:Y-m,overlappingHookPosition:p?vs:ms};b.push(_)}}else o=U(N.node()),d=Kn(o.height,M,H,B);var W={X:m,Y:v,DY:x,ANCHOR:y,text:i,display:c,ID:"lbl"+w+"_"+s+"_"+n,width:c?o.width:0,height:c?o.height+d:0,hookPosition:"circular"===S?null:p?vs:ms};R&&(W.isLeft=p),h.push(W)});var p=Y(h,w,s);p.properties={type:Is,dataLabels:v,dataUpdate:c,showlabel:r.showlabel,rp:m,translation:g,trans:n[8],txtHgt:A,isSunburst:l,connectorPath:function(e){var t=a(e),r="M "+i.centroid(e)[0]+" "+i.centroid(e)[1]+" L"+f.centroid(e)[0]+" "+f.centroid(e)[1];return r+" L"+f.centroid(e)[0]+" "+f.centroid(e)[1]+" L"+(0>t||t>kl?-(u+k-I):u+k-I)+" "+f.centroid(e)[1]},onNonOverlap:function(){p.properties.showlabel=r.showlabel=S,r.autoLabelDone=!0},onOverlap:function(){p.properties.connectorPath=function(e,t){var r=10,n=a(e),l=ul(0,A-O-10-(u+f.centroid(e)[1])),o=f.centroid(e)[1]+l,s=0>n||n>kl?-1:1,c=p[0][t].Y+(j?p[0][t].height/2:0),d=c-o?(u+k-I+r)*s:f.centroid(e)[0],h=f.centroid(e)[1],g=(u+k-I+r)*s,m=c,v="M "+i.centroid(e)[0]+" "+i.centroid(e)[1]+" Q "+d+" "+h+" "+g+" "+m;return v}},contentType:D,isMultiLine:j},b.TOP=-n[8][1],b.BOTTOM=C-n[8][1]})}})}function t(e){var t=da(s.getClr(l?e:e.data),o);return!t||(l?null==e.parent||0==e.value:0==e.value)}function a(e){var t=l?i.startAngle()(e):e.startAngle,a=l?i.endAngle()(e):e.endAngle;return(t+a)/2}var r,n,i,l,o,s;return e.renderer=function(t){return arguments.length?(r=t,e):r},e.args=function(t){return arguments.length?(n=t,e):n},e},Si.labelRenderer.dial=function(){function e(e,r,n){e.each(function(){var e=a[0],i=a[1],l=t.commonRendererProp().params,o=l.chartObj,s=l.commonPlotOptions,c=l.color,d=e.plotoptions,u=o.plotarea_approx,h=o.axes.y.groups[0].scale.domain(),f=ni(s,d,o,i),g=ci(f,o),p=gi(o,l,f,Jc,h[1]-h[0],0),m=p.contentType||"text",v="html"===m&&p.multiLine;if(g){var y=Zn(f,o)?Qn(f,o)+qn(f,o):0,x=zt(o.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");ii(x,f,o,c[0]),x.style("fill",Pl);var b=[o.userdata.seriesdata.chartdata[0].data[0][0]],w=[],C=0;if(b.forEach(function(e,t){var a="middle",r=v?"0.9em":"-.3em",n=p(e),l=!0;x[m](n).attrs({x:d,dy:r,"text-anchor":a});var c=U(x.node()),d=it(f.x)?tt(f.x,e,o,c):u.x,h=it(f.y)?tt(f.y,e,o,c):u.y+(s.needle.show?c.height+(+f.padding||0)+(+s.needle.width/2||7)+y:c.height/2);v&&(it(f.y)||(h-=c.height),vi(x,d),c=U(x.node()));var g={X:d,Y:h,DY:r,ANCHOR:a,text:n,display:l,ID:"lbl"+i+"_"+C+"_"+t,width:c.width,height:c.height};w.push(g)}),n){var k=w[0],O=zt(n,"text",g?b:[]);ii(O,f,o,c[0]),O[m](k.text).attrs({"text-anchor":k.ANCHOR,dy:k.DY,transform:"translate("+k.X+","+k.Y+")"}),v&&vi(x,k.X)}else{var A=r.add,S=A(w,i,C);S.properties={type:Bs,dataLabels:f,dataUpdate:b,showlabel:g,rp:l,contentType:m,isMultiLine:v}}}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},Si.labelRenderer.funnel=function(){function e(e,n){e.each(function(){function e(e){var t=h[Z-1-e],a=da(O.getClr(t),w);return t.disabled||!O.getY(t,A)||!a}function i(e){switch(X){case"singleside":return!1;case"doubleside":return e%2==0;case"strokeddoubleside":return e>=f/2}}function l(e,t){return i(t)?e.leftx+B:e.rightx-B}function o(e,t,a){var r=i(t);return G&&"overlap"!=s?r?e.leftx-D:e.rightx+D:(a=it(a)?a:B,r?0-a:y+a)}var s,c,d=a[0],u=a[1],h=a[2],f=a[3],g=a[4],p=a[5],m=a[6],v=a[7],y=m.width,x=m.height,b=t.commonRendererProp().params,w=b.chartObj,C=w.systemConf,k=b.commonPlotOptions,O=b.dataset,A=b.yaxiscolumnorder,S=b.labelArray,P=w.chartTypes[0].name,T=w.svg.selectAll("g."+P+"group").attr("transform"),E=P===Vs;d=d[u];var L=d.plotoptions,z=0,D=0,R=0,j=0;if(c=ni(k,L,w,u),Zn(c,w)){var M=Gn(c,w),I=$n(M.hook);z=Qn(c,w),D=z+qn(c,w)+I.height,R=I.width,j=M.radius}var B=m.datalabelPadding||+c.padding||0,H=c.type,V=C.chart.plot.datalabels.handleOverlapping===!0,F=ai(c,w),N=gi(w,b,c,Jc,p,u),Y=N.contentType||"text",_="html"===Y,W=_&&N.multiLine,X=ci(c,w),G=c.relativeX===!0;if(X){X=X?H:"hidden";var Z=h.length,Q=jt(w.svg.selectAll("g."+P+"group")).translate,q=0,K=zt(w.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");ii(K,c,w,b.color),K.attr("transform",T).style("fill",Pl);var $=n.add;d.data.forEach(function(t,a){var n=v,d=[];n.forEach(function(t,n){var l,s=!e(n),c=i(q),f=0,p=o(t,q)+(c?-D:D),m=E&&c?t.leftY:ul(t.y,F-g-t.y),v=W?"middle":c?"end":null,x=W?"0.9em":"0.3em",b=t.data=h[Z-1-n],w=N(b);if(K[Y](w).attrs({x:p,y:m,"text-anchor":v,dy:x}),s&&W){vi(K,p);var l=U(K.node());m-=l.height/2,p+=l.width/2*(c?-1:1),vi(K,p),K.attr("y",m)}if(V){if(s){l=U(K.node()),f=Kn(l.height,z,j,R);var C=c?-(0+B+D):y+B+D;W&&(C+=l.width/2*(c?-1:1));var k={id:"lbl"+u+"_"+a+"_"+n,x1:l.x-D,x2:l.x+l.width+D,y1:l.y-r-D-f/2,isLeft:c,y2:l.y+l.height+r+D+f/2,DX:C-p};S.push(k)}}else l=U(K.node()),f=Kn(l.height,z,j,R);var O={X:p,Y:m,ANCHOR:v,DY:x,text:w,display:s,ID:"lbl"+u+"_"+a+"_"+n,width:s?l.width:0,height:s?l.height+f:0,hookPosition:c?vs:ms};_&&(O.isLeft=c),d.push(O),q+=s?1:0}),q=-1;var f=$(d,u,a);f.properties={type:Is,dataLabels:c,dataUpdate:n,showlabel:X,rp:b,translation:T,trans:Q,txtHgt:F,connectorPath:function(t,a){q+=e(a)?0:1;var r=f[0][a].Y+(W?f[0][a].height/2:0),n=E&&i(q)?t.leftY:t.y;return"M"+l(t,q)+" "+n+" L"+o(t,q,0)+" "+n+" L"+o(t,q)+" "+r},reverseColor:!0,onOverlap:function(){s="overlap"},contentType:Y,isMultiLine:W},S.TOP=-Q[1],S.BOTTOM=x+Q[1],S.actualType=Hs
})}})}var t,a,r=5;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},Si.labelRenderer.scatter=function(){function e(e,i){e.each(function(){var e,l=r[0],o=r[1],s=r[2]||0,c=r[3],d=[0,0],u=l.plotoptions,h=a.commonRendererProp().params,f=h.chartObj,g=f.systemConf,p=h.commonPlotOptions,m=h.dataset,v=h.stacked,y=h.axisrotated,x=h.yaxiscolumnorder,b=h.xscale,w=h.yscale,C=h.labelArray,k=f.chartTypes[o].value,O=f.chartTypes[o].name==zs,A="canvas"===f.plot.renderer.mode,S=lr(k),P=k==Si.charttype.bubble,T=k==Si.charttype.bubblepie,E=f.dataObject.isPolarAxisCategory;e=ni(p,u,f,o);var L=ci(e,f);if(!l.disabled&&L){var z=Wn(f),D=0,R=0,j=0,M=0,I=0,B=t(e,f);if(Zn(e,f)){var H=Gn(e,f),V=$n(H.hook);D=Qn(e,f),R=qn(e,f),j=V.height,M=V.width,I=H.radius}var F=P?0:ul(0,+(e.padding||0))+D+j,N=e.textOverlap,Y=g.chart.plot.datalabels.handleOverlapping===!0,_=S?ma(p,f):!1,W=z.left,X=z.top,G=z.right,Z=z.bottom,Q=W+B.left,q=X+B.top,K=G-B.right,$=(Z-B.bottom,gi(f,h,e,Jc,null,o,c)),J=$.contentType||"text",et="html"===J&&$.multiLine,tt=n.isCatNull(m,"x"),at=n.isCatNull(m,"y",x),rt=ai(e,f),nt=ii(null,e,f,h.color,!1,o),it=zt(f.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),lt=i.update,ot=i.add;l.data.forEach(function(t,r){var n=a.seriesdataAfterUpdate?a.seriesdataAfterUpdate[r]:l.data[r],i=[];ii(it,e,f,h.color,!1,o),it.styles({fill:Pl}),n.forEach(function(t,a){var n,l,u=f.dataObject.getXYvalue(y,v,b,w,x,t,"x",null,c),g=f.dataObject.getXYvalue(y,v,b,w,x,t,"y",null,c),p=P||T?f.dataObject.getXYvalue(y,v,b,w,x,t,"z",f.zscale):null,k=da(m.getClr(t),f),S=null,L=null,z=null,B=null,H=k&&!t.disabled,V="",_=et?"0.9em":P?"0.3em":"-0.3em",ot="middle",st=P?null:ys,ct=0,dt=0;if(T){var ut=m.getX(t),ht=f.subrenderer[r][ut],ft=ht.data[o];n=(ft.startAngle+ft.endAngle)/2;var gt=p/2+F,l=$t(gt,n);_=et?"0.9em":n>kl/2&&3*kl/2>n?aa(n)+"em":"0",ot=0>n||n>kl?"end":"start",$=gi(f,h,e,Jc,ht.total,o,c)}it[J](function(){return z=t.isDummy||tt(m.getX(t))||at(m.getY(t,x,c))?null:$(t)}).styles({display:function(){if(E)return null;var e=u,t=g,a=W>e||e>G||X>t||t>Z;return a?(H=!1,Sl):null}}).attrs({transform:null,dy:_,x:function(){return S=T?u+l[0]:u,S||0},y:function(){var e=(P?0:s)/2;return L=T?g+l[1]:g+(e+F)*(O&&!c?1:-1),L||0},"text-anchor":ot}),V="lbl"+o+"_"+r+"_"+a+"_"+c;var pt;if(et){if(vi(it,S),pt=U(it.node()),T){var mt=_l().range([-1,0]).domain(kl>n?[0,kl]:[2*kl,kl]);L+=mt(n)*pt.height,vi(it,S)}else L-=P?pt.height/2:pt.height;it.attr("y",L),pt=U(it.node())}else"html"===J?pt=U(it.node()):(pt=Wa(z,rt,ri(e,f),null,null,nt["font-style"],nt["font-weight"]),pt.x=S-("middle"===ot?pt.width/2:"end"===ot?pt.width:0),pt.y=L-pt.height);var vt=0;if(!E){vt=Kn(pt.width,D,I,M);var yt=D+R/2+vt/2,xt=0,bt=it,wt=pt.x-yt,Ct=wt+pt.width+xt+2*yt,kt=S+(Q>wt?Q-wt:Ct>K?-(Ct-K):0);(ct=kt-S)&&(S=kt,bt.attr("x",kt),et&&vi(it,kt));var Ot=L+(pt.y<q?pt.height+s+F:0);(dt=Ot-L)&&(!f.dataObject.isStackedPercentChart&&!f.dataObject.isPercentChart||y?H=!1:(L=Ot,bt.attr("y",Ot))),et&&(ct||dt)?pt=U(it.node()):(pt.x+=ct,pt.y+=dt)}vt=E?Kn(pt.width,D,I,M):vt;var At=pt.width+vt,St=pt.height,Pt=pt.x+vt/2;if(Y){var Tt=(P?p:s)/2;if(P){var Et=u,Lt=g,zt=pl(gl(Et-Pt,2)+gl(Lt-pt.y,2))+D,Dt=pl(gl(Et-(Pt+pt.width),2)+gl(Lt-(pt.y+pt.height),2))+D;if(zt>Tt||Dt>Tt){var Rt;if("ellipsis"===N){var jt=hl(pt.height/2,Tt),Mt=pl(gl(Tt,2)-gl(jt,2)),It={left:Et-Mt+D,top:Lt-Mt+D,right:Et+Mt-D,bottom:Lt+Mt-D};"html"===J?(B=xi(it,rt),yi(it,f,d,0,It,B)):hi(it,f,d,0,It);var Bt=it.text();if(Bt&&".."!==Bt&&(z=it[J](),Rt=!0,At=2*Mt-2*D,et)){var Ht=U(it.node());St=Ht.height,At=Ht.width+vt,L+=(pt.height-Ht.height)/2}}Rt||(H=!1,it.style("display",Sl))}}var Vt={id:V,x1:Pt-D,y1:pt.y-D,x2:Pt+At+D,y2:pt.y+pt.height+D+j,pointRadius:Tt+F-j,translateFunction:lt,overlap:N,hookHeight:j};C.push(Vt)}var Ft={X:S,Y:L,DY:_,ANCHOR:ot,text:z,display:H,height:St,width:At,hookPosition:st,adjustVal:ct};A&&"html"===J&&(Ft.tspanInfo=B||xi(it,rt)),i.push(Ft)}),i.dataUpdate=n;var u=ot(i,o,r,c);u.properties={type:Rs,dataLabels:e,color:h.color,dataUpdate:n,showlabel:L,multiColoring:_,rp:h,rangeChart:O,yrangePos:c,contentType:J,isMultiLine:et}})}})}function t(e,t){var a=t.container.selectAll("g.plotareaBorder-property").node(),r=1,n={left:0,top:0,right:0,bottom:0};if(Zn(e,t))for(var i in n)n[i]=a["border-"+i]?a["border-"+i].size/2+r:r;return n}var a,r,n=Si.DataProcessor.helpers;return e.renderer=function(t){return arguments.length?(a=t,e):a},e.args=function(t){return arguments.length?(r=t,e):r},e},$i.svg={},$i.svg.initialize=function(e){function t(t,a,r,n){n=n||"label";var i="stacklabel"===n,l=n===td,s=zt(o,"g",t?[1]:[],".","class",n+"_"+r);if(t){var u,h=t.properties,f=h.dataUpdate,g=h.dataLabels,p=h.rp,m=h.rotation,v=h.rangeChart,y=h.yrangePos,x=h.reverseColor,b=e.dataObject.isPolarAxisCategory,w=e.isAxisCategory,C="clip"===g.textOverlap,k=h.contentType||"text",O=h.isMultiLine,A=ai(g,e),S=w||b?null:f.length,P="scatter"===h.type,T=oc.isQuantileColorScale(e),E=null;if((T||p.threshold||e.dataObject.isHierarchy||!(w||b||e.dataObject.isNonAxisMultiSeriesCategory)||h.multiColoring)&&(E=function(t,a){var n=x?S-1-a:(w||b||e.dataObject.isNonAxisMultiSeriesCategory)&&!h.multiColoring?r:a,i=ua(e,n,t&&t.data?t.data:t,r),o=h.isSunburst&&h.parentInnerLabel&&t.children?h.parentInnerLabel:g;return d&&l&&/(top-outset|bottom-outset)/.test(o.position)&&Kl(i).opacity<.1&&(i="white"),li(e.systemConf,i,o,e,l,r)}),C){var L=(Gs.SAFARI?e.svg:Us.patternSVG).selectAll("defs");u=zt(L,"g",[1],".","class","textClipPaths")}v&&(s=zt(s,"g",[1],".","class","rangePos_"+y)),i&&s.attr("id",ed),s.attrs({"text-anchor":P?"middle":null,transform:h.translation}),ii(s,g,e,p.color,l,r,i),b&&s.attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),t.forEach(function(t,a){var n=t.dataUpdate||f,o=zt(s,"g",[1],".","class","subseries_"+a),u=zt(o,h.GLT&&h.GLT.hasShowAsFunction?"g":"text",n);if(u[k](function(e,a){return t[a].text}),O&&u.each(function(e,a){vi(d3.select(this),t[a].X)}),h.isSunburst&&h.parentInnerLabel&&ii(u.filter(function(e){return e.children}),h.parentInnerLabel,e,p.color,l,r,i),u.styles({display:function(e,a){return t[a].display===!1?Sl:null},fill:E,"pointer-events":Sl,opacity:function(t){if(it(e.dataObject.hierarchical)&&it(e.cache.hierarchical)){var a=e.cache.hierarchical;if(a.active)return t.active===!0?1:.1}},transition:"opacity ease .2s"}).attrs({x:function(e,a){return t[a].X},y:function(e,a){return t[a].Y},dy:function(e,a){return t[a].DY},"text-anchor":function(e,a){return t[a].ANCHOR},id:function(e,a){return t[a].ID},transform:function(e,a){var r=t[a].xy||[t[a].X,t[a].Y],n="";return t[a].xy&&(n="translate("+r+")"),it(m)&&(n+="rotate("+m+" "+r+")"),n||El},"clip-path":C?function(a,r){var n=U(this),i={name:"textClip",id:e.id,x:n.x,y:n.y,width:t[r].width,height:n.height},l={chartObj:e},o=Qs.get(tc,"rect",i,l);return"url("+e.defsLocation+"#"+o+")"}:null,level:function(e){return e.level?e.level:void 0}}),e.dataObject.isWaterfallEnabled&&void 0!==g.fontColor&&null==g.fontColor&&u.style("fill",function(e){var t=Jr(e,h.rp.categoryColorConfig);return t?t:void 0}),!(w||d||b||e.dataObject.hasLevelMarker||c||i||l))if("html"===k){var v=Zn(g,e)?Qn(g,e)+qn(g,e):0;u.each(function(a,r){if(t[r].display!==!1){var n=d3.select(this),i=xi(n,A);if(yi(n,e,h.trans,h.txtHgt,null,i,t[r].isLeft?v:0),"middle"===t[r].ANCHOR){var l=(t[r].width-U(this).width)/2,o=t[r].isLeft?1:-1,s=t[r].X+l*o;n.attr("x",s),vi(n,s)}}})}else hi(u,e,h.trans,h.txtHgt)})}}function a(t,a,r){var n=zt(o,"g",t&&"circular"!==t.properties.showlabel?[1]:[],".","class","link_"+r);if(t){var i=t.properties,l=i.dataUpdate,s=i.rp,c=i.isSunburst,d=i.connectorPath,u=i.dataLabels.line,h=(s.color,l.length);u&&(n.attr("transform",i.translation).styles({stroke:u.strokeColor,"stroke-width":u.strokeWidth,fill:Sl}),t.forEach(function(t,a){var o=zt(n,"g",[1],".","class","subseries_"+a),s=zt(o,"path",l);s.styles({display:function(e,a){return t[a].display===!1?Sl:null},stroke:function(t,a){return c||u.strokeColor?null:ua(e,i.reverseColor?h-1-a:a,t&&t.data?t.data:t,r)}}).attrs({d:d,id:function(e,t){return"link"+r+"_"+a+"_"+t}})}))}}var r=[],n=[],i=[],l=[],o=e.staticPaneSVG.select(".labelholder"),s=!1,c=e.chartTypes[0].value==Si.charttype.packedbubble,d=e.chartTypes[0].value==Si.charttype.treemap;return function(){var d={};return d.add=function(e,t,a,o,c,d){c&&(s=!0);var u=c?i:d?l:o?n:r;return u[t]=u[t]||[],u[t][a]=u[t][a]||[],u[t][a].push.apply(u[t][a],e),u[t][a].dataUpdate=e.dataUpdate,u[t]},d.update=function(e,t,a,l,o,s,c){var d=e.match(/\d+/g),u=d[0],h=d[1],f=d[2],g=+d[3]||0,p=c?i:g?n:r,m=p[u][h][f];m.X+=t,m.Y+=a,m.display=m.display&&!l,void 0!==o&&(m.DY=o),s&&(m.hookPosition=s)},d.getQueue=function(e,t,a,o){var s=a?i:o?l:t?n:r;return s[e]},d.draw=function(){if(e.isAxisCategory){var d=e.dataObject.groupedByStack,u=e.userdata.seriesdata.stackGroup||d.keys();u.forEach(function(e,a){if(s&&d.has(a)){var r=d.get(a);t(i[r.stackLabelIndex],1,a,"stacklabel")}else zt(o,"g",[],".","class","stacklabel_"+a)}),u.length||zt(o,"g",[],"#","id",ed)}e.seriesdata.forEach(function(i,o){var s=r[o];t(s,i,o),it(n[o])&&t(n[o],i,o),e.isAxisCategory&&!e.dataObject.pieWithAxis||e.dataObject.isPolarAxisCategory||e.dataObject.hasLevelMarker||c||(e.dataObject.pieWithAxis||a(s,i,o),t(l[o],i,o,td))})},d}()},Ji.svg=function(){function e(e,n,i){e.each(function(){t&&(a=t.properties,r=a.rp.chartObj);var e=t&&Zn(a.dataLabels,r),l=jl(this),o=zt(l,"g",[1],".","class",(i?"innerboundboxseries_":"boundboxseries_")+n);a&&a.rangeChart&&(o=zt(o,"g",[1],".","class","rangePos_"+a.yrangePos));var s=zt(o,"g",e?t:[]);if(e){var c=r.dataObject.isPolarAxisCategory?"translate("+r.plotarea_approx.x+","+r.plotarea_approx.y+")":r.isAxisCategory?null:a.translation;o.attr("transform",c);var d=Gn(a.dataLabels,r),u=$n(d.hook),h=a.dataUpdate,f=a.rotation||0,g=Qn(a.dataLabels,r),p=r.dataObject.getTransRectValue("radius",null,null,null,null,d.radius),m=Un(d.strokeColor,a,r,h,n),v=Un(d.fillColor,a,r,h,n),y=it(d.strokeWidth)?+d.strokeWidth:1,x=O(d.dashStyle,y),b=A(d.lineCap,d.dashStyle),w=_l(),C=r.plotarea,k=a.trans||[0,0],S={left:-k[0]+C.left,right:C.width-k[0]-C.left};s.attr("class",function(e,t){return"subseries_"+t}).each(function(e){var t=e.dataUpdate||h,n=zt(d3.select(this),"path",t);n.attrs({d:function(t,n){var i=e[n],l=i.xy||[i.X,i.Y],o=l[0]-g,s=l[1]-g,c=i.width,h=i.height,f=void 0!==i.actualDY?i.actualDY:parseFloat(i.DY)||0,m=i.ANCHOR,v=i.hookPosition;return o="middle"===m?o-c/2:"end"===m?o-c:o,s-=w.domain([-.3,.9]).range([h,0])(f),r.isAxisCategory||r.dataObject.isPolarAxisCategory||"hierarchy"===a.type||(o<S.left&&(c-=S.left-o+y/2+g,o=S.left+y/2),o+c+y/2+g>S.right&&(c-=o+c-S.right+y/2+2*g),o+=(d.strokeWidth||1)*(v===vs?.5:v===ms?-.5:0)),Jn(o,s,c,h,p,g,v,u,i.adjustVal)},transform:function(t,a){var r=e[a],n=r.xy||[r.X,r.Y];return"rotate("+f+" "+n[0]+" "+n[1]+")"},id:function(t,a){return"boundbox"+e[a].ID},level:function(e){return e.level?e.level:void 0}}).styles({display:function(t,a){return e[a].display===!1?Sl:null},fill:v,"fill-opacity":d.fillOpacity,stroke:m,"stroke-opacity":d.strokeOpacity,"stroke-width":d.strokeWidth,"stroke-dasharray":x,"stroke-linecap":b,opacity:function(e){if(it(r.dataObject.hierarchical)&&it(r.cache.hierarchical)){var t=r.cache.hierarchical;if(t.active)return e.active===!0?1:.1}},transition:"opacity ease .2s"})})}})}var t,a,r;return e.args=function(a){return arguments.length?(t=a,e):t},e},Si.labelRenderer.pieInnerLabels=function(){function e(e,i){e.each(function(){function e(e){return e.filter(function(e){return e.children?D:z})}function l(e,t){var a=g.innerRadius()(t),r=g.outerRadius()(t),n=g.startAngle()(t),i=g.endAngle()(t),l=e.x*e.x+e.y*e.y,s=o(e);return l>=a*a&&r*r>=l&&ra(n,i,s)}function o(e){return bl(e.x,-e.y)}function s(e){var t=da(n.getClr(y?e:e.data||e),r);return!t||(y?null==e.parent||0==e.value:0==e.value)}function c(e){var t=y?x.startAngle()(e):e.startAngle,a=y?x.endAngle()(e):e.endAngle;return(t+a)/2}var d=a[0],u=a[2],h=a[4],f=a[8]?"translate("+a[8][0]+","+a[8][1]+")":null,g=a[7],p=t.commonRendererProp().params;n=p.dataset,r=p.chartObj;var m=p.commonPlotOptions,v=a[1]||0,y=dr(r.chartTypes[v].value),x=a[6],b=p.yaxiscolumnorder;d=d[v];var w=r.dataObject.pieWithAxis,C=d.plotoptions,k=ni(m,C,r,v),O=k.innerLabel,A=O.parentLabel,S=function(e){return gi(r,p,e,td,h,v)},P=gi(r,p,O,td,h,v),T=P.contentType||"text",E="html"===T&&P.multiLine,L=O.textOverlap||"adjust",z=O.show===!0,D=y&&(it(A.show)?A.show:O.show)!==!1,R=Zn(O,r)?Qn(O,r)+qn(O,r):0;z=z&&Kt(r,Jc);var j;if(D&&(j=ac(A,O)),!d.disabled&&(z||D)){var M=zt(r.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),I=D&&A;ii(M,O,r,p.color),M.attr("transform",f).style("fill",Pl);var B=i.add;(y?d:d.data).forEach(function(t,i){var d=w?t:y?e(u):u,h=[];d.forEach(function(e,t){I&&e.children&&ii(M,j,r,p.color);var a,d,u=null,f=!s(e),m="middle",C=E?"0.9em":"0.35em",k=0,A=0;if(w){var P=p.stacked,z=p.axisrotated,B=p.xscale,H=p.yscale,a=n.getX(e),V=r.subrenderer[i][a];e=V.data[v],g=V.arc,k=r.dataObject.getXYvalue(z,P,B,H,b,e.data,"x",null),A=r.dataObject.getXYvalue(z,P,B,H,b,e.data,"y",null);var F=r.dataObject.getXYvalue(z,P,B,H,b,e.data,"z",r.zscale),N=F/4,Y=$t(N,c(e));S=function(e){return gi(r,p,e,td,V.total,v)},a=k+Y[0],d=A+Y[1]}else a=g.centroid(e)[0],d=g.centroid(e)[1];var _=e.data,W=y?0==e.depth:s(e),X=W?null:S(D&&e.children?j:O)(_);if(M[T](X).attrs({x:a,y:d,dy:C,"text-anchor":m}),f&&E&&(vi(M,a),u=U(M.node()),d-=u.height/2),L!=Sl){u=u||U(M.node());var G=g.centroid(e),Z=u.width/2+R,Q=u.height/2+R,q={x:G[0]-Z,y:G[1]-Q},K={x:G[0]+Z,y:G[1]-Q},$={x:G[0]-Z,y:G[1]+Q},J={x:G[0]+Z,y:G[1]+Q},et=l(q,e)&&l(K,e)&&l($,e)&&l(J,e);if(!et){if("adjust"===L){var tt,at,rt=y?x.startAngle()(e):e.startAngle,nt=y?x.endAngle()(e):e.endAngle,it=c(e),lt=u.height+2*R,ot=o(q),st=o(K),ct=o($),dt=o(J),ut=[ot,st,ct,dt],ht=[q,K,$,J],ft=ao(ut),tt=ht[ut.indexOf(ft[0])],at=ht[ut.indexOf(ft[1])],gt=pl((tt.x-at.x)*(tt.x-at.x)+(tt.y-at.y)*(tt.y-at.y)),pt=fl(gt/2/xl((nt-rt)/2))+lt,mt=[vl(it)*pt,-(ml(it)*pt)],q={x:mt[0]-Z,y:mt[1]-Q},K={x:mt[0]+Z,y:mt[1]-Q},$={x:mt[0]-Z,y:mt[1]+Q},J={x:mt[0]+Z,y:mt[1]+Q};et=l(q,e)&&l(K,e)&&l($,e)&&l(J,e)}et?(a=mt[0]+k,d=mt[1]+A):f=!1}}else u=U(M.node());var vt={X:a,Y:d,DY:C,ANCHOR:m,text:X,display:f,ID:"innerlbl"+v+"_"+i+"_"+t,width:u.width,height:u.height};h.push(vt)});var m=B(h,v,i,null,null,!0);m.properties={type:Is,dataLabels:O,dataUpdate:d,showlabel:z,rp:p,translation:f,trans:a[8],isSunburst:y,contentType:T,isMultiLine:E,parentInnerLabel:I&&j}})}})}var t,a,r,n;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},Si.labelRenderer.funnelInnerLabels=function(){function e(e,r){e.each(function(){function e(e){var t=l[A-1-e],a=da(p.getClr(t),f);return t.disabled||!p.getY(t,m)||!a}var n=a[0],i=a[1],l=a[2],o=a[4],s=a[5],c=a[6],d=a[7],u=c.width,h=t.commonRendererProp().params,f=h.chartObj,g=h.commonPlotOptions,p=h.dataset,m=h.yaxiscolumnorder,v=f.chartTypes[0].name,y=f.svg.selectAll("g."+v+"group").attr("transform"),x=v===Vs;n=n[i];var b=n.plotoptions,w=ni(g,b,f,i),C=w.innerLabel,k=c.datalabelPadding||+w.padding||0,O=jt(f.svg.selectAll("g."+v+"group").node()).translate,A=l.length,S=C.show===!0,P=ai(C,f),T=gi(f,h,C,td,s,i),E=T.contentType||"text",L="html"===E&&T.multiLine,z=Zn(w,f)?Qn(w,f)+qn(w,f):0;if(S=S&&Kt(f,Jc),P+=2*z,!n.disabled&&S){var D=zt(f.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");ii(D,C,f,h.color),D.attr("transform",y).style("fill",Pl);var R=r.add;n.data.forEach(function(t,a){var r=d,n=[];r.forEach(function(t,r){var s=!e(r),d=x?t.midX:u/2,h=x?t.leftY:t.y,f="middle",g=L?"0.9em":"0.5em",p=T(l[A-1-r]),m=null;if(D[E](p).attrs({x:d,y:h,dy:g,"text-anchor":f}),s&&L&&(vi(D,d),m=U(D.node()),h-=m.height/2,P=m.height),s)if(m=m||U(D.node()),x)s=!(P>2*(t.y0-t.leftY));else{var v=c.canOverlap?(t.rightx-t.leftx-2*k)/u*o:o;s=!(P<t.y-(t.y0-t.y)+v&&P>t.y0+v-(t.y-(t.y0-t.y)+v))}var y={X:d,Y:h,DY:g,ANCHOR:f,text:p,display:s,ID:"innerlbl"+i+"_"+a+"_"+r,width:s?m.width:0,height:s?m.height:0};n.push(y)});var s=R(n,i,a,null,null,!0);s.properties={type:Is,dataLabels:C,dataUpdate:r,showlabel:S,rp:h,translation:y,trans:O,reverseColor:!0,contentType:E,isMultiLine:L}})}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e};var ad;!function(){function e(e,t,a,r,n,i,l){var o,s=e.dataObject,c=e.seriesdata[l],d=Si.DataProcessor.helpers.getParsedYAxisOrder(c.yaxiscolumnorder),u=e.dataset.getDataType("y",d),h=s.getDomain(s.getCategories("x"),!0),f=u==Fo?s.getCategories("y",d):null,g=gi(e,null,t,Jc,null,l),p=ta(it(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);c.data.forEach(function(e){var t=s.updateSeriesdatabyCategories(q(e),h,f,d);t.forEach(function(e){a.updateText(g,e),o=a.getMeasure(r?"w":"h"),r&&(o=hl(o,p)),i.push(o+n)})})}function t(e,t,a,r,n,i){var l,o=e.dataObject.groupedByStack,s=ta(it(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);o.keys().forEach(function(c){var d=o.get(c),u=d.stackLabelIndex,h=d.stackExtent,f=gi(e,null,t,ed,null,u);h.forEach(function(e){a.updateText(f,e),l=a.getMeasure(r?"w":"h"),r&&(l=hl(l,s)),i.push(l+n)})})}function a(e,t){var a=e.dataObject.groupedByStack;return a.keys().some(function(r){return"html"===gi(e,null,t,ed,null,a.get(r).stackLabelIndex).contentType})}ad=function(n,i,l){if(l.dataObject.hasLevelMarker||!i)return 0;var o,s=[],c=l.systemConf,d=l.dataObject,u=d.getAxisRotated(),h=d.isstacked(),f=d.noofBarEnabledSeries,g=.75*(u?l.plotarea.width:l.plotarea.height),p=c.chart.plot.datalabels.handleOverlapping,m="y"===n,v=new r(l),y=v.createElement();if(l.seriesdata.forEach(function(t,a){if(!t.disabled){var r=t.plotoptions,i=c.chart.plot.plotoptions[l.chartTypes[a].name],d=ni(i,r),y=ci(d,l);if(y){v.setFont(d,a);var x=m&&f&&!h&&Si.labelRenderer.bar.getVAlign(l,a)===bs,b=gi(l,null,d,Jc,null,a),w=m?ul(0,hl(rt(d.padding,x&&ir(l.chartTypes[a].value)?2:0),g)):0;x&&Zn(d,l)&&(w=w+2*Qn(d,l)+qn(d,l)),x&&(u||"html"===b.contentType)?e(l,d,v,u,w,s,a):(o=v.getMeasure("h"),o+=w+(!p||u||"y"!=n||x?0:o),s.push(o))}}}),m&&f&&h&&!d.isStackedPercentChart){var x=l.dataObject.groupedByStack,b=x.get(x.keys()[0]),w=b&&b.stackLabelIndex,C=c.chart.plot.plotoptions[l.chartTypes[w].name].datalabels.stackLabels||{},k=C?C.show:!1,O=ul(0,hl(rt(C.padding,2),g));l.datalabels.isStackedLabels=k,k&&(v.setFont(C,w),Si.labelRenderer.bar.getVAlign(l,w,ed)===bs&&(u||a(l,C))?t(l,C,v,u,O,s):(o=v.getMeasure("h")+O,s.push(o)))}return y.remove(),s.length>0?ul.apply(null,s):0};var r=function(e){this.chartObj=e};r.prototype.createElement=function(){return this.element=zt(this.chartObj.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText").text("qtyplkjhgfd").style("fill",Sl)},r.prototype.setFont=function(e,t){ii(this.element,e,this.chartObj,Sl,!1,t)},r.prototype.getMeasure=function(e){var t=U(this.element.node());return"w"===e?t.width:t.height},r.prototype.updateText=function(e,t){var a=e.contentType||"text",r="html"===a&&e.multiLine,n=this.element;n[a](e(t)),r&&vi(n,0)}}(),Si.labelRenderer.hierarchy=function(){function e(e,r){e.each(function(){function e(e){var t=c(e),a=t.x;return y=t.y,w=t.width,h=t.height,a=i(a,w)+b[0],y=l(y,h)+b[1],{x:a,y:y,w:w,h:h}}function n(e,t){var a=e.height,r=e.width,n=e.x+b[0],i=e.y+b[1],l={x1:n,y1:i,x2:n+r,y2:i+a};if(R===_s){var o=r/2,s=hl(t.height/2,o),c=pl(gl(o,2)-gl(s,2)),d=o-c;l.x1+=d,l.x2-=d,l.y1+=d,l.y2-=d}return l}function i(e,t){return e+=_===ps?t/2:_===vs?t-X-M:X+M}function l(e,t){return e+=W===ps?t/2:W===ys?t-X-M:X+M}function o(){return _===ps?"middle":_===vs?"end":null}function s(){var e,t;if(e=W===ps?.3:W===ys?-.3:1,q){var a=1.1*(f.showAs.length-1);e===-.3?(e-=a,t=e+a):.3===e&&(e-=a/2,t=e+a/2)}return[e,t]}function c(e){switch(R){case _s:return vr(e);case Ws:var t=Bc.getTileBound(A,e);return t=u(t);case Ns:return mr(A,e,L,z,E)}}function d(e,t,a){var r=e.width,n=e.height,i="middle"===t?r/2:"end"===t?r:0,l=J.range([n,0])(parseFloat(a));return e.x=-i,e.y=-l,e}function u(e){if(C&&("bottom-outset"===f.position||"top-outset"===f.position)){var t=Lt(P.padding),a=t["bottom-outset"===f.position?"bottom":"top"];"bottom-outset"===f.position&&(e.y=e.y+e.height-a),e.height=a}return e}var f,g=a[0],p=a[1],m=(a[2]||0,a[3]),v=a[4],x=a[5],b=a[6]||[0,0],C=a[7],k=g.plotoptions,O=t.commonRendererProp().params,A=O.chartObj,S=A.systemConf,P=O.commonPlotOptions,T=O.dataset,E=O.yaxiscolumnorder,L=(O.labelArray,O.xscale),z=O.yscale;f=ni(P,k,A,p);var D=ci(f,A),R=A.chartTypes[0].name;if(C){var j=ac(P.parent.datalabels,f);D=st(j.show)&&!(D&&"inset"===j.position),f=j}if(!g.disabled&&D){var M=(Wn(A),0),I=0,B=0,H=0,V=0;if(Zn(f,A)){var F=Gn(f,A),N=$n(F.hook);M=Qn(f,A),I=qn(f,A),B=N.height,H=N.width,V=F.radius}var Y=f.textOverlap,_=f.hAlign||ps,W=f.vAlign||ps,X=rt(f.padding,.5),G=S.chart.plot.datalabels.handleOverlapping===!0,Z=gi(A,O,f,Jc,v,p,m),Q=Z.contentType||"text",q="html"===Q&&Z.multiLine,K=Z.hasShowAsFunction,$=ai(f,A),J=_l().domain([-.3,.9]),et="canvas"===A.plot.renderer.mode,tt=s(),at=ii(null,f,A,O.color,!1,p);Y=K&&"ellipsis"===Y?"hidden":Y;var nt=zt(A.staticPaneSVG.select(".labelholder"),K?"g":"text",[1],".","class","temp_label"),it=(r.update,r.add),lt=x,ot=[];ii(nt,f,A,O.color,!1,p),nt.styles({fill:Pl}),lt.forEach(function(t){var a=e(t),r=a.x,i=a.y,l=null,s=null,u=oc.isQuantileColorScale(A)?da(T.getClr(t.data||t),A):!0,h="",g=tt[0]+"em",p=tt[1],m=o(),v=null,y=0;nt[Q](function(){return l=Z(t.data||t,a)}).attrs({dy:g,transform:"translate("+[r,i]+")","text-anchor":m,display:u}),h="lbl"+t.level;var x;q?(vi(nt,0),x=U(nt.node())):"html"===Q?x=U(nt.node()):(x=Wa(l,$,ri(f,A),null,null,at["font-style"],at["font-weight"]),x=d(x,m,g,r,i)),widthToBeAdded=0;{var w=x.width+widthToBeAdded,C=x.height;x.x+widthToBeAdded/2}if(G){var k={x1:x.x+r-M,y1:x.y+i-M,x2:x.x+r+x.width+M,y2:x.y+i+x.height+M},O=n(c(t),x),S=si(k,O);if(!S){var P;if("ellipsis"===Y){var E=a.h,L=a.w;if(E>C+2*M){var z={left:O.x1+M,top:O.y1+M,right:O.x2-M,bottom:O.y2-M};"html"===Q?(s=xi(nt,$),yi(nt,A,b,0,z,s,El,[r,i])):hi(nt,A,b,0,z,[r,i]);var D=nt.text();if(D&&".."!==D&&(l=nt[Q](),P=!0,w=L-2*M,q)){var R=U(nt.node());C=R.height,w=R.width+widthToBeAdded,i+=(x.height-R.height)/2}}}P?"html"===Q&&(s=xi(nt,$)):u=!1}}var j={X:0,DY:g,xy:[r,i],actualDY:p,ANCHOR:m,text:l,display:u,height:C,width:w,hookPosition:v,adjustVal:y};et&&"html"===Q&&(K?j.customHTML=bi(nt):j.tspanInfo=s||xi(nt,$)),ot.push(j)}),ot.dataUpdate=lt;var ct=it(ot,p,0,m,null,C);ct.properties={type:"hierarchy",dataLabels:f,color:O.color,dataUpdate:lt,showlabel:D,rp:O,contentType:Q,isMultiLine:q,GLT:Z}}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e};var rd=function(){var e=navigator.userAgent,a={};if(e.indexOf("OPR")>0){a.name="Opera",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("OPR/");a.version=t(e.substr(r+4))}else if(e.indexOf("Chrome")>0){a.name="Chrome",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("Chrome/");a.version=t(e.substr(r+7))}else if(e.indexOf("Safari")>0){a.name="Safari",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("Version/");a.version=t(e.substr(r+8))}else if(e.indexOf("Firefox")>0){a.name="Firefox",a.jsPrefix="Moz",a.cssPrefix="-moz-";var r=e.indexOf("Firefox/");a.version=t(e.substr(r+8))}else if(e.indexOf("MSIE")>0){a.name="Internet Explorer",a.jsPrefix="ms",a.cssPrefix="-ms-";var r=e.indexOf("MSIE");a.version=t(e.substr(r+5))}else a=void 0;return a},nd=function(e,t){var a=getComputedStyle(e),r=rd();for(var n in t)if(t.hasOwnProperty(n))if(n in a)e.style[n]=t[n];else if(void 0!=r){var i=r.jsPrefix+n.charAt(0).toUpperCase()+n.slice(1);e.style[i]=t[n]}},id=function(e,t){var a={type:"zBars",scale:1,duration:1.2},r=document.getElementById("ZCloader");id.style||(r=document.createElement("style"),r.setAttribute("id","ZCloader"),document.head.appendChild(r),id.style=!0);for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);var i=a.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],l=i[0%i.length],o=i[1%i.length],s=i[2%i.length],c=i[3%i.length],d=rd(),u="";if(void 0===d?(d={},d.cssPrefix=""):"Internet Explorer"===d.name&&d.version<10&&(a.type="wheel"),!e.loader){var h=document.createElement("div");if("zBlocks"==a.type){if(!id.zBlocks){var u="\n@"+d.cssPrefix+"keyframes "+a.type+" {";u+="0% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(0deg) scale(1)}",u+="25% { left:40px; top:0px; "+d.cssPrefix+"transform:rotate(90deg) scale(0.5)}",u+="50% { left:40px; top:40px; "+d.cssPrefix+"transform:rotate(180deg) scale(1.0)}",u+="75% { left:0px; top:40px; "+d.cssPrefix+"transform:rotate(270deg) scale(0.5)}",u+="100% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(360deg)scale(1)} }\n",r.innerHTML+=u,id.zBlocks=!0}nd(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var f=document.createElement("div");f.innerHTML="&nbsp",h.appendChild(f),nd(f,{backgroundColor:l,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var g=document.createElement("div");g.innerHTML="&nbsp",h.appendChild(g),nd(g,{backgroundColor:o,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*1+"s"});var p=document.createElement("div");p.innerHTML="&nbsp",h.appendChild(p),nd(p,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*2+"s"});var m=document.createElement("div");m.innerHTML="&nbsp",h.appendChild(m),nd(m,{backgroundColor:c,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*3+"s"}),e.loader=!0}else if("zCircle1"==a.type){if(!id.zCircle1){var u="\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0% ,25%, 50%, 75%, 100%{ "+d.cssPrefix+"transform: scale(0.0);  } ",u+="12.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+l+";}",u+="37.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+o+";}",u+="62.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+s+";}",u+="87.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+c+";} }\n",r.innerHTML+=u,id.zCircle1=!0}nd(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var v=document.createElement("div");v.innerHTML="&nbsp",h.appendChild(v),nd(v,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),e.loader=!0}else if("zBars"==a.type){if(!id.zBars){var u="\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%, 40%, 100% { "+d.cssPrefix+"transform: scaleY(0.4) }",u+="20% { "+d.cssPrefix+"transform: scaleY(1.0) } }\n",r.innerHTML+=u,id.zBars=!0}nd(h,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var y=document.createElement("div");y.innerHTML="&nbsp",h.appendChild(y),nd(y,{backgroundColor:l,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),nd(x,{backgroundColor:o,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.1)+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),nd(b,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var w=document.createElement("div");w.innerHTML="&nbsp",h.appendChild(w),nd(w,{backgroundColor:c,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.3)+"s"}),e.loader=!0}else if("zCircle2"==a.type){if(!id.zCircle2){var u="\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%, 80%, 100% { "+d.cssPrefix+"transform: scale(0.0) }",u+="40% { "+d.cssPrefix+"transform: scale(1.0) } }\n",r.innerHTML+=u,id.zCircle2=!0}nd(h,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var C=document.createElement("div");C.innerHTML="&nbsp",h.appendChild(C),nd(C,{backgroundColor:l,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var k=document.createElement("div");k.innerHTML="&nbsp",h.appendChild(k),nd(k,{backgroundColor:o,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var O=document.createElement("div");O.innerHTML="&nbsp",h.appendChild(O),nd(O,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.4)+"s"});var A=document.createElement("div");A.innerHTML="&nbsp",h.appendChild(A),nd(A,{backgroundColor:c,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.6)+"s"}),e.loader=!0}else if("zCrossBars"==a.type){if(!id.zCrossBars){var u="\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%{left:-50%;}",u+="100%{left: 150%;} }\n",r.innerHTML+=u,id.zCrossBars=!0}nd(h,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale("+a.scale+")"});var y=document.createElement("div");y.innerHTML="&nbsp",h.appendChild(y),nd(y,{backgroundColor:l,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration+"s"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),nd(x,{backgroundColor:o,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*80+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),nd(b,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*60+"s"});
var w=document.createElement("div");w.innerHTML="&nbsp",h.appendChild(w),nd(w,{backgroundColor:c,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*40+"s"}),e.loader=!0}else nd(h,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url('"+Si.imageFilePath+"loader_"+a.type+".gif')",backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return h}};Si.getFormattedValue=Lr,Si.generateFormatSpecifier=Dr,Si.appendElement=zt,Si.tempCanvasContext=il,Si.getRawColor=ua,Si.setGlobalPatternSVG=f,e.$ZC=typeof e.$ZC===Si?e.$ZC:Si}(window);